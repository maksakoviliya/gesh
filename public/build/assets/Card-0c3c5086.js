import{_ as j,a as B,b as z,c as N}from"./Bedrooms-7b78bb44.js";import{_ as b}from"./ButtonComponent-a3af4441.js";import{a as i,l as g,w as V,e as o,o as D,r as w,c as y,g as e,n as k,t as f,u as C,f as _,i as $,O as d}from"./app-c0fe367c.js";import{c as M,g as O}from"./index.esm.min-b02047f0.js";import{_ as q,i as A,b as H,c as E}from"./index-797297ea.js";import{_ as F}from"./Heading-e7207341.js";import"./index-9fd3a973.js";const L={__name:"ModalConfirmDeleting",props:{isOpen:Boolean},emits:["onClose","onSubmit"],setup(c,{emit:t}){const n=t,l=()=>{n("onClose")},u=()=>{n("onSubmit")};return(h,r)=>(i(),g(q,{"is-open":c.isOpen,onOnSecondaryAction:l,onOnClose:l,onOnSubmit:u,title:"Удалить объект","action-label":"Удалить","secondary-action-label":"Отменить","action-color":"danger"},{body:V(()=>[o(F,{title:"Вы уверены что хотите удалить объект?",subtitle:"Пока его еще можно будет восстановить, обратившись к администратору сайта."})]),_:1},8,["is-open"]))}},G={class:"col-span-1 cursor-pointer group"},I={class:"flex flex-col gap-2 w-full"},J={class:"aspect-square w-full relative overflow-hidden rounded-xl"},K=["src","alt"],P={class:"absolute top-3 start-3 opacity-0 group-hover:opacity-100 flex flex-col gap-2"},Q=["data-tooltip-target"],R=["id"],U=e("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1),W=["data-tooltip-target"],X=["id"],Y=e("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1),Z=e("div",{class:"flex flex-row items-center gap-1"},null,-1),tt={class:"flex flex-row items-center justify-between gap-2"},lt={__name:"Card",props:{apartment:Object},setup(c){D(()=>{A()}),M(E,H);const t=c,n=()=>d.visit(route("account.apartments.step",{apartment:t.apartment.id,step:t.apartment.status!=="published"?t.apartment.step:1})),l=s=>{if(t.apartment.status==="published")return d.visit(route("account.apartments.calendar",{apartment:s}))},u=s=>{if(t.apartment.status==="published")return d.visit(route("account.apartments.chats",{apartment:s}))},h=s=>{switch(s){case"draft":return"bg-zinc-100 text-neutral-800";case"pending":return"bg-sky-100 text-neutral-800";case"published":return"bg-green-300 text-neutral-900"}},r=w("Копировать ссылку"),S=s=>{r.value="Скопировано",navigator.clipboard.writeText(route("apartment",{apartment:s})).then(()=>{r.value="Скопировано",setTimeout(()=>{r.value="Копировать ссылку"},1500)})},m=w(!1),T=()=>{d.visit(route("account.apartments.delete",{apartment:t.apartment.id}),{method:"post"})};return(s,a)=>{var x,v;return i(),y("div",G,[e("div",I,[e("div",J,[e("img",{onClick:n,class:"object-cover h-full w-full group-hover:scale-110 transition",src:t.apartment.media.length?(x=t.apartment.media[0])==null?void 0:x.src:"/img/no-photo.jpeg",alt:t.apartment.title},null,8,K),e("div",{class:k(["absolute top-3 end-3 px-2 rounded-full text-xs",h(t.apartment.status)])},f(t.apartment.status_text),3),e("div",P,[t.apartment.status==="published"?(i(),y("div",{key:0,"data-tooltip-target":`link_${t.apartment.id}`,onClick:a[0]||(a[0]=p=>S(t.apartment.id)),class:"px-2 rounded-full text-xs w-8 h-8 aspect-square flex flex-col items-center justify-center bg-neutral-100 text-neutral-800 hover:bg-white transition dark:hover:bg-slate-800 dark:hover:text-slate-100"},[o(C(O),{name:"hi-solid-link"})],8,Q)):_("",!0),e("div",{id:`link_${t.apartment.id}`,role:"tooltip",class:"absolute z-20 break-words whitespace-nowrap invisible inline-block px-3 py-2 text-xs font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[$(f(r.value)+" ",1),U],8,R),e("div",{onClick:a[1]||(a[1]=p=>m.value=!0),"data-tooltip-target":`delete_${t.apartment.id}`,class:"rounded-full text-xs bg-rose-300 flex w-7 h-7 flex-col items-center justify-center hover:bg-rose-400 transition text-neutral-800"},[o(C(O),{name:"hi-trash"})],8,W),e("div",{id:`delete_${t.apartment.id}`,role:"tooltip",class:"absolute z-20 break-words whitespace-nowrap invisible inline-block px-3 py-2 text-xs font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[$(" Удалить объект "),Y],8,X)])]),e("div",{class:k(["font-light text-neutral-500 dark:text-slate-400",t.apartment.category?"":"opacity-30"])},f(((v=t.apartment.category)==null?void 0:v.title)??"Нет типа"),3),Z,e("div",tt,[o(j,{guests:t.apartment.guests},null,8,["guests"]),o(B,{bedrooms:t.apartment.bedrooms},null,8,["bedrooms"]),o(z,{beds:t.apartment.beds},null,8,["beds"]),o(N,{bathrooms:t.apartment.bathrooms},null,8,["bathrooms"])]),o(b,{small:!0,onClick:n,label:"Редактировать"}),t.apartment.status==="published"?(i(),g(b,{key:0,onClick:a[2]||(a[2]=p=>l(t.apartment.id)),small:!0,label:"Календарь"})):_("",!0),t.apartment.status==="published"?(i(),g(b,{key:1,onClick:a[3]||(a[3]=p=>u(t.apartment.id)),small:!0,outline:!0,label:"Чат"})):_("",!0)]),o(L,{"is-open":m.value,onOnSubmit:T,onOnClose:a[4]||(a[4]=p=>m.value=!1)},null,8,["is-open"])])}}};export{lt as default};
