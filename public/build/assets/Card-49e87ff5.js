import{_ as j,a as B,b as z,c as N}from"./Bedrooms-df1d9695.js";import{_ as b}from"./ButtonComponent-ddb76aff.js";import{a as i,l as g,w as V,e as s,o as q,r as w,c as k,g as e,n as y,t as d,u as C,f,i as $,O as c}from"./app-cc0db7a9.js";import{c as D,g as O}from"./index.esm.min-5f8c9b79.js";import{b as M,c as A}from"./index-33f57259.js";import{_ as H,i as E,a as F}from"./index-bbd1f607.js";import{_ as L}from"./Heading-b8e94c1e.js";import"./index-9ffa8bb0.js";const G={__name:"ModalConfirmDeleting",props:{isOpen:Boolean},emits:["onClose","onSubmit"],setup(u,{emit:t}){const n=t,l=()=>{n("onClose")},m=()=>{n("onSubmit")};return(h,r)=>(i(),g(H,{"is-open":u.isOpen,onOnSecondaryAction:l,onOnClose:l,onOnSubmit:m,title:"Удалить объект","action-label":"Удалить","secondary-action-label":"Отменить","action-color":"danger"},{body:V(()=>[s(L,{title:"Вы уверены что хотите удалить объект?",subtitle:"Пока его еще можно будет восстановить, обратившись к администратору сайта."})]),_:1},8,["is-open"]))}},I={class:"col-span-1 cursor-pointer group"},J={class:"flex flex-col gap-2 w-full"},K={class:"aspect-square w-full relative overflow-hidden rounded-xl"},P=["src","alt"],Q={class:"absolute top-3 start-3 opacity-0 group-hover:opacity-100 flex flex-col gap-2"},R=["data-tooltip-target"],U=["id"],W=e("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1),X=["data-tooltip-target"],Y=["id"],Z=e("div",{class:"tooltip-arrow","data-popper-arrow":""},null,-1),tt={class:"flex flex-row items-center gap-1"},et={class:"text-neutral-500 dark:text-slate-500 leading-none font-light text-sm"},at={class:"flex flex-row items-center justify-between gap-2"},st={class:"relative"},ut={__name:"Card",props:{apartment:Object},setup(u){q(()=>{E()}),D(A,M);const t=u,n=()=>c.visit(route("account.apartments.step",{apartment:t.apartment.id,step:t.apartment.status!=="published"?t.apartment.step:1})),l=o=>{if(t.apartment.status==="published")return c.visit(route("account.apartments.calendar",{apartment:o}))},m=o=>{if(t.apartment.status==="published")return c.visit(route("account.apartments.chats",{apartment:o}))},h=o=>{switch(o){case"draft":return"bg-zinc-100 text-neutral-800";case"pending":return"bg-sky-100 text-neutral-800";case"published":return"bg-green-300 text-neutral-900"}},r=w("Копировать ссылку"),S=o=>{r.value="Скопировано",navigator.clipboard.writeText(route("apartment",{apartment:o})).then(()=>{r.value="Скопировано",setTimeout(()=>{r.value="Копировать ссылку"},1500)})},_=w(!1),T=()=>{c.visit(route("account.apartments.delete",{apartment:t.apartment.id}),{method:"post"})};return(o,a)=>{var x,v;return i(),k("div",I,[e("div",J,[e("div",K,[e("img",{onClick:n,class:"object-cover h-full w-full group-hover:scale-110 transition",src:t.apartment.media.length?(x=t.apartment.media[0])==null?void 0:x.src:"/img/no-photo.jpeg",alt:t.apartment.title},null,8,P),e("div",{class:y(["absolute top-3 end-3 px-2 rounded-full text-xs",h(t.apartment.status)])},d(t.apartment.status_text),3),e("div",Q,[t.apartment.status==="published"?(i(),k("div",{key:0,"data-tooltip-target":`link_${t.apartment.id}`,onClick:a[0]||(a[0]=p=>S(t.apartment.id)),class:"px-2 rounded-full text-xs w-8 h-8 aspect-square flex flex-col items-center justify-center bg-neutral-100 text-neutral-800 hover:bg-white transition dark:hover:bg-slate-800 dark:hover:text-slate-100"},[s(C(O),{name:"hi-solid-link"})],8,R)):f("",!0),e("div",{id:`link_${t.apartment.id}`,role:"tooltip",class:"absolute z-20 break-words whitespace-nowrap invisible inline-block px-3 py-2 text-xs font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[$(d(r.value)+" ",1),W],8,U),e("div",{onClick:a[1]||(a[1]=p=>_.value=!0),"data-tooltip-target":`delete_${t.apartment.id}`,class:"rounded-full text-xs bg-rose-300 flex w-7 h-7 flex-col items-center justify-center hover:bg-rose-400 transition text-neutral-800"},[s(C(O),{name:"hi-trash"})],8,X),e("div",{id:`delete_${t.apartment.id}`,role:"tooltip",class:"absolute z-20 break-words whitespace-nowrap invisible inline-block px-3 py-2 text-xs font-medium text-white transition-opacity duration-300 bg-gray-900 rounded-lg shadow-sm opacity-0 tooltip dark:bg-gray-700"},[$(" Удалить объект "),Z],8,Y)])]),e("div",{class:y(["font-light text-neutral-500 dark:text-slate-400",t.apartment.category?"":"opacity-30"])},d(((v=t.apartment.category)==null?void 0:v.title)??"Нет типа"),3),e("div",tt,[e("span",et,d(t.apartment.address),1)]),e("div",at,[s(j,{guests:t.apartment.guests},null,8,["guests"]),s(B,{bedrooms:t.apartment.bedrooms},null,8,["bedrooms"]),s(z,{beds:t.apartment.beds},null,8,["beds"]),s(N,{bathrooms:t.apartment.bathrooms},null,8,["bathrooms"])]),s(b,{small:!0,onClick:n,label:"Редактировать"}),t.apartment.status==="published"?(i(),g(b,{key:0,onClick:a[2]||(a[2]=p=>l(t.apartment.id)),small:!0,label:"Календарь"})):f("",!0),e("div",st,[t.apartment.status==="published"?(i(),g(b,{key:0,onClick:a[3]||(a[3]=p=>m(t.apartment.id)),small:!0,outline:!0,label:"Чат"})):f("",!0),s(F,{count:t.apartment.reservation_requests_count},null,8,["count"])])]),s(G,{"is-open":_.value,onOnSubmit:T,onOnClose:a[4]||(a[4]=p=>_.value=!1)},null,8,["is-open"])])}}};export{ut as default};
