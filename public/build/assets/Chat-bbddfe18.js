import{a as q,_ as O,b as V}from"./AppLayout-78305ba8.js";import{_ as B}from"./Heading-88a456c2.js";import{_ as x,a as L}from"./Message-cf3833cc.js";import{a as N,o as s,f as n,w as m,g as a,i as t,j as o,F as w,k as y,u as b,l as S,n as z,t as k,m as C,O as D}from"./app-d7203694.js";import{_ as E}from"./TextareaInput-542ad1e1.js";import{_ as F}from"./EmptyState-c120459c.js";import{_ as A}from"./ButtonComponent-69e320dc.js";import"./index-43b52f86.js";import"./useToasts-5e8778ca.js";import"./Input-35f06f9a.js";/* empty css                                              */const M={class:"mt-6 flex flex-col items-start md:flex-row gap-4 md:justify-between relative md:min-h-0 min-h-[600px] h-[70vh]"},T={class:"w-full md:w-2/3 h-full relative"},U={key:0,class:"absolute inset-x-0 top-0 bottom-32 overflow-auto flex flex-col items-start gap-1.5"},G={class:"absolute inset-x-0 bottom-0 flex items-start gap-3"},H=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})],-1),I={class:"block divide-y divide-gray-100 w-full md:w-1/3 md:sticky md:top-24 rounded-xl overflow-hidden shadow-xl h-auto py-2 border border-gray-50"},J={class:"h-full overflow-auto min-h-[300px] md:min-h-0"},K=["onClick"],P={class:"flex items-center gap-2"},Q={class:"flex flex-col"},R={class:"text-sm font-bold text-neutral-800"},W={key:0,class:"text-sm font-light text-neutral-500"},X={key:0},ce={__name:"Chat",props:{chats:{type:Object},messages:{type:[Object,null]},chat:{type:[Object,null]}},setup($){const r=$,j=i=>{console.log("chat",i),D.visit(route("account.apartments.chat",{chat:i.id,apartment:i.apartment.id}))},l=N({message:""}),c=()=>{l.post(route("chat.messages.store",{chat:r.chat.data.id}),{preserveScroll:!0,onSuccess:()=>l.reset("message")})};return(i,d)=>(s(),n(q,null,{default:m(()=>[a(O,null,{default:m(()=>{var _,u;return[a(B,{class:"mt-8",title:"Чат объекта"}),t("div",M,[t("div",T,[(u=(_=r.messages)==null?void 0:_.data)!=null&&u.length?(s(),o("div",U,[(s(!0),o(w,null,y(r.messages.data,e=>(s(),n(S(e.reservation_request?x:L),{"is-owner":"",item:e.reservation_request?e.reservation_request:e,key:e.id},null,8,["item"]))),128))])):(s(),n(F,{key:1,title:"Сообщений пока нет",subtitle:"Напишите первым!"})),t("div",G,[a(E,{modelValue:b(l).message,"onUpdate:modelValue":d[0]||(d[0]=e=>b(l).message=e),id:"message",label:"Сообщение",onOnEnter:c},null,8,["modelValue"]),a(A,{"auto-width":!0,onClick:c,class:"px-4",outline:!0,label:""},{icon:m(()=>[H]),_:1})])]),t("div",I,[t("div",J,[(s(!0),o(w,null,y(r.chats.data,e=>{var p,f,h,v,g;return s(),o("div",{key:e.id,onClick:Y=>j(e),class:z(["gap-2 px-4 py-2 cursor-pointer flex flex-col w-full hover:bg-gray-100 transition",((p=r.chat)==null?void 0:p.data.id)===e.id?"bg-gray-100":""])},[t("div",P,[a(V,{src:e.user.avatar},null,8,["src"]),t("div",Q,[t("div",R,k(e.user.name),1),(f=e.last_message)!=null&&f.reservation_request?C("",!0):(s(),o("div",W,k((h=e.last_message)==null?void 0:h.message),1))])]),(v=e.last_message)!=null&&v.reservation_request?(s(),o("div",X,[a(x,{compact:"",item:(g=e.last_message)==null?void 0:g.reservation_request},null,8,["item"])])):C("",!0)],10,K)}),128))])])])]}),_:1})]),_:1}))}};export{ce as default};
