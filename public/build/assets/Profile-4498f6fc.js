import{_ as v}from"./Container-1bac8ae5.js";import{_ as g}from"./AppLayout-f2a12840.js";import{_ as V}from"./Breadcrumbs-d48fac82.js";import{_ as k}from"./Heading-57196e53.js";import{c as y,g as h}from"./index.esm.min-d27b98da.js";import{r as w,a as i,c as x,e as a,g as s,u as r,p as $,O as U,o as j,l as C,w as p,t as f}from"./app-83d912d1.js";import{_ as m}from"./Input-944ad183.js";import{_ as O}from"./PhoneInput-c298ca05.js";import{_}from"./ButtonComponent-54a2d4e5.js";import{u as b}from"./useToasts-cf39243c.js";import"./Counter-2327a4bb.js";import"./index-fcfb796a.js";import"./index-9ef572b0.js";import"./Avatar-b6a60661.js";import"./index-d38770d5.js";import"./_plugin-vue_export-helper-c27b6911.js";const q={name:"co-pencil",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M29.663 482.25l.087.087a24.847 24.847 0 0017.612 7.342 25.178 25.178 0 008.1-1.345l142.006-48.172 272.5-272.5A88.832 88.832 0 00344.334 42.039l-272.5 272.5-48.168 142.002a24.844 24.844 0 005.997 25.709zm337.3-417.584a56.832 56.832 0 0180.371 80.373L411.5 180.873 331.127 100.5zM99.744 331.884L308.5 123.127l80.373 80.373-208.757 208.756-121.634 41.262z" class="ci-primary"/>'},B={class:"w-full relative group"},T={class:"rounded-full overflow-hidden w-40 aspect-square mx-auto"},z=["src"],A={class:"absolute opacity-0 bottom-0 left-1/2 -translate-x-1/2 bg-sky-600 hover:bg-sky-400 dark:bg-sky-700 dark:hover:bg-sky-600 cursor-pointer transition aspect-square rounded-full w-10 group-hover:opacity-100 flex flex-col items-center justify-center text-white"},M={__name:"AvatarUploader",props:{src:{required:!0}},setup(t){y(q);const e=w(t.src??"/img/no-user.svg");return(u,d)=>(i(),x("div",B,[a("div",T,[a("img",{class:"w-full object-cover",src:e.value,alt:"Avatar"},null,8,z)]),a("div",A,[s(r(h),{name:"co-pencil",scale:"1.2"})])]))}},P={class:"flex flex-col gap-3"},S=a("hr",{class:"my-4 dark:border-slate-600"},null,-1),L={class:"flex flex-col md:flex-row gap-4"},N={__name:"ProfileForm",props:{user:{type:Object}},setup(t){const n=t,e=$({name:n.user.name,email:n.user.email,phone:n.user.phone,telegram_username:n.user.telegram_username,old_password:null,password:null,password_confirmation:null}),{successToast:u}=b(),d=()=>{e.post(route("account.profile.update",{account:n.user.id}),{onSuccess(){u("Данные профиля успешно обновлены")},preserveScroll:!0})};return(c,o)=>(i(),x("div",P,[s(m,{key:"name",label:"Ваше имя",error:r(e).errors.name,modelValue:r(e).name,"onUpdate:modelValue":o[0]||(o[0]=l=>r(e).name=l)},null,8,["error","modelValue"]),s(m,{key:"email",label:"Ваш email",error:r(e).errors.email,modelValue:r(e).email,"onUpdate:modelValue":o[1]||(o[1]=l=>r(e).email=l)},null,8,["error","modelValue"]),s(O,{key:"phone",label:"Ваш телефон",required:!0,error:r(e).errors.phone,modelValue:r(e).phone,"onUpdate:modelValue":o[2]||(o[2]=l=>r(e).phone=l)},null,8,["error","modelValue"]),s(m,{key:"telegram_username",label:"Ваш ник в телеграме",error:r(e).errors.telegram_username,modelValue:r(e).telegram_username,"onUpdate:modelValue":o[3]||(o[3]=l=>r(e).telegram_username=l)},null,8,["error","modelValue"]),S,s(m,{key:"old_password",label:"Старый пароль",type:"password",error:r(e).errors.old_password,modelValue:r(e).old_password,"onUpdate:modelValue":o[4]||(o[4]=l=>r(e).old_password=l)},null,8,["error","modelValue"]),s(m,{key:"password",label:"Новый пароль",type:"password",error:r(e).errors.password,modelValue:r(e).password,"onUpdate:modelValue":o[5]||(o[5]=l=>r(e).password=l)},null,8,["error","modelValue"]),s(m,{key:"password_confirmation",label:"Повторите пароль",type:"password",error:r(e).errors.password_confirmation,modelValue:r(e).password_confirmation,"onUpdate:modelValue":o[6]||(o[6]=l=>r(e).password_confirmation=l)},null,8,["error","modelValue"]),a("div",L,[s(_,{class:"mt-6",outline:"",label:"Отменить",onClick:o[7]||(o[7]=l=>r(U).visit(c.route("account.index")))}),s(_,{class:"mt-6",label:"Сохранить",onClick:d})])]))}},D={class:"flex flex-col md:flex-row mt-12 gap-12 items-start"},E={class:"rounded-xl border border-neutral-100 dark:border-slate-700 shadow-xl p-8 w-full md:w-1/2 lg:w-1/3"},F={class:"text-center font-semibold text-3xl mt-3 dark:text-slate-100"},X={class:"text-center mt-1 text-sm dark:text-slate-500"},Y={class:"w-full md:w-1/2 lg:w-2/3"},ne={__name:"Profile",props:{user:Object,flash:Object},setup(t){const n=t,{errorToast:e}=b(),u=w([{id:"account",route:route("account.index"),label:"Аккаунт"},{id:"profile",route:route("account.profile.index"),label:"Профиль"}]);return j(()=>{n.flash.error&&e(n.flash.error)}),(d,c)=>(i(),C(g,null,{default:p(()=>[s(v,{sm:!0},{default:p(()=>[s(V,{routes:u.value},null,8,["routes"]),s(k,{class:"mt-6",title:"Профиль",subtitle:"Отредактируйте ваши персональные данные"}),a("div",D,[a("div",E,[s(M,{src:t.user.data.avatar},null,8,["src"]),a("div",F,f(t.user.data.name),1),a("div",X,"На сайте "+f(t.user.data.since),1)]),a("div",Y,[s(N,{user:t.user.data},null,8,["user"])])])]),_:1})]),_:1}))}};export{ne as default};
