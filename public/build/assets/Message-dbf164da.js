import{_ as j}from"./ButtonComponent-18b39a14.js";import{c as C,b as w}from"./AppLayout-bfed5d3e.js";import{_ as V}from"./Input-d7bfa140.js";import{r as b,a as B,o as u,j as d,i as n,t as o,n as k,q as x,m as _,g as m,w as q,u as y}from"./app-dcea8354.js";import{u as R}from"./useToasts-e8db99ee.js";const S=n("div",{class:"font-semibold text-neutral-800"},"Запрос на бронирование",-1),N={class:"font-light text-xs text-gray-400"},T={class:"font-light text-neutral-800"},M={class:"text-neutral-400 text-sm"},A={class:"font-light text-neutral-800"},E={key:0},z={key:0},D={key:0,class:"flex justify-end gap-2"},U={key:1,class:"font-light text-neutral-800"},Y={__name:"ReservationRequest",props:{item:{required:!0},compact:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1}},setup(g){const a=g,t=b(a.item),c=b(!1),r=b(!1),l=B({status_text:""}),{infoToast:p}=R(),v=()=>{axios.post(route("account.reservation-requests.reject",{reservationRequest:t.value.id}),{status_text:l.status_text}).then(i=>{var e,s;c.value=!1,t.value.status=(e=i.data)==null?void 0:e.status,t.value.status_text=(s=i.data)==null?void 0:s.status_text,p("Отказано в запросе на бронирование.")}).catch(i=>{var e,s,$,h,O;((e=i.response)==null?void 0:e.status)===422&&(console.log("error.response?.data?.message",($=(s=i.response)==null?void 0:s.data)==null?void 0:$.message),l.setError("status_text",((O=(h=i.response)==null?void 0:h.data)==null?void 0:O.message)??"Что-то пошло не так."))})},f=()=>{console.log("handleConfirm")};return(i,e)=>(u(),d("div",{class:k(["border border-gray-300 rounded-lg p-3",t.value.status==="rejected"?"opacity-40":""])},[n("div",{class:k(["flex items-baseline justify-between",a.compact?"flex-col-reverse gap-0":"gap-4"])},[S,n("div",N,o(t.value.created_at),1)],2),n("div",T,[x(" с "+o(t.value.start)+" по "+o(t.value.end)+" | ",1),n("span",M,"ночи: "+o(t.value.range),1)]),n("div",A,[x(" Взрослые "+o(t.value.range)+" ",1),t.value.children>0?(u(),d("span",E," | Дети "+o(t.value.children),1)):_("",!0)]),a.compact?_("",!0):(u(),d("div",z,[a.isOwner&&t.value.status!=="rejected"?(u(),d("div",D,[m(j,{label:"Отказать",onClick:e[0]||(e[0]=s=>c.value=!0),small:!0,outline:!0,"auto-width":!0,class:"px-3"}),m(j,{label:"Подтвердить",onClick:e[1]||(e[1]=s=>r.value=!0),small:!0,"bg-class":"bg-green-50","text-class":"text-green-800","border-class":"border-green-800","auto-width":!0,class:"px-3"})])):_("",!0)])),t.value.status==="rejected"?(u(),d("div",U,o(`Отменен${t.value.status_text?": "+t.value.status_text:""}`),1)):_("",!0),m(C,{"is-open":c.value,onOnSecondaryAction:e[3]||(e[3]=s=>c.value=!1),onOnClose:e[4]||(e[4]=s=>c.value=!1),onOnSubmit:v,title:"Отказать в запросе на бронирование","action-label":"Отказать","secondary-action-label":"Отменить"},{body:q(()=>[m(V,{modelValue:y(l).status_text,"onUpdate:modelValue":e[2]||(e[2]=s=>y(l).status_text=s),id:"reason",name:"reason",error:y(l).errors.status_text,label:"Укажите причину отказа (можно остваить пустым)"},null,8,["modelValue","error"])]),_:1},8,["is-open"]),m(C,{"is-open":r.value,onOnSecondaryAction:e[5]||(e[5]=s=>r.value=!1),onOnClose:e[6]||(e[6]=s=>r.value=!1),onOnSubmit:f,title:"Подтвердить запрос на бронирование","action-label":"Подтвердить","secondary-action-label":"Отменить"},{body:q(()=>[x(" фыв")]),_:1},8,["is-open"])],2))}},F={class:"flex items-start gap-2"},G={class:"flex flex-col"},H={class:"text-sm font-bold"},I={key:0,class:"text-neutral-600"},J={class:"font-light text-xs text-gray-400"},K={class:""},Z={__name:"Message",props:{item:{type:Object,required:!0}},setup(g){const a=g;return(t,c)=>{var r,l,p,v,f;return u(),d("div",F,[m(w,{src:(r=a.item.user)==null?void 0:r.avatar},null,8,["src"]),n("div",G,[n("div",H,[((p=(l=t.$page.props.user)==null?void 0:l.data)==null?void 0:p.id)===((v=a.item.user)==null?void 0:v.id)?(u(),d("span",I,"Вы:")):_("",!0),x(" "+o((f=a.item.user)==null?void 0:f.name)+" ",1),n("span",J,o(a.item.created_at),1)]),n("div",K,o(a.item.message),1)])])}}};export{Y as _,Z as a};
