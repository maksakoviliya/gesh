import{a as $,_ as j,b as q}from"./AppLayout-f4d1ac82.js";import{_ as V}from"./Heading-1ae91585.js";import{_ as h,a as B}from"./Message-2dac5b44.js";import{a as O,o as s,f as n,w as m,g as a,i as t,j as o,F as v,k as g,u as x,l as L,n as N,t as w,m as y,O as S}from"./app-b1a93664.js";import{_ as z}from"./TextareaInput-054b8914.js";import{_ as D}from"./EmptyState-a57d3929.js";import{_ as F}from"./ButtonComponent-eab454ba.js";import"./index-ef68a25a.js";import"./useToasts-e6f716c6.js";const A={class:"mt-6 flex flex-col items-start md:flex-row gap-4 md:justify-between relative md:min-h-0 min-h-[600px] h-[70vh]"},E={class:"w-full md:w-2/3 h-full relative"},M={key:0,class:"absolute inset-x-0 top-0 bottom-32 overflow-auto flex flex-col items-start gap-1.5"},T={class:"absolute inset-x-0 bottom-0 flex items-start gap-3"},U=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})],-1),G={class:"block divide-y divide-gray-100 w-full md:w-1/3 md:sticky md:top-24 rounded-xl overflow-hidden shadow-xl h-auto py-2 border border-gray-50"},H={class:"h-full overflow-auto min-h-[300px] md:min-h-0"},I=["onClick"],J={class:"flex items-center gap-2"},K={class:"flex flex-col"},P={class:"text-sm font-bold text-neutral-800"},Q={key:0,class:"text-sm font-light text-neutral-500"},R={key:0},re={__name:"Chat",props:{chats:{type:Object},messages:{type:[Object,null]},chat:{type:[Object,null]}},setup(b){const l=b,k=i=>{console.log("chat",i),S.visit(route("account.apartments.chat",{chat:i.id,apartment:i.apartment.id}))},r=O({message:""}),C=()=>{r.post(route("chat.messages.store",{chat:l.chat.data.id}),{preserveScroll:!0,onSuccess:()=>r.reset("message")})};return(i,c)=>(s(),n($,null,{default:m(()=>[a(j,null,{default:m(()=>[a(V,{class:"mt-8",title:"Чат объекта"}),t("div",A,[t("div",E,[l.messages.data.length?(s(),o("div",M,[(s(!0),o(v,null,g(l.messages.data,e=>(s(),n(L(e.reservation_request?h:B),{item:e.reservation_request?e.reservation_request:e,key:e.id},null,8,["item"]))),128))])):(s(),n(D,{key:1,title:"Сообщений пока нет",subtitle:"Напишите первым!"})),t("div",T,[a(z,{modelValue:x(r).message,"onUpdate:modelValue":c[0]||(c[0]=e=>x(r).message=e),id:"message",label:"Сообщение"},null,8,["modelValue"]),a(F,{"auto-width":!0,onClick:C,class:"px-4",outline:!0,label:""},{icon:m(()=>[U]),_:1})])]),t("div",G,[t("div",H,[(s(!0),o(v,null,g(l.chats.data,e=>{var d,_,u,f,p;return s(),o("div",{key:e.id,onClick:W=>k(e),class:N(["gap-2 px-4 py-2 cursor-pointer flex flex-col w-full hover:bg-gray-100 transition",((d=l.chat)==null?void 0:d.data.id)===e.id?"bg-gray-100":""])},[t("div",J,[a(q,{src:e.user.avatar},null,8,["src"]),t("div",K,[t("div",P,w(e.user.name),1),(_=e.last_message)!=null&&_.reservation_request?y("",!0):(s(),o("div",Q,w((u=e.last_message)==null?void 0:u.message),1))])]),(f=e.last_message)!=null&&f.reservation_request?(s(),o("div",R,[a(h,{compact:"",item:(p=e.last_message)==null?void 0:p.reservation_request},null,8,["item"])])):y("",!0)],10,I)}),128))])])])]),_:1})]),_:1}))}};export{re as default};
