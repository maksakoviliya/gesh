import{a as $,_ as j,b as q}from"./AppLayout-16dd1faf.js";import{_ as V}from"./Heading-32bd046d.js";import{_ as v,a as B}from"./Message-92fce0fa.js";import{a as O,o as t,f as n,w as m,g as a,i as s,j as o,F as g,k as h,u as x,l as L,n as N,t as y,m as b,O as S}from"./app-1fa6199a.js";import{_ as z}from"./TextareaInput-2958f779.js";import{_ as D}from"./EmptyState-30fc045d.js";import{_ as F}from"./ButtonComponent-ba5a95ac.js";import"./index-ef68a25a.js";import"./useToasts-bf96e7f1.js";const A={class:"mt-6 flex flex-col items-start md:flex-row gap-4 md:justify-between relative h-[70vh]"},E={class:"w-full md:w-2/3 h-full relative"},M={key:0,class:"absolute inset-x-0 top-0 bottom-32 overflow-auto flex flex-col items-start gap-1.5"},T={class:"absolute inset-x-0 bottom-0 flex items-start gap-3"},U=s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})],-1),G={class:"hidden md:block divide-y divide-gray-100 md:w-1/3 md:sticky md:top-24 rounded-xl overflow-hidden shadow-xl h-auto py-2 border border-gray-50"},H=["onClick"],I={class:"flex items-center gap-2"},J={class:"flex flex-col"},K={class:"text-sm font-bold text-neutral-800"},P={key:0,class:"text-sm font-light text-neutral-500"},Q={key:0},re={__name:"Chat",props:{chats:{type:Object},messages:{type:[Object,null]},chat:{type:[Object,null]}},setup(k){const r=k,w=i=>{console.log("chat",i),S.visit(route("account.apartments.chat",{chat:i.id,apartment:i.apartment.id}))},l=O({message:""}),C=()=>{l.post(route("chat.messages.store",{chat:r.chat.data.id}),{preserveScroll:!0,onSuccess:()=>l.reset("message")})};return(i,c)=>(t(),n($,null,{default:m(()=>[a(j,null,{default:m(()=>[a(V,{class:"mt-8",title:"Чат объекта"}),s("div",A,[s("div",E,[r.messages.data.length?(t(),o("div",M,[(t(!0),o(g,null,h(r.messages.data,e=>(t(),n(L(e.reservation_request?v:B),{item:e.reservation_request?e.reservation_request:e,key:e.id},null,8,["item"]))),128))])):(t(),n(D,{key:1,title:"Сообщений пока нет",subtitle:"Напишите первым!"})),s("div",T,[a(z,{modelValue:x(l).message,"onUpdate:modelValue":c[0]||(c[0]=e=>x(l).message=e),id:"message",label:"Сообщение"},null,8,["modelValue"]),a(F,{"auto-width":!0,onClick:C,class:"px-4",outline:!0,label:""},{icon:m(()=>[U]),_:1})])]),s("div",G,[(t(!0),o(g,null,h(r.chats.data,e=>{var d,_,u,f,p;return t(),o("div",{key:e.id,onClick:R=>w(e),class:N(["gap-2 px-4 py-2 cursor-pointer flex flex-col w-full hover:bg-gray-100 transition",((d=r.chat)==null?void 0:d.data.id)===e.id?"bg-gray-100":""])},[s("div",I,[a(q,{src:e.user.avatar},null,8,["src"]),s("div",J,[s("div",K,y(e.user.name),1),(_=e.last_message)!=null&&_.reservation_request?b("",!0):(t(),o("div",P,y((u=e.last_message)==null?void 0:u.message),1))])]),(f=e.last_message)!=null&&f.reservation_request?(t(),o("div",Q,[a(v,{compact:"",item:(p=e.last_message)==null?void 0:p.reservation_request},null,8,["item"])])):b("",!0)],10,H)}),128))])])]),_:1})]),_:1}))}};export{re as default};
