import{e as x,_ as g}from"./AppLayout-8e73d638.js";import{_ as k}from"./Breadcrumbs-3cd07b1e.js";import{_ as y}from"./Heading-3981009c.js";import{c as w,g as $}from"./index.esm.min-c15d9534.js";import{r as f,a as s,c,g as l,e as a,u,p as S,t as n,l as m,w as _}from"./app-babd44c3.js";import{_ as j}from"./Input-abd8a9ed.js";import{_ as C}from"./ButtonComponent-6644ba4c.js";import{u as V}from"./useToasts-95179251.js";import{_ as q}from"./PhoneInput-bff24c8c.js";import"./index-2a4984e8.js";import"./Avatar-d988c74e.js";const A={name:"co-pencil",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M29.663 482.25l.087.087a24.847 24.847 0 0017.612 7.342 25.178 25.178 0 008.1-1.345l142.006-48.172 272.5-272.5A88.832 88.832 0 00344.334 42.039l-272.5 272.5-48.168 142.002a24.844 24.844 0 005.997 25.709zm337.3-417.584a56.832 56.832 0 0180.371 80.373L411.5 180.873 331.127 100.5zM99.744 331.884L308.5 123.127l80.373 80.373-208.757 208.756-121.634 41.262z" class="ci-primary"/>'},B={class:"w-full relative group"},P={class:"rounded-full overflow-hidden w-40 aspect-square mx-auto"},z=["src"],T={class:"absolute opacity-0 bottom-0 left-1/2 -translate-x-1/2 bg-sky-600 hover:bg-sky-400 dark:bg-sky-700 dark:hover:bg-sky-600 cursor-pointer transition aspect-square rounded-full w-10 group-hover:opacity-100 flex flex-col items-center justify-center text-white"},E={__name:"AvatarUploader",props:{src:{required:!0}},setup(e){w(A);const r=f(e.src??"/img/no-user.svg");return(i,o)=>(s(),c("div",B,[l("div",P,[l("img",{class:"w-full object-cover",src:r.value,alt:"Avatar"},null,8,z)]),l("div",T,[a(u($),{name:"co-pencil",scale:"1.2"})])]))}},F={class:"border-b border-neutral-200 dark:border-slate-700 pb-4"},L={class:"w-full flex justify-between items-baseline"},M={class:"dark:text-slate-400"},N={class:"w-full"},O={key:0,class:"text-neutral-500 dark:text-slate-100 font-light"},U={key:1,class:"mt-3 flex items-center gap-3"},d={__name:"ProfileFormItem",props:{url:{type:String,required:!0},label:{type:String},field:{type:String},value:{type:[String,null]}},setup(e){const t=e,r=f(!1),i=()=>{r.value=!r.value},o=S({[t.field]:t.value}),{successToast:v}=V(),b=()=>{o.post(t.url,{onSuccess(){v("Данные профиля успешно обновлены"),i()}})};return(J,p)=>(s(),c("div",F,[l("div",L,[l("div",M,n(e.label),1),l("button",{type:"button",onClick:i,class:"text-xs text-neutral-700 dark:text-slate-500 dark:hover:text-slate-400 font-semibold hover:text-neutral-800 underline"},n(r.value?"Отменить":"Редактировать"),1)]),l("div",N,[r.value?(s(),c("div",U,[t.field!=="phone"?(s(),m(j,{key:0,label:e.label,error:u(o).errors[t.field],modelValue:u(o)[t.field],"onUpdate:modelValue":p[0]||(p[0]=h=>u(o)[t.field]=h)},null,8,["label","error","modelValue"])):(s(),m(q,{key:1,label:t.label,error:u(o).errors[t.field],value:u(o)[t.field]},null,8,["label","error","value"])),a(C,{label:"Сохранить","auto-width":!0,onClick:b,class:"px-3 py-5"})])):(s(),c("div",O,n(e.value),1))])]))}},D={class:"flex flex-col gap-3"},I={__name:"ProfileForm",props:{user:Object},setup(e){return(t,r)=>(s(),c("div",D,[a(d,{key:"name",field:"name",url:t.route("account.profile.update",{account:e.user.id}),label:"Имя",value:e.user.name},null,8,["url","value"]),a(d,{key:"email",field:"email",url:t.route("account.profile.update",{account:e.user.id}),label:"Email",value:e.user.email??"Укажите email"},null,8,["url","value"]),a(d,{key:"phone",field:"phone",url:t.route("account.profile.update",{account:e.user.id}),label:"Телефон",value:e.user.phone??"Укажите номер телефона"},null,8,["url","value"])]))}},X={class:"flex flex-col md:flex-row mt-12 gap-12"},Y={class:"rounded-xl border border-neutral-100 dark:border-slate-700 shadow-xl p-8 w-full md:w-1/2 lg:w-1/3"},G={class:"text-center font-semibold text-3xl mt-3 dark:text-slate-100"},H={class:"w-full md:w-1/2 lg:w-2/3"},oe={__name:"Profile",props:{user:Object},setup(e){const t=f([{id:"account",route:route("account.index"),label:"Аккаунт"},{id:"profile",route:route("account.profile.index"),label:"Профиль"}]);return(r,i)=>(s(),m(x,null,{default:_(()=>[a(g,{sm:!0},{default:_(()=>[a(k,{routes:t.value},null,8,["routes"]),a(y,{class:"mt-6",title:"Профиль",subtitle:"Отредактируйте ваши персональные данные"}),l("div",X,[l("div",Y,[a(E,{src:e.user.data.avatar},null,8,["src"]),l("div",G,n(e.user.data.name),1)]),l("div",H,[a(I,{user:e.user.data},null,8,["user"])])])]),_:1})]),_:1}))}};export{oe as default};
