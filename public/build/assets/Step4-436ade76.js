import h from"./Form-341eceb5.js";import{_ as b}from"./Heading-fd87a426.js";import{r as c,s as x,v as g,o as _,k as w,j as u,i as d,u as i,a as y,f as L,w as k,O as M}from"./app-1f9e68d4.js";/* empty css                                              */import{j as U}from"./vue-yandex-maps.esm-cf9ef625.js";import{H as $}from"./index-2a26f4b7.js";import{c as C,g as N}from"./ButtonComponent-dadd7b55.js";import"./AppLayout-2f80a514.js";import"./useToasts-2d785387.js";import"./Breadcrumbs-9327dd7a.js";const O={class:"h-50vh overflow-hidden rounded-xl relative shadow-lg"},B={class:"absolute bottom-1/2 left-1/2 -translate-x-1/2 text-sky-500"},j={__name:"Map",props:{lat:Number|null,lon:Number|null},emits:["updateLon","updateLat"],setup(s,{emit:o}){const e=s,r=o,l=c([e.lat??52.92596754124867,e.lon??87.98709856259356]),a=c(null),t=c(null),p=async()=>{if(!a.value)return;console.log("[props.lat, props.lon]",l.value),await U({apiKey:"4b6179ba-b733-4d2b-af35-b06f33fc0141",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1",debug:!0});const n=["zoomControl"];t.value=new globalThis.ymaps.Map(a.value,{center:l.value,zoom:11,controls:n}),t.value.events.add("boundschange",function(m){const v=m.get("newCenter");r("updateLat",v[0]),r("updateLon",v[1])})},f=()=>{var n;if(a.value){for(let m=0;a.value.children.length;m++)(n=a.value.children[0])==null||n.remove();t.value=null}};return x(async()=>{await p()}),g(()=>{f()}),C($),c(!1),(n,m)=>(_(),w("div",O,[u("div",{ref_key:"mapElement",ref:a,style:{height:"450px"}},null,512),u("div",B,[d(i(N),{name:"hi-location-marker",scale:"2.8"})])]))}},E={class:"mt-0 md:mt-32 max-w-2xl mx-auto w-full pb-32"},S={class:"mt-10"},D={__name:"Step4",props:{apartment:Array|Object},setup(s){const o=s,e=y({lon:o.apartment.data.lon,lat:o.apartment.data.lat}),r=()=>{e.transform(t=>({...t,step:4})).post(route("account.apartments.store",{apartment:o.apartment.data.id}))},l=t=>{e.lon=t},a=t=>{e.lat=t};return(t,p)=>(_(),L(h,{step:4,onOnNextStep:r,onOnPrevStep:p[0]||(p[0]=f=>i(M).visit(t.route("account.apartments.step",{apartment:s.apartment.data.id,step:3})))},{default:k(()=>[u("div",E,[d(b,{title:"Уточните адрес",subtitle:"Проверьте что указанный вами адрес верно отобразился на карте."}),u("div",S,[d(j,{lon:i(e).lon,lat:i(e).lat,onUpdateLon:l,onUpdateLat:a},null,8,["lon","lat"])])])]),_:1}))}};export{D as default};
