import wv from"./Form-e2ccd2fa.js";import{_ as xv}from"./Heading-71f45e36.js";import{h as af,Q as Iv,r as oh,a as Y2,c as Tv,e as ah,u as zr,z as d1,l as Rv,j as Sv,w as Mv,g as sf,O as Cv}from"./app-3fd6aaa8.js";import{c as _v}from"./index.esm.min-6bf10631.js";import{e as Pv}from"./index-33f57259.js";import{M as Av}from"./index-b352bc0f.js";import"./AppLayout-ce7757e5.js";import"./ru-c542f4e4.js";import"./ButtonComponent-a8c4edd6.js";import"./Input-df2c2805.js";import"./index-9ef572b0.js";import"./Avatar-210b6106.js";import"./index-21c721e6.js";import"./useToasts-43ab753a.js";import"./Breadcrumbs-ae21b8fe.js";/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ov=t=>t instanceof HTMLElement,Lv=(t,e=[],n=[])=>{const r={...t},i=[],o=[],a=()=>({...r}),s=()=>{const g=[...i];return i.length=0,g},l=()=>{const g=[...o];o.length=0,g.forEach(({type:m,data:$})=>{c(m,$)})},c=(g,m,$)=>{if($&&!document.hidden){o.push({type:g,data:m});return}h[g]&&h[g](m),i.push({type:g,data:m})},d=(g,...m)=>p[g]?p[g](...m):null,u={getState:a,processActionQueue:s,processDispatchQueue:l,dispatch:c,query:d};let p={};e.forEach(g=>{p={...g(r),...p}});let h={};return n.forEach(g=>{h={...g(c,d,r),...h}}),u},Dv=(t,e,n)=>{if(typeof n=="function"){t[e]=n;return}Object.defineProperty(t,e,{...n})},Pn=(t,e)=>{for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])},Fo=t=>{const e={};return Pn(t,n=>{Dv(e,n,t[n])}),e},Yn=(t,e,n=null)=>{if(n===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},kv="http://www.w3.org/2000/svg",Fv=["svg","path"],lf=t=>Fv.includes(t),qd=(t,e,n={})=>{typeof e=="object"&&(n=e,e=null);const r=lf(t)?document.createElementNS(kv,t):document.createElement(t);return e&&(lf(t)?Yn(r,"class",e):r.className=e),Pn(n,(i,o)=>{Yn(r,i,o)}),r},Bv=t=>(e,n)=>{typeof n<"u"&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)},Nv=(t,e)=>(n,r)=>(typeof r<"u"?e.splice(r,0,n):e.push(n),n),Gv=(t,e)=>n=>(e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n),zv=(()=>typeof window<"u"&&typeof window.document<"u")(),X2=()=>zv,Uv=X2()?qd("svg"):{},Vv="children"in Uv?t=>t.children.length:t=>t.childNodes.length,Z2=(t,e,n,r)=>{const i=n[0]||t.left,o=n[1]||t.top,a=i+t.width,s=o+t.height*(r[1]||1),l={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:i,top:o,right:a,bottom:s}};return e.filter(c=>!c.isRectIgnored()).map(c=>c.rect).forEach(c=>{cf(l.inner,{...c.inner}),cf(l.outer,{...c.outer})}),df(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,df(l.outer),l},cf=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},df=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},Sa=t=>typeof t=="number",Hv=(t,e,n,r=.001)=>Math.abs(t-e)<r&&Math.abs(n)<r,Wv=({stiffness:t=.5,damping:e=.75,mass:n=10}={})=>{let r=null,i=null,o=0,a=!1;const c=Fo({interpolate:(d,u)=>{if(a)return;if(!(Sa(r)&&Sa(i))){a=!0,o=0;return}const p=-(i-r)*t;o+=p/n,i+=o,o*=e,Hv(i,r,o)||u?(i=r,o=0,a=!0,c.onupdate(i),c.oncomplete(i)):c.onupdate(i)},target:{set:d=>{if(Sa(d)&&!Sa(i)&&(i=d),r===null&&(r=d,i=d),r=d,i===r||typeof r>"u"){a=!0,o=0,c.onupdate(i),c.oncomplete(i);return}a=!1},get:()=>r},resting:{get:()=>a},onupdate:d=>{},oncomplete:d=>{}});return c},qv=t=>t<.5?2*t*t:-1+(4-2*t)*t,jv=({duration:t=500,easing:e=qv,delay:n=0}={})=>{let r=null,i,o,a=!0,s=!1,l=null;const d=Fo({interpolate:(u,p)=>{a||l===null||(r===null&&(r=u),!(u-r<n)&&(i=u-r-n,i>=t||p?(i=1,o=s?0:1,d.onupdate(o*l),d.oncomplete(o*l),a=!0):(o=i/t,d.onupdate((i>=0?e(s?1-o:o):0)*l))))},target:{get:()=>s?0:l,set:u=>{if(l===null){l=u,d.onupdate(u),d.oncomplete(u);return}u<l?(l=1,s=!0):(s=!1,l=u),a=!1,r=null}},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return d},uf={spring:Wv,tween:jv},Yv=(t,e,n)=>{const r=t[e]&&typeof t[e][n]=="object"?t[e][n]:t[e]||t,i=typeof r=="string"?r:r.type,o=typeof r=="object"?{...r}:{};return uf[i]?uf[i](o):null},kh=(t,e,n,r=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(i=>{t.forEach(o=>{let a=o,s=()=>n[o],l=c=>n[o]=c;typeof o=="object"&&(a=o.key,s=o.getter||s,l=o.setter||l),!(i[a]&&!r)&&(i[a]={get:s,set:l})})})},Xv=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...e},o=[];return Pn(t,(a,s)=>{const l=Yv(s);if(!l)return;l.onupdate=d=>{e[a]=d},l.target=i[a],kh([{key:a,setter:d=>{l.target!==d&&(l.target=d)},getter:()=>e[a]}],[n,r],e,!0),o.push(l)}),{write:a=>{let s=document.hidden,l=!0;return o.forEach(c=>{c.resting||(l=!1),c.interpolate(a,s)}),l},destroy:()=>{}}},Zv=t=>(e,n)=>{t.addEventListener(e,n)},Kv=t=>(e,n)=>{t.removeEventListener(e,n)},Qv=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:o})=>{const a=[],s=Zv(o.element),l=Kv(o.element);return r.on=(c,d)=>{a.push({type:c,fn:d}),s(c,d)},r.off=(c,d)=>{a.splice(a.findIndex(u=>u.type===c&&u.fn===d),1),l(c,d)},{write:()=>!0,destroy:()=>{a.forEach(c=>{l(c.type,c.fn)})}}},Jv=({mixinConfig:t,viewProps:e,viewExternalAPI:n})=>{kh(t,n,e)},Sr=t=>t!=null,tw={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},ew=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const o={...e},a={};kh(t,[n,r],e);const s=()=>[e.translateX||0,e.translateY||0],l=()=>[e.scaleX||0,e.scaleY||0],c=()=>i.rect?Z2(i.rect,i.childViews,s(),l()):null;return n.rect={get:c},r.rect={get:c},t.forEach(d=>{e[d]=typeof o[d]>"u"?tw[d]:o[d]}),{write:()=>{if(nw(a,e))return rw(i.element,e),Object.assign(a,{...e}),!0},destroy:()=>{}}},nw=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in e)if(e[n]!==t[n])return!0;return!1},rw=(t,{opacity:e,perspective:n,translateX:r,translateY:i,scaleX:o,scaleY:a,rotateX:s,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:h})=>{let g="",m="";(Sr(d)||Sr(u))&&(m+=`transform-origin: ${d||0}px ${u||0}px;`),Sr(n)&&(g+=`perspective(${n}px) `),(Sr(r)||Sr(i))&&(g+=`translate3d(${r||0}px, ${i||0}px, 0) `),(Sr(o)||Sr(a))&&(g+=`scale3d(${Sr(o)?o:1}, ${Sr(a)?a:1}, 1) `),Sr(c)&&(g+=`rotateZ(${c}rad) `),Sr(s)&&(g+=`rotateX(${s}rad) `),Sr(l)&&(g+=`rotateY(${l}rad) `),g.length&&(m+=`transform:${g};`),Sr(e)&&(m+=`opacity:${e};`,e===0&&(m+="visibility:hidden;"),e<1&&(m+="pointer-events:none;")),Sr(h)&&(m+=`height:${h}px;`),Sr(p)&&(m+=`width:${p}px;`);const $=t.elementCurrentStyle||"";(m.length!==$.length||m!==$)&&(t.style.cssText=m,t.elementCurrentStyle=m)},iw={styles:ew,listeners:Qv,animations:Xv,apis:Jv},pf=(t={},e={},n={})=>(e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),Qn=({tag:t="div",name:e=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:o=()=>{},destroy:a=()=>{},filterFrameActionsForChild:s=(h,g)=>g,didCreateView:l=()=>{},didWriteView:c=()=>{},ignoreRect:d=!1,ignoreRectUpdate:u=!1,mixins:p=[]}={})=>(h,g={})=>{const m=qd(t,`filepond--${e}`,n),$=window.getComputedStyle(m,null),b=pf();let E=null,v=!1;const w=[],T=[],M={},A={},x=[i],C=[r],H=[a],S=()=>m,y=()=>w.concat(),L=()=>M,O=q=>(et,D)=>et(q,D),_=()=>E||(E=Z2(b,w,[0,0],[1,1]),E),P=()=>$,U=()=>{E=null,w.forEach(D=>D._read()),!(u&&b.width&&b.height)&&pf(b,m,$);const et={root:V,props:g,rect:b};C.forEach(D=>D(et))},X=(q,et,D)=>{let ot=et.length===0;return x.forEach(st=>{st({props:g,root:V,actions:et,timestamp:q,shouldOptimize:D})===!1&&(ot=!1)}),T.forEach(st=>{st.write(q)===!1&&(ot=!1)}),w.filter(st=>!!st.element.parentNode).forEach(st=>{st._write(q,s(st,et),D)||(ot=!1)}),w.forEach((st,gt)=>{st.element.parentNode||(V.appendChild(st.element,gt),st._read(),st._write(q,s(st,et),D),ot=!1)}),v=ot,c({props:g,root:V,actions:et,timestamp:q}),ot},k=()=>{T.forEach(q=>q.destroy()),H.forEach(q=>{q({root:V,props:g})}),w.forEach(q=>q._destroy())},F={element:{get:S},style:{get:P},childViews:{get:y}},Q={...F,rect:{get:_},ref:{get:L},is:q=>e===q,appendChild:Bv(m),createChildView:O(h),linkView:q=>(w.push(q),q),unlinkView:q=>{w.splice(w.indexOf(q),1)},appendChildView:Nv(m,w),removeChildView:Gv(m,w),registerWriter:q=>x.push(q),registerReader:q=>C.push(q),registerDestroyer:q=>H.push(q),invalidateLayout:()=>m.layoutCalculated=!1,dispatch:h.dispatch,query:h.query},rt={element:{get:S},childViews:{get:y},rect:{get:_},resting:{get:()=>v},isRectIgnored:()=>d,_read:U,_write:X,_destroy:k},$t={...F,rect:{get:()=>b}};Object.keys(p).sort((q,et)=>q==="styles"?1:et==="styles"?-1:0).forEach(q=>{const et=iw[q]({mixinConfig:p[q],viewProps:g,viewState:A,viewInternalAPI:Q,viewExternalAPI:rt,view:Fo($t)});et&&T.push(et)});const V=Fo(Q);o({root:V,props:g});const Y=Vv(m);return w.forEach((q,et)=>{V.appendChild(q.element,Y+et)}),l(V),Fo(rt)},ow=(t,e,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(t),window[r].writers.push(e);return}window[r]={readers:[t],writers:[e]};const i=window[r],o=1e3/n;let a=null,s=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),o),c=()=>window.clearTimeout(s)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(s))};document.addEventListener("visibilitychange",()=>{c&&c(),d(),u(performance.now())});const u=p=>{s=l(u),a||(a=p);const h=p-a;h<=o||(a=p-h%o,i.readers.forEach(g=>g()),i.writers.forEach(g=>g(p)))};return d(),u(performance.now()),{pause:()=>{c(s)}}},Dr=(t,e)=>({root:n,props:r,actions:i=[],timestamp:o,shouldOptimize:a})=>{i.filter(s=>t[s.type]).forEach(s=>t[s.type]({root:n,props:r,action:s.data,timestamp:o,shouldOptimize:a})),e&&e({root:n,props:r,actions:i,timestamp:o,shouldOptimize:a})},hf=(t,e)=>e.parentNode.insertBefore(t,e),mf=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),iu=t=>Array.isArray(t),ro=t=>t==null,aw=t=>t.trim(),ou=t=>""+t,sw=(t,e=",")=>ro(t)?[]:iu(t)?t:ou(t).split(e).map(aw).filter(n=>n.length),K2=t=>typeof t=="boolean",Q2=t=>K2(t)?t:t==="true",Or=t=>typeof t=="string",J2=t=>Sa(t)?t:Or(t)?ou(t).replace(/[a-z]+/gi,""):0,Od=t=>parseInt(J2(t),10),ff=t=>parseFloat(J2(t)),Gs=t=>Sa(t)&&isFinite(t)&&Math.floor(t)===t,gf=(t,e=1e3)=>{if(Gs(t))return t;let n=ou(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Od(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Od(n)*e):Od(n)},Ma=t=>typeof t=="function",lw=t=>{let e=self,n=t.split("."),r=null;for(;r=n.shift();)if(e=e[r],!e)return null;return e},yf={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},cw=t=>{const e={};return e.url=Or(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Pn(yf,n=>{e[n]=dw(n,t[n],yf[n],e.timeout,e.headers)}),e.process=t.process||Or(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},dw=(t,e,n,r,i)=>{if(e===null)return null;if(typeof e=="function")return e;const o={url:n==="GET"||n==="PATCH"?`?${t}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(Or(e))return o.url=e,o;if(Object.assign(o,e),Or(o.headers)){const a=o.headers.split(/:(.+)/);o.headers={header:a[0],value:a[1]}}return o.withCredentials=Q2(o.withCredentials),o},uw=t=>cw(t),pw=t=>t===null,dr=t=>typeof t=="object"&&t!==null,hw=t=>dr(t)&&Or(t.url)&&dr(t.process)&&dr(t.revert)&&dr(t.restore)&&dr(t.fetch),sh=t=>iu(t)?"array":pw(t)?"null":Gs(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":hw(t)?"api":typeof t,mw=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),fw={array:sw,boolean:Q2,int:t=>sh(t)==="bytes"?gf(t):Od(t),number:ff,float:ff,bytes:gf,string:t=>Ma(t)?t:ou(t),function:t=>lw(t),serverapi:uw,object:t=>{try{return JSON.parse(mw(t))}catch{return null}}},gw=(t,e)=>fw[e](t),t$=(t,e,n)=>{if(t===e)return t;let r=sh(t);if(r!==n){const i=gw(t,n);if(r=sh(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;t=i}return t},yw=(t,e)=>{let n=t;return{enumerable:!0,get:()=>n,set:r=>{n=t$(r,t,e)}}},$w=t=>{const e={};return Pn(t,n=>{const r=t[n];e[n]=yw(r[0],r[1])}),Fo(e)},bw=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:$w(t)}),au=(t,e="-")=>t.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(e),Ew=(t,e)=>{const n={};return Pn(e,r=>{n[r]={get:()=>t.getState().options[r],set:i=>{t.dispatch(`SET_${au(r,"_").toUpperCase()}`,{value:i})}}}),n},vw=t=>(e,n,r)=>{const i={};return Pn(t,o=>{const a=au(o,"_").toUpperCase();i[`SET_${a}`]=s=>{try{r.options[o]=s.value}catch{}e(`DID_SET_${a}`,{value:r.options[o]})}}),i},ww=t=>e=>{const n={};return Pn(t,r=>{n[`GET_${au(r,"_").toUpperCase()}`]=i=>e.options[r]}),n},si={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Fh=()=>Math.random().toString(36).substring(2,11),Bh=(t,e)=>t.splice(e,1),xw=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},su=()=>{const t=[],e=(r,i)=>{Bh(t,t.findIndex(o=>o.event===r&&(o.cb===i||!i)))},n=(r,i,o)=>{t.filter(a=>a.event===r).map(a=>a.cb).forEach(a=>xw(()=>a(...i),o))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{t.push({event:r,cb:i})},onOnce:(r,i)=>{t.push({event:r,cb:(...o)=>{e(r,i),i(...o)}})},off:e}},e$=(t,e,n)=>{Object.getOwnPropertyNames(t).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r)))},Iw=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Gr=t=>{const e={};return e$(t,e,Iw),e},Tw=t=>{t.forEach((e,n)=>{e.released&&Bh(t,n)})},Fe={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},cr={INPUT:1,LIMBO:2,LOCAL:3},n$=t=>/[^0-9]+/.exec(t),r$=()=>n$(1.1.toLocaleString())[0],Rw=()=>{const t=r$(),e=1e3.toLocaleString(),n=1e3.toString();return e!==n?n$(e)[0]:t==="."?",":"."},ft={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Nh=[],Ti=(t,e,n)=>new Promise((r,i)=>{const o=Nh.filter(s=>s.key===t).map(s=>s.cb);if(o.length===0){r(e);return}const a=o.shift();o.reduce((s,l)=>s.then(c=>l(c,n)),a(e,n)).then(s=>r(s)).catch(s=>i(s))}),Ga=(t,e,n)=>Nh.filter(r=>r.key===t).map(r=>r.cb(e,n)),Sw=(t,e)=>Nh.push({key:t,cb:e}),Mw=t=>Object.assign(ws,t),jd=()=>({...ws}),Cw=t=>{Pn(t,(e,n)=>{ws[e]&&(ws[e][0]=t$(n,ws[e][0],ws[e][1]))})},ws={id:[null,ft.STRING],name:["filepond",ft.STRING],disabled:[!1,ft.BOOLEAN],className:[null,ft.STRING],required:[!1,ft.BOOLEAN],captureMethod:[null,ft.STRING],allowSyncAcceptAttribute:[!0,ft.BOOLEAN],allowDrop:[!0,ft.BOOLEAN],allowBrowse:[!0,ft.BOOLEAN],allowPaste:[!0,ft.BOOLEAN],allowMultiple:[!1,ft.BOOLEAN],allowReplace:[!0,ft.BOOLEAN],allowRevert:[!0,ft.BOOLEAN],allowRemove:[!0,ft.BOOLEAN],allowProcess:[!0,ft.BOOLEAN],allowReorder:[!1,ft.BOOLEAN],allowDirectoriesOnly:[!1,ft.BOOLEAN],storeAsFile:[!1,ft.BOOLEAN],forceRevert:[!1,ft.BOOLEAN],maxFiles:[null,ft.INT],checkValidity:[!1,ft.BOOLEAN],itemInsertLocationFreedom:[!0,ft.BOOLEAN],itemInsertLocation:["before",ft.STRING],itemInsertInterval:[75,ft.INT],dropOnPage:[!1,ft.BOOLEAN],dropOnElement:[!0,ft.BOOLEAN],dropValidation:[!1,ft.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],ft.ARRAY],instantUpload:[!0,ft.BOOLEAN],maxParallelUploads:[2,ft.INT],allowMinimumUploadDuration:[!0,ft.BOOLEAN],chunkUploads:[!1,ft.BOOLEAN],chunkForce:[!1,ft.BOOLEAN],chunkSize:[5e6,ft.INT],chunkRetryDelays:[[500,1e3,3e3],ft.ARRAY],server:[null,ft.SERVER_API],fileSizeBase:[1e3,ft.INT],labelFileSizeBytes:["bytes",ft.STRING],labelFileSizeKilobytes:["KB",ft.STRING],labelFileSizeMegabytes:["MB",ft.STRING],labelFileSizeGigabytes:["GB",ft.STRING],labelDecimalSeparator:[r$(),ft.STRING],labelThousandsSeparator:[Rw(),ft.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',ft.STRING],labelInvalidField:["Field contains invalid files",ft.STRING],labelFileWaitingForSize:["Waiting for size",ft.STRING],labelFileSizeNotAvailable:["Size not available",ft.STRING],labelFileCountSingular:["file in list",ft.STRING],labelFileCountPlural:["files in list",ft.STRING],labelFileLoading:["Loading",ft.STRING],labelFileAdded:["Added",ft.STRING],labelFileLoadError:["Error during load",ft.STRING],labelFileRemoved:["Removed",ft.STRING],labelFileRemoveError:["Error during remove",ft.STRING],labelFileProcessing:["Uploading",ft.STRING],labelFileProcessingComplete:["Upload complete",ft.STRING],labelFileProcessingAborted:["Upload cancelled",ft.STRING],labelFileProcessingError:["Error during upload",ft.STRING],labelFileProcessingRevertError:["Error during revert",ft.STRING],labelTapToCancel:["tap to cancel",ft.STRING],labelTapToRetry:["tap to retry",ft.STRING],labelTapToUndo:["tap to undo",ft.STRING],labelButtonRemoveItem:["Remove",ft.STRING],labelButtonAbortItemLoad:["Abort",ft.STRING],labelButtonRetryItemLoad:["Retry",ft.STRING],labelButtonAbortItemProcessing:["Cancel",ft.STRING],labelButtonUndoItemProcessing:["Undo",ft.STRING],labelButtonRetryItemProcessing:["Retry",ft.STRING],labelButtonProcessItem:["Upload",ft.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',ft.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',ft.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',ft.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',ft.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',ft.STRING],oninit:[null,ft.FUNCTION],onwarning:[null,ft.FUNCTION],onerror:[null,ft.FUNCTION],onactivatefile:[null,ft.FUNCTION],oninitfile:[null,ft.FUNCTION],onaddfilestart:[null,ft.FUNCTION],onaddfileprogress:[null,ft.FUNCTION],onaddfile:[null,ft.FUNCTION],onprocessfilestart:[null,ft.FUNCTION],onprocessfileprogress:[null,ft.FUNCTION],onprocessfileabort:[null,ft.FUNCTION],onprocessfilerevert:[null,ft.FUNCTION],onprocessfile:[null,ft.FUNCTION],onprocessfiles:[null,ft.FUNCTION],onremovefile:[null,ft.FUNCTION],onpreparefile:[null,ft.FUNCTION],onupdatefiles:[null,ft.FUNCTION],onreorderfiles:[null,ft.FUNCTION],beforeDropFile:[null,ft.FUNCTION],beforeAddFile:[null,ft.FUNCTION],beforeRemoveFile:[null,ft.FUNCTION],beforePrepareFile:[null,ft.FUNCTION],stylePanelLayout:[null,ft.STRING],stylePanelAspectRatio:[null,ft.STRING],styleItemPanelAspectRatio:[null,ft.STRING],styleButtonRemoveItemPosition:["left",ft.STRING],styleButtonProcessItemPosition:["right",ft.STRING],styleLoadIndicatorPosition:["right",ft.STRING],styleProgressIndicatorPosition:["right",ft.STRING],styleButtonRemoveItemAlign:[!1,ft.BOOLEAN],files:[[],ft.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],ft.ARRAY]},Ca=(t,e)=>ro(e)?t[0]||null:Gs(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(n=>n.id===e)||null),i$=t=>{if(ro(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},Si=t=>t.filter(e=>!e.archived),_w={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let ld=null;const Pw=()=>{if(ld===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,ld=e.files.length===1}catch{ld=!1}return ld},Aw=[Fe.LOAD_ERROR,Fe.PROCESSING_ERROR,Fe.PROCESSING_REVERT_ERROR],Ow=[Fe.LOADING,Fe.PROCESSING,Fe.PROCESSING_QUEUED,Fe.INIT],Lw=[Fe.PROCESSING_COMPLETE],Dw=t=>Aw.includes(t.status),kw=t=>Ow.includes(t.status),Fw=t=>Lw.includes(t.status),$f=t=>dr(t.options.server)&&(dr(t.options.server.process)||Ma(t.options.server.process)),Bw=t=>({GET_STATUS:()=>{const e=Si(t.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:o,READY:a}=_w;return e.length===0?n:e.some(Dw)?r:e.some(kw)?i:e.some(Fw)?a:o},GET_ITEM:e=>Ca(t.items,e),GET_ACTIVE_ITEM:e=>Ca(Si(t.items),e),GET_ACTIVE_ITEMS:()=>Si(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const n=Ca(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:e=>{const n=Ca(t.items,e);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:i$(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>Si(t.items).filter(n=>n.status===e),GET_TOTAL_ITEMS:()=>Si(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&Pw()&&!$f(t),IS_ASYNC:()=>$f(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Nw=t=>{const e=Si(t.items).length;if(!t.options.allowMultiple)return e===0;const n=t.options.maxFiles;return n===null||e<n},o$=(t,e,n)=>Math.max(Math.min(n,t),e),Gw=(t,e,n)=>t.splice(e,0,n),zw=(t,e,n)=>ro(e)?null:typeof n>"u"?(t.push(e),e):(n=o$(n,0,t.length),Gw(t,n,e),e),lh=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),rc=t=>t.split("/").pop().split("?").shift(),lu=t=>t.split(".").pop(),Uw=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},xl=(t,e="")=>(e+t).slice(-e.length),a$=(t=new Date)=>`${t.getFullYear()}-${xl(t.getMonth()+1,"00")}-${xl(t.getDate(),"00")}_${xl(t.getHours(),"00")}-${xl(t.getMinutes(),"00")}-${xl(t.getSeconds(),"00")}`,As=(t,e,n=null,r=null)=>{const i=typeof n=="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return i.lastModifiedDate=new Date,t._relativePath&&(i._relativePath=t._relativePath),Or(e)||(e=a$()),e&&r===null&&lu(e)?i.name=e:(r=r||Uw(i.type),i.name=e+(r?"."+r:"")),i},Vw=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s$=(t,e)=>{const n=Vw();if(n){const r=new n;return r.append(t),r.getBlob(e)}return new Blob([t],{type:e})},Hw=(t,e)=>{const n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return s$(n,e)},l$=t=>(/^data:(.+);/.exec(t)||[])[1]||null,Ww=t=>t.split(",")[1].replace(/\s/g,""),qw=t=>atob(Ww(t)),jw=t=>{const e=l$(t),n=qw(t);return Hw(n,e)},Yw=(t,e,n)=>As(jw(t),e,null,n),Xw=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null},Zw=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Kw=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,Gh=t=>{const e={source:null,name:null,size:null},n=t.split(`
`);for(let r of n){const i=Xw(r);if(i){e.name=i;continue}const o=Zw(r);if(o){e.size=o;continue}const a=Kw(r);if(a){e.source=a;continue}}return e},Qw=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>e.progress,r=()=>{e.request&&e.request.abort&&e.request.abort()},i=()=>{const s=e.source;a.fire("init",s),s instanceof File?a.fire("load",s):s instanceof Blob?a.fire("load",As(s,s.name)):lh(s)?a.fire("load",Yw(s)):o(s)},o=s=>{if(!t){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(s,l=>{e.duration=Date.now()-e.timestamp,e.complete=!0,l instanceof Blob&&(l=As(l,l.name||rc(s))),a.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{a.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,c,d)=>{if(d&&(e.size=d),e.duration=Date.now()-e.timestamp,!l){e.progress=null;return}e.progress=c/d,a.fire("progress",e.progress)},()=>{a.fire("abort")},l=>{const c=Gh(typeof l=="string"?l:l.headers);a.fire("meta",{size:e.size||c.size,filename:c.name,source:c.source})})},a={...su(),setSource:s=>e.source=s,getProgress:n,abort:r,load:i};return a},bf=t=>/GET|HEAD/.test(t),Aa=(t,e,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,a.abort()}};let i=!1,o=!1;n={method:"POST",headers:{},withCredentials:!1,...n},e=encodeURI(e),bf(n.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const a=new XMLHttpRequest,s=bf(n.method)?a:a.upload;return s.onprogress=l=>{i||r.onprogress(l.lengthComputable,l.loaded,l.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||o||(o=!0,r.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?r.onload(a):r.onerror(a)},a.onerror=()=>r.onerror(a),a.onabort=()=>{i=!0,r.onabort()},a.ontimeout=()=>r.ontimeout(a),a.open(n.method,e,!0),Gs(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(l=>{const c=unescape(encodeURIComponent(n.headers[l]));a.setRequestHeader(l,c)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(t),r},zn=(t,e,n,r)=>({type:t,code:e,body:n,headers:r}),Oa=t=>e=>{t(zn("error",0,"Timeout",e.getAllResponseHeaders()))},Ef=t=>/\?/.test(t),Nl=(...t)=>{let e="";return t.forEach(n=>{e+=Ef(e)&&Ef(n)?n.replace(/\?/,"&"):n}),e},u1=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Or(e.url))return null;const n=e.onload||(i=>i),r=e.onerror||(i=>null);return(i,o,a,s,l,c)=>{const d=Aa(i,Nl(t,e.url),{...e,responseType:"blob"});return d.onload=u=>{const p=u.getAllResponseHeaders(),h=Gh(p).name||rc(i);o(zn("load",u.status,e.method==="HEAD"?null:As(n(u.response),h),p))},d.onerror=u=>{a(zn("error",u.status,r(u.response)||u.statusText,u.getAllResponseHeaders()))},d.onheaders=u=>{c(zn("headers",u.status,null,u.getAllResponseHeaders()))},d.ontimeout=Oa(a),d.onprogress=s,d.onabort=l,d}},ri={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},Jw=(t,e,n,r,i,o,a,s,l,c,d)=>{const u=[],{chunkTransferId:p,chunkServer:h,chunkSize:g,chunkRetryDelays:m}=d,$={serverId:p,aborted:!1},b=e.ondata||(O=>O),E=e.onload||((O,_)=>_==="HEAD"?O.getResponseHeader("Upload-Offset"):O.response),v=e.onerror||(O=>null),w=O=>{const _=new FormData;dr(i)&&_.append(n,JSON.stringify(i));const P=typeof e.headers=="function"?e.headers(r,i):{...e.headers,"Upload-Length":r.size},U={...e,headers:P},X=Aa(b(_),Nl(t,e.url),U);X.onload=k=>O(E(k,U.method)),X.onerror=k=>a(zn("error",k.status,v(k.response)||k.statusText,k.getAllResponseHeaders())),X.ontimeout=Oa(a)},T=O=>{const _=Nl(t,h.url,$.serverId),U={headers:typeof e.headers=="function"?e.headers($.serverId):{...e.headers},method:"HEAD"},X=Aa(null,_,U);X.onload=k=>O(E(k,U.method)),X.onerror=k=>a(zn("error",k.status,v(k.response)||k.statusText,k.getAllResponseHeaders())),X.ontimeout=Oa(a)},M=Math.floor(r.size/g);for(let O=0;O<=M;O++){const _=O*g,P=r.slice(_,_+g,"application/offset+octet-stream");u[O]={index:O,size:P.size,offset:_,data:P,file:r,progress:0,retries:[...m],status:ri.QUEUED,error:null,request:null,timeout:null}}const A=()=>o($.serverId),x=O=>O.status===ri.QUEUED||O.status===ri.ERROR,C=O=>{if($.aborted)return;if(O=O||u.find(x),!O){u.every(F=>F.status===ri.COMPLETE)&&A();return}O.status=ri.PROCESSING,O.progress=null;const _=h.ondata||(F=>F),P=h.onerror||(F=>null),U=Nl(t,h.url,$.serverId),X=typeof h.headers=="function"?h.headers(O):{...h.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":O.offset,"Upload-Length":r.size,"Upload-Name":r.name},k=O.request=Aa(_(O.data),U,{...h,headers:X});k.onload=()=>{O.status=ri.COMPLETE,O.request=null,y()},k.onprogress=(F,Q,rt)=>{O.progress=F?Q:null,S()},k.onerror=F=>{O.status=ri.ERROR,O.request=null,O.error=P(F.response)||F.statusText,H(O)||a(zn("error",F.status,P(F.response)||F.statusText,F.getAllResponseHeaders()))},k.ontimeout=F=>{O.status=ri.ERROR,O.request=null,H(O)||Oa(a)(F)},k.onabort=()=>{O.status=ri.QUEUED,O.request=null,l()}},H=O=>O.retries.length===0?!1:(O.status=ri.WAITING,clearTimeout(O.timeout),O.timeout=setTimeout(()=>{C(O)},O.retries.shift()),!0),S=()=>{const O=u.reduce((P,U)=>P===null||U.progress===null?null:P+U.progress,0);if(O===null)return s(!1,0,0);const _=u.reduce((P,U)=>P+U.size,0);s(!0,O,_)},y=()=>{u.filter(_=>_.status===ri.PROCESSING).length>=1||C()},L=()=>{u.forEach(O=>{clearTimeout(O.timeout),O.request&&O.request.abort()})};return $.serverId?T(O=>{$.aborted||(u.filter(_=>_.offset<O).forEach(_=>{_.status=ri.COMPLETE,_.progress=_.size}),y())}):w(O=>{$.aborted||(c(O),$.serverId=O,y())}),{abort:()=>{$.aborted=!0,L()}}},tx=(t,e,n,r)=>(i,o,a,s,l,c,d)=>{if(!i)return;const u=r.chunkUploads,p=u&&i.size>r.chunkSize,h=u&&(p||r.chunkForce);if(i instanceof Blob&&h)return Jw(t,e,n,i,o,a,s,l,c,d,r);const g=e.ondata||(T=>T),m=e.onload||(T=>T),$=e.onerror||(T=>null),b=typeof e.headers=="function"?e.headers(i,o)||{}:{...e.headers},E={...e,headers:b};var v=new FormData;dr(o)&&v.append(n,JSON.stringify(o)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(T=>{v.append(n,T.file,T.name===null?T.file.name:`${T.name}${T.file.name}`)});const w=Aa(g(v),Nl(t,e.url),E);return w.onload=T=>{a(zn("load",T.status,m(T.response),T.getAllResponseHeaders()))},w.onerror=T=>{s(zn("error",T.status,$(T.response)||T.statusText,T.getAllResponseHeaders()))},w.ontimeout=Oa(s),w.onprogress=l,w.onabort=c,w},ex=(t="",e,n,r)=>typeof e=="function"?(...i)=>e(n,...i,r):!e||!Or(e.url)?null:tx(t,e,n,r),Il=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Or(e.url))return(i,o)=>o();const n=e.onload||(i=>i),r=e.onerror||(i=>null);return(i,o,a)=>{const s=Aa(i,t+e.url,e);return s.onload=l=>{o(zn("load",l.status,n(l.response),l.getAllResponseHeaders()))},s.onerror=l=>{a(zn("error",l.status,r(l.response)||l.statusText,l.getAllResponseHeaders()))},s.ontimeout=Oa(a),s}},c$=(t=0,e=1)=>t+Math.random()*(e-t),nx=(t,e=1e3,n=0,r=25,i=250)=>{let o=null;const a=Date.now(),s=()=>{let l=Date.now()-a,c=c$(r,i);l+c>e&&(c=l+c-e);let d=l/e;if(d>=1||document.hidden){t(1);return}t(d),o=setTimeout(s,c)};return e>0&&s(),{clear:()=>{clearTimeout(o)}}},rx=(t,e)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=e,i=(d,u)=>{const p=()=>{n.duration===0||n.progress===null||c.fire("progress",c.getProgress())},h=()=>{n.complete=!0,c.fire("load-perceived",n.response.body)};c.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=nx(g=>{n.perceivedProgress=g,n.perceivedDuration=Date.now()-n.timestamp,p(),n.response&&n.perceivedProgress===1&&!n.complete&&h()},r?c$(750,1500):0),n.request=t(d,u,g=>{n.response=dr(g)?g:{type:"load",code:200,body:`${g}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,c.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&h()},g=>{n.perceivedPerformanceUpdater.clear(),c.fire("error",dr(g)?g:{type:"error",code:0,body:`${g}`})},(g,m,$)=>{n.duration=Date.now()-n.timestamp,n.progress=g?m/$:null,p()},()=>{n.perceivedPerformanceUpdater.clear(),c.fire("abort",n.response?n.response.body:null)},g=>{c.fire("transfer",g)})},o=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{o(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},s=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,l=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,c={...su(),process:i,abort:o,getProgress:s,getDuration:l,reset:a};return c},d$=t=>t.substring(0,t.lastIndexOf("."))||t,ix=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||lh(t)?e[0]=t.name||a$():lh(t)?(e[1]=t.length,e[2]=l$(t)):Or(t)&&(e[0]=rc(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},Os=t=>!!(t instanceof File||t instanceof Blob&&t.name),u$=t=>{if(!dr(t))return t;const e=iu(t)?[]:{};for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];e[n]=r&&dr(r)?u$(r):r}return e},ox=(t=null,e=null,n=null)=>{const r=Fh(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?Fe.PROCESSING_COMPLETE:Fe.INIT,activeLoader:null,activeProcessor:null};let o=null;const a={},s=x=>i.status=x,l=(x,...C)=>{i.released||i.frozen||M.fire(x,...C)},c=()=>lu(i.file.name),d=()=>i.file.type,u=()=>i.file.size,p=()=>i.file,h=(x,C,H)=>{if(i.source=x,M.fireSync("init"),i.file){M.fireSync("load-skip");return}i.file=ix(x),C.on("init",()=>{l("load-init")}),C.on("meta",S=>{i.file.size=S.size,i.file.filename=S.filename,S.source&&(t=cr.LIMBO,i.serverFileReference=S.source,i.status=Fe.PROCESSING_COMPLETE),l("load-meta")}),C.on("progress",S=>{s(Fe.LOADING),l("load-progress",S)}),C.on("error",S=>{s(Fe.LOAD_ERROR),l("load-request-error",S)}),C.on("abort",()=>{s(Fe.INIT),l("load-abort")}),C.on("load",S=>{i.activeLoader=null;const y=O=>{i.file=Os(O)?O:i.file,t===cr.LIMBO&&i.serverFileReference?s(Fe.PROCESSING_COMPLETE):s(Fe.IDLE),l("load")},L=O=>{i.file=S,l("load-meta"),s(Fe.LOAD_ERROR),l("load-file-error",O)};if(i.serverFileReference){y(S);return}H(S,y,L)}),C.setSource(x),i.activeLoader=C,C.load()},g=()=>{i.activeLoader&&i.activeLoader.load()},m=()=>{if(i.activeLoader){i.activeLoader.abort();return}s(Fe.INIT),l("load-abort")},$=(x,C)=>{if(i.processingAborted){i.processingAborted=!1;return}if(s(Fe.PROCESSING),o=null,!(i.file instanceof Blob)){M.on("load",()=>{$(x,C)});return}x.on("load",y=>{i.transferId=null,i.serverFileReference=y}),x.on("transfer",y=>{i.transferId=y}),x.on("load-perceived",y=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=y,s(Fe.PROCESSING_COMPLETE),l("process-complete",y)}),x.on("start",()=>{l("process-start")}),x.on("error",y=>{i.activeProcessor=null,s(Fe.PROCESSING_ERROR),l("process-error",y)}),x.on("abort",y=>{i.activeProcessor=null,i.serverFileReference=y,s(Fe.IDLE),l("process-abort"),o&&o()}),x.on("progress",y=>{l("process-progress",y)});const H=y=>{i.archived||x.process(y,{...a})},S=console.error;C(i.file,H,S),i.activeProcessor=x},b=()=>{i.processingAborted=!1,s(Fe.PROCESSING_QUEUED)},E=()=>new Promise(x=>{if(!i.activeProcessor){i.processingAborted=!0,s(Fe.IDLE),l("process-abort"),x();return}o=()=>{x()},i.activeProcessor.abort()}),v=(x,C)=>new Promise((H,S)=>{const y=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(y===null){H();return}x(y,()=>{i.serverFileReference=null,i.transferId=null,H()},L=>{if(!C){H();return}s(Fe.PROCESSING_REVERT_ERROR),l("process-revert-error"),S(L)}),s(Fe.IDLE),l("process-revert")}),w=(x,C,H)=>{const S=x.split("."),y=S[0],L=S.pop();let O=a;S.forEach(_=>O=O[_]),JSON.stringify(O[L])!==JSON.stringify(C)&&(O[L]=C,l("metadata-update",{key:y,value:a[y],silent:H}))},M={id:{get:()=>r},origin:{get:()=>t,set:x=>t=x},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>d$(i.file.name)},fileExtension:{get:c},fileType:{get:d},fileSize:{get:u},file:{get:p},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:x=>u$(x?a[x]:a),setMetadata:(x,C,H)=>{if(dr(x)){const S=x;return Object.keys(S).forEach(y=>{w(y,S[y],C)}),x}return w(x,C,H),C},extend:(x,C)=>A[x]=C,abortLoad:m,retryLoad:g,requestProcessing:b,abortProcessing:E,load:h,process:$,revert:v,...su(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},A=Fo(M);return A},ax=(t,e)=>ro(e)?0:Or(e)?t.findIndex(n=>n.id===e):-1,vf=(t,e)=>{const n=ax(t,e);if(!(n<0))return t[n]||null},wf=(t,e,n,r,i,o)=>{const a=Aa(null,t,{method:"GET",responseType:"blob"});return a.onload=s=>{const l=s.getAllResponseHeaders(),c=Gh(l).name||rc(t);e(zn("load",s.status,As(s.response,c),l))},a.onerror=s=>{n(zn("error",s.status,s.statusText,s.getAllResponseHeaders()))},a.onheaders=s=>{o(zn("headers",s.status,null,s.getAllResponseHeaders()))},a.ontimeout=Oa(n),a.onprogress=r,a.onabort=i,a},xf=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),sx=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&xf(location.href)!==xf(t),cd=t=>(...e)=>Ma(t)?t(...e):t,lx=t=>!Os(t.file),p1=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:Si(e.items)})},0)},If=(t,...e)=>new Promise(n=>{if(!t)return n(!0);const r=t(...e);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),h1=(t,e)=>{t.items.sort((n,r)=>e(Gr(n),Gr(r)))},ii=(t,e)=>({query:n,success:r=()=>{},failure:i=()=>{},...o}={})=>{const a=Ca(t.items,n);if(!a){i({error:zn("error",0,"Item not found"),file:null});return}e(a,r,i,o||{})},cx=(t,e,n)=>({ABORT_ALL:()=>{Si(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(a=>({source:a.source?a.source:a,options:a.options}));let o=Si(n.items);o.forEach(a=>{i.find(s=>s.source===a.source||s.source===a.file)||t("REMOVE_ITEM",{query:a,remove:!1})}),o=Si(n.items),i.forEach((a,s)=>{o.find(l=>l.source===a.source||l.file===a.source)||t("ADD_ITEM",{...a,interactionMethod:si.NONE,index:s})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:o})=>{o.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=vf(n.items,r);if(!e("IS_ASYNC")){Ti("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:e,action:i,change:o}).then(d=>{const u=e("GET_BEFORE_PREPARE_FILE");u&&(d=u(a,d)),d&&t("REQUEST_PREPARE_OUTPUT",{query:r,item:a,success:p=>{t("DID_PREPARE_OUTPUT",{id:r,file:p})}},!0)});return}a.origin===cr.LOCAL&&t("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const s=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:r})},32)},l=d=>{a.revert(Il(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(d?s:()=>{}).catch(()=>{})},c=d=>{a.abortProcessing().then(d?s:()=>{})};if(a.status===Fe.PROCESSING_COMPLETE)return l(n.options.instantUpload);if(a.status===Fe.PROCESSING)return c(n.options.instantUpload);n.options.instantUpload&&s()},0))},MOVE_ITEM:({query:r,index:i})=>{const o=Ca(n.items,r);if(!o)return;const a=n.items.indexOf(o);i=o$(i,0,n.items.length-1),a!==i&&n.items.splice(i,0,n.items.splice(a,1)[0])},SORT:({compare:r})=>{h1(n,r),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:o,success:a=()=>{},failure:s=()=>{}})=>{let l=i;if(i===-1||typeof i>"u"){const h=e("GET_ITEM_INSERT_LOCATION"),g=e("GET_TOTAL_ITEMS");l=h==="before"?0:g}const c=e("GET_IGNORED_FILES"),d=h=>Os(h)?!c.includes(h.name.toLowerCase()):!ro(h),p=r.filter(d).map(h=>new Promise((g,m)=>{t("ADD_ITEM",{interactionMethod:o,source:h.source||h,success:g,failure:m,index:l++,options:h.options||{}})}));Promise.all(p).then(a).catch(s)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:o,success:a=()=>{},failure:s=()=>{},options:l={}})=>{if(ro(r)){s({error:zn("error",0,"No source"),file:null});return}if(Os(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!Nw(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const E=zn("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:r,error:E}),s({error:E,file:null});return}const b=Si(n.items)[0];if(b.status===Fe.PROCESSING_COMPLETE||b.status===Fe.PROCESSING_REVERT_ERROR){const E=e("GET_FORCE_REVERT");if(b.revert(Il(n.options.server.url,n.options.server.revert),E).then(()=>{E&&t("ADD_ITEM",{source:r,index:i,interactionMethod:o,success:a,failure:s,options:l})}).catch(()=>{}),E)return}t("REMOVE_ITEM",{query:b.id})}const c=l.type==="local"?cr.LOCAL:l.type==="limbo"?cr.LIMBO:cr.INPUT,d=ox(c,c===cr.INPUT?null:r,l.file);Object.keys(l.metadata||{}).forEach(b=>{d.setMetadata(b,l.metadata[b])}),Ga("DID_CREATE_ITEM",d,{query:e,dispatch:t});const u=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=u==="before"?-1:n.items.length),zw(n.items,d,i),Ma(u)&&r&&h1(n,u);const p=d.id;d.on("init",()=>{t("DID_INIT_ITEM",{id:p})}),d.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:p})}),d.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:p})}),d.on("load-progress",b=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:b})}),d.on("load-request-error",b=>{const E=cd(n.options.labelFileLoadError)(b);if(b.code>=400&&b.code<500){t("DID_THROW_ITEM_INVALID",{id:p,error:b,status:{main:E,sub:`${b.code} (${b.body})`}}),s({error:b,file:Gr(d)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:b,status:{main:E,sub:n.options.labelTapToRetry}})}),d.on("load-file-error",b=>{t("DID_THROW_ITEM_INVALID",{id:p,error:b.status,status:b.status}),s({error:b.status,file:Gr(d)})}),d.on("load-abort",()=>{t("REMOVE_ITEM",{query:p})}),d.on("load-skip",()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:r,success:a}})}),d.on("load",()=>{const b=E=>{if(!E){t("REMOVE_ITEM",{query:p});return}d.on("metadata-update",v=>{t("DID_UPDATE_ITEM_METADATA",{id:p,change:v})}),Ti("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:e}).then(v=>{const w=e("GET_BEFORE_PREPARE_FILE");w&&(v=w(d,v));const T=()=>{t("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:r,success:a}}),p1(t,n)};if(v){t("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:M=>{t("DID_PREPARE_OUTPUT",{id:p,file:M}),T()}},!0);return}T()})};Ti("DID_LOAD_ITEM",d,{query:e,dispatch:t}).then(()=>{If(e("GET_BEFORE_ADD_FILE"),Gr(d)).then(b)}).catch(E=>{if(!E||!E.error||!E.status)return b(!1);t("DID_THROW_ITEM_INVALID",{id:p,error:E.error,status:E.status})})}),d.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:p})}),d.on("process-progress",b=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:b})}),d.on("process-error",b=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:b,status:{main:cd(n.options.labelFileProcessingError)(b),sub:n.options.labelTapToRetry}})}),d.on("process-revert-error",b=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:b,status:{main:cd(n.options.labelFileProcessingRevertError)(b),sub:n.options.labelTapToRetry}})}),d.on("process-complete",b=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:b}),t("DID_DEFINE_VALUE",{id:p,value:b})}),d.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:p})}),d.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:p}),t("DID_DEFINE_VALUE",{id:p,value:null})}),t("DID_ADD_ITEM",{id:p,index:i,interactionMethod:o}),p1(t,n);const{url:h,load:g,restore:m,fetch:$}=n.options.server||{};d.load(r,Qw(c===cr.INPUT?Or(r)&&sx(r)&&$?u1(h,$):wf:c===cr.LIMBO?u1(h,m):u1(h,g)),(b,E,v)=>{Ti("LOAD_FILE",b,{query:e}).then(E).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:o=()=>{}})=>{const a={error:zn("error",0,"Item not found"),file:null};if(r.archived)return o(a);Ti("PREPARE_OUTPUT",r.file,{query:e,item:r}).then(s=>{Ti("COMPLETE_PREPARE_OUTPUT",s,{query:e,item:r}).then(l=>{if(r.archived)return o(a);i(l)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:o,source:a}=i,s=e("GET_ITEM_INSERT_LOCATION");if(Ma(s)&&a&&h1(n,s),t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===cr.INPUT?null:a}),o(Gr(r)),r.origin===cr.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===cr.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:a}),t("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||a});return}e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:ii(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:ii(n,(r,i,o)=>{t("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:a=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:a}),i({file:r,output:a})},failure:o},!0)}),REQUEST_ITEM_PROCESSING:ii(n,(r,i,o)=>{if(!(r.status===Fe.IDLE||r.status===Fe.PROCESSING_ERROR)){const s=()=>t("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:o}),l=()=>document.hidden?s():setTimeout(s,32);r.status===Fe.PROCESSING_COMPLETE||r.status===Fe.PROCESSING_REVERT_ERROR?r.revert(Il(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(l).catch(()=>{}):r.status===Fe.PROCESSING&&r.abortProcessing().then(l);return}r.status!==Fe.PROCESSING_QUEUED&&(r.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),t("PROCESS_ITEM",{query:r,success:i,failure:o},!0))}),PROCESS_ITEM:ii(n,(r,i,o)=>{const a=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",Fe.PROCESSING).length===a){n.processingQueue.push({id:r.id,success:i,failure:o});return}if(r.status===Fe.PROCESSING)return;const l=()=>{const d=n.processingQueue.shift();if(!d)return;const{id:u,success:p,failure:h}=d,g=Ca(n.items,u);if(!g||g.archived){l();return}t("PROCESS_ITEM",{query:u,success:p,failure:h},!0)};r.onOnce("process-complete",()=>{i(Gr(r)),l();const d=n.options.server;if(n.options.instantUpload&&r.origin===cr.LOCAL&&Ma(d.remove)){const h=()=>{};r.origin=cr.LIMBO,n.options.server.remove(r.source,h,h)}e("GET_ITEMS_BY_STATUS",Fe.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",d=>{o({error:d,file:Gr(r)}),l()});const c=n.options;r.process(rx(ex(c.server.url,c.server.process,c.name,{chunkTransferId:r.transferId,chunkServer:c.server.patch,chunkUploads:c.chunkUploads,chunkForce:c.chunkForce,chunkSize:c.chunkSize,chunkRetryDelays:c.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(d,u,p)=>{Ti("PREPARE_OUTPUT",d,{query:e,item:r}).then(h=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:h}),u(h)}).catch(p)})}),RETRY_ITEM_PROCESSING:ii(n,r=>{t("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:ii(n,r=>{If(e("GET_BEFORE_REMOVE_FILE"),Gr(r)).then(i=>{i&&t("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:ii(n,r=>{r.release()}),REMOVE_ITEM:ii(n,(r,i,o,a)=>{const s=()=>{const c=r.id;vf(n.items,c).archive(),t("DID_REMOVE_ITEM",{error:null,id:c,item:r}),p1(t,n),i(Gr(r))},l=n.options.server;r.origin===cr.LOCAL&&l&&Ma(l.remove)&&a.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:r.id}),l.remove(r.source,()=>s(),c=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:zn("error",0,c,null),status:{main:cd(n.options.labelFileRemoveError)(c),sub:n.options.labelTapToRetry}})})):((a.revert&&r.origin!==cr.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Il(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),s())}),ABORT_ITEM_LOAD:ii(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:ii(n,r=>{if(r.serverId){t("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&t("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ii(n,r=>{if(!n.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:r});return}const i=s=>{s&&t("REVERT_ITEM_PROCESSING",{query:r})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return i(!0);const a=o(Gr(r));if(a==null)return i(!0);if(typeof a=="boolean")return i(a);typeof a.then=="function"&&a.then(i)}),REVERT_ITEM_PROCESSING:ii(n,r=>{r.revert(Il(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||lx(r))&&t("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),o=dx.filter(s=>i.includes(s));[...o,...Object.keys(r).filter(s=>!o.includes(s))].forEach(s=>{t(`SET_${au(s,"_").toUpperCase()}`,{value:r[s]})})}}),dx=["server"],zh=t=>t,io=t=>document.createElement(t),Hn=(t,e)=>{let n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},Tf=(t,e,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:t+n*Math.cos(i),y:e+n*Math.sin(i)}},ux=(t,e,n,r,i,o)=>{const a=Tf(t,e,n,i),s=Tf(t,e,n,r);return["M",a.x,a.y,"A",n,n,0,o,0,s.x,s.y].join(" ")},px=(t,e,n,r,i)=>{let o=1;return i>r&&i-r<=.5&&(o=0),r>i&&r-i>=.5&&(o=0),ux(t,e,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,o)},hx=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const n=qd("svg");t.ref.path=qd("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},mx=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const n=parseInt(Yn(t.ref.path,"stroke-width"),10),r=t.rect.element.width*.5;let i=0,o=0;e.spin?(i=0,o=.5):(i=0,o=e.progress);const a=px(r,r,r-n,i,o);Yn(t.ref.path,"d",a),Yn(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},Rf=Qn({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:hx,write:mx,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),fx=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},gx=({root:t,props:e})=>{const{isDisabled:n}=e,r=t.query("GET_DISABLED")||e.opacity===0;r&&!n?(e.isDisabled=!0,Yn(t.element,"disabled","disabled")):!r&&n&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},p$=Qn({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:fx,write:gx}),h$=(t,e=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:o="KB",labelMegabytes:a="MB",labelGigabytes:s="GB"}=r;t=Math.round(Math.abs(t));const l=n,c=n*n,d=n*n*n;return t<l?`${t} ${i}`:t<c?`${Math.floor(t/l)} ${o}`:t<d?`${Sf(t/c,1,e)} ${a}`:`${Sf(t/d,2,e)} ${s}`},Sf=(t,e,n)=>t.toFixed(e).split(".").filter(r=>r!=="0").join(n),yx=({root:t,props:e})=>{const n=io("span");n.className="filepond--file-info-main",Yn(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;const r=io("span");r.className="filepond--file-info-sub",t.appendChild(r),t.ref.fileSize=r,Hn(r,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Hn(n,zh(t.query("GET_ITEM_NAME",e.id)))},ch=({root:t,props:e})=>{Hn(t.ref.fileSize,h$(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Hn(t.ref.fileName,zh(t.query("GET_ITEM_NAME",e.id)))},Mf=({root:t,props:e})=>{if(Gs(t.query("GET_ITEM_SIZE",e.id))){ch({root:t,props:e});return}Hn(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},$x=Qn({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Dr({DID_LOAD_ITEM:ch,DID_UPDATE_ITEM_META:ch,DID_THROW_ITEM_LOAD_ERROR:Mf,DID_THROW_ITEM_INVALID:Mf}),didCreateView:t=>{Ga("CREATE_VIEW",{...t,view:t})},create:yx,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),m$=t=>Math.round(t*100),bx=({root:t})=>{const e=io("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const n=io("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,f$({root:t,action:{progress:null}})},f$=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${m$(e.progress)}%`;Hn(t.ref.main,n),Hn(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},Ex=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${m$(e.progress)}%`;Hn(t.ref.main,n),Hn(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},vx=({root:t})=>{Hn(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Hn(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},wx=({root:t})=>{Hn(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Hn(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},xx=({root:t})=>{Hn(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Hn(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},Cf=({root:t})=>{Hn(t.ref.main,""),Hn(t.ref.sub,"")},Tl=({root:t,action:e})=>{Hn(t.ref.main,e.status.main),Hn(t.ref.sub,e.status.sub)},Ix=Qn({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Dr({DID_LOAD_ITEM:Cf,DID_REVERT_ITEM_PROCESSING:Cf,DID_REQUEST_ITEM_PROCESSING:vx,DID_ABORT_ITEM_PROCESSING:wx,DID_COMPLETE_ITEM_PROCESSING:xx,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ex,DID_UPDATE_ITEM_LOAD_PROGRESS:f$,DID_THROW_ITEM_LOAD_ERROR:Tl,DID_THROW_ITEM_INVALID:Tl,DID_THROW_ITEM_PROCESSING_ERROR:Tl,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Tl,DID_THROW_ITEM_REMOVE_ERROR:Tl}),didCreateView:t=>{Ga("CREATE_VIEW",{...t,view:t})},create:bx,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),dh={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},uh=[];Pn(dh,t=>{uh.push(t)});const Yr=t=>{if(ph(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},Tx=t=>t.ref.buttonAbortItemLoad.rect.element.width,dd=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),Rx=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),Sx=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Mx=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),ph=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Cx={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Sx},processProgressIndicator:{opacity:0,align:Mx},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},_f={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Yr},status:{translateX:Yr}},m1={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},xs={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Yr},status:{translateX:Yr,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Yr},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:ph},info:{translateX:Yr},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:ph},buttonRemoveItem:{opacity:1},info:{translateX:Yr},status:{opacity:1,translateX:Yr}},DID_LOAD_ITEM:_f,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Yr},status:{translateX:Yr}},DID_START_ITEM_PROCESSING:m1,DID_REQUEST_ITEM_PROCESSING:m1,DID_UPDATE_ITEM_PROCESS_PROGRESS:m1,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Yr}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Yr},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:_f},_x=Qn({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Px=({root:t,props:e})=>{const n=Object.keys(dh).reduce((g,m)=>(g[m]={...dh[m]},g),{}),{id:r}=e,i=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),a=t.query("GET_ALLOW_PROCESS"),s=t.query("GET_INSTANT_UPLOAD"),l=t.query("IS_ASYNC"),c=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let d;l?a&&!i?d=g=>!/RevertItemProcessing/.test(g):!a&&i?d=g=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(g):!a&&!i&&(d=g=>!/Process/.test(g)):d=g=>!/Process/.test(g);const u=d?uh.filter(d):uh.concat();if(s&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!i){const g=xs.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=Rx,g.info.translateY=dd,g.status.translateY=dd,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(g=>{xs[g].status.translateY=dd}),xs.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Tx),c&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const g=xs.DID_COMPLETE_ITEM_PROCESSING;g.info.translateX=Yr,g.status.translateY=dd,g.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(n.RemoveItem.disabled=!0),Pn(n,(g,m)=>{const $=t.createChildView(p$,{label:t.query(m.label),icon:t.query(m.icon),opacity:0});u.includes(g)&&t.appendChildView($),m.disabled&&($.element.setAttribute("disabled","disabled"),$.element.setAttribute("hidden","hidden")),$.element.dataset.align=t.query(`GET_STYLE_${m.align}`),$.element.classList.add(m.className),$.on("click",b=>{b.stopPropagation(),!m.disabled&&t.dispatch(m.action,{query:r})}),t.ref[`button${g}`]=$}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(_x)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView($x,{id:r})),t.ref.status=t.appendChildView(t.createChildView(Ix,{id:r}));const p=t.appendChildView(t.createChildView(Rf,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));p.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=p;const h=t.appendChildView(t.createChildView(Rf,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=h,t.ref.activeStyles=[]},Ax=({root:t,actions:e,props:n})=>{Ox({root:t,actions:e,props:n});let r=e.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>xs[i.type]);if(r){t.ref.activeStyles=[];const i=xs[r.type];Pn(Cx,(o,a)=>{const s=t.ref[o];Pn(a,(l,c)=>{const d=i[o]&&typeof i[o][l]<"u"?i[o][l]:c;t.ref.activeStyles.push({control:s,key:l,value:d})})})}t.ref.activeStyles.forEach(({control:i,key:o,value:a})=>{i[o]=typeof a=="function"?a(t):a})},Ox=Dr({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),Lx=Qn({create:Px,write:Ax,didCreateView:t=>{Ga("CREATE_VIEW",{...t,view:t})},name:"file"}),Dx=({root:t,props:e})=>{t.ref.fileName=io("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(Lx,{id:e.id})),t.ref.data=!1},kx=({root:t,props:e})=>{Hn(t.ref.fileName,zh(t.query("GET_ITEM_NAME",e.id)))},Fx=Qn({create:Dx,ignoreRect:!0,write:Dr({DID_LOAD_ITEM:kx}),didCreateView:t=>{Ga("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),Pf={type:"spring",damping:.6,mass:7},Bx=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Pf},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Pf},styles:["translateY"]}}].forEach(n=>{Nx(t,n,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},Nx=(t,e,n)=>{const r=Qn({name:`panel-${e.name} filepond--${n}`,mixins:e.mixins,ignoreRectUpdate:!0}),i=t.createChildView(r,e.props);t.ref[e.name]=t.appendChildView(i)},Gx=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=K2(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const n=t.ref.top.rect.element,r=t.ref.bottom.rect.element,i=Math.max(n.height+r.height,e.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(i-n.height-r.height)/100,t.ref.bottom.translateY=i-r.height},g$=Qn({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:Gx,create:Bx,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),zx=t=>{const e=t.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>e.indexOf(r.id)}},Af={type:"spring",stiffness:.75,damping:.45,mass:10},Of="spring",Lf={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Ux=({root:t,props:e})=>{if(t.ref.handleClick=r=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(Fx,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(g$,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const o={x:r.pageX,y:r.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:r.offsetX,y:r.offsetY};const a=zx(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:a});const s=c=>{if(!c.isPrimary)return;c.stopPropagation(),c.preventDefault(),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!i&&(i=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:a})},l=c=>{c.isPrimary&&(document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l),e.dragOffset={x:c.pageX-o.x,y:c.pageY-o.y},t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:a}),i&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0))};document.addEventListener("pointermove",s),document.addEventListener("pointerup",l)};t.element.addEventListener("pointerdown",n)},Vx=Dr({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),Hx=Dr({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:n,shouldOptimize:r})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let i=e.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>Lf[a.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,t.element.dataset.filepondItemState=Lf[n.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?r||(t.height=t.rect.element.width*o):(Vx({root:t,actions:e,props:n}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),r&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),Wx=Qn({create:Ux,write:Hx,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Of,scaleY:Of,translateX:Af,translateY:Af,opacity:{type:"tween",duration:150}}}});var Uh=(t,e)=>Math.max(1,Math.floor((t+1)/e));const Vh=(t,e,n)=>{if(!n)return;const r=t.rect.element.width,i=e.length;let o=null;if(i===0||n.top<e[0].rect.element.top)return-1;const s=e[0].rect.element,l=s.marginLeft+s.marginRight,c=s.width+l,d=Uh(r,c);if(d===1){for(let h=0;h<i;h++){const g=e[h],m=g.rect.outer.top+g.rect.element.height*.5;if(n.top<m)return h}return i}const u=s.marginTop+s.marginBottom,p=s.height+u;for(let h=0;h<i;h++){const g=h%d,m=Math.floor(h/d),$=g*c,b=m*p,E=b-s.marginTop,v=$+c,w=b+p+s.marginBottom;if(n.top<w&&n.top>E){if(n.left<v)return h;h!==i-1?o=h:o=null}}return o!==null?o:i},ud={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)},setDimensions:function(t,e){(this.height===0||t===0)&&(this.height=t),(this.width===0||e===0)&&(this.width=e)}},qx=({root:t})=>{Yn(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},jx=({root:t,action:e})=>{const{id:n,index:r,interactionMethod:i}=e;t.ref.addIndex=r;const o=Date.now();let a=o,s=1;if(i!==si.NONE){s=0;const l=t.query("GET_ITEM_INSERT_INTERVAL"),c=o-t.ref.lastItemSpanwDate;a=c<l?o+(l-c):o}t.ref.lastItemSpanwDate=a,t.appendChildView(t.createChildView(Wx,{spawnDate:a,id:n,opacity:s,interactionMethod:i}),r)},Df=(t,e,n,r=0,i=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(t.opacity===0&&Yx(t,e,n,r,i),t.scaleX=1,t.scaleY=1,t.opacity=1))},Yx=(t,e,n,r,i)=>{t.interactionMethod===si.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===si.DROP?(t.translateX=null,t.translateX=e-r*20,t.translateY=null,t.translateY=n-i*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===si.BROWSE?(t.translateY=null,t.translateY=n-30):t.interactionMethod===si.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},Xx=({root:t,action:e})=>{const{id:n}=e,r=t.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},f1=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,Zx=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,Kx=({root:t,action:e})=>{const{id:n,dragState:r}=e,i=t.query("GET_ITEM",{id:n}),o=t.childViews.find($=>$.id===n),a=t.childViews.length,s=r.getItemIndex(i);if(!o)return;const l={x:o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,y:o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y},c=f1(o),d=Zx(o);let u=Math.floor(t.rect.outer.width/d);u>a&&(u=a);const p=Math.floor(a/u+1);ud.setHeight=c*p,ud.setWidth=d*u;var h={y:Math.floor(l.y/c),x:Math.floor(l.x/d),getGridIndex:function(){return l.y>ud.getHeight||l.y<0||l.x>ud.getWidth||l.x<0?s:this.y*u+this.x},getColIndex:function(){const b=t.query("GET_ACTIVE_ITEMS"),E=t.childViews.filter(S=>S.rect.element.height),v=b.map(S=>E.find(y=>y.id===S.id)),w=v.findIndex(S=>S===o),T=f1(o),M=v.length;let A=M,x=0,C=0,H=0;for(let S=0;S<M;S++)if(x=f1(v[S]),H=C,C=H+x,l.y<C){if(w>S){if(l.y<H+T){A=S;break}continue}A=S;break}return A}};const g=u>1?h.getGridIndex():h.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:g});const m=r.getIndex();if(m===void 0||m!==g){if(r.setIndex(g),m===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:s,target:g})}},Qx=Dr({DID_ADD_ITEM:jx,DID_REMOVE_ITEM:Xx,DID_DRAG_ITEM:Kx}),Jx=({root:t,props:e,actions:n,shouldOptimize:r})=>{Qx({root:t,props:e,actions:n});const{dragCoordinates:i}=e,o=t.rect.element.width,a=t.childViews.filter(v=>v.rect.element.height),s=t.query("GET_ACTIVE_ITEMS").map(v=>a.find(w=>w.id===v.id)).filter(v=>v),l=i?Vh(t,s,i):null,c=t.ref.addIndex||null;t.ref.addIndex=null;let d=0,u=0,p=0;if(s.length===0)return;const h=s[0].rect.element,g=h.marginTop+h.marginBottom,m=h.marginLeft+h.marginRight,$=h.width+m,b=h.height+g,E=Uh(o,$);if(E===1){let v=0,w=0;s.forEach((T,M)=>{if(l){let C=M-l;C===-2?w=-g*.25:C===-1?w=-g*.75:C===0?w=g*.75:C===1?w=g*.25:w=0}r&&(T.translateX=null,T.translateY=null),T.markedForRemoval||Df(T,0,v+w);let x=(T.rect.element.height+g)*(T.markedForRemoval?T.opacity:1);v+=x})}else{let v=0,w=0;s.forEach((T,M)=>{M===l&&(d=1),M===c&&(p+=1),T.markedForRemoval&&T.opacity<.5&&(u-=1);const A=M+p+d+u,x=A%E,C=Math.floor(A/E),H=x*$,S=C*b,y=Math.sign(H-v),L=Math.sign(S-w);v=H,w=S,!T.markedForRemoval&&(r&&(T.translateX=null,T.translateY=null),Df(T,H,S,y,L))})}},tI=(t,e)=>e.filter(n=>n.data&&n.data.id?t.id===n.data.id:!0),eI=Qn({create:qx,write:Jx,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:tI,mixins:{apis:["dragCoordinates"]}}),nI=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(eI)),e.dragCoordinates=null,e.overflowing=!1},rI=({root:t,props:e,action:n})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},iI=({props:t})=>{t.dragCoordinates=null},oI=Dr({DID_DRAG:rI,DID_END_DRAG:iI}),aI=({root:t,props:e,actions:n})=>{if(oI({root:t,props:e,actions:n}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const r=Math.round(e.overflow);r!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=r)}},sI=Qn({create:nI,write:aI,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Mi=(t,e,n,r="")=>{n?Yn(t,e,r):t.removeAttribute(e)},lI=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=io("form"),n=t.parentNode,r=t.nextSibling;e.appendChild(t),e.reset(),r?n.insertBefore(t,r):n.appendChild(t)}}},cI=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,Yn(t.element,"name",t.query("GET_NAME")),Yn(t.element,"aria-controls",`filepond--assistant-${e.id}`),Yn(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),y$({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),$$({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),b$({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),hh({root:t}),E$({root:t,action:{value:t.query("GET_REQUIRED")}}),v$({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=n=>{if(!t.element.value)return;const r=Array.from(t.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{e.onload(r),lI(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},y$=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Mi(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},$$=({root:t,action:e})=>{Mi(t.element,"multiple",e.value)},b$=({root:t,action:e})=>{Mi(t.element,"webkitdirectory",e.value)},hh=({root:t})=>{const e=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),r=e||!n;Mi(t.element,"disabled",r)},E$=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&Mi(t.element,"required",!0):Mi(t.element,"required",!1)},v$=({root:t,action:e})=>{Mi(t.element,"capture",!!e.value,e.value===!0?"":e.value)},kf=({root:t})=>{const{element:e}=t;t.query("GET_TOTAL_ITEMS")>0?(Mi(e,"required",!1),Mi(e,"name",!1)):(Mi(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&Mi(e,"required",!0))},dI=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},uI=Qn({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:cI,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:Dr({DID_LOAD_ITEM:kf,DID_REMOVE_ITEM:kf,DID_THROW_ITEM_INVALID:dI,DID_SET_DISABLED:hh,DID_SET_ALLOW_BROWSE:hh,DID_SET_ALLOW_DIRECTORIES_ONLY:b$,DID_SET_ALLOW_MULTIPLE:$$,DID_SET_ACCEPTED_FILE_TYPES:y$,DID_SET_CAPTURE_METHOD:v$,DID_SET_REQUIRED:E$})}),Ff={ENTER:13,SPACE:32},pI=({root:t,props:e})=>{const n=io("label");Yn(n,"for",`filepond--browser-${e.id}`),Yn(n,"id",`filepond--drop-label-${e.id}`),Yn(n,"aria-hidden","true"),t.ref.handleKeyDown=r=>{(r.keyCode===Ff.ENTER||r.keyCode===Ff.SPACE)&&(r.preventDefault(),t.ref.label.click())},t.ref.handleClick=r=>{r.target===n||n.contains(r.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),w$(n,e.caption),t.appendChild(n),t.ref.label=n},w$=(t,e)=>{t.innerHTML=e;const n=t.querySelector(".filepond--label-action");return n&&Yn(n,"tabindex","0"),e},hI=Qn({name:"drop-label",ignoreRect:!0,create:pI,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:Dr({DID_SET_LABEL_IDLE:({root:t,action:e})=>{w$(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),mI=Qn({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),fI=({root:t})=>{const e=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(mI,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:n}))},gI=({root:t,action:e})=>{if(!t.ref.blob){fI({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},yI=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},$I=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},bI=({root:t,props:e,actions:n})=>{EI({root:t,props:e,actions:n});const{blob:r}=t.ref;n.length===0&&r&&r.opacity===0&&(t.removeChildView(r),t.ref.blob=null)},EI=Dr({DID_DRAG:gI,DID_DROP:$I,DID_END_DRAG:yI}),vI=Qn({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:bI}),x$=(t,e)=>{try{const n=new DataTransfer;e.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),t.files=n.files}catch{return!1}return!0},wI=({root:t})=>t.ref.fields={},cu=(t,e)=>t.ref.fields[e],Hh=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},Bf=({root:t})=>Hh(t),xI=({root:t,action:e})=>{const i=!(t.query("GET_ITEM",e.id).origin===cr.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),o=io("input");o.type=i?"file":"hidden",o.name=t.query("GET_NAME"),o.disabled=t.query("GET_DISABLED"),t.ref.fields[e.id]=o,Hh(t)},II=({root:t,action:e})=>{const n=cu(t,e.id);if(!n||(e.serverFileReference!==null&&(n.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=t.query("GET_ITEM",e.id);x$(n,[r.file])},TI=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=cu(t,e.id);n&&x$(n,[e.file])},0)},RI=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},SI=({root:t,action:e})=>{const n=cu(t,e.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[e.id])},MI=({root:t,action:e})=>{const n=cu(t,e.id);n&&(e.value===null?n.removeAttribute("value"):n.value=e.value,Hh(t))},CI=Dr({DID_SET_DISABLED:RI,DID_ADD_ITEM:xI,DID_LOAD_ITEM:II,DID_REMOVE_ITEM:SI,DID_DEFINE_VALUE:MI,DID_PREPARE_OUTPUT:TI,DID_REORDER_ITEMS:Bf,DID_SORT_ITEMS:Bf}),_I=Qn({tag:"fieldset",name:"data",create:wI,write:CI,ignoreRect:!0}),PI=t=>"getRootNode"in t?t.getRootNode():document,AI=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],OI=["css","csv","html","txt"],LI={zip:"zip|compressed",epub:"application/epub+zip"},I$=(t="")=>(t=t.toLowerCase(),AI.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):OI.includes(t)?"text/"+t:LI[t]||""),Wh=t=>new Promise((e,n)=>{const r=UI(t);if(r.length&&!DI(t))return e(r);kI(t).then(e)}),DI=t=>t.files?t.files.length>0:!1,kI=t=>new Promise((e,n)=>{const r=(t.items?Array.from(t.items):[]).filter(i=>FI(i)).map(i=>BI(i));if(!r.length){e(t.files?Array.from(t.files):[]);return}Promise.all(r).then(i=>{const o=[];i.forEach(a=>{o.push.apply(o,a)}),e(o.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),FI=t=>{if(T$(t)){const e=qh(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},BI=t=>new Promise((e,n)=>{if(zI(t)){NI(qh(t)).then(e).catch(n);return}e([t.getAsFile()])}),NI=t=>new Promise((e,n)=>{const r=[];let i=0,o=0;const a=()=>{o===0&&i===0&&e(r)},s=l=>{i++;const c=l.createReader(),d=()=>{c.readEntries(u=>{if(u.length===0){i--,a();return}u.forEach(p=>{p.isDirectory?s(p):(o++,p.file(h=>{const g=GI(h);p.fullPath&&(g._relativePath=p.fullPath),r.push(g),o--,a()}))}),d()},n)};d()};s(t)}),GI=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,n=t.name,r=I$(lu(t.name));return r.length&&(t=t.slice(0,t.size,r),t.name=n,t.lastModifiedDate=e),t},zI=t=>T$(t)&&(qh(t)||{}).isDirectory,T$=t=>"webkitGetAsEntry"in t,qh=t=>t.webkitGetAsEntry(),UI=t=>{let e=[];try{if(e=HI(t),e.length)return e;e=VI(t)}catch{}return e},VI=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},HI=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Yd=[],La=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),WI=(t,e,n)=>{const r=qI(e),i={element:t,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},qI=t=>{const e=Yd.find(r=>r.element===t);if(e)return e;const n=jI(t);return Yd.push(n),n},jI=t=>{const e=[],n={dragenter:XI,dragover:ZI,dragleave:QI,drop:KI},r={};Pn(n,(o,a)=>{r[o]=a(t,e),t.addEventListener(o,r[o],!1)});const i={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),e.length===0&&(Yd.splice(Yd.indexOf(i),1),Pn(n,a=>{t.removeEventListener(a,r[a],!1)}))})};return i},YI=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),jh=(t,e)=>{const n=PI(e),r=YI(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return r===e||e.contains(r)};let R$=null;const pd=(t,e)=>{try{t.dropEffect=e}catch{}},XI=(t,e)=>n=>{n.preventDefault(),R$=n.target,e.forEach(r=>{const{element:i,onenter:o}=r;jh(n,i)&&(r.state="enter",o(La(n)))})},ZI=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;Wh(r).then(i=>{let o=!1;e.some(a=>{const{filterElement:s,element:l,onenter:c,onexit:d,ondrag:u,allowdrop:p}=a;pd(r,"copy");const h=p(i);if(!h){pd(r,"none");return}if(jh(n,l)){if(o=!0,a.state===null){a.state="enter",c(La(n));return}if(a.state="over",s&&!h){pd(r,"none");return}u(La(n))}else s&&!o&&pd(r,"none"),a.state&&(a.state=null,d(La(n)))})})},KI=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;Wh(r).then(i=>{e.forEach(o=>{const{filterElement:a,element:s,ondrop:l,onexit:c,allowdrop:d}=o;if(o.state=null,!(a&&!jh(n,s))){if(!d(i))return c(La(n));l(La(n),i)}})})},QI=(t,e)=>n=>{R$===n.target&&e.forEach(r=>{const{onexit:i}=r;r.state=null,i(La(n))})},JI=(t,e,n)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:o=d=>d}=n,a=WI(t,r?document.documentElement:t,i);let s="",l="";a.allowdrop=d=>e(o(d)),a.ondrop=(d,u)=>{const p=o(u);if(!e(p)){c.ondragend(d);return}l="drag-drop",c.onload(p,d)},a.ondrag=d=>{c.ondrag(d)},a.onenter=d=>{l="drag-over",c.ondragstart(d)},a.onexit=d=>{l="drag-exit",c.ondragend(d)};const c={updateHopperState:()=>{s!==l&&(t.dataset.hopperState=l,s=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return c};let mh=!1;const Ss=[],S$=t=>{const e=document.activeElement;if(e&&/textarea|input/i.test(e.nodeName)){let n=!1,r=e;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Wh(t.clipboardData).then(n=>{n.length&&Ss.forEach(r=>r(n))})},tT=t=>{Ss.includes(t)||(Ss.push(t),!mh&&(mh=!0,document.addEventListener("paste",S$)))},eT=t=>{Bh(Ss,Ss.indexOf(t)),Ss.length===0&&(document.removeEventListener("paste",S$),mh=!1)},nT=()=>{const t=n=>{e.onload(n)},e={destroy:()=>{eT(t)},onload:()=>{}};return tT(t),e},rT=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,Yn(t.element,"role","status"),Yn(t.element,"aria-live","polite"),Yn(t.element,"aria-relevant","additions")};let Nf=null,Gf=null;const g1=[],du=(t,e)=>{t.element.textContent=e},iT=t=>{t.element.textContent=""},M$=(t,e,n)=>{const r=t.query("GET_TOTAL_ITEMS");du(t,`${n} ${e}, ${r} ${r===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Gf),Gf=setTimeout(()=>{iT(t)},1500)},C$=t=>t.element.parentNode.contains(document.activeElement),oT=({root:t,action:e})=>{if(!C$(t))return;t.element.textContent="";const n=t.query("GET_ITEM",e.id);g1.push(n.filename),clearTimeout(Nf),Nf=setTimeout(()=>{M$(t,g1.join(", "),t.query("GET_LABEL_FILE_ADDED")),g1.length=0},750)},aT=({root:t,action:e})=>{if(!C$(t))return;const n=e.item;M$(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))},sT=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,i=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");du(t,`${r} ${i}`)},zf=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,i=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");du(t,`${r} ${i}`)},hd=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename;du(t,`${e.status.main} ${r} ${e.status.sub}`)},lT=Qn({create:rT,ignoreRect:!0,ignoreRectUpdate:!0,write:Dr({DID_LOAD_ITEM:oT,DID_REMOVE_ITEM:aT,DID_COMPLETE_ITEM_PROCESSING:sT,DID_ABORT_ITEM_PROCESSING:zf,DID_REVERT_ITEM_PROCESSING:zf,DID_THROW_ITEM_REMOVE_ERROR:hd,DID_THROW_ITEM_LOAD_ERROR:hd,DID_THROW_ITEM_INVALID:hd,DID_THROW_ITEM_PROCESSING_ERROR:hd}),tag:"span",name:"assistant"}),_$=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),n=>n.charAt(1).toUpperCase()),P$=(t,e=16,n=!0)=>{let r=Date.now(),i=null;return(...o)=>{clearTimeout(i);const a=Date.now()-r,s=()=>{r=Date.now(),t(...o)};a<e?n||(i=setTimeout(s,e-a)):s()}},cT=1e6,Xd=t=>t.preventDefault(),dT=({root:t,props:e})=>{const n=t.query("GET_ID");n&&(t.element.id=n);const r=t.query("GET_CLASS_NAME");r&&r.split(" ").filter(l=>l.length).forEach(l=>{t.element.classList.add(l)}),t.ref.label=t.appendChildView(t.createChildView(hI,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(sI,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(g$,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(lT,{...e})),t.ref.data=t.appendChildView(t.createChildView(_I,{...e})),t.ref.measure=io("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(l=>!ro(l.value)).map(({name:l,value:c})=>{t.element.dataset[l]=c}),t.ref.widthPrevious=null,t.ref.widthUpdated=P$(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!i&&(t.element.addEventListener("touchmove",Xd,{passive:!1}),t.element.addEventListener("gesturestart",Xd));const a=t.query("GET_CREDITS");if(a.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=a[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=a[1],t.element.appendChild(l),t.ref.credits=l}},uT=({root:t,props:e,actions:n})=>{if(gT({root:t,props:e,actions:n}),n.filter(M=>/^DID_SET_STYLE_/.test(M.type)).filter(M=>!ro(M.data.value)).map(({type:M,data:A})=>{const x=_$(M.substring(8).toLowerCase(),"_");t.element.dataset[x]=A.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let r=t.ref.bounds;r||(r=t.ref.bounds=mT(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:i,label:o,list:a,panel:s}=t.ref;i&&i.updateHopperState();const l=t.query("GET_PANEL_ASPECT_RATIO"),c=t.query("GET_ALLOW_MULTIPLE"),d=t.query("GET_TOTAL_ITEMS"),u=c?t.query("GET_MAX_FILES")||cT:1,p=d===u,h=n.find(M=>M.type==="DID_ADD_ITEM");if(p&&h){const M=h.data.interactionMethod;o.opacity=0,c?o.translateY=-40:M===si.API?o.translateX=40:M===si.BROWSE?o.translateY=40:o.translateY=30}else p||(o.opacity=1,o.translateX=0,o.translateY=0);const g=pT(t),m=hT(t),$=o.rect.element.height,b=!c||p?0:$,E=p?a.rect.element.marginTop:0,v=d===0?0:a.rect.element.marginBottom,w=b+E+m.visual+v,T=b+E+m.bounds+v;if(a.translateY=Math.max(0,b-a.rect.element.marginTop)-g.top,l){const M=t.rect.element.width,A=M*l;l!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=l,t.ref.updateHistory=[]);const x=t.ref.updateHistory;x.push(M);const C=2;if(x.length>C*2){const S=x.length,y=S-10;let L=0;for(let O=S;O>=y;O--)if(x[O]===x[O-2]&&L++,L>=C)return}s.scalable=!1,s.height=A;const H=A-b-(v-g.bottom)-(p?E:0);m.visual>H?a.overflow=H:a.overflow=null,t.height=A}else if(r.fixedHeight){s.scalable=!1;const M=r.fixedHeight-b-(v-g.bottom)-(p?E:0);m.visual>M?a.overflow=M:a.overflow=null}else if(r.cappedHeight){const M=w>=r.cappedHeight,A=Math.min(r.cappedHeight,w);s.scalable=!0,s.height=M?A:A-g.top-g.bottom;const x=A-b-(v-g.bottom)-(p?E:0);w>r.cappedHeight&&m.visual>x?a.overflow=x:a.overflow=null,t.height=Math.min(r.cappedHeight,T-g.top-g.bottom)}else{const M=d>0?g.top+g.bottom:0;s.scalable=!0,s.height=Math.max($,w-M),t.height=Math.max($,T-M)}t.ref.credits&&s.heightCurrent&&(t.ref.credits.style.transform=`translateY(${s.heightCurrent}px)`)},pT=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},hT=t=>{let e=0,n=0;const r=t.ref.list,i=r.childViews[0],o=i.childViews.filter(E=>E.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(E=>o.find(v=>v.id===E.id)).filter(E=>E);if(a.length===0)return{visual:e,bounds:n};const s=i.rect.element.width,l=Vh(i,a,r.dragCoordinates),c=a[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,h=c.height+d,g=typeof l<"u"&&l>=0?1:0,m=a.find(E=>E.markedForRemoval&&E.opacity<.45)?-1:0,$=a.length+g+m,b=Uh(s,p);return b===1?a.forEach(E=>{const v=E.rect.element.height+d;n+=v,e+=v*E.opacity}):(n=Math.ceil($/b)*h,e=n),{visual:e,bounds:n}},mT=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},Yh=(t,e)=>{const n=t.query("GET_ALLOW_REPLACE"),r=t.query("GET_ALLOW_MULTIPLE"),i=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const a=e.length;return!r&&a>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:zn("warning",0,"Max files")}),!0):(o=r?o:1,!r&&n?!1:Gs(o)&&i+a>o?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:zn("warning",0,"Max files")}),!0):!1)},fT=(t,e,n)=>{const r=t.childViews[0];return Vh(r,e,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Uf=t=>{const e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),r=e&&!n;if(r&&!t.ref.hopper){const i=JI(t.element,o=>{const a=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?o.every(l=>Ga("ALLOW_HOPPER_ITEM",l,{query:t.query}).every(c=>c===!0)&&a(l)):!0},{filterItems:o=>{const a=t.query("GET_IGNORED_FILES");return o.filter(s=>Os(s)?!a.includes(s.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});i.onload=(o,a)=>{const l=t.ref.list.childViews[0].childViews.filter(d=>d.rect.element.height),c=t.query("GET_ACTIVE_ITEMS").map(d=>l.find(u=>u.id===d.id)).filter(d=>d);Ti("ADD_ITEMS",o,{dispatch:t.dispatch}).then(d=>{if(Yh(t,d))return!1;t.dispatch("ADD_ITEMS",{items:d,index:fT(t.ref.list,c,a),interactionMethod:si.DROP})}),t.dispatch("DID_DROP",{position:a}),t.dispatch("DID_END_DRAG",{position:a})},i.ondragstart=o=>{t.dispatch("DID_START_DRAG",{position:o})},i.ondrag=P$(o=>{t.dispatch("DID_DRAG",{position:o})}),i.ondragend=o=>{t.dispatch("DID_END_DRAG",{position:o})},t.ref.hopper=i,t.ref.drip=t.appendChildView(t.createChildView(vI))}else!r&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Vf=(t,e)=>{const n=t.query("GET_ALLOW_BROWSE"),r=t.query("GET_DISABLED"),i=n&&!r;i&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(uI,{...e,onload:o=>{Ti("ADD_ITEMS",o,{dispatch:t.dispatch}).then(a=>{if(Yh(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:si.BROWSE})})}}),0):!i&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},Hf=t=>{const e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),r=e&&!n;r&&!t.ref.paster?(t.ref.paster=nT(),t.ref.paster.onload=i=>{Ti("ADD_ITEMS",i,{dispatch:t.dispatch}).then(o=>{if(Yh(t,o))return!1;t.dispatch("ADD_ITEMS",{items:o,index:-1,interactionMethod:si.PASTE})})}):!r&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},gT=Dr({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Vf(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{Uf(t)},DID_SET_ALLOW_PASTE:({root:t})=>{Hf(t)},DID_SET_DISABLED:({root:t,props:e})=>{Uf(t),Hf(t),Vf(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),yT=Qn({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:dT,write:uT,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Xd),t.element.removeEventListener("gesturestart",Xd)},mixins:{styles:["height"]}}),$T=(t={})=>{let e=null;const n=jd(),r=Lv(bw(n),[Bw,ww(n)],[cx,vw(n)]);r.dispatch("SET_OPTIONS",{options:t});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let o=null,a=!1,s=!1,l=null,c=null;const d=()=>{a||(a=!0),clearTimeout(o),o=setTimeout(()=>{a=!1,l=null,c=null,s&&(s=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",d);const u=yT(r,{id:Fh()});let p=!1,h=!1;const g={_read:()=>{a&&(c=window.innerWidth,l||(l=c),!s&&c!==l&&(r.dispatch("DID_START_RESIZE"),s=!0)),h&&p&&(p=u.element.offsetParent===null),!p&&(u._read(),h=u.rect.element.hidden)},_write:P=>{const U=r.processActionQueue().filter(X=>!/^SET_/.test(X.type));p&&!U.length||(E(U),p=u._write(P,U,s),Tw(r.query("GET_ITEMS")),p&&r.processDispatchQueue())}},m=P=>U=>{const X={type:P};if(!U)return X;if(U.hasOwnProperty("error")&&(X.error=U.error?{...U.error}:null),U.status&&(X.status={...U.status}),U.file&&(X.output=U.file),U.source)X.file=U.source;else if(U.item||U.id){const k=U.item?U.item:r.query("GET_ITEM",U.id);X.file=k?Gr(k):null}return U.items&&(X.items=U.items.map(Gr)),/progress/.test(P)&&(X.progress=U.progress),U.hasOwnProperty("origin")&&U.hasOwnProperty("target")&&(X.origin=U.origin,X.target=U.target),X},$={DID_DESTROY:m("destroy"),DID_INIT:m("init"),DID_THROW_MAX_FILES:m("warning"),DID_INIT_ITEM:m("initfile"),DID_START_ITEM_LOAD:m("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:m("addfileprogress"),DID_LOAD_ITEM:m("addfile"),DID_THROW_ITEM_INVALID:[m("error"),m("addfile")],DID_THROW_ITEM_LOAD_ERROR:[m("error"),m("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[m("error"),m("removefile")],DID_PREPARE_OUTPUT:m("preparefile"),DID_START_ITEM_PROCESSING:m("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:m("processfileprogress"),DID_ABORT_ITEM_PROCESSING:m("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:m("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:m("processfiles"),DID_REVERT_ITEM_PROCESSING:m("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[m("error"),m("processfile")],DID_REMOVE_ITEM:m("removefile"),DID_UPDATE_ITEMS:m("updatefiles"),DID_ACTIVATE_ITEM:m("activatefile"),DID_REORDER_ITEMS:m("reorderfiles")},b=P=>{const U={pond:_,...P};delete U.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${P.type}`,{detail:U,bubbles:!0,cancelable:!0,composed:!0}));const X=[];P.hasOwnProperty("error")&&X.push(P.error),P.hasOwnProperty("file")&&X.push(P.file);const k=["type","error","file"];Object.keys(P).filter(Q=>!k.includes(Q)).forEach(Q=>X.push(P[Q])),_.fire(P.type,...X);const F=r.query(`GET_ON${P.type.toUpperCase()}`);F&&F(...X)},E=P=>{P.length&&P.filter(U=>$[U.type]).forEach(U=>{const X=$[U.type];(Array.isArray(X)?X:[X]).forEach(k=>{U.type==="DID_INIT_ITEM"?b(k(U.data)):setTimeout(()=>{b(k(U.data))},0)})})},v=P=>r.dispatch("SET_OPTIONS",{options:P}),w=P=>r.query("GET_ACTIVE_ITEM",P),T=P=>new Promise((U,X)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:P,success:k=>{U(k)},failure:k=>{X(k)}})}),M=(P,U={})=>new Promise((X,k)=>{C([{source:P,options:U}],{index:U.index}).then(F=>X(F&&F[0])).catch(k)}),A=P=>P.file&&P.id,x=(P,U)=>(typeof P=="object"&&!A(P)&&!U&&(U=P,P=void 0),r.dispatch("REMOVE_ITEM",{...U,query:P}),r.query("GET_ACTIVE_ITEM",P)===null),C=(...P)=>new Promise((U,X)=>{const k=[],F={};if(iu(P[0]))k.push.apply(k,P[0]),Object.assign(F,P[1]||{});else{const Q=P[P.length-1];typeof Q=="object"&&!(Q instanceof Blob)&&Object.assign(F,P.pop()),k.push(...P)}r.dispatch("ADD_ITEMS",{items:k,index:F.index,interactionMethod:si.API,success:U,failure:X})}),H=()=>r.query("GET_ACTIVE_ITEMS"),S=P=>new Promise((U,X)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:P,success:k=>{U(k)},failure:k=>{X(k)}})}),y=(...P)=>{const U=Array.isArray(P[0])?P[0]:P,X=U.length?U:H();return Promise.all(X.map(T))},L=(...P)=>{const U=Array.isArray(P[0])?P[0]:P;if(!U.length){const X=H().filter(k=>!(k.status===Fe.IDLE&&k.origin===cr.LOCAL)&&k.status!==Fe.PROCESSING&&k.status!==Fe.PROCESSING_COMPLETE&&k.status!==Fe.PROCESSING_REVERT_ERROR);return Promise.all(X.map(S))}return Promise.all(U.map(S))},O=(...P)=>{const U=Array.isArray(P[0])?P[0]:P;let X;typeof U[U.length-1]=="object"?X=U.pop():Array.isArray(P[0])&&(X=P[1]);const k=H();return U.length?U.map(Q=>Sa(Q)?k[Q]?k[Q].id:null:Q).filter(Q=>Q).map(Q=>x(Q,X)):Promise.all(k.map(Q=>x(Q,X)))},_={...su(),...g,...Ew(r,n),setOptions:v,addFile:M,addFiles:C,getFile:w,processFile:S,prepareFile:T,removeFile:x,moveFile:(P,U)=>r.dispatch("MOVE_ITEM",{query:P,index:U}),getFiles:H,processFiles:L,removeFiles:O,prepareFiles:y,sort:P=>r.dispatch("SORT",{compare:P}),browse:()=>{var P=u.element.querySelector("input[type=file]");P&&P.click()},destroy:()=>{_.fire("destroy",u.element),r.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:P=>hf(u.element,P),insertAfter:P=>mf(u.element,P),appendTo:P=>P.appendChild(u.element),replaceElement:P=>{hf(u.element,P),P.parentNode.removeChild(P),e=P},restoreElement:()=>{e&&(mf(e,u.element),u.element.parentNode.removeChild(u.element),e=null)},isAttachedTo:P=>u.element===P||e===P,element:{get:()=>u.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Fo(_)},A$=(t={})=>{const e={};return Pn(jd(),(r,i)=>{e[r]=i[0]}),$T({...e,...t})},bT=t=>t.charAt(0).toLowerCase()+t.slice(1),ET=t=>_$(t.replace(/^data-/,"")),O$=(t,e)=>{Pn(e,(n,r)=>{Pn(t,(i,o)=>{const a=new RegExp(n);if(!a.test(i)||(delete t[i],r===!1))return;if(Or(r)){t[r]=o;return}const l=r.group;dr(r)&&!t[l]&&(t[l]={}),t[l][bT(i.replace(a,""))]=o}),r.mapping&&O$(t[r.group],r.mapping)})},vT=(t,e={})=>{const n=[];Pn(t.attributes,i=>{n.push(t.attributes[i])});const r=n.filter(i=>i.name).reduce((i,o)=>{const a=Yn(t,o.name);return i[ET(o.name)]=a===o.name?!0:a,i},{});return O$(r,e),r},wT=(t,e={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ga("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...e},i=vT(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(i).forEach(a=>{dr(i[a])?(dr(r[a])||(r[a]={}),Object.assign(r[a],i[a])):r[a]=i[a]}),r.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const o=A$(r);return t.files&&Array.from(t.files).forEach(a=>{o.addFile(a)}),o.replaceElement(t),o},xT=(...t)=>Ov(t[0])?wT(...t):A$(...t),IT=["fire","_read","_write"],Wf=t=>{const e={};return e$(t,e,IT),e},TT=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>e[r]),RT=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);return{transfer:(i,o)=>{},post:(i,o,a)=>{const s=Fh();r.onmessage=l=>{l.data.id===s&&o(l.data.message)},r.postMessage({id:s,message:i},a)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},ST=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>{e(r)},r.onerror=i=>{n(i)},r.src=t}),L$=(t,e)=>{const n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},MT=t=>L$(t,t.name),qf=[],CT=t=>{if(qf.includes(t))return;qf.push(t);const e=t({addFilter:Sw,utils:{Type:ft,forin:Pn,isString:Or,isFile:Os,toNaturalFileSize:h$,replaceInString:TT,getExtensionFromFilename:lu,getFilenameWithoutExtension:d$,guesstimateMimeType:I$,getFileFromBlob:As,getFilenameFromURL:rc,createRoute:Dr,createWorker:RT,createView:Qn,createItemAPI:Gr,loadImage:ST,copyFile:MT,renameFile:L$,createBlob:s$,applyFilterChain:Ti,text:Hn,getNumericAspectRatioFromString:i$},views:{fileActionButton:p$}});Mw(e.options)},_T=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",PT=()=>"Promise"in window,AT=()=>"slice"in Blob.prototype,OT=()=>"URL"in window&&"createObjectURL"in window.URL,LT=()=>"visibilityState"in document,DT=()=>"performance"in window,kT=()=>"supports"in(window.CSS||{}),FT=()=>/MSIE|Trident/.test(window.navigator.userAgent),fh=(()=>{const t=X2()&&!_T()&&LT()&&PT()&&AT()&&OT()&&DT()&&(kT()||FT());return()=>t})(),Po={apps:[]},BT="filepond",za=()=>{};let Zd={},Ld=za,y1=za,jf=za,Yf=za,gh=za,Xf=za,Zf=za;if(fh()){ow(()=>{Po.apps.forEach(n=>n._read())},n=>{Po.apps.forEach(r=>r._write(n))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:fh,create:Ld,destroy:y1,parse:jf,find:Yf,registerPlugin:gh,setOptions:Zf}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Pn(jd(),(n,r)=>{Zd[n]=r[1]});Zd={},e(),Ld=(...n)=>{const r=xT(...n);return r.on("destroy",y1),Po.apps.push(r),Wf(r)},y1=n=>{const r=Po.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(Po.apps.splice(r,1)[0].restoreElement(),!0):!1},jf=n=>Array.from(n.querySelectorAll(`.${BT}`)).filter(o=>!Po.apps.find(a=>a.isAttachedTo(o))).map(o=>Ld(o)),Yf=n=>{const r=Po.apps.find(i=>i.isAttachedTo(n));return r?Wf(r):null},gh=(...n)=>{n.forEach(CT),e()},Xf=()=>{const n={};return Pn(jd(),(r,i)=>{n[r]=i[0]}),n},Zf=n=>(dr(n)&&(Po.apps.forEach(r=>{r.setOptions(n)}),Cw(n)),Xf())}/*!
 * vue-filepond v7.0.4
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2023 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const NT=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],GT=fh(),zT=t=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[t],md={},$1=[],b1=[];let UT={};const VT=(...t)=>{gh(...t),$1.length=0;for(const e in Zd){if(/^on/.test(e)){$1.push(e);continue}let n=[String,zT(Zd[e])];e=="labelFileProcessingError"&&n.push(Function),md[e]={type:n,default:void 0}}return{name:"FilePond",props:md,render(){const e=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[r,i])=>(i!==void 0&&(n[r]=i),n),{});return af("div",{class:{"filepond--wrapper":!0}},[af("input",e)])},created(){this.watchers=Object.keys(md).map(e=>this.$watch(e,n=>{this._pond&&(this._pond[e]=n)}))},mounted(){if(!GT)return;this._element=this.$el.querySelector("input");const e=$1.reduce((r,i)=>(r[i]=(...o)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...o)},r),{}),n={};Object.keys(md).forEach(r=>{this[r]!==void 0&&(n[r]=this[r])}),this._pond=Ld(this._element,Object.assign({},UT,e,n)),Object.keys(this._pond).filter(r=>!NT.includes(r)).forEach(r=>{this[r]=this._pond[r]}),b1.push(this._pond)},beforeUnmount(){const{detached:e}=this.$options;if(!this.$el.offsetParent){e.call(this);return}const n=(i,o)=>{const s=((i[0]||{}).removedNodes||[])[0];!s||!s.contains(this.$el)||(o.disconnect(),e.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const e=b1.indexOf(this._pond);e>=0&&b1.splice(e,1),this._pond=null}}};/*!
 * FilePondPluginFilePoster 2.5.1
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Kf={type:"spring",stiffness:.5,damping:.45,mass:10},HT=t=>t.utils.createView({name:"file-poster",tag:"div",ignoreRect:!0,create:({root:e})=>{e.ref.image=document.createElement("img"),e.element.appendChild(e.ref.image)},write:t.utils.createRoute({DID_FILE_POSTER_LOAD:({root:e,props:n})=>{const{id:r}=n,i=e.query("GET_ITEM",{id:n.id});if(!i)return;const o=i.getMetadata("poster");e.ref.image.src=o,e.dispatch("DID_FILE_POSTER_DRAW",{id:r})}}),mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:Kf,scaleY:Kf,opacity:{type:"tween",duration:750}}}}),WT=(t,e)=>{e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0)},qT=t=>t.utils.createView({name:"file-poster-overlay",tag:"canvas",ignoreRect:!0,create:({root:e,props:n})=>{WT(n.template,e.element)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),jT=(t,e)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,e(r,i)},n.src=t},YT=t=>-.5*(Math.cos(Math.PI*t)-1),XT=(t,e,n=1,r=YT,i=10,o=0)=>{const a=1-o,s=e.join(",");for(let l=0;l<=i;l++){const c=l/i,d=o+a*c;t.addColorStop(d,`rgba(${s}, ${r(c)*n})`)}},ZT=10,KT=10,QT=t=>{const e=Math.min(ZT/t.width,KT/t.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(t.width*e),o=n.height=Math.ceil(t.height*e);r.drawImage(t,0,0,i,o);let a=null;try{a=r.getImageData(0,0,i,o).data}catch{return null}const s=a.length;let l=0,c=0,d=0,u=0;for(;u<s;u+=4)l+=a[u]*a[u],c+=a[u+1]*a[u+1],d+=a[u+2]*a[u+2];return l=E1(l,s),c=E1(c,s),d=E1(d,s),{r:l,g:c,b:d}},E1=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),Ms=(t,e,n,r,i)=>{t.width=e,t.height=n;const o=t.getContext("2d"),a=e*.5,s=o.createRadialGradient(a,n+110,n-100,a,n+110,n+100);XT(s,r,i,void 0,8,.4),o.save(),o.translate(-e*.5,0),o.scale(2,1),o.fillStyle=s,o.fillRect(0,0,e,n),o.restore()},uu=typeof navigator<"u",Cs=500,_s=200,yh=uu&&document.createElement("canvas"),$h=uu&&document.createElement("canvas"),bh=uu&&document.createElement("canvas");let Dd=[40,40,40],kd=[196,78,71],Fd=[54,151,99];uu&&(Ms(yh,Cs,_s,Dd,.85),Ms($h,Cs,_s,kd,1),Ms(bh,Cs,_s,Fd,1));const JT=(t,e)=>new Promise((n,r)=>{const i=new Image;typeof crossOrigin=="string"&&(i.crossOrigin=e),i.onload=()=>{n(i)},i.onerror=o=>{r(o)},i.src=t}),tR=t=>{const e=qT(t),n=({root:c,props:d})=>{const{id:u}=d,p=c.query("GET_ITEM",u);if(!p)return;const h=p.getMetadata("poster"),g=m=>{const $=c.query("GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR")?QT(m):null;p.setMetadata("color",$,!0),c.dispatch("DID_FILE_POSTER_LOAD",{id:u,data:m})};jT(h,(m,$)=>{c.dispatch("DID_FILE_POSTER_CALCULATE_SIZE",{id:u,width:m,height:$}),JT(h,c.query("GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE")).then(g)})},r=({root:c})=>{c.ref.overlayShadow.opacity=1},i=({root:c})=>{const{image:d}=c.ref;d.scaleX=1,d.scaleY=1,d.opacity=1},o=({root:c})=>{c.ref.overlayShadow.opacity=1,c.ref.overlayError.opacity=0,c.ref.overlaySuccess.opacity=0},a=({root:c})=>{c.ref.overlayShadow.opacity=.25,c.ref.overlayError.opacity=1},s=({root:c})=>{c.ref.overlayShadow.opacity=.25,c.ref.overlaySuccess.opacity=1},l=({root:c,props:d})=>{const u=c.query("GET_FILE_POSTER_ITEM_OVERLAY_SHADOW_COLOR"),p=c.query("GET_FILE_POSTER_ITEM_OVERLAY_ERROR_COLOR"),h=c.query("GET_FILE_POSTER_ITEM_OVERLAY_SUCCESS_COLOR");u&&u!==Dd&&(Dd=u,Ms(yh,Cs,_s,Dd,.85)),p&&p!==kd&&(kd=p,Ms($h,Cs,_s,kd,1)),h&&h!==Fd&&(Fd=h,Ms(bh,Cs,_s,Fd,1));const g=HT(t);c.ref.image=c.appendChildView(c.createChildView(g,{id:d.id,scaleX:1.25,scaleY:1.25,opacity:0})),c.ref.overlayShadow=c.appendChildView(c.createChildView(e,{template:yh,opacity:0})),c.ref.overlaySuccess=c.appendChildView(c.createChildView(e,{template:bh,opacity:0})),c.ref.overlayError=c.appendChildView(c.createChildView(e,{template:$h,opacity:0}))};return t.utils.createView({name:"file-poster-wrapper",create:l,write:t.utils.createRoute({DID_FILE_POSTER_LOAD:r,DID_FILE_POSTER_DRAW:i,DID_FILE_POSTER_CONTAINER_CREATE:n,DID_THROW_ITEM_LOAD_ERROR:a,DID_THROW_ITEM_PROCESSING_ERROR:a,DID_THROW_ITEM_INVALID:a,DID_COMPLETE_ITEM_PROCESSING:s,DID_START_ITEM_PROCESSING:o,DID_REVERT_ITEM_PROCESSING:o})})},D$=t=>{const{addFilter:e,utils:n}=t,{Type:r,createRoute:i}=n,o=tR(t);return e("CREATE_VIEW",a=>{const{is:s,view:l,query:c}=a;if(!s("file")||!c("GET_ALLOW_FILE_POSTER"))return;const d=({root:m,props:$})=>{p(m,$)},u=({root:m,props:$,action:b})=>{/poster/.test(b.change.key)&&p(m,$)},p=(m,$)=>{const{id:b}=$,E=c("GET_ITEM",b);!E||!E.getMetadata("poster")||E.archived||m.ref.previousPoster!==E.getMetadata("poster")&&(m.ref.previousPoster=E.getMetadata("poster"),c("GET_FILE_POSTER_FILTER_ITEM")(E)&&(m.ref.filePoster&&l.removeChildView(m.ref.filePoster),m.ref.filePoster=l.appendChildView(l.createChildView(o,{id:b})),m.dispatch("DID_FILE_POSTER_CONTAINER_CREATE",{id:b})))},h=({root:m,action:$})=>{m.ref.filePoster&&(m.ref.imageWidth=$.width,m.ref.imageHeight=$.height,m.ref.shouldUpdatePanelHeight=!0,m.dispatch("KICK"))},g=({root:m})=>{let $=m.query("GET_FILE_POSTER_HEIGHT");if($)return $;const b=m.query("GET_FILE_POSTER_MIN_HEIGHT"),E=m.query("GET_FILE_POSTER_MAX_HEIGHT");if(b&&m.ref.imageHeight<b)return b;let v=m.rect.element.width*(m.ref.imageHeight/m.ref.imageWidth);return b&&v<b?b:E&&v>E?E:v};l.registerWriter(i({DID_LOAD_ITEM:d,DID_FILE_POSTER_CALCULATE_SIZE:h,DID_UPDATE_ITEM_METADATA:u},({root:m,props:$})=>{m.ref.filePoster&&(m.rect.element.hidden||m.ref.shouldUpdatePanelHeight&&(m.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:$.id,height:g({root:m})}),m.ref.shouldUpdatePanelHeight=!1))}))}),{options:{allowFilePoster:[!0,r.BOOLEAN],filePosterHeight:[null,r.INT],filePosterMinHeight:[null,r.INT],filePosterMaxHeight:[null,r.INT],filePosterFilterItem:[()=>!0,r.FUNCTION],filePosterCalculateAverageImageColor:[!1,r.BOOLEAN],filePosterCrossOriginAttributeValue:["Anonymous",r.STRING],filePosterItemOverlayShadowColor:[null,r.ARRAY],filePosterItemOverlayErrorColor:[null,r.ARRAY],filePosterItemOverlaySuccessColor:[null,r.ARRAY]}}},eR=typeof window<"u"&&typeof window.document<"u";eR&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:D$}));const k$=t=>t instanceof File,F$=t=>/^image/.test(t.type),Xh=(t,e,n=[])=>{const r=document.createElement(t),i=Object.getOwnPropertyDescriptors(r.__proto__);for(const o in e)o==="style"?r.style.cssText=e[o]:i[o]&&i[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?r[o]=e[o]:r.setAttribute(o,e[o]);return n.forEach(o=>r.appendChild(o)),r};let v1=null;const zs=()=>(v1===null&&(v1=typeof window<"u"&&typeof window.document<"u"),v1),nR=zs()&&!!Node.prototype.replaceChildren,rR=nR?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},fd=zs()&&Xh("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let Qf;const iR=t=>(rR(fd,t),fd.parentNode||document.body.append(fd),clearTimeout(Qf),Qf=setTimeout(()=>{fd.remove()},500),t);let w1=null;const oR=()=>(w1===null&&(w1=zs()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),w1),aR=t=>new Promise((e,n)=>{let r=!1;!t.parentNode&&oR()&&(r=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",iR(t));const i=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(r&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),n(a)};const o=setInterval(i,1);i()}),sR=t=>new Promise((e,n)=>{const r=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=()=>n(t.error)}),lR=t=>typeof t=="string",cR=t=>new Promise(e=>{const n=lR(t)?t:URL.createObjectURL(t),r=()=>{const o=new Image;o.src=n,e(o)};if(t instanceof Blob&&F$(t))return r();const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>e(i),i.onerror=r,i.src=n}),dR=t=>t.nodeName==="VIDEO",uR=async t=>{let e;t.src?e=t:e=await cR(t);let n;try{n=dR(e)?await sR(e):await aR(e)}finally{k$(t)&&URL.revokeObjectURL(e.src)}return n},pR=t=>t instanceof Blob&&!(t instanceof File),Jf=(...t)=>{},B$=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)};let Rl=null;const hR=()=>{if(Rl===null)if("WebGL2RenderingContext"in window){let t;try{t=Xh("canvas"),Rl=!!t.getContext("webgl2")}catch{Rl=!1}t&&B$(t),t=void 0}else Rl=!1;return Rl},mR=(t,e)=>hR()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);let x1=null;const fR=()=>{if(x1===null){let t=Xh("canvas");x1=!!mR(t),B$(t),t=void 0}return x1},gR=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",yR=()=>"Promise"in window,$R=()=>"URL"in window&&"createObjectURL"in window.URL,bR=()=>"visibilityState"in document,ER=()=>"performance"in window,vR=()=>"File"in window;let I1=null;const tg=()=>(I1===null&&(I1=zs()&&!gR()&&bR()&&yR()&&vR()&&$R()&&ER()),I1),N$=t=>{const{addFilter:e,utils:n,views:r}=t,{Type:i,createRoute:o}=n,{fileActionButton:a}=r,s=(({parallel:m=1,autoShift:$=!0})=>{const b=[];let E=0;const v=()=>{if(!b.length)return T.oncomplete();E++,b.shift()(()=>{E--,E<m&&w()})},w=()=>{for(let M=0;M<m-E;M++)v()},T={queue:M=>{b.push(M),$&&w()},runJobs:w,oncomplete:()=>{}};return T})({parallel:1}),l=m=>m===null?{}:m;e("SHOULD_REMOVE_ON_REVERT",(m,{item:$,query:b})=>new Promise(E=>{const{file:v}=$,w=b("GET_ALLOW_IMAGE_EDITOR")&&b("GET_IMAGE_EDITOR_ALLOW_EDIT")&&b("GET_IMAGE_EDITOR_SUPPORT_EDIT")&&b("GET_IMAGE_EDITOR_SUPPORT_IMAGE")(v);E(!w)})),e("DID_LOAD_ITEM",(m,{query:$,dispatch:b})=>new Promise((E,v)=>{if(m.origin>1){E(m);return}const{file:w}=m;if(!$("GET_ALLOW_IMAGE_EDITOR")||!$("GET_IMAGE_EDITOR_INSTANT_EDIT")||!$("GET_IMAGE_EDITOR_SUPPORT_IMAGE")(w))return E(m);const T=()=>{if(!c.length)return;const{item:A,resolve:x,reject:C}=c[0];b("EDIT_ITEM",{id:A.id,handleEditorResponse:M(A,x,C)})},M=(A,x,C)=>H=>{c.shift(),H?x(A):C(A),b("KICK"),T()};d({item:m,resolve:E,reject:v}),c.length===1&&T()})),e("DID_CREATE_ITEM",(m,{query:$,dispatch:b})=>{m.getMetadata("color")&&m.setMetadata("colors",m.getMetadata("color")),m.extend("edit",()=>{b("EDIT_ITEM",{id:m.id})})});const c=[],d=m=>(c.push(m),m),u=m=>{const{imageProcessor:$,imageReader:b,imageWriter:E}=l(m("GET_IMAGE_EDITOR"));return m("GET_IMAGE_EDITOR_WRITE_IMAGE")&&m("GET_IMAGE_EDITOR_SUPPORT_WRITE_IMAGE")&&$&&b&&E},p=(m,$)=>{const b=m("GET_FILE_POSTER_HEIGHT"),E=m("GET_FILE_POSTER_MAX_HEIGHT");return b?($.width=b*2,$.height=b*2):E&&($.width=E*2,$.height=E*2),$},h=(m,$,b=()=>{})=>{if(!$)return;if(!m("GET_FILE_POSTER_FILTER_ITEM")($))return b();const{imageProcessor:E,imageReader:v,imageWriter:w,editorOptions:T,legacyDataToImageState:M,imageState:A}=l(m("GET_IMAGE_EDITOR"));if(!E)return;const[x,C]=v,[H=Jf,S]=w,y=$.file,L=$.getMetadata("imageState"),O=p(m,{width:512,height:512}),_={...T,imageReader:x(C),imageWriter:H({...S||{},canvasMemoryLimit:O.width*O.height*2,preprocessImageState:(P,U,X,k)=>!L&&M?{...P,...M(void 0,k.size,{...$.getMetadata()})}:P}),imageState:{...A,...L}};s.queue(P=>{E(y,_).then(({dest:U})=>{$.setMetadata("poster",URL.createObjectURL(U),!0),P(),b()})})};e("CREATE_VIEW",m=>{const{is:$,view:b,query:E}=m;if(!E("GET_ALLOW_IMAGE_EDITOR")||!E("GET_IMAGE_EDITOR_SUPPORT_WRITE_IMAGE"))return;const v=E("GET_ALLOW_FILE_POSTER");if(!($("file-info")&&!v||$("file")&&v))return;const{createEditor:w,imageReader:T,imageWriter:M,editorOptions:A,legacyDataToImageState:x,imageState:C}=l(E("GET_IMAGE_EDITOR"));if(!T||!M||!A||!A.locale)return;delete A.imageReader,delete A.imageWriter;const[H,S]=T,y=k=>{const{id:F}=k;return E("GET_ITEM",F)},L=k=>{if(!E("GET_ALLOW_FILE_POSTER"))return!1;const F=y(k);return F?E("GET_FILE_POSTER_FILTER_ITEM")(F)?!!F.getMetadata("poster"):!1:void 0},O=({root:k,props:F,action:Q})=>{const{handleEditorResponse:rt}=Q,$t=y(F),V=$t.file,Y=w({...A,imageReader:H(S),src:V});Y.on("load",({size:q})=>{let et=$t.getMetadata("imageState");!et&&x&&(et=x(Y,q,$t.getMetadata())),Y.imageState={...C,...et}}),Y.on("process",({imageState:q})=>{$t.setMetadata("imageState",q),rt&&rt(!0)}),Y.on("close",()=>{rt&&rt(!1)})},_=({root:k,props:F})=>{const{id:Q}=F,rt=E("GET_ITEM",Q);if(!rt)return;const $t=rt.file;E("GET_IMAGE_EDITOR_SUPPORT_IMAGE")($t)&&(E("GET_ALLOW_FILE_POSTER")&&!rt.getMetadata("poster")&&k.dispatch("REQUEST_CREATE_IMAGE_POSTER",{id:Q}),!(!E("GET_IMAGE_EDITOR_ALLOW_EDIT")||!E("GET_IMAGE_EDITOR_SUPPORT_EDIT"))&&P(k,F))},P=(k,F)=>{if(k.ref.handleEdit||(k.ref.handleEdit=Q=>{Q.stopPropagation(),k.dispatch("EDIT_ITEM",{id:F.id})}),L(F)){k.ref.editButton&&k.ref.editButton.parentNode&&k.ref.editButton.parentNode.removeChild(k.ref.editButton);const Q=b.createChildView(a,{label:"edit",icon:E("GET_IMAGE_EDITOR_ICON_EDIT"),opacity:0});Q.element.classList.add("filepond--action-edit-item"),Q.element.dataset.align=E("GET_STYLE_IMAGE_EDITOR_BUTTON_EDIT_ITEM_POSITION"),Q.on("click",k.ref.handleEdit),k.ref.buttonEditItem=b.appendChildView(Q)}else{k.ref.buttonEditItem&&k.removeChildView(k.ref.buttonEditItem);const Q=b.element.querySelector(".filepond--file-info-main"),rt=document.createElement("button");rt.className="filepond--action-edit-item-alt",rt.innerHTML=E("GET_IMAGE_EDITOR_ICON_EDIT")+"<span>edit</span>",rt.addEventListener("click",k.ref.handleEdit),Q.appendChild(rt),k.ref.editButton=rt}},U=({root:k,props:F,action:Q})=>{if(/imageState/.test(Q.change.key)&&E("GET_ALLOW_FILE_POSTER"))return k.dispatch("REQUEST_CREATE_IMAGE_POSTER",{id:F.id});/poster/.test(Q.change.key)&&(!E("GET_IMAGE_EDITOR_ALLOW_EDIT")||!E("GET_IMAGE_EDITOR_SUPPORT_EDIT")||P(k,F))};b.registerDestroyer(({root:k})=>{k.ref.buttonEditItem&&k.ref.buttonEditItem.off("click",k.ref.handleEdit),k.ref.editButton&&k.ref.editButton.removeEventListener("click",k.ref.handleEdit)});const X={EDIT_ITEM:O,DID_LOAD_ITEM:_,DID_UPDATE_ITEM_METADATA:U,DID_REMOVE_ITEM:({props:k})=>{const{id:F}=k,Q=E("GET_ITEM",F);if(!Q)return;const rt=Q.getMetadata("poster");rt&&URL.revokeObjectURL(rt)},REQUEST_CREATE_IMAGE_POSTER:({root:k,props:F})=>h(k.query,y(F)),DID_FILE_POSTER_LOAD:void 0};if(v){const k=({root:F})=>{F.ref.buttonEditItem&&(F.ref.buttonEditItem.opacity=1)};X.DID_FILE_POSTER_LOAD=k}b.registerWriter(o(X))}),e("SHOULD_PREPARE_OUTPUT",(m,{query:$,change:b,item:E})=>new Promise(v=>{if(!$("GET_IMAGE_EDITOR_SUPPORT_IMAGE")(E.file)||b&&!/imageState/.test(b.key))return v(!1);v(!$("IS_ASYNC"))}));const g=(m,$,b)=>new Promise(E=>{if(!u(m)||b.archived||!k$($)&&!pR($)||!m("GET_IMAGE_EDITOR_SUPPORT_IMAGE")($))return E(!1);uR($).then(()=>{const v=m("GET_IMAGE_TRANSFORM_IMAGE_FILTER");if(v){const w=v($);if(typeof w=="boolean")return E(w);if(typeof w.then=="function")return w.then(E)}E(!0)}).catch(()=>{const v=m("GET_IMAGE_EDITOR_SUPPORT_IMAGE_FORMAT");if(v&&v($)){E(!0);return}E(!1)})});return e("PREPARE_OUTPUT",(m,{query:$,item:b})=>{const E=v=>new Promise((w,T)=>{const M=()=>{s.queue(A=>{const x=b.getMetadata("imageState"),{imageProcessor:C,imageReader:H,imageWriter:S,editorOptions:y,imageState:L}=l($("GET_IMAGE_EDITOR"));if(!C||!H||!S||!y)return;const[O,_]=H,[P=Jf,U]=S;C(v,{...y,imageReader:O(_),imageWriter:P(U),imageState:{...L,...x}}).then(w).catch(T).finally(A)})};$("GET_ALLOW_FILE_POSTER")&&!b.getMetadata("poster")?h($,b,M):M()});return new Promise(v=>{g($,m,b).then(w=>{if(!w)return v(m);E(m).then(T=>{const M=$("GET_IMAGE_EDITOR_AFTER_WRITE_IMAGE");if(M)return Promise.resolve(M(T)).then(v);v(T.dest)})})})}),{options:{allowImageEditor:[!0,i.BOOLEAN],imageEditorInstantEdit:[!1,i.BOOLEAN],imageEditorAllowEdit:[!0,i.BOOLEAN],imageEditorSupportEdit:[zs()&&tg()&&fR(),i.BOOLEAN],imageEditorSupportImage:[F$,i.FUNCTION],imageEditorSupportImageFormat:[null,i.FUNCTION],imageEditorSupportWriteImage:[tg(),i.BOOLEAN],imageEditorWriteImage:[!0,i.BOOLEAN],imageEditorAfterWriteImage:[void 0,i.FUNCTION],imageEditor:[null,i.OBJECT],imageEditorIconEdit:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><path d="M8.5 17h1.586l7-7L15.5 8.414l-7 7V17zm-1.707-2.707l8-8a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-8 8A1 1 0 0 1 10.5 19h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707z" fill="currentColor" fill-rule="nonzero"/></svg>',i.STRING],styleImageEditorButtonEditItemPosition:["bottom center",i.STRING]}}};zs()&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:N$}));/*!
 * Pintura v8.71.7 - Test version
 * (c) 2018-2024 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const wR=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var G$=t=>{if(t.getUint16(0)!==65496)return;const e=t.byteLength;let n,r=2,i;for(;r<e&&t.getUint8(r)===255;){n=t.getUint16(r);const o=wR.find(a=>a.value===n&&(!a.subvalue||a.subvalue===t.getUint16(r+2+2)));if(o){const{name:a}=o;i||(i={}),i[a]||(i[a]={offset:r,size:t.getUint16(r+2)})}if(n===65498)break;r+=2+t.getUint16(r+2)}return i},Zh=(t,e,n)=>{if(!t)return;const r=new DataView(t),i=G$(r);if(!i||!i.exif)return;const o=((a,s)=>{if(a.getUint16(s)!==65505)return;const l=a.getUint16(s+2);if(s+=4,a.getUint32(s)!==1165519206)return;s+=6;const c=a.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,a.getUint16(s,d)!==42)return;s+=a.getUint32(s+2,d);const u=p=>{const h=[];let g=s;const m=Math.min(a.byteLength,s+l-16);for(;g<m;g+=12){const $=g;a.getUint16($,d)===p&&h.push($)}return h};return{read:p=>{const h=u(p);if(h.length)return a.getUint16(h[0]+8,d)},write:(p,h)=>{const g=u(p);return!!g.length&&(g.forEach(m=>a.setUint16(m+8,h,d)),!0)}}})(r,i.exif.offset);return o?n===void 0?o.read(e):o.write(e,n):void 0},Kh=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],be=(...t)=>{};const xR={ArrayBuffer:"readAsArrayBuffer"};var z$=async(t,e=[0,t.size],n)=>await((r,i=be,o={})=>new Promise((a,s)=>{const{dataFormat:l=xR.ArrayBuffer}=o,c=new(Kh("FileReader"));c.onload=()=>a(c.result),c.onerror=()=>s(c.error),c.onprogress=i,c[l](r)}))(t.slice(...e),n),IR=async(t,e)=>{const n=await z$(t,[0,262144],e);return Zh(n,274)||1};let T1=null;var Vn=()=>(T1===null&&(T1=typeof window<"u"&&window.document!==void 0),T1);let gd=null;var pu=()=>new Promise(t=>{if(gd===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let n=Vn()?new Image:{};return n.onload=()=>{gd=n.naturalWidth===1,n=void 0,t(gd)},void(n.src=e)}return t(gd)}),ic=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),dn=(t,e,n=[])=>{const r=document.createElement(t),i=Object.getOwnPropertyDescriptors(r.__proto__);for(const o in e)o==="style"?r.style.cssText=e[o]:i[o]&&i[o].set||/textContent|innerHTML/.test(o)||typeof e[o]=="function"?r[o]=e[o]:r.setAttribute(o,e[o]);return n.forEach(o=>r.appendChild(o)),r};const TR={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var _n=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},jl=t=>"data"in t,Qh=t=>Vn()?RegExp(t).test(window.navigator.userAgent):void 0;let R1=null;var hu=()=>(R1===null&&(R1=Qh(/Android/)),R1),U$=(t,e)=>{const n=dn("canvas",{width:t.width,height:t.height});return n.getContext("2d",e).drawImage(t,0,0),n},Us=async(t,e=1)=>{const n=await pu(),[r,i]=n||e<5?[t.width,t.height]:[t.height,t.width],o=dn("canvas",{width:r,height:i}),a=o.getContext("2d",{willReadFrequently:!0});if(jl(t)&&!n&&e>1){const s=dn("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!n&&e>1&&a.transform.apply(a,((s,l,c=-1)=>(c===-1&&(c=1),TR[c](s,l)))(t.width,t.height,e)),jl(t)){if(a.putImageData(t,0,0),hu())return U$(o)}else a.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&_n(t),o},V$=async(t,e=1)=>e===1||await pu()?t:ic(await Us(t,e)),Vs=t=>typeof t=="object";const eg=t=>t instanceof HTMLElement?t:Vs(t)?H$(t):t,H$=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((n,r)=>{e[r]=eg(n)})):(e={},Object.keys(t).forEach(n=>{const r=t[n];e[n]=eg(r)})),e};var pn=t=>typeof t=="string",Xn=t=>typeof t=="function",RR=(t,e)=>new Promise((n,r)=>{const i=()=>n(((o,{width:a,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=a||o.naturalWidth,u=s||o.naturalHeight;d||u||(d=300,u=150);const p=d*u;if(l&&p>l){const g=Math.sqrt(l)/Math.sqrt(p);d=Math.floor(d*g),u=Math.floor(u*g)}const h=dn("canvas");return h.width=d,h.height=u,h.getContext("2d",c).drawImage(o,0,0,d,u),h})(t,e));t.complete&&t.width?i():(t.onload=i,t.onerror=()=>r(new Error("Failed to load image")))}),W$=()=>"createImageBitmap"in window,q$=t=>/svg/.test(t.type),Ua=()=>Math.random().toString(36).substring(2,9);const S1=new Map;var mu=(t,e,n)=>new Promise((r,i)=>{const o=t.toString();let a=S1.get(o);if(!a){const l=(p=>`function () {self.onmessage = function (message) {(${p.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((p=>new Blob(["(",typeof p=="function"?p.toString():p,")()"],{type:"application/javascript"}))(l)),d=new Map,u=new Worker(c);a={url:c,worker:u,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(a.terminationTimeout),a.worker.terminate(),URL.revokeObjectURL(c),S1.delete(o)}},u.onmessage=function(p){const{id:h,content:g,error:m}=p.data;if(clearTimeout(a.terminationTimeout),a.terminationTimeout=setTimeout(()=>{d.size>0||a.terminate()},500),!d.has(h))return;const $=d.get(h);d.delete(h),m!=null?$.reject(m):$.resolve(g)},S1.set(o,a)}const s=Ua();a.messages.set(s,{resolve:r,reject:i}),a.worker.postMessage({id:s,content:e},n)});let M1=null;var Gi=()=>(M1===null&&(M1=Qh(/Firefox/)),M1),j$=async(t,e)=>{const n=async()=>{const i=await(async(a,s)=>{const l=dn("img",{src:URL.createObjectURL(a)}),c=await RR(l,s);return URL.revokeObjectURL(l.src),c})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),o=ic(i);return _n(i),o};if(hu()&&!Gi())return await n();let r;if(W$()&&!q$(t)&&"OffscreenCanvas"in window)try{r=await mu((i,o,a)=>{createImageBitmap(i).then(s=>{let l=s.width,c=s.height;const d=l*c;if(o&&d>o){const g=Math.sqrt(o)/Math.sqrt(d);l=Math.floor(l*g),c=Math.floor(c*g)}const u=new OffscreenCanvas(l,c),p=u.getContext("2d",{willReadFrequently:!0});p.drawImage(s,0,0,l,c);const h=p.getImageData(0,0,u.width,u.height);a(null,h)}).catch(s=>{a(s)})},[t,e])}catch{}return r&&r.width?r:await n()},Jh=(t,e,n)=>new Promise((r,i)=>{try{t.toBlob(o=>{if(!o)return i(new Error("Failed to create blob"));r(o)},e,n)}catch(o){i(o)}}),SR=async(t,e,n)=>{const r=await Us(t),i=await Jh(r,e,n);return _n(r),i};const MR={matroska:"mkv"};var Y$=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,n=""]=t.split("/x-");return MR[n]}return e},CR=t=>t.substr(0,t.lastIndexOf("."))||t;const _R=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var t0=t=>{return t&&(e=(n=t,n.split(".").pop()).toLowerCase(),_R.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,n},Yl=(t,e,n)=>{const r=new Date().getTime(),i=t.type.length&&!/null|text/.test(t.type),o=i?t.type:n,a=((s,l)=>{const c=t0(s);if(c===l)return s;const d=Y$(l)||c;return`${CR(s)}.${d}`})(e,o);try{return new(Kh("File"))([t],a,{lastModified:r,type:i?t.type:o})}catch{const l=i?t.slice():t.slice(0,t.size,o);return l.lastModified=r,l.name=a,l}},Lo=(t,e)=>t/e,xn=t=>t;const Ji=Math.PI/2,_a=Ji/2;var Fi=t=>{const e=Math.abs(t)%Math.PI;return e>_a&&e<Math.PI-_a};const Eh={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:Vo,Right:Ho,Bottom:Wo,Left:qo,TopLeft:ui,TopRight:pi,BottomRight:hi,BottomLeft:mi}=Eh;var Xl={[Vo]:[.5,0],[Ho]:[1,.5],[Wo]:[.5,1],[qo]:[0,.5],[ui]:[0,0],[pi]:[1,0],[hi]:[1,1],[mi]:[0,1]},de=(t,e=12)=>parseFloat(t.toFixed(e));const Kd=(t,e,n)=>n+(t-n)*e,yn=()=>ht(0,0),ht=(t,e)=>({x:t,y:e}),ng=t=>ht(t.pageX,t.pageY),je=t=>ht(t.x,t.y),Gl=t=>(t.x=-t.x,t.y=-t.y,t),ka=(t,e,n=yn())=>{const r=Math.cos(e),i=Math.sin(e),o=t.x-n.x,a=t.y-n.y;return t.x=n.x+r*o-i*a,t.y=n.y+i*o+r*a,t},Bo=t=>Math.sqrt(t.x*t.x+t.y*t.y),no=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?yn():(t.x/=e,t.y/=e,t)},Pa=(t,e)=>t.x===e.x&&t.y===e.y,zi=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),Ar=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Un=(t,e)=>(t.x-=e.x,t.y-=e.y,t),rg=(t,e)=>(t.x/=e,t.y/=e,t),Ci=(t,e)=>(t.x*=e,t.y*=e,t),PR=(t,e)=>t.x*e.x+t.y*e.y,Bd=(t,e)=>t.x*e.y-t.y*e.x,jo=(t,e=yn())=>{const n=t.x-e.x,r=t.y-e.y;return n*n+r*r},oi=(t,e=yn())=>Math.sqrt(jo(t,e)),AR=(t,e,n)=>(t.x=Kd(t.x,e,n.x),t.y=Kd(t.y,e,n.y),t),zl=t=>{let e=0,n=0;return t.forEach(r=>{e+=r.x,n+=r.y}),ht(e/t.length,n/t.length)},e0=(t,e,n,r,i)=>(t.forEach(o=>{o.x=e?r-(o.x-r):o.x,o.y=n?i-(o.y-i):o.y}),t),Ls=(t,e,n,r)=>{const i=Math.sin(e),o=Math.cos(e);return t.forEach(a=>{a.x-=n,a.y-=r;const s=a.x*o-a.y*i,l=a.x*i+a.y*o;a.x=n+s,a.y=r+l}),t},Hs=(t,e)=>({width:t,height:e}),Mr=t=>Hs(t.width,t.height),so=t=>Hs(t.width,t.height),Fa=t=>Hs(t.width,t.height),OR=t=>Hs(t[0],t[1]),Ul=t=>{return/img/i.test(t.nodeName)?Hs((e=t).naturalWidth,e.naturalHeight):so(t);var e},fr=(t,e)=>Hs(t,e),Zl=(t,e,n=xn)=>n(t.width)===n(e.width)&&n(t.height)===n(e.height),yd=(t,e)=>(t.width*=e,t.height*=e,t),oc=t=>ht(.5*t.width,.5*t.height),X$=(t,e)=>{const n=Math.abs(e),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),o=r*t.width+i*t.height,a=i*t.width+r*t.height;return t.width=o,t.height=a,t},ig=(t,e)=>t.width>=e.width&&t.height>=e.height,No=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Ba=(t,e)=>({start:t,end:e}),Z$=t=>Ba(je(t.start),je(t.end)),K$=(t,e)=>{if(e===0)return t;const n=ht(t.start.x-t.end.x,t.start.y-t.end.y),r=no(n),i=Ci(r,e);return t.start.x+=i.x,t.start.y+=i.y,t.end.x-=i.x,t.end.y-=i.y,t},LR=[ht(-1,-1),ht(-1,1),ht(1,1),ht(1,-1)],fi=(t,e,n,r)=>({x:t,y:e,width:n,height:r}),Re=t=>fi(t.x,t.y,t.width,t.height),Go=()=>fi(0,0,0,0),rr=t=>fi(0,0,t.width,t.height),DR=t=>fi(t[3],t[0],t[1]-t[3],t[2]-t[0]),Q$=t=>fi(t.x||0,t.y||0,t.width||0,t.height||0),Lr=t=>{let e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return t.forEach(o=>{e=Math.min(e,o.x),n=Math.max(n,o.x),r=Math.min(r,o.y),i=Math.max(i,o.y)}),fi(e,r,n-e,i-r)},og=(t,e)=>fi(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),nr=(t,e,n,r)=>fi(t,e,n,r),nn=t=>ht(t.x+.5*t.width,t.y+.5*t.height),ai=(t,e)=>(t.x+=e.x,t.y+=e.y,t),qn=(t,e,n)=>(n=n||nn(t),t.x=e*(t.x-n.x)+n.x,t.y=e*(t.y-n.y)+n.y,t.width=e*t.width,t.height=e*t.height,t),ag=(t,e,n,r)=>{const i=(r.x-t.x)/t.width,o=(r.y-t.y)/t.height;let a=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return a=Math.min(n.width,a),s=Math.min(n.height,s),t.x=r.x-i*a,t.y=r.y-o*s,t.width=a,t.height=s,t},sg=(t,e)=>{const[n,r]=Xl[e],i=n*t.width,o=r*t.height;return ht(t.x+i,t.y+o)},zo=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),li=(t,e,n=xn)=>n(t.x)===n(e.x)&&n(t.y)===n(e.y)&&n(t.width)===n(e.width)&&n(t.height)===n(e.height),Gn=t=>Lo(t.width,t.height),J$=(t,e,n,r,i)=>(t.x=e,t.y=n,t.width=r,t.height=i,t),fu=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),Bi=(t,e,n)=>(n||(n=nn(t)),Xo(t).map(r=>ka(r,e,n))),Nd=(t,e)=>fi(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),lg=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),Yo=(t,e,n=yn())=>{if(t.width===0||t.height===0)return Go();const r=Gn(t);e||(e=r);let i=t.width,o=t.height;return e>r?i=o*e:o=i/e,fi(n.x+.5*(t.width-i),n.y+.5*(t.height-o),i,o)},Cr=(t,e=Gn(t),n=yn())=>{if(t.width===0||t.height===0)return Go();let r=t.width,i=r/e;return i>t.height&&(i=t.height,r=i*e),fi(n.x+.5*(t.width-r),n.y+.5*(t.height-i),r,i)},Ds=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],Xo=t=>[ht(t.x,t.y),ht(t.x+t.width,t.y),ht(t.x+t.width,t.y+t.height),ht(t.x,t.y+t.height)],Xr=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},tb=(t,e,n=nn(t))=>Xo(t).map((r,i)=>{const o=LR[i];return ht(Kd(r.x,1+o.x*e.x,n.x),Kd(r.y,1+o.y*e.y,n.y))}),Kl=t=>(t.x=0,t.y=0,t),cg=t=>{const e=t[0],n=t[t.length-1];t=Pa(e,n)?t:[...t,e];const r=e.x,i=e.y;let o,a,s,l=0,c=0,d=0,u=0;const p=t.length;for(;c<p;c++)o=t[c],a=t[c+1>p-1?0:c+1],s=(o.y-i)*(a.x-r)-(a.y-i)*(o.x-r),l+=s,d+=(o.x+a.x-2*r)*s,u+=(o.y+a.y-2*i)*s;return s=3*l,ht(r+d/s,i+u/s)},n0=(t,e)=>eb(t.start,t.end,e.start,e.end),eb=(t,e,n,r)=>{const i=(r.y-n.y)*(e.x-t.x)-(r.x-n.x)*(e.y-t.y);if(i===0)return;const o=((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/i,a=((e.x-t.x)*(t.y-n.y)-(e.y-t.y)*(t.x-n.x))/i;return o<0||o>1||a<0||a>1?void 0:ht(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y))},kR=(t,e,{ignoreIdenticalLines:n=!1,breakOnIntersection:r=!1}={})=>{const i=e.length,o=[];for(let a=0;a<i-1;a++){if(n&&(Pa(t.start,e[a])||Pa(t.start,e[a+1])||Pa(t.end,e[a])||Pa(t.end,e[a+1])))continue;const s=eb(t.start,t.end,e[a],e[a+1]);if(s){if(r)return[s];o.push(s)}}return o.length?o:void 0},nb=t=>{const e=[];for(let n=0;n<t.length;n++){let r=n+1;r===t.length&&(r=0),e.push(Ba(je(t[n]),je(t[r])))}return e},rb=(t,e=0)=>nb(t).map(n=>K$(n,e)),ib=(t,e,n,r=0,i=!1,o=!1,a=12)=>{const s=[];for(let l=0;l<a;l++)s.push(ht(t.x+e*Math.cos(l*(2*Math.PI)/a),t.y+n*Math.sin(l*(2*Math.PI)/a)));return(i||o)&&e0(s,i,o,t.x,t.y),r&&Ls(s,r,t.x,t.y),s};var ob=(t,e)=>{const n=rr(t),r=nn(n),i=Bi(n,e,r);return Kl(Lr(i))},Ql=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),ac=t=>t instanceof File,dg=async(t,e,n)=>{const r=await Jh(t,e,n);return Yl(r,"canvas")},ab=t=>t.split("/").pop().split(/\?|\#/).shift();const FR=Vn()&&Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},$d=Vn()&&dn("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let ug;var r0=t=>(FR($d,t),$d.parentNode||document.body.append($d),clearTimeout(ug),ug=setTimeout(()=>{$d.remove()},500),t);let C1=null;var oo=()=>(C1===null&&(C1=Vn()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),C1),sb=t=>new Promise((e,n)=>{let r=!1;!t.parentNode&&oo()&&(r=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",r0(t));const i=()=>{const a=t.naturalWidth,s=t.naturalHeight;a&&s&&(r&&t.remove(),clearInterval(o),e({width:a,height:s}))};t.onerror=a=>{clearInterval(o),n(a)};const o=setInterval(i,1);i()}),lb=t=>new Promise((e,n)=>{const r=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return r();t.onloadedmetadata=r,t.onerror=()=>n(t.error)}),gu=t=>/^image/.test(t.type),i0=t=>new Promise(e=>{const n=pn(t)?t:URL.createObjectURL(t),r=()=>{const o=new Image;o.src=n,e(o)};if(t instanceof Blob&&gu(t))return r();const i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=()=>e(i),i.onerror=r,i.src=n}),Qd=t=>t.nodeName==="VIDEO",cb=async t=>{let e,n;e=t.src?t:await i0(t);try{n=Qd(e)?await lb(e):await sb(e)}finally{ac(t)&&URL.revokeObjectURL(e.src)}return n},BR=async t=>{const e=await cb(t),n=await(o=>new Promise((a,s)=>{if(o.complete)return a(o);o.onload=()=>a(o),o.onerror=()=>s(new Error("Failed to load image"))}))(t),r=dn("canvas",e);r.getContext("2d",{willReadFrequently:!0}).drawImage(n,0,0);const i=await Jh(r);return Yl(i,ab(n.src))},Is=(t=0,e=!0)=>new(Kh("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),pg=(t,e,n=r=>r)=>t.getAllResponseHeaders().indexOf(e)>=0?n(t.getResponseHeader(e)):void 0,NR=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null};const GR="URL_REQUEST";class Vl extends Error{constructor(e,n,r){super(e),this.name="EditorError",this.code=n,this.metadata=r}}var db=(t,e)=>{const{headers:n={},credentials:r}=e||{};Object.entries(n).forEach(([i,o])=>t.setRequestHeader(i,o)),r&&(t.withCredentials=r!=="omit")},zR=(t,e,n)=>/^data:/.test(t)?(async(r,i="data-uri",o=be)=>{o(Is(0));const a=await fetch(r);o(Is(.33));const s=await a.blob();let l;gu(s)||(l="image/"+(r.includes(",/9j/")?"jpeg":"png")),o(Is(.66));const c=Yl(s,i,l);return o(Is(1)),c})(t,void 0,e):((r,i,o)=>new Promise((a,s)=>{const l=()=>s(new Vl("Error fetching image",GR,c)),c=new XMLHttpRequest;c.onprogress=i,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const u=pg(c,"Content-Type"),p=pg(c,"Content-Disposition",NR)||ab(r);a(Yl(c.response,p,u||t0(p)))};const{willRequest:d}=o;Promise.resolve(d&&d(r,{resourceType:"image"})).then(u=>{if(u===!1)return s("Image load rejected");c.open("GET",r),db(c,u),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,n),o0=t=>t instanceof Blob&&!(t instanceof File),ub=t=>"close"in t,UR=async(t,e,n)=>{if(ac(t)||o0(t))return t;if(pn(t))return await zR(t,e,n);if(Ql(t,"canvas"))return await dg(t);if(Ql(t,"img"))return await BR(t);if(jl(t)||ub(t))return await dg(await Us(t));throw new Vl("Invalid image source","invalid-image-source")};let _1=null;var pb=()=>(_1===null&&(_1=Vn()&&/^mac/i.test(navigator.platform)),_1);let P1=null;var ci=()=>(P1===null&&(P1=Vn()&&(Qh(/iPhone|iPad|iPod/)||pb()&&navigator.maxTouchPoints>=1)),P1),VR=async(t,e=1)=>await pu()||ci()||e<5?t:fr(t.height,t.width),hb=t=>/jpeg/.test(t.type),HR=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},a0=(t,e=0,n)=>(e===0||(t.translate(n.x,n.y),t.rotate(e),t.translate(-n.x,-n.y)),t),mb=(t,e,n)=>(t.scale(e,n),t),WR=async(t,e={})=>{const{flipX:n,flipY:r,rotation:i,crop:o}=e,a=so(t),s=n||r,l=!!i,c=o&&(o.x||o.y||o.width||o.height),d=c&&li(o,rr(a)),u=c&&!d;if(!s&&!l&&!u)return t;let p,h=dn("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const g=dn("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});mb(g,n?-1:1,r?-1:1),g.drawImage(h,n?-h.width:0,r?-h.height:0),g.restore(),_n(h),h=g.canvas}if(l){const g=No(Fa(Lr(Bi(Q$(h),i))),Math.floor),m=dn("canvas",{width:o.width,height:o.height}).getContext("2d",{willReadFrequently:!0});(($,b,E)=>{$.translate(b,E)})(m,-o.x,-o.y),a0(m,i,oc(g)),m.drawImage(h,.5*(g.width-h.width),.5*(g.height-h.height)),m.restore(),_n(h),h=m.canvas}else if(u)return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(o.x,o.y,o.width,o.height),_n(h),p;return p=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),_n(h),p},qR=(t,e)=>{const{imageData:n,width:r,height:i}=t,o=n.width,a=n.height,s=Math.round(r),l=Math.round(i),c=n.data,d=new Uint8ClampedArray(s*l*4),u=o/s,p=a/l,h=Math.ceil(.5*u),g=Math.ceil(.5*p);for(let m=0;m<l;m++)for(let $=0;$<s;$++){const b=4*($+m*s);let E=0,v=0,w=0,T=0,M=0,A=0,x=0;const C=(m+.5)*p;for(let H=Math.floor(m*p);H<(m+1)*p;H++){const S=Math.abs(C-(H+.5))/g,y=($+.5)*u,L=S*S;for(let O=Math.floor($*u);O<($+1)*u;O++){let _=Math.abs(y-(O+.5))/h;const P=Math.sqrt(L+_*_);if(P<-1||P>1||(E=2*P*P*P-3*P*P+1,E<=0))continue;_=4*(O+H*o);const U=c[_+3];x+=E*U,w+=E,U<255&&(E=E*U/250),T+=E*c[_],M+=E*c[_+1],A+=E*c[_+2],v+=E}}d[b]=T/v,d[b+1]=M/v,d[b+2]=A/v,d[b+3]=x/w}e(null,{data:d,width:s,height:l})},fb=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=dn("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},jR=async(t,e={},n)=>{const{width:r,height:i,fit:o,upscale:a}=e;if(!r&&!i)return t;let s=r,l=i;if(r?i||(l=r):s=i,o!=="force"){const c=s/t.width,d=l/t.height;let u=1;if(o==="cover"?u=Math.max(c,d):o==="contain"&&(u=Math.min(c,d)),u>1&&a===!1)return t;s=Math.round(t.width*u),l=Math.round(t.height*u)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:n?n(t,s,l):(t=await mu(qR,[{imageData:t,width:s,height:l}],[t.data.buffer]),fb(t))},YR=(t,e)=>{const{imageData:n,matrix:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.data,a=o.length,s=r[0],l=r[1],c=r[2],d=r[3],u=r[4],p=r[5],h=r[6],g=r[7],m=r[8],$=r[9],b=r[10],E=r[11],v=r[12],w=r[13],T=r[14],M=r[15],A=r[16],x=r[17],C=r[18],H=r[19];let S=0,y=0,L=0,O=0,_=0,P=0,U=0,X=0,k=0,F=0,Q=0,rt=0;for(;S<a;S+=4)y=o[S]/255,L=o[S+1]/255,O=o[S+2]/255,_=o[S+3]/255,P=y*s+L*l+O*c+_*d+u,U=y*p+L*h+O*g+_*m+$,X=y*b+L*E+O*v+_*w+T,k=y*M+L*A+O*x+_*C+H,F=Math.max(0,P*k)+(1-k),Q=Math.max(0,U*k)+(1-k),rt=Math.max(0,X*k)+(1-k),i[S]=255*Math.max(0,Math.min(1,F)),i[S+1]=255*Math.max(0,Math.min(1,Q)),i[S+2]=255*Math.max(0,Math.min(1,rt)),i[S+3]=255*_;e(null,{data:i,width:n.width,height:n.height})},XR=(t,e)=>{const{imageData:n,matrix:r}=t;if(!r)return e(null,n);let i=r.reduce((x,C)=>x+C);i=i<=0?1:i;const o=n.width,a=n.height,s=n.data;let l=0,c=0,d=0;const u=Math.round(Math.sqrt(r.length)),p=Math.floor(u/2);let h=0,g=0,m=0,$=0,b=0,E=0,v=0,w=0,T=0,M=0;const A=new Uint8ClampedArray(o*a*4);for(d=0;d<a;d++)for(c=0;c<o;c++){for(h=0,g=0,m=0,$=0,E=0;E<u;E++)for(b=0;b<u;b++)v=d+E-p,w=c+b-p,v<0&&(v=a-1),v>=a&&(v=0),w<0&&(w=o-1),w>=o&&(w=0),T=4*(v*o+w),M=r[E*u+b],h+=s[T]*M,g+=s[T+1]*M,m+=s[T+2]*M,$+=s[T+3]*M;A[l]=h/i,A[l+1]=g/i,A[l+2]=m/i,A[l+3]=$/i,l+=4}e(null,{data:A,width:o,height:a})},ZR=(t,e)=>{let{imageData:n,strength:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.width,a=n.height,s=n.data,l=(L,O)=>(c=L-M,d=O-A,Math.sqrt(c*c+d*d));let c,d,u,p,h,g,m,$,b,E,v,w=0,T=0,M=.5*o,A=.5*a,x=l(0,0);for(r>0?(u=0,p=0,h=0):(r=Math.abs(r),u=1,p=1,h=1),T=0;T<a;T++)for(w=0;w<o;w++)C=4*(w+T*o),H=s,S=i,y=l(w,T)*r/x,g=H[C]/255,m=H[C+1]/255,$=H[C+2]/255,b=H[C+3]/255,E=1-y,v=E*b+y,S[C]=(E*b*g+y*u)/v*255,S[C+1]=(E*b*m+y*p)/v*255,S[C+2]=(E*b*$+y*h)/v*255,S[C+3]=255*v;var C,H,S,y;e(null,{data:i,width:n.width,height:n.height})},KR=(t,e)=>{const{imageData:n,level:r,monochrome:i=!1}=t;if(!r)return e(null,n);const o=new Uint8ClampedArray(n.width*n.height*4),a=n.data,s=a.length;let l,c,d,u=0;const p=()=>255*(2*Math.random()-1)*r,h=i?()=>{const g=p();return[g,g,g]}:()=>[p(),p(),p()];for(;u<s;u+=4)[l,c,d]=h(),o[u]=a[u]+l,o[u+1]=a[u+1]+c,o[u+2]=a[u+2]+d,o[u+3]=a[u+3];e(null,{data:o,width:n.width,height:n.height})},QR=(t,e)=>{const{imageData:n,level:r}=t;if(!r)return e(null,n);const i=new Uint8ClampedArray(n.width*n.height*4),o=n.data,a=o.length;let s,l,c,d=0;for(;d<a;d+=4)s=o[d]/255,l=o[d+1]/255,c=o[d+2]/255,i[d]=255*Math.pow(s,r),i[d+1]=255*Math.pow(l,r),i[d+2]=255*Math.pow(c,r),i[d+3]=o[d+3];e(null,{data:i,width:n.width,height:n.height})},JR=async(t,e={})=>{const{colorMatrix:n,convolutionMatrix:r,gamma:i,noise:o,vignette:a}=e,s=[];if(r&&s.push([XR,{matrix:r.clarity}]),i>0&&s.push([QR,{level:1/i}]),n&&!(d=>{const u=d.length;let p;const h=u>=20?6:u>=16?5:3;for(let g=0;g<u;g++)if(p=d[g],p===1&&g%h!=0||p!==0&&p!==1)return!1;return!0})(n)&&s.push([YR,{matrix:n}]),(o>0||o<0)&&s.push([KR,{level:o}]),(a>0||a<0)&&s.push([ZR,{strength:a}]),!s.length)return t;const l=(d,u)=>`(err, imageData) => {
            (${d[u][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${u}]), 
                ${d[u+1]?l(d,u+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await mu(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),fb(t)},qe=t=>typeof t=="number",cn=(t,e)=>t.hasOwnProperty(e),er=t=>Array.isArray(t),Jd=t=>t instanceof Blob,Pr=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${qe(t[3])?t[3]:1})`,Gd=t=>Object.values(t).join("_");const gb=async(t,e=0)=>{const n=dn("canvas",{width:80,height:80}).getContext("2d");return await((r=0)=>new Promise(i=>{setTimeout(i,r)}))(e),n.drawImage(t,0,0,80,80),!((r=>!new Uint32Array(r.getImageData(0,0,r.canvas.width,r.canvas.height).data.buffer).some(i=>i!==0))(n)&&e<=256)||await gb(t,e+16)},hg=new Map;var t5=t=>new Promise((e,n)=>{const r=new FileReader;r.onerror=()=>n(r.error),r.onload=()=>e(r.result),r.readAsDataURL(t)}),Ni=()=>{let t=[];return{sub:(e,n)=>(t.push({event:e,callback:n}),()=>t=t.filter(r=>r.event!==e||r.callback!==n)),pub:(e,n)=>{t.filter(r=>r.event===e).forEach(r=>r.callback(n))}}};const mr=32,s0=({color:t=[0,0,0],fontSize:e=16,fontFamily:n="sans-serif",fontVariant:r="normal",fontWeight:i="normal",fontStyle:o="normal",textAlign:a="left",letterSpacing:s="normal",lineHeight:l=20},c=1)=>`font-size:${e*c}px;font-style:${o};font-weight:${i};font-family:${n};font-variant:${r};line-height:${l*c}px;text-align:${a};letter-spacing:${qe(s)?s+"px":"normal"};color:${Pr(t)};`,l0=(t,e,n=1)=>{const{width:r,height:i,disableNewline:o}=e,a=!r,s=o===!1?((d="")=>d.split(`
`).length)(t):void 0,l=a?"normal":"break-word",c=a&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${a?"auto":r*n+"px"};height:${i?i*n+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:u=20}={})=>.5*Math.max(0,d-u))(e)*n}px;word-break:${l};word-wrap:normal;white-space:${c};`},mg=new Map,yb=t=>{const e=[];for(const n of Array.from(t.childNodes))n.nodeType===Node.TEXT_NODE?e.push(e5(n)):e.push(...yb(n));return e},$b="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",e5=t=>{const e=t.nodeValue;if(!e)return[];const n=e.length,r=document.createRange();r.selectNodeContents(t);const i=[];for(let a=0;a<n;a++){r.setStart(t,0),r.setEnd(t,a+1);const s=r.getClientRects().length-1,l=e.charAt(a);i[s]?i[s]+=l:i.push(l)}const o=r.getClientRects();return i.map((a,s)=>({rect:o[s],text:a}))},fg=new Map,vh=(t="",e)=>{const{width:n=0,height:r=0}=e;if(n&&r)return fr(n,r);let{fontSize:i=16,fontFamily:o,lineHeight:a=20,fontWeight:s,fontStyle:l,fontVariant:c,letterSpacing:d}=e;const u=Gd({text:t,fontFamily:o,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:i,letterSpacing:d,lineHeight:a,width:n});let p=fg.get(u);if(p)return p;let h=1;i>1e3&&Gi()&&(h=i/1e3,i=1e3,a/=h);const g=r0(dn("pre",{contenteditable:"true",spellcheck:"false",style:`${$b}${s0({...e,fontSize:i,lineHeight:a})};${l0(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=so(g),p.height+=Math.max(0,i-a),p=No(p,m=>m*h),n&&(p.width=n),fg.set(u,p),p},gg=new Map,n5=(t,e)=>new Promise((n,r)=>{let i=gg.get(t);i===void 0&&(i=((o,a)=>{const{sub:s,pub:l}=Ni();let c,d;return Promise.resolve(a&&a(o,{resourceType:"stylesheet"})).then(u=>{if(u===!1)return d="requestPrevented",l("error",d);const{headers:p,credentials:h}=u||{};fetch(o,{headers:p,credentials:h}).then(g=>g.text()).then(g=>{c=g,l("load",c)}).catch(g=>{d=g,l("error",d)})}),{sub:(u,p)=>u==="load"&&c?p(c):u==="error"&&d?p(d):void s(u,p)}})(t,e),gg.set(t,i)),i.sub("load",n),i.sub("error",r)}),yg=async(t,e)=>{let n;try{n=await n5(t,e)}catch{return[]}const r=dn("style",{innerHTML:n,id:Ua()});document.head.append(r);const i=Array.from(document.styleSheets).find(o=>o.ownerNode.id===r.id);return r.remove(),Array.from(i.cssRules)},bs=new Map,r5=async(t,e)=>{if(bs.has(t.href))return bs.get(t.href);let n;try{n=Array.from(t.cssRules);for(const r of(i=>i.filter(o=>o instanceof CSSImportRule))(n)){const i=r.href;if(bs.has(i)){const a=bs.get(i);n=[...n,...a];continue}const o=await yg(i,e);bs.set(i,o),n=[...n,...o]}}catch{const i=t.href;n=await yg(i,e),bs.set(i,n)}return(r=>r.filter(i=>i instanceof CSSFontFaceRule))(n)},bb=(t,e)=>t.style.getPropertyValue(e),i5=(t,e)=>t.style?bb(t,"font-family").replace(/^"|"$/g,"")==e:!1,o5=async(t,e)=>{const n=((r,i)=>{const o=[];for(const a of r)i5(a,i)&&o.push(a);return o})(await(async r=>{const i=Array.from(document.styleSheets).map(s=>r5(s,r)),o=await Promise.all(i),a=[];return o.forEach(s=>a.push(...s)),a})(e),t);return n.length?n.map(r=>{const i=r.parentStyleSheet.href&&new URL(r.parentStyleSheet.href),o=i?i.origin+(l=>l.pathname.split("/").slice(0,-1).join("/"))(i)+"/":"",a=r.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],s=Array.from(r.style).filter(l=>l!="src").reduce((l,c)=>l+=c+":"+bb(r,c)+";","");return[/^http/.test(a)?a:o+a,s]}):[]},$g=new Map,bg=new Map;var Eb=async(t="",e)=>{if(!t.length)return;let{color:n,imageWidth:r=300,imageHeight:i=150,paddingTop:o=0,paddingRight:a=mr,paddingBottom:s=0,paddingLeft:l=mr,fontFamily:c,fontSize:d,pixelRatio:u=1,willRequest:p,outline:h,blur:g}=e,m=1,$="";d>1e3&&Gi()&&(m=d/1e3,$=`transform-origin:0 0;transform:scale(${m})`);const b=u/m,E=(r+l+a)*u,v=(i+s+o)*u,w=await(async(H,S)=>{if($g.get(H))return;let y=bg.get(H);if(!y){const O=await o5(H,S);if(!O.length)return void $g.set(H,!0);const _=[];for(const[P,U]of O){const X=await fetch(P).then(Q=>Q.blob()),k=!(L=X.type)||/woff2/.test(L)?"woff2":/woff/.test(L)?"woff":/ttf|truetype/.test(L)?"truetype":/otf|opentype/.test(L)?"opentype":/svg/.test(L)?"svg":"woff2",F=await t5(X);_.push(`@font-face { src:url(${F}) format('${k}');${U};font-display:block; }`)}y=_.join(""),bg.set(H,y)}var L;return y})(c,p),T=t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),M=`top:${o*b}px;right:${a*b}px;bottom:${s*b}px;left:${l*b}px`;let A=n,x="",C="";if(h||g){const H=Pr(n);h&&(A=[0,0,0,0],x=`-webkit-text-stroke: ${2*h*b}px ${H}`),g&&(oo()?C=`filter:blur(${g*b*.4}px)`:(A=[0,0,0,0],C=`text-shadow: 0 0 ${g*b}px ${H}`))}return((H,{safariCacheKey:S="*"}={})=>new Promise((y,L)=>{const O=new Image;O.onerror=()=>L(new Error("Failed to load SVG")),O.onload=()=>{if(!oo()||!H.includes("@font-face")||hg.has(S))return y(O);gb(O).then(()=>{hg.set(S,!0),y(O)})},O.src="data:image/svg+xml,"+H}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${E}" height="${v}" viewBox="0 0 ${E} ${v}"><foreignObject x="0" y="0" width="${E}" height="${v}"><div xmlns="http://www.w3.org/1999/xhtml">${w?`<style>${w}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;${M};${s0({...e,color:A,fontSize:d},b)};${l0(t,e,b)};${$};${x};${C}">${T}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};const Ta=t=>{const e={...t};return H$(e)},vb=t=>ht(t.x1,t.y1),wb=t=>ht(t.x2,t.y2),Va=t=>cn(t,"text"),xb=t=>Va(t)&&!(yu(t)||cn(t,"width")),a5=t=>Va(t)&&(yu(t)||cn(t,"width")),ks=t=>!Va(t)&&l5(t),Da=t=>cn(t,"rx"),Ws=t=>cn(t,"x1"),Fs=t=>cn(t,"points"),bd=t=>!cn(t,"opacity")||t.opacity>0,s5=t=>cn(t,"width")&&cn(t,"height"),yu=t=>(cn(t,"x")||cn(t,"left"))&&cn(t,"right")||(cn(t,"y")||cn(t,"top"))&&cn(t,"bottom"),l5=t=>s5(t)||yu(t),wh=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),Eg=t=>(delete t.rotation,t),vg=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),wg=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),xg=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(n,r)=>`___${r}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(n,r)=>`&${r};`)},c5=t=>{if(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.textShadow){const[e,n,r,i]=t.textShadow;t.textShadowX=e,t.textShadowY=n,t.textShadowBlur=r,t.textShadowColor=i,delete t.textShadow}if(t.textOutline){const[e,n]=t.textOutline;t.textOutlineWidth=e,t.textOutlineColor=n,delete t.textOutline}return t.format==="html"?xg(t):(e=>{xg(e);let n=e.text;n=n.replace(/</g,"&gt;"),n=n.replace(/>/g,"&lt;"),e.text=n})(t),xb(t)?d5(t):u5(t)},d5=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),wh(t)),u5=t=>(t.textAlign=t.textAlign||"left",t),p5=t=>((e=>{pn(e.id)||(e.id=Ua()),cn(e,"rotation")||(e.rotation=0),cn(e,"opacity")||(e.opacity=1),cn(e,"disableErase")||(e.disableErase=!0)})(t),Va(t)?c5(t):ks(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],wg(e)})(t):Fs(t)?(e=>{vg(e),Eg(e),cn(e,"pathClose")||(e.disableResize=!0,cn(e,"disableMove")||(e.disableMove=!0)),wh(e)})(t):Ws(t)?(e=>{vg(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,Eg(e),wh(e)})(t):Da(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],wg(e)})(t),t),h5=new RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),m5=new RegExp(/^y|top|bottom|^height|ry/,"i"),Ib=(t,e,{width:n,height:r})=>{if(Array.isArray(e))return e.map(o=>(Vs(o)&&Tb(o,{width:n,height:r}),pn(o)&&(o=Ib(t,o,{width:n,height:r})),o));if(typeof e!="string"||!e.endsWith("%"))return e;const i=parseFloat(e)/100;return h5.test(t)?de(n*i,6):m5.test(t)?de(r*i,6):e},f5=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],Tb=(t,e)=>{Object.entries(t).map(([n,r])=>{t[n]=Ib(n,r,e)}),t.text&&f5.filter(n=>pn(t[n])).forEach(n=>{var r,i;t[n]=(r=t[n],i=t.fontSize,Math.round(i*(parseFloat(r)/100)))})},Do=(t,e)=>(Tb(t,e),Mb(t,e),t),Rb=(t,e)=>{const n=t.filter(r=>r.x<0||r.y<0||r.x1<0||r.y1<0).reduce((r,i)=>{const[o,a,s,l]=(c=>{const d=Go(),u=c.strokeWidth||0;if(ks(c))d.x=c.x-.5*u,d.y=c.y-.5*u,d.width=c.width+u,d.height=c.height+u;else if(Ws(c)){const{x1:p,y1:h,x2:g,y2:m}=c,$=Math.abs(Math.min(p,g)),b=Math.abs(Math.max(p,g)),E=Math.abs(Math.min(h,m)),v=Math.abs(Math.min(h,m));d.x=$+.5*u,d.y=b+.5*u,d.width=b-$+u,d.height=v-E+u}else Da(c)&&(d.x=c.x-c.rx+.5*u,d.y=c.y-c.ry+.5*u,d.width=2*c.rx+u,d.height=2*c.ry+u);return d&&cn(c,"rotation")&&Bi(d,c.rotation),Ds(d)})(i);return r.top=Math.min(o,r.top),r.left=Math.min(l,r.left),r.bottom=Math.max(s,r.bottom),r.right=Math.max(a,r.right),r},{top:0,right:0,bottom:0,left:0});return n.right>0&&(n.right-=e.width),n.bottom>0&&(n.bottom-=e.height),n},Sb=(t,e,n)=>{const r=Ta(t);Do(r,e);const i=n(r);return Array.isArray(i)?i:[i]},Mb=(t,e)=>{if(cn(t,"left")&&(t.x=t.left),cn(t,"right")&&!pn(t.right)){const n=e.width-t.right;cn(t,"left")?(t.x=t.left,t.width=Math.max(0,n-t.left)):cn(t,"width")&&(t.x=n-t.width)}if(cn(t,"top")&&(t.y=t.top),cn(t,"bottom")&&!pn(t.bottom)){const n=e.height-t.bottom;cn(t,"top")?(t.y=t.top,t.height=Math.max(0,n-t.top)):cn(t,"height")&&(t.y=n-t.height)}return t},Cb=(t,e)=>(Fs(t)&&t.points.filter(n=>qe(n.x)).forEach(n=>{n.x*=e,n.y*=e}),Ws(t)&&qe(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),qe(t.x)&&qe(t.y)&&(t.x*=e,t.y*=e),qe(t.width)&&qe(t.height)&&(t.width*=e,t.height*=e),qe(t.rx)&&qe(t.ry)&&(t.rx*=e,t.ry*=e),(n=>qe(n.strokeWidth)&&n.strokeWidth>0)(t)&&(t.strokeWidth*=e),Va(t)&&(t._scale=e,qe(t.fontSize)&&(t.fontSize*=e),qe(t.lineHeight)&&(t.lineHeight*=e),qe(t.width)&&!qe(t.height)&&(t.width*=e)),cn(t,"cornerRadius")&&qe(t.cornerRadius)&&(t.cornerRadius*=e),t),_b=t=>{if(ks(t))return ht(t.x+.5*t.width,t.y+.5*t.height);if(Da(t))return ht(t.x,t.y);if(t.text){if(a5(t)){const n=t.height||vh(t.text,t).height;return ht(t.x+.5*t.width,t.y+.5*n)}const e=vh(t.text,t);return ht(t.x+.5*e.width,t.y+.5*e.height)}return Fs(t)?zl(t.points):Ws(t)?zl([vb(t),wb(t)]):void 0};var sc=t=>/canvas/i.test(t.nodeName),g5=(t,e)=>new Promise((n,r)=>{let i=t,o=!1;const a=()=>{o||(o=!0,Xn(e)&&Promise.resolve().then(()=>e(fr(i.naturalWidth,i.naturalHeight))))};if(i.src||(i=new Image,pn(t)&&new URL(t,location.href).origin!==location.origin&&(i.crossOrigin="anonymous"),i.src=pn(t)?t:URL.createObjectURL(t)),i.complete)return a(),n(i);Xn(e)&&sb(i).then(a).catch(r),i.onload=()=>{a(),n(i)},i.onerror=()=>r(new Error("Failed to load image"))});const Ig=new Map([]),c0=(t,e={})=>new Promise((n,r)=>{const{onMetadata:i=be,onLoad:o=n,onError:a=r,onComplete:s=be}=e;let l=Ig.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:Ni()},Ig.set(t,l)),l.bus.sub("meta",i),l.bus.sub("load",o),l.bus.sub("error",a),l.bus.sub("complete",s),sc(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=Ul(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=Ni());l.loading||(l.loading=!0,g5(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=Ni()}))}),y5=(t,e,n,r)=>t.drawImage(e,n.x,n.x,n.width,n.height,r.x,r.y,r.width,r.height);var Pb=async(t,e,n,r,i=y5,o)=>{t.save(),t.clip(),await i(t,e,n,r,o),t.restore()};const tu=(t,e,n,r,i)=>{const o=Re(t);if(r){const s=Xr(Lr(r),de);return s.x*=n.width,s.width*=n.width,s.y*=n.height,s.height*=n.height,{srcRect:s,destRect:o}}const a=nr(0,0,n.width,n.height);if(e==="contain"){const s=Cr(t,Gn(a));o.width=s.width,o.height=s.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=s.x,o.y+=s.y)}else if(e==="cover"){const s=Yo(o,a.width/a.height);o.width=s.width,o.height=s.height,i?(o.x+=i.x,o.y+=i.y):(o.x+=s.x,o.y+=s.y)}else e?(o.width=e.width,o.height=e.height,i&&(o.x+=i.x,o.y+=i.y)):i&&(o.width=n.width,o.height=n.height,o.x+=i.x,o.y+=i.y);return{srcRect:a,destRect:o}},A1=(t,e)=>(e.cornerRadius>0?((n,r,i,o,a,s)=>{o<2*s&&(s=o/2),a<2*s&&(s=a/2),n.beginPath(),n.moveTo(r+s,i),n.arcTo(r+o,i,r+o,i+a,s),n.arcTo(r+o,i+a,r,i+a,s),n.arcTo(r,i+a,r,i,s),n.arcTo(r,i,r+o,i,s),n.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),Tg=(t,e)=>(e.backgroundColor&&t.fill(),t),Rg=(t,e)=>(e.strokeWidth&&t.stroke(),t);var d0=async(t,e,n={})=>{const{drawImage:r}=n;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let i;if(i=sc(e.backgroundImage)?e.backgroundImage:await c0(e.backgroundImage),A1(t,e),Tg(t,e),e.backgroundRepeat==="repeat"){const o=e.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:s}=tu(e,e.backgroundSize||Ul(i),Ul(i),e.backgroundCorners,{x:0,y:0}),l=document.createElement("canvas");l.width=s.width,l.height=s.height;const c=l.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await r(c,i,a,{...s,x:0,y:0});const d=t.createPattern(l,"repeat");t.fillStyle=d,t.save(),t.beginPath(),t.rect(e.x+o.x,e.y+o.y,e.width-o.x,e.height-o.y),t.clip(),t.translate(s.x+o.x,s.y+o.y),t.fill(),_n(l),t.restore()}else{const{srcRect:o,destRect:a}=tu(e,e.backgroundSize,Ul(i),e.backgroundCorners,e.backgroundPosition);await Pb(t,i,o,a,r,{feather:e.feather})}return t.beginPath(),A1(t,e),Rg(t,e),[]}return A1(t,e),Tg(t,e),Rg(t,e),[]},u0=async(t,e,n={})=>new Promise(async(r,i)=>{const{drawImage:o}=n;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let a;try{a=await c0(e.backgroundImage)}catch(d){i(d)}const s=nr(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=tu(s,e.backgroundSize,Ul(a),e.backgroundCorners,e.backgroundPosition);await Pb(t,a,l,c,o),e.strokeWidth&&t.stroke(),r([])}else e.strokeWidth&&t.stroke(),r([])}),$5=async(t,e,n)=>{const r=e.width&&e.height?so(e):vh(e.text,e),i={x:e.x,y:e.y,width:r.width,height:r.height};if(d0(t,{...e,...i,options:n}),!e.text.length)return[];const{textOutlineWidth:o=0,textShadowX:a=0,textShadowY:s=0,textShadowBlur:l=0,textShadowColor:c,outline:d,blur:u,...p}=e;return e.height&&(t.rect(i.x-o+Math.min(a,0),i.y-o+Math.min(s,0),i.width+o+o+Math.abs(a)+l,i.height+o+Math.abs(s)+l),t.save(),t.clip()),(a||s||l)&&(t.save(),t.translate(a,s),await O1(t,i,e,{...n,paddingLeft:mr+l,paddingRight:mr+l,paddingTop:l,paddingBottom:l,shapeExtendedProps:{color:c,blur:l}}),t.restore()),o&&await O1(t,i,e,{...n,paddingLeft:mr+o,paddingRight:mr+o,paddingTop:o,paddingBottom:o,shapeExtendedProps:{color:e.textOutlineColor,outline:o}}),e.height&&t.restore(),await O1(t,i,p,{...n,paddingLeft:mr,paddingRight:mr,paddingTop:0,paddingBottom:0}),[]};const O1=async(t,e,n,r)=>{const{willRequest:i,shapeExtendedProps:o,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c}=r,d=await Eb(n.text,{...n,...o,...e,paddingLeft:a,paddingRight:s,paddingTop:l,paddingBottom:c,imageWidth:e.width,imageHeight:e.height,willRequest:i});t.drawImage(d,n.x-a,n.y-l,d.width,d.height)};var b5=async(t,e)=>new Promise(async n=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.globalAlpha=e.opacity;let r=vb(e),i=wb(e);t.moveTo(r.x,r.y),t.lineTo(i.x,i.y),e.strokeWidth&&t.stroke(),n([])}),xh=async(t,e)=>new Promise((n,r)=>{if(e.bitmap&&e.points.length===1)return void u0(t,{x:e.points[0].x,y:e.points[0].y,rx:.5*e.strokeWidth,ry:.5*e.strokeWidth,backgroundColor:e.strokeColor}).then(()=>n([]));t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?Pr(e.strokeColor):"none",t.fillStyle=e.backgroundColor?Pr(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:i}=e;t.lineCap=e.strokeCap,t.lineJoin=e.strokeJoin,t.setLineDash(e.strokeDash||[]),e.pathClose&&t.beginPath(),t.moveTo(i[0].x,i[0].y);const o=i.length;for(let a=1;a<o;a++)t.lineTo(i[a].x,i[a].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),n([])}),Ab=(t,e,n,r)=>((e||n)&&(t.translate(r.x,r.y),t.scale(e?-1:1,n?-1:1),t.translate(-r.x,-r.y)),t);const E5=async(t,e,n)=>{t.globalCompositeOperation=e.drawMode==="subtract"?"destination-out":"source-over";const r=_b(e);let i;if(a0(t,e.rotation,r),Ab(t,e.flipX,e.flipY,r),ks(e)?i=d0:Da(e)?i=u0:Ws(e)?i=b5:Fs(e)?i=xh:Va(e)&&(i=$5),i){const o=await i(t,e,n);return o.length?[e,...await Ob(t,o,n)]:[]}return[]};var Ob=async(t,e,n)=>{let r=[];for(const i of e)t.save(),t.beginPath(),r=[...r,...await E5(t,i,n)],t.restore();return r},p0=async(t,e={})=>{const{shapes:n=[],contextBounds:r=t,transform:i=be,drawImage:o,willRequest:a,canvasMemoryLimit:s,computeShape:l=xn,preprocessShape:c=xn}=e;if(!n.length)return t;const d=dn("canvas");d.width=r.width,d.height=r.height;const u=d.getContext("2d",{willReadFrequently:!0});u.putImageData(t,r.x||0,r.y||0);const p=n.map(Ta).map(l).map(c).flat();i(u),await Ob(u,p,{drawImage:o,canvasMemoryLimit:s,willRequest:a});const h=u.getImageData(0,0,d.width,d.height);return _n(d),h},v5=async(t,e={})=>{const{backgroundColor:n,backgroundImage:r}=e,i=!(!n||n&&n[3]===0);if(!r&&!i)return t;const o=dn("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d",{willReadFrequently:!0});if(a.putImageData(t,0,0),a.globalCompositeOperation="destination-over",i&&(a.fillStyle=Pr(n),a.fillRect(0,0,o.width,o.height)),r){let l;l=sc(r)?r:await c0(r);const{srcRect:c,destRect:d}=tu({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});a.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=a.getImageData(0,0,o.width,o.height);return _n(o),s},h0=t=>t.length?t.reduce((e,n)=>((r,i)=>{const o=new Array(20);return o[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],o[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],o[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],o[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],o[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],o[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],o[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],o[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],o[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],o[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],o[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],o[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],o[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],o[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],o[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],o[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],o[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],o[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],o[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],o[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],o})([...e],n),t.shift()):[],Lb=(t,e)=>{const n=t.width*t.height,r=e.reduce((o,a)=>(a.width>o.width&&a.height>o.height&&(o.width=a.width,o.height=a.height),o),{width:0,height:0}),i=r.width*r.height;return((o,a=2)=>Math.round(o*a)/a)(Math.max(.5,.5+(1-i/n)/2),5)};function Pe(){}const m0=t=>t;function Tn(t,e){for(const n in e)t[n]=e[n];return t}function Db(t){return t()}function Sg(){return Object.create(null)}function sn(t){t.forEach(Db)}function vn(t){return typeof t=="function"}function ze(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ao(t,...e){if(t==null)return Pe;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function to(t){let e;return ao(t,n=>e=n)(),e}function G(t,e,n){t.$$.on_destroy.push(ao(e,n))}function An(t,e,n,r){if(t){const i=kb(t,e,n,r);return t[0](i)}}function kb(t,e,n,r){return t[1]&&r?Tn(n.ctx.slice(),t[1](r(e))):n.ctx}function On(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],a=Math.max(e.dirty.length,i.length);for(let s=0;s<a;s+=1)o[s]=e.dirty[s]|i[s];return o}return e.dirty|i}return e.dirty}function Ln(t,e,n,r,i,o){if(i){const a=kb(e,n,r,o);t.p(a,i)}}function Dn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Jl(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Mg(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||r[0]==="$"||(n[r]=t[r]);return n}function ut(t,e,n){return t.set(n),e}function fn(t){return t&&vn(t.destroy)?t.destroy:Pe}const Fb=typeof window<"u";let Bb=Fb?()=>window.performance.now():()=>Date.now(),f0=Fb?t=>requestAnimationFrame(t):Pe;const Ps=new Set;function Nb(t){Ps.forEach(e=>{e.c(t)||(Ps.delete(e),e.f())}),Ps.size!==0&&f0(Nb)}function g0(t){let e;return Ps.size===0&&f0(Nb),{promise:new Promise(n=>{Ps.add(e={c:t,f:n})}),abort(){Ps.delete(e)}}}function vt(t,e){t.appendChild(e)}function Gb(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function w5(t){const e=dt("style");return function(n,r){vt(n.head||n,r),r.sheet}(Gb(t),e),e.sheet}function it(t,e,n){t.insertBefore(e,n||null)}function nt(t){t.parentNode.removeChild(t)}function dt(t){return document.createElement(t)}function vr(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Sn(t){return document.createTextNode(t)}function Kt(){return Sn(" ")}function Zn(){return Sn("")}function Et(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x5(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Cg(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:I(t,r,e[r])}function _g(t,e){Object.keys(e).forEach(n=>{(function(r,i,o){i in r?r[i]=typeof r[i]=="boolean"&&o===""||o:I(r,i,o)})(t,n,e[n])})}function Kn(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function zb(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class Ub{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=vr(n.nodeName):this.e=dt(n.nodeName),this.t=n,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)it(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(nt)}}function eu(t,e){return new t(e)}const nu=new Map;let tc,zd=0;function Pg(t,e,n,r,i,o,a,s=0){const l=16.666/r;let c=`{
`;for(let $=0;$<=1;$+=l){const b=e+(n-e)*o($);c+=100*$+`%{${a(b,1-b)}}
`}const d=c+`100% {${a(n,1-n)}}
}`,u=`__svelte_${function($){let b=5381,E=$.length;for(;E--;)b=(b<<5)-b^$.charCodeAt(E);return b>>>0}(d)}_${s}`,p=Gb(t),{stylesheet:h,rules:g}=nu.get(p)||function($,b){const E={stylesheet:w5(b),rules:{}};return nu.set($,E),E}(p,t);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${d}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?m+", ":""}${u} ${r}ms linear ${i}ms 1 both`,zd+=1,u}function I5(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),zd-=i,zd||f0(()=>{zd||(nu.forEach(o=>{const{ownerNode:a}=o.stylesheet;a&&nt(a)}),nu.clear())}))}function Hl(t){tc=t}function Ha(){if(!tc)throw new Error("Function called outside component initialization");return tc}function lo(t){Ha().$$.on_mount.push(t)}function Vb(t){Ha().$$.after_update.push(t)}function gi(t){Ha().$$.on_destroy.push(t)}function Vi(){const t=Ha();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=zb(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}function qr(t,e){return Ha().$$.context.set(t,e),e}function _r(t){return Ha().$$.context.get(t)}function Zo(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Ll=[],on=[],Ud=[],Ih=[],Hb=Promise.resolve();let Th=!1;function Wb(){Th||(Th=!0,Hb.then(ct))}function qb(){return Wb(),Hb}function Na(t){Ud.push(t)}function di(t){Ih.push(t)}const L1=new Set;let Sl,Ed=0;function ct(){const t=tc;do{for(;Ed<Ll.length;){const e=Ll[Ed];Ed++,Hl(e),T5(e.$$)}for(Hl(null),Ll.length=0,Ed=0;on.length;)on.pop()();for(let e=0;e<Ud.length;e+=1){const n=Ud[e];L1.has(n)||(L1.add(n),n())}Ud.length=0}while(Ll.length);for(;Ih.length;)Ih.pop()();Th=!1,L1.clear(),Hl(t)}function T5(t){if(t.fragment!==null){t.update(),sn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Na)}}function D1(t,e,n){t.dispatchEvent(zb(`${e?"intro":"outro"}${n}`))}const Vd=new Set;let eo;function we(){eo={r:0,c:[],p:eo}}function xe(){eo.r||sn(eo.c),eo=eo.p}function B(t,e){t&&t.i&&(Vd.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(Vd.has(t))return;Vd.add(t),eo.c.push(()=>{Vd.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const R5={duration:0};function Ag(t,e,n,r){let i=e(t,n),o=r?0:1,a=null,s=null,l=null;function c(){l&&I5(t,l)}function d(p,h){const g=p.b-o;return h*=Math.abs(g),{a:o,b:p.b,d:g,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:g=300,easing:m=m0,tick:$=Pe,css:b}=i||R5,E={start:Bb()+h,b:p};p||(E.group=eo,eo.r+=1),a||s?s=E:(b&&(c(),l=Pg(t,o,p,g,h,m,b)),p&&$(0,1),a=d(E,g),Na(()=>D1(t,p,"start")),g0(v=>{if(s&&v>s.start&&(a=d(s,g),s=null,D1(t,a.b,"start"),b&&(c(),l=Pg(t,o,a.b,a.duration,0,m,i.css))),a){if(v>=a.end)$(o=a.b,1-o),D1(t,a.b,"end"),s||(a.b?c():--a.group.r||sn(a.group.c)),a=null;else if(v>=a.start){const w=v-a.start;o=a.a+a.d*m(w/a.duration),$(o,1-o)}}return!(!a&&!s)}))}return{run(p){vn(i)?(Sl||(Sl=Promise.resolve(),Sl.then(()=>{Sl=null})),Sl).then(()=>{i=i(),u(p)}):u(p)},end(){c(),a=s=null}}}const y0=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S5(t,e){t.d(1),e.delete(t.key)}function qs(t,e){j(t,1,1,()=>{e.delete(t.key)})}function Wa(t,e,n,r,i,o,a,s,l,c,d,u){let p=t.length,h=o.length,g=p;const m={};for(;g--;)m[t[g].key]=g;const $=[],b=new Map,E=new Map;for(g=h;g--;){const M=u(i,o,g),A=n(M);let x=a.get(A);x?r&&x.p(M,e):(x=c(A,M),x.c()),b.set(A,$[g]=x),A in m&&E.set(A,Math.abs(g-m[A]))}const v=new Set,w=new Set;function T(M){B(M,1),M.m(s,d),a.set(M.key,M),d=M.first,h--}for(;p&&h;){const M=$[h-1],A=t[p-1],x=M.key,C=A.key;M===A?(d=M.first,p--,h--):b.has(C)?!a.has(x)||v.has(x)?T(M):w.has(C)?p--:E.get(x)>E.get(C)?(w.add(x),T(M)):(v.add(C),p--):(l(A,a),p--)}for(;p--;){const M=t[p];b.has(M.key)||l(M,a)}for(;h;)T($[h-1]);return $}function gr(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const l in a)l in s||(r[l]=1);for(const l in s)i[l]||(n[l]=s[l],i[l]=1);t[o]=s}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}function wr(t){return typeof t=="object"&&t!==null?t:{}}function Zr(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function qt(t){t&&t.c()}function Ht(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||Na(()=>{const a=t.$$.on_mount.map(Db).filter(vn);t.$$.on_destroy?t.$$.on_destroy.push(...a):sn(a),t.$$.on_mount=[]}),o.forEach(Na)}function Wt(t,e){const n=t.$$;n.fragment!==null&&(sn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ye(t,e,n,r,i,o,a,s=[-1]){const l=tc;Hl(t);const c=t.$$={fragment:null,ctx:[],props:o,update:Pe,not_equal:i,bound:Sg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Sg(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(u,p,...h)=>{const g=h.length?h[0]:p;return c.ctx&&i(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),d&&function(m,$){m.$$.dirty[0]===-1&&(Ll.push(m),Wb(),m.$$.dirty.fill(0)),m.$$.dirty[$/31|0]|=1<<$%31}(t,u)),p}):[],c.update(),d=!0,sn(c.before_update),c.fragment=!!r&&r(c.ctx),e.target){if(e.hydrate){const u=function(p){return Array.from(p.childNodes)}(e.target);c.fragment&&c.fragment.l(u),u.forEach(nt)}else c.fragment&&c.fragment.c();e.intro&&B(t.$$.fragment),Ht(t,e.target,e.anchor,e.customElement),ct()}Hl(l)}class Xe{$destroy(){Wt(this,1),this.$destroy=Pe}$on(e,n){if(!vn(n))return Pe;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){var n;this.$$set&&(n=e,Object.keys(n).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Es=[];function Ts(t,e){return{subscribe:Pt(t,e).subscribe}}function Pt(t,e=Pe){let n;const r=new Set;function i(o){if(ze(t,o)&&(t=o,n)){const a=!Es.length;for(const s of r)s[1](),Es.push(s,t);if(a){for(let s=0;s<Es.length;s+=2)Es[s][0](Es[s+1]);Es.length=0}}}return{set:i,update:function(o){i(o(t))},subscribe:function(o,a=Pe){const s=[o,a];return r.add(s),r.size===1&&(n=e(i)||Pe),o(t),()=>{r.delete(s),r.size===0&&(n(),n=null)}}}}function ke(t,e,n){const r=!Array.isArray(t),i=r?[t]:t,o=e.length<2;return Ts(n,a=>{let s=!1;const l=[];let c=0,d=Pe;const u=()=>{if(c)return;d();const h=e(r?l[0]:l,a);o?a(h):d=vn(h)?h:Pe},p=i.map((h,g)=>ao(h,m=>{l[g]=m,c&=~(1<<g),s&&u()},()=>{c|=1<<g}));return s=!0,u(),function(){sn(p),d()}})}var M5=t=>t.reduce((e,n)=>Object.assign(e,n),{});const vs=t=>({updateValue:t}),jr=t=>({defaultValue:t}),jb=t=>({store:t}),vd=t=>({store:(e,n)=>ke(...t(n))}),wd=t=>({store:(e,n)=>{const[r,i,o=()=>!1]=t(n);let a,s=!0;return ke(r,(l,c)=>{i(l,d=>{!s&&o(a,d)||(a=d,s=!1,c(d))})})}}),Ml=t=>({store:(e,n)=>{const[r,i={},o]=t(n);let a=[];const s={},l=h=>r(h,s),c=h=>{(a.length||h.length)&&(a=h,d())},d=()=>{const h=a.map(l);o&&h.sort(o),a=[...h],p(h)};Object.entries(i).map(([h,g])=>g.subscribe(m=>{s[h]=m,m&&d()}));const{subscribe:u,set:p}=Pt(e||[]);return{set:c,update:h=>c(h(a)),subscribe:u}}});var Og=t=>{const e={},n={};return t.forEach(([r,...i])=>{const o=M5(i),a=e[r]=((l,c,d)=>{const{store:u=w=>Pt(w),defaultValue:p=be,updateValue:h}=d,g=u(p(),c,l),{subscribe:m,update:$=be}=g;let b;const E=w=>{let T=!0;b&&b(),b=m(M=>{if(T)return T=!1;w(M),b(),b=void 0})},v=h?h(l):xn;return g.set=w=>$(T=>v(w,T,E)),g.defaultValue=p,g})(n,e,o),s={get:()=>to(a),set:a.set};Object.defineProperty(n,r,s)}),{stores:e,accessors:n}},C5=[["src",jb(()=>{let t;const{subscribe:e,set:n}=Pt(),r=i=>{t!==i&&(t=i,n(t))};return{set:r,subscribe:e,update:i=>r(i(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",jr(()=>"pixelated")],["images",jr(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"]],_5=t=>t.charAt(0).toUpperCase()+t.slice(1),ec=(t,e)=>{Object.keys(e).forEach(n=>{const r=Xn(e[n])?{value:e[n],writable:!1}:e[n];Object.defineProperty(t,n,r)})};const Lg=(t,e)=>{let n,r,i,o,a,s,l,c,d,u;const p=e.length;for(n=0;n<p;n++)if(r=e[n],i=e[n+1>p-1?0:n+1],o=r.x-t.x,a=r.y-t.y,s=i.x-t.x,l=i.y-t.y,c=o-s,d=a-l,u=c*a-d*o,u<-1e-5)return!1;return!0};var Dg=(t,e)=>{const n=nb(e),r=yn();Xo(t).forEach(o=>{Ar(o,r),Lg(o,e)||n.forEach(a=>{const s=Math.atan2(a.start.y-a.end.y,a.start.x-a.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=ht(o.x+l,o.y+c),u=K$(Z$(a),1e4),p=n0(Ba(o,d),u);p&&Ar(r,Un(je(p),o))})});const i=Re(t);return Ar(i,r),!!Xo(i).every(o=>Lg(o,e))&&(fu(t,i),!0)},Yb=(t,e)=>{const n=Xo(t),r=rb(e,5),i=nn(t),o=[];n.forEach(l=>{const c=((u,p)=>{if(p===0)return u;const h=ht(u.start.x-u.end.x,u.start.y-u.end.y),g=no(h),m=Ci(g,p);return u.end.x+=m.x,u.end.y+=m.y,u})(Ba(je(i),je(l)),1e6);let d=!1;r.map(Z$).forEach(u=>{const p=n0(c,u);p&&!d&&(o.push(p),d=!0)})});const a=oi(o[0],o[2])<oi(o[1],o[3])?[o[0],o[2]]:[o[1],o[3]],s=Lr(a);return s.width<t.width&&(fu(t,s),!0)},Xb=(t,e,n={x:0,y:0})=>{const r=rr(t),i=nn(r),o=tb(r,n,i).map(s=>ka(s,e,i)),a=Lr(o);return o.map(s=>Un(s,a))},Rs=(t,e=0,n=Gn(t))=>{let r,i;if(e!==0){const o=Math.atan2(1,n),a=Math.sign(e)*e,s=a%Math.PI,l=a%Ji;let c;c=s>_a&&s<Ji+_a?l>_a?a:Ji-l:l>_a?Ji-l:a;const d=Math.min(Math.abs(t.height/Math.sin(o+c)),Math.abs(t.width/Math.cos(o-c)));r=Math.cos(o)*d,i=r/n}else r=t.width,i=r/n,i>t.height&&(i=t.height,r=i*n);return fr(r,i)},P5=(t,e,n,r,i,o,a,s)=>{const l=Mr(a),c=Mr(s),d=de(Math.max(e.width/c.width,e.height/c.height)),u=de(Math.min(e.width/l.width,e.height/l.height)),p=Re(e);if(u<1||d>1){const h=nn(t),g=nn(e),m=u<1?u:d,$=(g.x+h.x)/2,b=(g.y+h.y)/2,E=p.width/m,v=p.height/m;J$(p,$-.5*E,b-.5*v,E,v)}return o?(((h,g,m=0,$=yn(),b)=>{if(qe(m)&&m!==0||$.x||$.y){const E=Gn(h),v=Xb(g,m,$),w=Rs(g,m,E);if(!(h.width<w.width&&h.height<w.height)){const T=.5*h.width-.5*w.width,M=.5*h.height-.5*w.height;h.width>w.width&&(h.width=w.width,h.x+=T),h.height>w.height&&(h.height=w.height,h.y+=M)}Dg(h,v),Yb(h,v)&&Dg(h,v)}else{const E=Gn(h);h.width=Math.min(h.width,g.width),h.height=Math.min(h.height,g.height),h.x=Math.max(h.x,0),h.x+h.width>g.width&&(h.x-=h.x+h.width-g.width),h.y=Math.max(h.y,0),h.y+h.height>g.height&&(h.y-=h.y+h.height-g.height);const v=nn(h),w=Cr(h,E);w.width=Math.max(b.width,w.width),w.height=Math.max(b.height,w.height),w.x=v.x-.5*w.width,w.y=v.y-.5*w.height,fu(h,w)}})(p,n,r,i,l),{crop:p}):{crop:p}},$0=(t,e,n)=>{const r=rr(t),i=nn(r),o=Bi(r,n,i),a=nn(Kl(Lr(o))),s=nn(e),l=ka(s,-n,a),c=Un(l,a),d=zi(Ar(i,c),de);return nr(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},rn=(t,e,n)=>Math.max(e,Math.min(t,n));const k1=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration"],Rh=t=>er(t)?t.map(Rh):o0(t)||ac(t)?t:Vs(t)?{...t}:t,Cl=t=>t.map(e=>Object.entries(e).reduce((n,[r,i])=>(r.startsWith("_")||(n[r]=i),n),{})),A5=(t,e)=>t===e;var Ko=(t,e,n=A5)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0};const kg=(t,e,n)=>{const r=zi(nn(t),d=>de(d,8)),i=rr(e),o=nn(i),a=Bi(i,n,o),s=zi(oc(Lr(a)),d=>de(d,8)),l=Math.abs(s.x-r.x),c=Math.abs(s.y-r.y);return l<1&&c<1},O5=(t,e,n,r,i)=>{if(!i)return[-1/0,1/0];const o=Math.max(n.width/r.width,n.height/r.height),a=fr(r.width*o,r.height*o),s=(l=a,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,u=Math.acos(a.height/s),p=u-Math.acos(d/s),h=Math.asin(c/s)-u;if(Number.isNaN(p)&&Number.isNaN(h))return[-1/0,1/0];const g=Number.isNaN(p)?h:Number.isNaN(h)?p:Math.min(p,h);return[-g,g]},Dl=(t,e)=>{const{context:n,props:r}=e;return t._isFormatted||((t=p5(t))._isFormatted=!0,Object.assign(t,r)),t._isDraft||!yu(t)||t._context&&li(n,t._context)||(Mb(t,n),t._context={...n}),t},L5=(t,e)=>(t._isFormatted||(t.disableMove=!0,t.disableSelect=!0,t.disableResize=!0,t.disableRotate=!0),Dl(t,e));var b0=[["file"],["size"],["loadState"],["processState"],["aspectRatio",vd(({size:t})=>[t,e=>e?Gn(e):void 0])],["perspectiveX",jr(()=>0)],["perspectiveY",jr(()=>0)],["perspective",vd(({perspectiveX:t,perspectiveY:e})=>[[t,e],([n,r])=>({x:n,y:r})])],["rotation",jr(()=>0),vs(t=>(e,n,r)=>{if(e===n)return e;const{loadState:i,size:o,rotationRange:a,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:u,cropOrigin:p}=t;if(!c||!i||!i.beforeComplete)return e;const h=u&&(($,b,E)=>{const v=Rs(b,E,Gn($));return Zl(No(v,Math.round),No(Mr($),Math.round))})(c,o,n),g=u&&kg(c,o,n),m=(($,b,E,v,w,T,M,A,x,C)=>{const H=Mr(x),S=Mr(C);M&&(S.width=Math.min(C.width,w.width),S.height=Math.min(C.height,w.height));let y=!1;const L=(P,U)=>{const X=$0(w,v,P),k=rr(w),F=nn(k),Q=tb(k,T,F),rt=Un(je(F),cg(Q)),$t=ka(nn(X),U,F),V=Un(je(F),$t);Q.forEach(gt=>ka(gt,U,F));const Y=Lr(Q),q=cg(Q),et=Ar(Un(Un(q,V),Y),rt),D=nr(et.x-.5*X.width,et.y-.5*X.height,X.width,X.height);if(A&&qn(D,A.width/D.width),M){const gt=Xb(w,U,T);Yb(D,gt)}const ot=de(Math.min(D.width/H.width,D.height/H.height),8),st=de(Math.max(D.width/S.width,D.height/S.height),8);return(ot<1||st>1)&&de(Math.abs(U-P))===de(Math.PI/2)&&!y?(y=!0,L($,$+Math.sign(U-P)*Math.PI)):{rotation:U,crop:Xr(D,gt=>de(gt,8))}},O=Math.sign(b)*Math.round(Math.abs(b)/Ji)*Ji,_=rn(b,O+E[0],O+E[1]);return L($,_)})(n,e,a,c,o,d,u,p,s,l);if(h&&g){const $=Rs(o,e,Gn(m.crop));m.crop.x+=.5*m.crop.width,m.crop.y+=.5*m.crop.height,m.crop.x-=.5*$.width,m.crop.y-=.5*$.height,m.crop.width=$.width,m.crop.height=$.height}return r(()=>{t.crop=Xr(m.crop,$=>de($,8))}),m.rotation})],["flipX",jr(()=>!1)],["flipY",jr(()=>!1)],["flip",vd(({flipX:t,flipY:e})=>[[t,e],([n,r])=>({x:n,y:r})])],["isRotatedSideways",wd(({rotation:t})=>[[t],([e],n)=>n(Fi(e)),(e,n)=>e!==n])],["crop",vs(t=>(e,n=e)=>{const{loadState:r,size:i,cropMinSize:o,cropMaxSize:a,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!n||!r||!r.beforeComplete)return e;e||(e=rr(Rs(i,c,l||Gn(i))));const u=P5(n,e,i,c,d,s,o,a),p=Xr(u.crop,h=>de(h,8));return li(n,p)?n:p})],["cropAspectRatio",vs(t=>(e,n)=>{const{loadState:r,crop:i,size:o,rotation:a,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[u,p]=d.split(":");return u/p}return parseFloat(d)}})(e);if(!l)return;if(!i||!r||!r.beforeComplete)return l;const c=n?Math.abs(e-n):1;if(kg(i,o,a)&&s&&c>=.1){const d=((u,p)=>{const h=u.width,g=u.height;return Fi(p)&&(u.width=g,u.height=h),u})(Mr(o),a);t.crop=Xr(Cr(rr(d),e),de)}else{const d={width:i.height*l,height:i.height},u=.5*(i.width-d.width),p=.5*(i.height-d.height);t.crop=Xr(nr(i.x+u,i.y+p,d.width,d.height),de)}return l})],["cropOrigin"],["cropMinSize",jr(()=>({width:1,height:1}))],["cropMaxSize",jr(()=>({width:32768,height:32768}))],["cropLimitToImage",jr(()=>!0),vs(t=>(e,n,r)=>{const{crop:i}=t;return i&&!n&&e&&r(()=>t.crop=Re(t.crop)),e})],["cropSize",wd(({crop:t})=>[[t],([e],n)=>{e&&n(fr(e.width,e.height))},(e,n)=>Zl(e,n)])],["cropRectAspectRatio",vd(({cropSize:t})=>[[t],([e],n)=>{e&&n(de(Gn(e),5))}])],["cropRange",wd(({size:t,rotation:e,cropRectAspectRatio:n,cropMinSize:r,cropMaxSize:i,cropLimitToImage:o})=>[[t,e,n,r,i,o],([a,s,l,c,d,u],p)=>{a&&p(((h,g,m,$,b,E)=>{const v=Mr($),w=Mr(b);return E?[v,No(Rs(h,g,m),Math.round)]:[v,w]})(a,s,l,c,d,u))},(a,s)=>Ko(a,s)])],["rotationRange",wd(({size:t,isRotatedSideways:e,cropMinSize:n,cropSize:r,cropLimitToImage:i})=>[[t,e,n,r,i],([o,a,s,l,c],d)=>{!o||!l||d(O5(o,a,s,l,c))},(o,a)=>Ko(o,a)])],["backgroundColor",vs(()=>t=>((e=[0,0,0,0],n=1)=>e.length===4?e:[...e,n])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["minDuration",jr(()=>1/24)],["maxDuration",jr(()=>1/0)],["trim"],["volume",jr(()=>1)],["redaction",Ml(({size:t})=>[Dl,{context:t}])],["manipulation",Ml(({size:t})=>[Dl,{context:t}])],["annotation",Ml(({size:t})=>[Dl,{context:t}])],["decoration",Ml(({crop:t})=>[Dl,{context:t}])],["selection",Ml(({size:t})=>[L5,{context:t}])],["frame",vs(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return pn(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",jb((t,e,n)=>{const r=k1.map(l=>e[l]);let i=!1;const o=Pt({}),{subscribe:a}=ke([...r,o],(l,c)=>{if(i)return;const d=k1.reduce((u,p,h)=>(u[p]=Rh(l[h]),u),{});d.crop&&Xr(d.crop,Math.round),d.manipulation=d.manipulation&&Cl(d.manipulation),d.redaction=d.redaction&&Cl(d.redaction),d.annotation=d.annotation&&Cl(d.annotation),d.decoration=d.decoration&&Cl(d.decoration),d.selection=d.selection&&Cl(d.selection),c(d)}),s=l=>{l&&(i=!0,n.cropOrigin=void 0,k1.filter(c=>cn(l,c)).forEach(c=>{const d=l[c];n[c]=d===null?void 0:Rh(d)}),i=!1,o.set({}))};return{set:s,update:l=>s(l(null)),subscribe:a}})]],Fg=async(t,e,n={},r)=>{const{ontaskstart:i,ontaskprogress:o,ontaskend:a,token:s}=r;let l=!1;const c={cancel:be};s.cancel=()=>{l=!0,c.cancel()};for(const[d,u]of e.entries()){if(l)return;const[p,h]=u;i(d,h);try{t=await p(t,{...n,taskCancelToken:c},g=>o(d,h,g))}catch(g){throw l=!0,g}a(d,h)}return t};const Zb=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],D5=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],k5=b0.map(([t])=>t).filter(t=>!D5.includes(t)),F1=t=>"image"+_5(t),Bg=t=>cn(t,"crop");var Kb=()=>{const{stores:t,accessors:e}=Og(C5),{sub:n,pub:r}=Ni(),i=()=>e.images?e.images[0]:{};let o={};const a={};k5.forEach(m=>{Object.defineProperty(e,F1(m),{get:()=>{const $=i();if($)return $.accessors[m]},set:$=>{o[F1(m)]=$,a[F1(m)]=$;const b=i();b&&(b.accessors[m]=$)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(m=>{if(!m)return e.images=[];e.imageReader&&(e.images.length&&(o={}),d(m))}),c=t.imageReader.subscribe(m=>{m&&(e.images.length||e.src&&d(e.src))}),d=m=>{Promise.resolve().then(()=>p(m,o)).catch(()=>{})};let u;const p=(m,$={})=>new Promise((b,E)=>{let v=s();const w=!($.cropLimitToImage===!1||$.imageCropLimitToImage===!1||a.imageCropLmitedToImage===!1),T=$.cropMinSize||$.imageCropMinSize||a.imageCropMinSize,M=w?T:v&&v.accessors.cropMinSize,A=$.minDuration||$.imageMinDuration;v&&g(),v=(({minSize:H={width:1,height:1},minDuration:S=0}={})=>{const{stores:y,accessors:L}=Og(b0),{pub:O,sub:_}=Ni(),P=(U,X)=>{const k=()=>L[U]||{},F=$t=>{L[U]={...k(),...$t,timeStamp:Date.now()}},Q=()=>k().error,rt=$t=>{Q()||(F({error:$t}),O(X+"error",{...k()}))};return{start(){O(X+"start")},onabort(){F({abort:!0}),O(X+"abort",{...k()})},ontaskstart($t,V){Q()||(F({index:$t,task:V,taskProgress:void 0,taskLengthComputable:void 0}),O(X+"taskstart",{...k()}))},ontaskprogress($t,V,Y){Q()||(F({index:$t,task:V,taskProgress:Y.loaded/Y.total,taskLengthComputable:Y.lengthComputable}),O(X+"taskprogress",{...k()}),O(X+"progress",{...k()}))},ontaskend($t,V){Q()||(F({index:$t,task:V}),O(X+"taskend",{...k()}))},ontaskerror($t){rt($t)},error($t){rt($t)},beforeComplete($t){Q()||(F({beforeComplete:!0}),O("before"+X,$t))},complete($t){Q()||(F({complete:!0}),O(X,$t))}}};return ec(L,{read:(U,{reader:X},k={})=>{if(!X)return;Object.assign(L,{file:void 0,size:void 0,loadState:void 0});let F={cancel:be},Q=!1;const rt=P("loadState","load"),$t={token:F,...rt},V={src:U,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(rt.start(),Q)return rt.onabort();const Y=await Fg(V,X,k,$t);if(Q)return rt.onabort();const{size:q,duration:et,dest:D}=Y||{};if(!q||!q.width||!q.height)throw new Vl("Image size missing","IMAGE_SIZE_MISSING",Y);if(et>0&&et<S)throw new Vl("Video too short","VIDEO_TOO_SHORT",{...Y,minDuration:S});if(q.width<H.width||q.height<H.height)throw new Vl("Image too small","IMAGE_TOO_SMALL",{...Y,minWidth:H.width,minHeight:H.height});Object.assign(L,{file:D,size:q,duration:et}),rt.beforeComplete(Y),rt.complete(Y)}catch(Y){rt.error(Y)}finally{F=void 0}}),()=>{Q=!0,F&&F.cancel(),rt.onabort()}},write:(U,X)=>{if(!L.loadState.complete)return;L.processState=void 0;const k=P("processState","process"),F={src:L.file,imageState:L.state,dest:void 0};if(Xn(U)&&(U=U(L.file,L.state)),!U)return k.start(),void k.complete(F);let Q={cancel:be},rt=!1;const $t=X,V={token:Q,...k};return Promise.resolve().then(async()=>{try{if(k.start(),rt)return k.onabort();const Y=await Fg(F,U,$t,V);if(rt)return k.onabort();k.complete(Y)}catch(Y){k.error(Y)}finally{Q=void 0}}),()=>{rt=!0,Q&&Q.cancel()}},on:_}),{accessors:L,stores:y}})({minSize:M,minDuration:A}),Zb.map(H=>{return v.accessors.on(H,(S=H,y=>r(S,y)));var S});const x=()=>{o={},C.forEach(H=>H())},C=[];C.push(v.accessors.on("loaderror",H=>{x(),E(H)})),C.push(v.accessors.on("loadabort",()=>{x(),E({name:"AbortError"})})),C.push(v.accessors.on("load",H=>{u=void 0,x(),b(H)})),C.push(v.accessors.on("beforeload",()=>((H,S)=>{if(Bg(S))return void(e.imageState=S);if(!S.imageCrop){const O=H.accessors.size,_=S.imageRotation||0,P=X$(Mr(O),_),U=rr(P);U.width=de(Math.abs(U.width),6),U.height=de(Math.abs(U.height),6);const X=S.imageCropAspectRatio||(S.imageCropLimitToImage?Gn(O):Gn(U));let k;S.imageCropLimitToImage?k=Cr(U,X):(k=Yo(U,X),k.x=(O.width-k.width)/2,k.y=(O.height-k.height)/2),S.imageCrop=k}if(H.accessors.duration&&!S.imageTrim&&S.imageMaxDuration){const{duration:O}=H.accessors;S.imageTrim=[[0,Math.min(S.imageMaxDuration/O,1)]]}const y=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];y.filter(O=>cn(S,O)).forEach(O=>{e[O]=S[O],delete S[O]});const L=Object.keys(S).filter(O=>!y.includes(O)).reduce((O,_)=>(O[_]=S[_],O),{});Object.assign(e,L)})(v,$))),e.images=[v],$.imageReader&&(e.imageReader=$.imageReader),$.imageWriter&&(e.imageWriter=$.imageWriter),u=v.accessors.read(m,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const g=()=>{const m=s();m&&(u&&u(),m.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),ec(e,{on:n,loadImage:p,abortLoadImage:()=>{u&&u(),e.images=[]},editImage:(m,$)=>new Promise((b,E)=>{p(m,$).then(()=>{const{images:v}=e,w=v[0],T=()=>{M(),A()},M=w.accessors.on("processerror",x=>{T(),E(x)}),A=w.accessors.on("process",x=>{T(),b(x)})}).catch(E)}),removeImage:g,processImage:(m,$)=>new Promise((b,E)=>{try{const v=[],w=()=>{h=void 0,v.forEach(T=>T())};(async()=>{if((M=>pn(M)||Jd(M)||Ql(M))(m))try{await p(m,$)}catch(M){E(M)}else m&&(Bg(m)?e.imageState=m:Object.assign(e,m));const T=s();if(!T)return E("no image");v.push(T.accessors.on("processerror",M=>{w(),E(M)})),v.push(T.accessors.on("processabort",()=>{w(),E({name:"AbortError"})})),v.push(T.accessors.on("process",M=>{w(),b(M)})),h=T.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||xn,imageScrambler:e.imageScrambler,willRequest:e.willRequest,willRequestResource:e.willRequestResource})})()}catch(v){E(v)}}),abortProcessImage:()=>{const m=s();m&&(h&&h(),m.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const Qb=(t,e)=>{const{processImage:n}=Kb();return n(t,e)};var Jb=()=>oo()?ci()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,tE=(t,e)=>Object.keys(t).filter(n=>!e.includes(n)).reduce((n,r)=>(n[r]=t[r],n),{}),eE=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const E0=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(n,r,i,o,a)=>{i.width=Math.max(i.width,1),i.height=Math.max(i.height,1),o.width=Math.max(o.width,1),o.height=Math.max(o.height,1);const{dest:s}=await Qb(r,{imageReader:sE(),imageWriter:lE({format:"canvas",targetSize:{...o,upscale:!0},imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:i}),{feather:l=0}=a||{};if(l>0){const c=dn("canvas");c.width=s.width,c.height=s.height;const d=c.getContext("2d",{willReadFrequently:!0}),u=1/l;let p=0;for(p=0;p<l;p++){const g=p*u;d.strokeStyle=`rgba(0,0,0,${g*g})`,d.strokeRect(p+.5,p+.5,s.width-2*p-1,s.height-2*p-1)}d.fillStyle="#000",d.fillRect(p,p,s.width+.5-2*p,s.height+.5-2*p);const h=s.getContext("2d");h.globalCompositeOperation="destination-in",h.drawImage(c,0,0),_n(c)}n.drawImage(s,o.x,o.y,o.width,o.height),_n(s)},$n=(t,e=(...r)=>r,n)=>async(r,i,o)=>{o(Is(0,!1));let a=!1;const s=await t(...e(r,i,l=>{a=!0,o(l)}));return n&&n(r,s),a||o(Is(1,!1)),r},F5=({willRequest:t,srcProp:e="src",destProp:n="dest"}={})=>[$n(UR,(r,i,o)=>[r[e],o,{...i,willRequest:t}],(r,i)=>r[n]=i),"any-to-file"],B5=({srcProp:t="dest",destProp:e="dest"}={})=>[$n(async n=>{if(/octet-stream/.test(n.type)){console.warn(`Pintura: File has unknown mime type "${n.type}", make sure your server sets the correct Content-Type header.`);let r="image";const i=await i0(n);/video/i.test(i.nodeName)&&(r="video");const o={type:r+"/unknown"};return ac(n)?new File([n],n.name,{...o,lastModified:n.lastModified}):new Blob([n],o)}return n},n=>[n[t]],(n,r)=>n[e]=r),"any-to-file"],nE=({srcProp:t="src",destProp:e="size"}={})=>[$n(cb,n=>[n[t]],(n,r)=>n[e]=r),"read-image-size"],N5=async t=>{const e=await i0(t);if(Qd(e))return await(n=>new Promise((r,i)=>{const o=()=>{eE(n).then(()=>{r(n.duration)})};if(n.readyState>=1)return o();n.onloadedmetadata=o,n.onerror=()=>i(n.error)}))(e)},G5=({srcProp:t="src",destProp:e="duration"}={})=>[$n(N5,n=>[n[t]],(n,r)=>n[e]=r),"read-media-duration"],rE=({srcSize:t="size",srcOrientation:e="orientation",destSize:n="size"}={})=>[$n(VR,r=>[r[t],r[e]],(r,i)=>r[n]=i),"image-size-match-orientation"],iE=({srcProp:t="src",destProp:e="head"}={})=>[$n((n,r)=>hb(n)?z$(n,r):void 0,n=>[n[t],[0,262144],onprogress],(n,r)=>n[e]=r),"read-image-head"],oE=({srcProp:t="head",destProp:e="orientation"}={})=>[$n(Zh,n=>[n[t],274],(n,r=1)=>n[e]=r),"read-exif-orientation-tag"],z5=({srcProp:t="head"}={})=>[$n(Zh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],U5=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:n="imageState",destImageSize:r="size",destScalar:i="scalar"}={})=>[$n((o,a)=>[Math.min(a.width/o.width,a.height/o.height),so(a)],o=>[o[t],o[e],o[n]],(o,[a,s])=>{o[i]=a,o[r]=s}),"calculate-canvas-scalar"],V5=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:n}={})=>[$n(j$,r=>[r[t],n],(r,i)=>r[e]=i),"blob-to-image-data"],H5=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[$n(V$,n=>[n[t],n[e]],(n,r)=>n.imageData=r),"image-data-match-orientation"],W5=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[$n(v5,n=>[n[t],{backgroundColor:n[e].backgroundColor,backgroundImage:n[e].backgroundImage}],(n,r)=>n.imageData=r),"image-data-fill"],q5=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:n="scalar"}={})=>[$n(WR,r=>{const i=r[n];let{crop:o}=r[e];return o&&i!==1&&(o=qn(Re(o),i,yn())),[r[t],{crop:o,rotation:r[e].rotation,flipX:r[e].flipX,flipY:r[e].flipY}]},(r,i)=>r.imageData=i),"image-data-crop"],j5=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:n="imageData",srcImageState:r="imageState",destImageScaledSize:i="imageScaledSize"})=>[$n(jR,o=>{const a=Math.min(t.width||Number.MAX_SAFE_INTEGER,o[r].targetSize&&o[r].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,o[r].targetSize&&o[r].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[n],{width:a,height:s,fit:t.fit||"contain",upscale:(l=o[r],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(o,a)=>{Zl(o.imageData,a)||(o[i]=so(a)),o.imageData=a}),"image-data-resize"],Y5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData"}={})=>[$n(JR,r=>{const{colorMatrix:i}=r[e],o=i&&Object.keys(i).map(a=>i[a]).filter(Boolean);return[r[t],{colorMatrix:o&&h0(o),convolutionMatrix:r[e].convolutionMatrix,gamma:r[e].gamma,noise:r[e].noise,vignette:r[e].vignette}]},(r,i)=>r[n]=i),"image-data-filter"],X5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destScalar:r="scalar"}={})=>[$n(async(i,o,a,s,l,c)=>{if(!o||!s.length)return i;let d;try{const m={dataSizeScalar:Lb(i,s)};a&&a[3]>0&&(m.backgroundColor=[...a]),d=await o(i,m)}catch{}const u=dn("canvas");u.width=i.width,u.height=i.height;const p=u.getContext("2d",{willReadFrequently:!0});if(p.putImageData(i,0,0),c==="auto"){const m=Math.sqrt(i.width*i.height);p.filter=`blur(${Math.round(m/100)}px)`}const h=new Path2D;s.forEach(m=>{const $=nr(m.x,m.y,m.width,m.height);zo($,l);const b=Bi(Re($),m.rotation),E=new Path2D;b.forEach((v,w)=>{if(w===0)return E.moveTo(v.x,v.y);E.lineTo(v.x,v.y)}),h.addPath(E)}),p.clip(h,"nonzero"),p.imageSmoothingEnabled=!1,p.drawImage(d,0,0,u.width,u.height),_n(d);const g=p.getImageData(0,0,u.width,u.height);return _n(u),g},(i,{imageScrambler:o,redactionRenderStyle:a})=>[i[t],o,i[e].backgroundColor,i[e].redaction,i[r],a],(i,o)=>i[n]=o),"image-data-redact"],Ng=({srcImageData:t="imageData",srcSize:e="size",srcImageState:n="imageState",srcShapes:r="annotation",destImageData:i="imageData",destImageScaledSize:o="imageScaledSize",destScalar:a="scalar",imageDataResizer:s,canvasMemoryLimit:l}={})=>[$n(p0,(c,{shapePreprocessor:d,willRequestResource:u,willRequest:p})=>{const h=c[n][r];if(!h.length)return[c[t]];const g=c[a],{crop:m}=c[n],$=c[e];let b=g;const E=c[o];E&&(b=Math.min(E.width/m.width,E.height/m.height));const v={width:$.width/g,height:$.height/g};return[c[t],{shapes:h,computeShape:w=>(w=Do(w,v),w=tE(w,["left","right","top","bottom"]),w=Cb(w,b)),transform:w=>{const T=c[e],{rotation:M=0,flipX:A,flipY:x,cropLimitToImage:C}=c[n],H=c[a],{crop:S=rr(T)}=c[n],y=c[o],L=y?Math.min(y.width/S.width,y.height/S.height):1,O={width:T.width/H*L,height:T.height/H*L},_=ob(O,M),P=_.width,U=_.height,X=.5*O.width-.5*P,k=.5*O.height-.5*U,F=oc(O);w.translate(-X,-k),w.translate(-S.x*L,-S.y*L),w.translate(F.x,F.y),w.rotate(M),w.translate(-F.x,-F.y),w.scale(A?-1:1,x?-1:1),w.translate(A?-O.width:0,x?-O.height:0),C&&(w.rect(0,0,O.width,O.height),w.clip())},drawImage:E0({imageDataResizer:s,canvasMemoryLimit:l}),preprocessShape:w=>d(w,{isPreview:!1,...c[n]}),canvasMemoryLimit:l,willRequest:p||u}]},(c,d)=>c[i]=d),"image-data-annotate"],Z5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar"}={})=>[$n(p0,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{let{decoration:u}=s[e];if(typeof window<"u"&&(m=>{if(m&&m._9xhda1o)return;const[$]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(w=>w.map(T=>String.fromCharCode(T)).join("")),{width:b,height:E}=s[e].crop,v=E/15;u=[...u,{x:.5*-v,y:.5*-v,width:1.5*b,height:1.25*E,text:Array(50).fill($).join(""),fontWeight:900,lineHeight:v,fontSize:v,color:[1,1,1,.05]}]})(window),!u.length)return[s[t]];let p=s[a];const{crop:h}=s[e],g=s[r];return g&&(p=Math.min(g.width/h.width,g.height/h.height)),[s[t],{shapes:u,drawImage:E0({imageDataResizer:i,canvasMemoryLimit:o}),computeShape:m=>(m=Do(m,h),m=tE(m,["left","right","top","bottom"]),m=Cb(m,p)),preprocessShape:m=>l(m,{isPreview:!1,...s[e]}),canvasMemoryLimit:o,willRequest:d||c}]},(s,l)=>s[n]=l),"image-data-decorate"],K5=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:n="imageData",destImageScaledSize:r="imageScaledSize",imageDataResizer:i,canvasMemoryLimit:o,destScalar:a="scalar"}={})=>[$n(p0,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{const u=s[e].frame;if(!u)return[s[t]];const p=s[a];let{crop:h}=s[e];h&&p!==1&&(h=qn(Re(h),p,yn()));const g={...h},m=Rb(Sb(u,g,l),g);g.x=Math.abs(m.left),g.y=Math.abs(m.top),g.width+=Math.abs(m.left)+Math.abs(m.right),g.height+=Math.abs(m.top)+Math.abs(m.bottom);const $=s[r],b=$?Math.min($.width/h.width,$.height/h.height):1;return zo(g,b),g.x=Math.floor(g.x),g.y=Math.floor(g.y),g.width=Math.floor(g.width),g.height=Math.floor(g.height),[s[t],{shapes:[u],contextBounds:g,computeShape:E=>Do(E,s[t]),transform:E=>{E.translate(g.x,g.y)},drawImage:E0({imageDataResizer:i,canvasMemoryLimit:o}),preprocessShape:E=>l(E,{isPreview:!1,...s[e]}),canvasMemoryLimit:o,willRequest:d||c}]},(s,l)=>s[n]=l),"image-data-frame"],Q5=({mimeType:t,quality:e,srcImageData:n="imageData",srcFile:r="src",destBlob:i="blob"}={})=>[$n(SR,o=>[o[n],t||t0(o[r].name)||o[r].type,e],(o,a)=>o[i]=a),"image-data-to-blob"],J5=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:n="dest"}={})=>[$n(Us,r=>[r[t],r[e]],(r,i)=>r[n]=i),"image-data-to-canvas"],tS=async(t,e)=>{if(!hb(t)||!e)return t;const n=new DataView(e),r=G$(n);if(!r||!r.exif)return t;const i=["exif","mpf","xmp"].reduce((o,a)=>r[a]?Math.max(o,r[a].offset+r[a].size):o,0);return((o,a,s=[0,o.size])=>a?new Blob([a,o.slice(...s)],{type:o.type}):o)(t,e.slice(0,i+2),[20])},eS=(t="blob",e="head",n="blob")=>[$n(tS,r=>[r[t],r[e]],(r,i)=>r[n]=i),"blob-write-image-head"],nS=({renameFile:t,srcBlob:e="blob",srcFile:n="src",destFile:r="dest",defaultFilename:i}={})=>[$n(Yl,o=>[o[e],t?t(o[n]):o[n].name||`${i}.${Y$(o[e].type)}`],(o,a)=>o[r]=a),"blob-to-file"],Gg=({url:t="./",dataset:e=o=>[["dest",o.dest,o.dest.name],["imageState",o.imageState]],destStore:n="store",credentials:r,headers:i={}})=>[$n(async(o,a)=>await((s,l,c)=>new Promise((d,u)=>{const{token:p={},beforeSend:h=be,onprogress:g=be}=c;p.cancel=()=>m.abort();const m=new XMLHttpRequest;m.upload.onprogress=g,m.onload=()=>m.status>=200&&m.status<300?d(m):u(m),m.onerror=()=>u(m),m.ontimeout=()=>u(m),m.open("POST",encodeURI(s)),h(m),m.send(l instanceof FormData?l:l.reduce(($,b)=>($.append(...b.map(HR)),$),new FormData))}))(t,o,{onprogress:a,beforeSend:s=>db(s,{headers:i,credentials:r})}),(o,a,s)=>[e(o),s],(o,a)=>o[n]=a),"store"],aE=t=>[$n(e=>(t&&t.length&&Object.keys(e).forEach(n=>{t.includes(n)||delete e[n]}),e)),"prop-filter"],sE=(t={})=>{const{orientImage:e=!0,outputProps:n=["src","dest","size","duration"],preprocessImageFile:r,request:i={}}=t;return[F5({willRequest:()=>i}),B5(),r&&[$n(r,(o,a,s)=>[o.dest,a,s],(o,a)=>o.dest=a),"preprocess-image-file"],nE({srcProp:"dest"}),G5({srcProp:"dest"}),e&&iE({srcProp:"dest"}),e&&oE(),e&&rE(),aE(n)].filter(Boolean)},rS=t=>t&&(pn(t)?Gg({url:t}):Xn(t)?[t,"store"]:Gg(t)),lE=(t={})=>(e,n,r={})=>{if(!gu(e))return;let{canvasMemoryLimit:i=Jb(),orientImage:o=!0,copyImageHead:a=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:u,store:p,format:h="file",outputProps:g=["src","dest","imageState","store"],preprocessImageSource:m,preprocessImageState:$,postprocessImageData:b,postprocessImageBlob:E}={...t,...r};return h==="blob"&&(h="file"),[m&&[$n(m,(v,w,T)=>[v.src,w,T,v.imageState],(v,w)=>v.src=w),"preprocess-image-source"],(o||a)&&iE(),o&&oE(),nE(),$&&[$n($,(v,w,T,M)=>[v.imageState,w,T,{size:v.size,orientation:v.orientation}],(v,w)=>v.imageState=w),"preprocess-image-state"],V5({canvasMemoryLimit:i}),o&&rE(),o&&H5(),U5(),X5(),q5(),j5({imageDataResizer:u,targetSize:d}),Ng({imageDataResizer:u,canvasMemoryLimit:i,srcShapes:"manipulation"}),Y5(),W5(),Ng({imageDataResizer:u,canvasMemoryLimit:i,srcShapes:"annotation"}),Z5({imageDataResizer:u,canvasMemoryLimit:i}),K5({imageDataResizer:u,canvasMemoryLimit:i}),b&&[$n(b,(v,w,T)=>[v.imageData,w,T],(v,w)=>v.imageData=w),"postprocess-image-data"],h==="file"?Q5({mimeType:s,quality:l}):h==="canvas"?J5():[v=>(v.dest=v.imageData,v)],h==="file"&&o&&z5(),h==="file"&&a&&eS(),E&&[$n(E,({blob:v,imageData:w,src:T},M,A)=>[{blob:v,imageData:w,src:T},M,A],(v,w)=>v.blob=w),"postprocess-image-file"],h==="file"&&nS({defaultFilename:"image",renameFile:c}),h==="file"?rS(p):Xn(p)&&[p,"store"],aE(g)].filter(Boolean)};var iS=(t,e,n,r,i,o,a,s,l,c,d)=>{if(!(t&&e&&n&&r&&s))return;s*=o;const u=Kl(Re(e)),p=nn(u),h=nn(t),g=rr(n),m=nn(g),$=$0(n,r,l),b=nn($),E=Un(je(m),b),v=Un(je(h),p);E.x+=v.x,E.y+=v.y;const w=Gl(je(E));w.x+=v.x,w.y+=v.y;const T=nn(ai(ai(Re(i),a),t)),M=Un(T,h);return Ar(E,M),{origin:w,translation:E,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let _l=null;var v0=()=>{if(_l===null)if("WebGL2RenderingContext"in window){let t;try{t=dn("canvas"),_l=!!t.getContext("webgl2")}catch{_l=!1}t&&_n(t),t=void 0}else _l=!1;return _l},zg=t=>(t&t-1)==0,w0=(t,e={},n="",r="")=>Object.keys(e).filter(i=>!Vs(e[i])).reduce((i,o)=>i.replace(new RegExp(n+o+r),e[o]),t);const oS={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},aS={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,rectaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},Ug=(t,e,n)=>{const r=t.createShader(n),i=((o,a,s)=>(a=w0(a,s===o.VERTEX_SHADER?oS:aS,"##").trim(),v0()?a:(a=(a=a.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===o.VERTEX_SHADER&&(a=a.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===o.FRAGMENT_SHADER&&(a=a.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+a)))(t,e,n);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(r)),r},Pl=(t,e,n,r,i)=>{const o=Ug(t,e,t.VERTEX_SHADER),a=Ug(t,n,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,o),t.attachShader(s,a),t.linkProgram(s);const l={};return r.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),i.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,o),t.detachShader(s,a),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(s)}}},Vg=t=>t.nodeName!=="VIDEO"&&(!!v0()||zg(t.width)&&zg(t.height)),sS=(t,e,n,r)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),((i,o,a)=>{i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,Vg(o)?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,a.filterParam),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,a.wrapParam),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,a.wrapParam),Vg(o)&&i.generateMipmap(i.TEXTURE_2D)})(t,n,r),t.bindTexture(t.TEXTURE_2D,null),e),ba=(t,e=1)=>t?[t[0],t[1],t[2],qe(t[3])?e*t[3]:e]:[0,0,0,0],B1=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},N1=(t,e,n,r,i,o,a)=>{const s=1/(e-n),l=1/(r-i),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(a+o)*c,t[15]=1},Ea=(t,e,n,r)=>{t[12]=t[0]*e+t[4]*n+t[8]*r+t[12],t[13]=t[1]*e+t[5]*n+t[9]*r+t[13],t[14]=t[2]*e+t[6]*n+t[10]*r+t[14],t[15]=t[3]*e+t[7]*n+t[11]*r+t[15]},Hg=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},Wg=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],d=t[10],u=t[11];t[4]=i*r+l*n,t[5]=o*r+c*n,t[6]=a*r+d*n,t[7]=s*r+u*n,t[8]=l*r-i*n,t[9]=c*r-o*n,t[10]=d*r-a*n,t[11]=u*r-s*n},qg=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],d=t[10],u=t[11];t[0]=i*r-l*n,t[1]=o*r-c*n,t[2]=a*r-d*n,t[3]=s*r-u*n,t[8]=i*n+l*r,t[9]=o*n+c*r,t[10]=a*n+d*r,t[11]=s*n+u*r},jg=(t,e)=>{const n=Math.sin(e),r=Math.cos(e),i=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],d=t[6],u=t[7];t[0]=i*r+l*n,t[1]=o*r+c*n,t[2]=a*r+d*n,t[3]=s*r+u*n,t[4]=l*r-i*n,t[5]=c*r-o*n,t[6]=d*r-a*n,t[7]=u*r-s*n};var lS=t=>t*Math.PI/180,$u=(t,e)=>v0()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const G1=(t,e)=>{const n=t.length;return e>=n?t[e%n]:e<0?t[e%n+n]:t[e]},cS=(t,e,n,r)=>{const i=ht(n.x-e.x,n.y-e.y),o=ht(r.x-n.x,r.y-n.y),a=ht(e.x-r.x,e.y-r.y),s=ht(t.x-e.x,t.y-e.y),l=ht(t.x-n.x,t.y-n.y),c=ht(t.x-r.x,t.y-r.y),d=Bd(i,s),u=Bd(o,l),p=Bd(a,c);return d<=0&&u<=0&&p<=0},dS=t=>{if(t.length<3)return[];if((b=>{const E=b.length;for(let v=0;v<E;v++){const w=Ba(b[v],G1(b,v+1));if(kR(w,b,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(b=>{let E,v,w,T,M,A=0;const x=b.length;for(E=0;E<x;E++)v=b[E],w=b[(E+1)%x],T=w.x-v.x,M=(w.y+v.y)/2,A+=T*M;return A})(t)<0&&t.reverse();const e=t.length,n=[...Array(e).keys()],r=[];let i,o,a,s,l,c,d,u,p,h,g,m,$=128;for(;n.length>3;){if($<=0)return[];for($--,i=0;i<n.length;i++)if(a=n[i],s=G1(n,i-1),l=G1(n,i+1),c=t[a],d=t[s],u=t[l],p=ht(d.x-c.x,d.y-c.y),h=ht(u.x-c.x,u.y-c.y),!(Bd(p,h)<0)){for(g=!0,o=0;o<e;o++)if(o!==a&&o!==s&&o!==l&&(m=t[o],cS(m,d,c,u))){g=!1;break}if(g){r.push([d,c,u]),n.splice(i,1);break}}}return r.push([t[n[0]],t[n[1]],t[n[2]]]),r},Yg=(t,e,n,r,i)=>{const o=no(ht(r.x-n.x,r.y-n.y)),a=no(ht(i.x-r.x,i.y-r.y)),s=no(ht(o.x+a.x,o.y+a.y)),l=ht(-s.y,s.x),c=ht(-o.y,o.x),d=Math.min(1/PR(l,c),5);t[e]=r.x,t[e+1]=r.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=r.x,t[e+6]=r.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},Xg=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},Zg=(t,e=0,n,r)=>{const i=Xo(t),o=t.x+.5*t.width,a=t.y+.5*t.height;return(n||r)&&e0(i,n,r,o,a),e!==0&&Ls(i,e,o,a),i},xd=(t,e,n,r,i)=>{const o=Math.min(20,Math.max(4,Math.round(r/2)));let a=0,s=0,l=0,c=0,d=0;for(;d<o;d++)a=d/o,s=i*Ji+a*Ji,l=r*Math.cos(s),c=r*Math.sin(s),t.push(ht(e+l,n+c))};let Id=null;var x0=()=>{if(Id!==null)return Id;let t=dn("canvas");const e=$u(t);return Id=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,_n(t),t=void 0,Id},I0=()=>Vn()&&!!window.chrome;const kl=new Float32Array([0,1,0,0,1,1,1,0]),uS=new Float32Array([1,0,0,0,1,1,0,1]),pS=Vn()&&Gi(),Kg=[0,0,0,0,1,0,0,0,0],hS=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],z1=[0,0,0,0],mS=[0,0,0,0],Qg=(t,e,n,r,i)=>{if(!n||!r)return kl;let o=r.x/n.width,a=r.y/n.height,s=t/n.width/i,l=e/n.height/i;return s-=o,l-=a,new Float32Array([-o,l,-o,-a,s,l,s,-a])};var fS=(t,e={})=>{const{alpha:n=!1}=e,r={width:0,height:0},i={width:0,height:0},o=x0()||1024;let a,s,l;const c=B1(),d=B1();let u,p,h,g,m,$,b,E,v,w=0,T=0,M=0,A=1;const x=new Map([]),C=()=>{y.stencilOp(y.KEEP,y.KEEP,y.KEEP),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},H=lS(30),S=Math.tan(H/2),y=$u(t,{alpha:n,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!y)return;y.getExtension("OES_standard_derivatives"),y.disable(y.DEPTH_TEST),y.enable(y.STENCIL_TEST),y.enable(y.BLEND),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!n&&Gi())),C();const L=y.createTexture();y.bindTexture(y.TEXTURE_2D,L),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array(z1)),x.set(0,L);const O=y.createTexture();x.set(2,O);const _=y.createFramebuffer(),P=y.createTexture();x.set(1,P);const U=y.createFramebuffer(),X=Pl(y,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),k=y.createBuffer(),F=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,F),y.bufferData(y.ARRAY_BUFFER,kl,y.STATIC_DRAW);const Q=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,Q),y.bufferData(y.ARRAY_BUFFER,uS,y.STATIC_DRAW);const rt=Pl(y,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),$t=y.createBuffer();I0()&&(y.bindBuffer(y.ARRAY_BUFFER,$t),y.bufferData(y.ARRAY_BUFFER,1,y.DYNAMIC_DRAW));const V=(It,At,Tt,le=!1)=>{const{program:oe,locations:Zt}=rt;y.useProgram(oe),y.enableVertexAttribArray(Zt.aPosition),y.enableVertexAttribArray(Zt.aNormal),y.enableVertexAttribArray(Zt.aMiter);const Se=((Vt,ae)=>{let ue,me,Ze,lt=0;const Bt=Vt.length,ye=new Float32Array(10*(ae?Bt+1:Bt)),se=Vt[0],Je=Vt[Bt-1];for(lt=0;lt<Bt;lt++)ue=Vt[lt-1],me=Vt[lt],Ze=Vt[lt+1],ue||(ue=ae?Je:ht(me.x+(me.x-Ze.x),me.y+(me.y-Ze.y))),Ze||(Ze=ae?se:ht(me.x+(me.x-ue.x),me.y+(me.y-ue.y))),Yg(ye,10*lt,ue,me,Ze);return ae&&Yg(ye,10*Bt,Je,se,Vt[1]),ye})(It,le),Ie=5*Float32Array.BYTES_PER_ELEMENT,He=2*Float32Array.BYTES_PER_ELEMENT,Ce=4*Float32Array.BYTES_PER_ELEMENT;y.uniform1f(Zt.uWidth,At),y.uniform1f(Zt.uSharpness,l),y.uniform4fv(Zt.uColor,Tt),y.uniformMatrix4fv(Zt.uMatrix,!1,u),y.uniform4f(Zt.uCanvasColor,w,T,M,A),y.uniform1fv(Zt.uMaskBounds,b),y.uniform1f(Zt.uMaskOpacity,$),y.bindBuffer(y.ARRAY_BUFFER,$t),y.bufferData(y.ARRAY_BUFFER,Se,y.STATIC_DRAW),y.vertexAttribPointer(Zt.aPosition,2,y.FLOAT,!1,Ie,0),y.vertexAttribPointer(Zt.aNormal,2,y.FLOAT,!1,Ie,He),y.vertexAttribPointer(Zt.aMiter,1,y.FLOAT,!1,Ie,Ce),y.drawArrays(y.TRIANGLE_STRIP,0,Se.length/5),y.disableVertexAttribArray(Zt.aPosition),y.disableVertexAttribArray(Zt.aNormal),y.disableVertexAttribArray(Zt.aMiter)},Y=Pl(y,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),q=y.createBuffer(),et=Pl(y,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){
##init
##colorize
##rectaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),D=y.createBuffer(),ot=y.createBuffer(),st=y.createBuffer(),gt=Pl(y,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Lt=y.createBuffer(),Xt=y.createBuffer(),Ct=new Map,Ut={2:{width:0,height:0},1:{width:0,height:0}},Le=(It,At,Tt,le=1)=>{const oe=Math.min(Math.min(4096,o)/Tt.width,Math.min(4096,o)/Tt.height,le),Zt=Math.floor(oe*Tt.width),Se=Math.floor(oe*Tt.height);Zl(Tt,Ut[It])?y.bindFramebuffer(y.FRAMEBUFFER,At):(y.bindTexture(y.TEXTURE_2D,x.get(It)),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,Zt,Se,0,y.RGBA,y.UNSIGNED_BYTE,null),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.bindFramebuffer(y.FRAMEBUFFER,At),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,x.get(It),0),Ut[It]=Tt);const Ie=Tt.width*s,He=Tt.height*s;var Ce,Vt;N1(d,0,Ie,He,0,-1,1),Ea(d,0,He,0),Vt=1,(Ce=d)[0]*=Vt,Ce[1]*=Vt,Ce[2]*=Vt,Ce[3]*=Vt,((ae,ue)=>{ae[4]*=ue,ae[5]*=ue,ae[6]*=ue,ae[7]*=ue})(d,-1),u=d,y.viewport(0,0,Zt,Se),y.colorMask(!0,!0,!0,!0),y.clearColor(0,0,0,0),y.clear(y.COLOR_BUFFER_BIT),v=[1,0,1,0,1,Math.max(r.width,Tt.width),1,Math.max(r.width,Tt.width)]},mt=(It,At)=>{const{forceRelease:Tt=!1}=At||{},{src:le}=Ct.get(It);le instanceof HTMLCanvasElement&&(Tt||le.dataset.retain||_n(le)),Ct.delete(It),y.deleteTexture(It)},pt=It=>Ct.get(It).isRotatedVideo;return{drawPath:(It,At=0,Tt=!1,le=!1,oe,Zt,Se,Ie,He)=>{if(It.length<2)return;const Ce=It.map(me=>({x:me.x*s,y:me.y*s})),Vt=oe*s;if(Vt>0&&V(Ce,Vt,ba(Zt,He),Se),Ce.length<3||!Ie||Ie[3]===0||!Se)return;const ae=dS(Ce),ue=new Float32Array(6*ae.length);ae.forEach(([me,Ze,lt],Bt)=>{const ye=6*Bt;ue[ye+0]=me.x,ue[ye+1]=me.y,ue[ye+2]=Ze.x,ue[ye+3]=Ze.y,ue[ye+4]=lt.x,ue[ye+5]=lt.y}),((me,Ze)=>{const{program:lt,locations:Bt}=Y;y.useProgram(lt),y.enableVertexAttribArray(Bt.aPosition),y.uniform4fv(Bt.uColor,Ze),y.uniformMatrix4fv(Bt.uMatrix,!1,u),y.uniform1fv(Bt.uMaskBounds,b),y.uniform1f(Bt.uMaskOpacity,$),y.uniform4f(Bt.uCanvasColor,w,T,M,A),y.bindBuffer(y.ARRAY_BUFFER,q),y.bufferData(y.ARRAY_BUFFER,me,y.STATIC_DRAW),y.vertexAttribPointer(Bt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,me.length/2),y.disableVertexAttribArray(Bt.aPosition)})(ue,ba(Ie,He))},drawRect:(It,At=0,Tt=!1,le=!1,oe,Zt,Se,Ie,He,Ce=!1,Vt,ae,ue,me,Ze,lt=1/s,Bt,ye)=>{const se=zo(Re(It),s),Je=oe.map(Me=>((fe,tn)=>Math.floor(rn(fe,0,Math.min(.5*(tn.width-1),.5*(tn.height-1)))))(Me||0,It)).map(Me=>Me*s);if(Zt||Se){const Me=Re(se);Me.x-=.5,Me.y-=.5,Me.width+=1,Me.height+=1;const fe=Zg(Me,At,Tt,le),tn=Xg(fe);let W;Bt&&(W=ba(Bt),W[3]===0&&(W[3]=.001));const Dt=Ie&&Ce?[Me.width/Ie.width,Me.height/Ie.height]:[1,1];((N,yt,Ot,zt,Yt,wt=L,Qt,re=1,pe=z1,Ee=kl,$e=v,Be=1,ge)=>{const{program:St,locations:kt}=et;y.useProgram(St),y.enableVertexAttribArray(kt.aPosition),y.enableVertexAttribArray(kt.aTexCoord),y.enableVertexAttribArray(kt.aRectCoord),y.uniform4fv(kt.uColor,Yt),y.uniform2fv(kt.uSize,[yt,Ot]),y.uniform2fv(kt.uPosition,[N[2],N[3]]),y.uniform2fv(kt.uRepeat,Qt),y.uniform1i(kt.uInverted,ge?1:0),y.uniform1fv(kt.uCornerRadius,zt),y.uniform4f(kt.uCanvasColor,w,T,M,A),y.uniform1fv(kt.uMaskFeather,$e.map((K,Nt)=>Nt%2==0?K:K*s)),y.uniform1fv(kt.uMaskBounds,b),y.uniform1f(kt.uMaskOpacity,$),y.uniform1f(kt.uEdgeFeather,Math.max(0,Be)),y.uniformMatrix4fv(kt.uMatrix,!1,u),y.uniform1i(kt.uTexture,4),y.uniform4fv(kt.uTextureColor,pe),y.uniform1f(kt.uTextureOpacity,re),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,wt),y.bindBuffer(y.ARRAY_BUFFER,ot),y.bufferData(y.ARRAY_BUFFER,Ee,y.STATIC_DRAW),y.vertexAttribPointer(kt.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,st),y.bufferData(y.ARRAY_BUFFER,kl,y.STATIC_DRAW),y.vertexAttribPointer(kt.aRectCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,D),y.bufferData(y.ARRAY_BUFFER,N,y.STATIC_DRAW),y.vertexAttribPointer(kt.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,N.length/2),y.disableVertexAttribArray(kt.aPosition),y.disableVertexAttribArray(kt.aTexCoord),y.disableVertexAttribArray(kt.aRectCoord)})(tn,Me.width,Me.height,Je,ba(Zt,me),Se,Dt,me,W,Vt?new Float32Array(Vt):Qg(Me.width,Me.height,Ie,He,s),Ze,lt*s,ye)}ae&&(ae=Math.min(ae,se.width,se.height),V(((Me,fe,tn,W,Dt,N,yt,Ot)=>{const zt=[];if(N.every(Yt=>Yt===0))zt.push(ht(Me,fe),ht(Me+tn,fe),ht(Me+tn,fe+W),ht(Me,fe+W));else{const[Yt,wt,Qt,re]=N,pe=Me,Ee=Me+tn,$e=fe,Be=fe+W;zt.push(ht(pe+Yt,$e)),xd(zt,Ee-wt,$e+wt,wt,-1),zt.push(ht(Ee,$e+wt)),xd(zt,Ee-re,Be-re,re,0),zt.push(ht(Ee-re,Be)),xd(zt,pe+Qt,Be-Qt,Qt,1),zt.push(ht(pe,Be-Qt)),xd(zt,pe+Yt,$e+Yt,Yt,2)}return(yt||Ot)&&e0(zt,yt,Ot,Me+.5*tn,fe+.5*W),Dt&&Ls(zt,Dt,Me+.5*tn,fe+.5*W),zt})(se.x,se.y,se.width,se.height,At,Je,Tt,le),ae*s,ba(ue,me),!0))},drawEllipse:(It,At,Tt,le,oe,Zt,Se,Ie,He,Ce,Vt,ae,ue,me,Ze)=>{const lt=zo(nr(It.x-At,It.y-Tt,2*At,2*Tt),s);if(Se||Ie){const Bt=Re(lt);Bt.x-=.5,Bt.y-=.5,Bt.width+=1,Bt.height+=1;const ye=Zg(Bt,le,oe,Zt);((se,Je,Me,fe,tn=L,W=kl,Dt=1,N=!1)=>{const{program:yt,locations:Ot}=gt;y.useProgram(yt),y.enableVertexAttribArray(Ot.aPosition),y.enableVertexAttribArray(Ot.aTexCoord),y.uniformMatrix4fv(Ot.uMatrix,!1,u),y.uniform2fv(Ot.uRadius,[.5*Je,.5*Me]),y.uniform1i(Ot.uInverted,N?1:0),y.uniform4fv(Ot.uColor,fe),y.uniform4f(Ot.uCanvasColor,w,T,M,A),y.uniform2fv(Ot.uRepeat,[1,1]),y.uniform1fv(Ot.uMaskBounds,b),y.uniform1f(Ot.uMaskOpacity,$),y.uniform1i(Ot.uTexture,4),y.uniform1f(Ot.uTextureOpacity,Dt),y.activeTexture(y.TEXTURE0+4),y.bindTexture(y.TEXTURE_2D,tn),y.bindBuffer(y.ARRAY_BUFFER,Xt),y.bufferData(y.ARRAY_BUFFER,W,y.STATIC_DRAW),y.vertexAttribPointer(Ot.aTexCoord,2,y.FLOAT,!1,0,0),y.bindBuffer(y.ARRAY_BUFFER,Lt),y.bufferData(y.ARRAY_BUFFER,se,y.STATIC_DRAW),y.vertexAttribPointer(Ot.aPosition,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLE_STRIP,0,se.length/2),y.disableVertexAttribArray(Ot.aPosition),y.disableVertexAttribArray(Ot.aTexCoord)})(Xg(ye),Bt.width,Bt.height,ba(Se,me),Ie,Vt?new Float32Array(Vt):Qg(Bt.width,Bt.height,He,Ce,s),me,Ze)}ae&&V(((Bt,ye,se,Je,Me,fe,tn)=>{const W=.5*Math.abs(se),Dt=.5*Math.abs(Je),N=Math.abs(se)+Math.abs(Je),yt=Math.max(20,Math.round(N/6));return ib(ht(Bt+W,ye+Dt),W,Dt,Me,fe,tn,yt)})(lt.x,lt.y,lt.width,lt.height,le,oe,Zt),ae*s,ba(ue,me),!0)},drawImage:(It,At,Tt,le,oe,Zt,Se,Ie,He,Ce,Vt=hS,ae=1,ue,me=1,Ze=0,lt=E,Bt=mS,ye=z1,se=!1,Je=!1,Me=!0)=>{const fe=At.width*s,tn=At.height*s,W=-.5*fe,Dt=.5*tn,N=.5*fe,yt=-.5*tn,Ot=new Float32Array([W,yt,0,W,Dt,0,N,yt,0,N,Dt,0]);y.bindBuffer(y.ARRAY_BUFFER,k),y.bufferData(y.ARRAY_BUFFER,Ot,y.STATIC_DRAW);const zt=At.height/2/S*(r.height/At.height)*-1;oe*=s,Zt*=s,Tt*=s,le*=s;const{program:Yt,locations:wt}=X,Qt=B1();((St,kt,K,Nt,_t)=>{const Ft=1/Math.tan(kt/2),Mt=1/(Nt-_t);St[0]=Ft/K,St[1]=0,St[2]=0,St[3]=0,St[4]=0,St[5]=Ft,St[6]=0,St[7]=0,St[8]=0,St[9]=0,St[10]=(_t+Nt)*Mt,St[11]=-1,St[12]=0,St[13]=0,St[14]=2*_t*Nt*Mt,St[15]=0})(Qt,H,a,1,2*-zt),Ea(Qt,oe,-Zt,zt),Ea(Qt,Tt,-le,0),jg(Qt,-He),Hg(Qt,Ce),Ea(Qt,-Tt,le,0),qg(Qt,Ie),Wg(Qt,Se),y.useProgram(Yt),y.enableVertexAttribArray(wt.aPosition),y.enableVertexAttribArray(wt.aTexCoord),y.uniform1i(wt.uTexture,3),y.uniform2f(wt.uTextureSize,At.width,At.height),y.activeTexture(y.TEXTURE0+3),y.bindTexture(y.TEXTURE_2D,It);const re=Je?1:0,pe=x.get(re);y.uniform1i(wt.uTextureBlend,re),y.activeTexture(y.TEXTURE0+re),y.bindTexture(y.TEXTURE_2D,pe);const Ee=se?2:0,$e=x.get(Ee);y.uniform1i(wt.uTextureOverlay,Ee),y.activeTexture(y.TEXTURE0+Ee),y.bindTexture(y.TEXTURE_2D,$e),y.bindBuffer(y.ARRAY_BUFFER,k),y.vertexAttribPointer(wt.aPosition,3,y.FLOAT,!1,0,0);const Be=pS&&pt(It);let ge;y.bindBuffer(y.ARRAY_BUFFER,Be?Q:F),y.vertexAttribPointer(wt.aTexCoord,2,y.FLOAT,!1,0,0),y.uniformMatrix4fv(wt.uMatrix,!1,Qt),y.uniform4fv(wt.uOverlayColor,ye),!ue||Ko(ue,Kg)?(ue=Kg,ge=-1):(ge=ue.reduce((St,kt)=>St+kt,0),ge=ge<=0?1:ge),y.uniform1fv(wt.uClarityKernel,ue),y.uniform1f(wt.uClarityKernelWeight,ge),y.uniform1f(wt.uColorGamma,1/me),y.uniform1f(wt.uColorVignette,Ze),y.uniform1i(wt.uAntialias,Me?1:0),y.uniform4f(wt.uColorOffset,Vt[4],Vt[9],Vt[14],Vt[19]),y.uniformMatrix4fv(wt.uColorMatrix,!1,[Vt[0],Vt[1],Vt[2],Vt[3],Vt[5],Vt[6],Vt[7],Vt[8],Vt[10],Vt[11],Vt[12],Vt[13],Vt[15],Vt[16],Vt[17],Vt[18]]),y.uniform1f(wt.uOpacity,ae),y.uniform1f(wt.uMaskOpacity,$),y.uniform1fv(wt.uMaskBounds,b),y.uniform1fv(wt.uMaskCornerRadius,Bt.map(St=>St*s)),y.uniform1fv(wt.uMaskFeather,lt.map((St,kt)=>kt%2==0?St:St*s)),y.drawArrays(y.TRIANGLE_STRIP,0,4),y.disableVertexAttribArray(wt.aPosition),y.disableVertexAttribArray(wt.aTexCoord)},textureFilterNearest:y.NEAREST,textureFilterLinear:y.LINEAR,textureClamp:y.CLAMP_TO_EDGE,textureRepeat:y.REPEAT,textureCreate:()=>y.createTexture(),textureUpdate:(It,At,Tt)=>(Ct.set(It,{src:At,options:Tt,isRotatedVideo:At.nodeName==="VIDEO"&&(At.dataset&&At.dataset.rotation==90||At.dataset.rotation==270)}),sS(y,It,At,Tt)),textureGetSize:It=>{const{src:At,options:Tt}=Ct.get(It),le=so(At);return Tt.scalar?No(le,oe=>oe/Tt.scalar):le},textureDelete:mt,enablePreviewStencil:()=>{y.stencilOp(y.KEEP,y.KEEP,y.REPLACE),y.stencilFunc(y.ALWAYS,1,255),y.stencilMask(255)},applyPreviewStencil:()=>{y.stencilFunc(y.EQUAL,1,255),y.stencilMask(0)},disablePreviewStencil:C,setCanvasColor(It){w=It[0],T=It[1],M=It[2],A=n?It[3]:1,y.clear(y.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{N1(c,0,r.width,r.height,0,-1,1)},updateCanvasMatrix(It,At,Tt,le,oe){const Zt=It.width,Se=It.height,Ie=r.width*(.5/s),He=r.height*(.5/s),Ce={x:Ie+(Tt.x+At.x),y:He+(Tt.y+At.y)},Vt={x:Ce.x-At.x,y:Ce.y-At.y},ae=.5*Zt,ue=.5*Se;ka(Vt,oe.z,Ce),AR(Vt,le,Ce),Ea(c,(Vt.x-ae)*s,(Vt.y-ue)*s,0),Ea(c,ae*s,ue*s,0),jg(c,oe.z);const me=oe.x>Math.PI/2;Wg(c,me?Math.PI:0);const Ze=oe.y>Math.PI/2;qg(c,Ze?Math.PI:0),Hg(c,le),Ea(c,-ae*s,-ue*s,0)},drawToCanvas(){y.bindFramebuffer(y.FRAMEBUFFER,null),u=c,y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight),y.colorMask(!0,!0,!0,!0),y.clearColor(w,T,M,A),y.clear(y.COLOR_BUFFER_BIT),v=[1,0,1,0,1,r.width,1,r.width]},drawToImageBlendBuffer(It,At){Le(1,U,It,At)},drawToImageOverlayBuffer(It,At){Le(2,_,It,At)},enableMask(It,At){const Tt=It.x*s,le=It.y*s,oe=It.width*s,Zt=It.height*s;m=Tt,h=m+oe,p=r.height-le,g=r.height-(le+Zt),$=1-At,b=[p,h,g,m]},disableMask(){m=0,h=r.width,p=r.height,g=0,$=1,b=[p,h,g,m]},resize:(It,At,Tt)=>{s=Tt,l=s===1?.75:1,i.width=It,i.height=At,r.width=It*s,r.height=At*s,a=Lo(r.width,r.height),t.width=r.width,t.height=r.height,N1(c,0,r.width,r.height,0,-1,1),E=[1,0,1,0,1,i.width,1,i.width]},release(){Array.from(Ct.keys()).forEach(It=>mt(It,{forceRelease:!0})),Ct.clear(),x.forEach(It=>{y.deleteTexture(It)}),x.clear(),X.destroy(),rt.destroy(),Y.destroy(),et.destroy(),gt.destroy(),t.width=1,t.height=1,t=void 0}}};function gS(t){return Math.sqrt(1- --t*t)}function Jg(t){return Object.prototype.toString.call(t)==="[object Date]"}function Sh(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>Sh(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Jg(t)&&Jg(e)){t=t.getTime();const o=(e=e.getTime())-t;return a=>new Date(t+a*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=Sh(t[o],e[o])}),o=>{const a={};return r.forEach(s=>{a[s]=i[s](o)}),a}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function T0(t,e={}){const n=Pt(t);let r,i=t;function o(a,s){if(t==null)return n.set(t=a),Promise.resolve();i=a;let l=r,c=!1,{delay:d=0,duration:u=400,easing:p=m0,interpolate:h=Sh}=Tn(Tn({},e),s);if(u===0)return l&&(l.abort(),l=null),n.set(t=i),Promise.resolve();const g=Bb()+d;let m;return r=g0($=>{if($<g)return!0;c||(m=h(t,a),typeof u=="function"&&(u=u(t,a)),c=!0),l&&(l.abort(),l=null);const b=$-g;return b>u?(n.set(t=a),!1):(n.set(t=m(p(b/u))),!0)}),r.promise}return{set:o,update:(a,s)=>o(a(i,t),s),subscribe:n.subscribe}}function Mh(t,e,n,r){if(typeof n=="number"){const i=r-n,o=(n-e)/(t.dt||1/60),a=(o+(t.opts.stiffness*i-t.opts.damping*o)*t.inv_mass)*t.dt;return Math.abs(a)<t.opts.precision&&Math.abs(i)<t.opts.precision?r:(t.settled=!1,n+a)}if(er(n))return n.map((i,o)=>Mh(t,e[o],n[o],r[o]));if(typeof n=="object"){const i={};for(const o in n)i[o]=Mh(t,e[o],n[o],r[o]);return i}throw new Error(`Cannot spring ${typeof n} values`)}function _e(t,e={}){const n=Pt(t),{stiffness:r=.15,damping:i=.8,precision:o=.01}=e;let a,s,l,c=t,d=t,u=1,p=0,h=!1;function g($,b={}){d=$;const E=l={};if(t==null||b.hard||m.stiffness>=1&&m.damping>=1)return h=!0,a=null,c=$,n.set(t=d),Promise.resolve();if(b.soft&&(p=1/(60*(b.soft===!0?.5:+b.soft)),u=0),!s){a=null,h=!1;const v={inv_mass:void 0,opts:m,settled:!0,dt:void 0};s=g0(w=>{if(a===null&&(a=w),h)return h=!1,s=null,!1;u=Math.min(u+p,1),v.inv_mass=u,v.opts=m,v.settled=!0,v.dt=60*(w-a)/1e3;const T=Mh(v,c,t,d);return a=w,c=t,n.set(t=T),v.settled&&(s=null),!v.settled})}return new Promise(v=>{s.promise.then(()=>{E===l&&v()})})}const m={set:g,update:($,b)=>g($(d,t),b),subscribe:n.subscribe,stiffness:r,damping:i,precision:o};return m}var yS=Ts(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),n=()=>t(e.matches);return n(),e.addListener(n),()=>e.removeListener(n)}),ty=()=>"ResizeObserver"in window;const U1=Go(),cE=(t,e,n,r,i)=>{t.rect||(t.rect=Go());const o=t.rect;J$(U1,e,n,r,i),li(o,U1)||(fu(o,U1),t.dispatchEvent(new CustomEvent("measure",{detail:o})))},Td=Math.round,$S=t=>{const e=t.getBoundingClientRect();Ri&&cE(t,Td(e.x),Td(e.y),Td(e.width),Td(e.height))},V1=t=>{Ri&&cE(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},Wl=[];let va,Ii,Ri;function Ch(){Wl.length?(Wl.forEach(t=>t.measure(t)),Ri=requestAnimationFrame(Ch)):Ri=void 0}let Rd=new Map([]),Al=0,H1=0;var yr=(t,e={})=>{const{observePosition:n=!1,observeViewRect:r=!1,once:i=!1,disabled:o=!1,isMeasureRoot:a=!1}=e;if(ty()&&a&&(Ii||(Ii=new ResizeObserver(s=>{s.forEach(c=>{Rd.set(c.target,c.contentRect)});const l=Array.from(Rd.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&Ri===!1&&Ch():(Ri&&cancelAnimationFrame(Ri),Ri=!1)})),Ii.observe(t),Al++),!o)return!ty()||n||r?(t.measure=r?$S:V1,Wl.push(t),Ri===void 0&&(Ri=requestAnimationFrame(Ch)),t.measure(t),{destroy(){a&&Ii&&(Rd.delete(t),Ii.unobserve(t),Al--,Al===0&&(Ii.disconnect(),Ii=void 0));const s=Wl.indexOf(t);Wl.splice(s,1),delete t.measure}}):(va||(va=new ResizeObserver(s=>{s.forEach(l=>{Ri&&V1(l.target)})})),va.observe(t),V1(t),i?va.unobserve(t):H1++,{destroy(){a&&Ii&&(Rd.delete(t),Ii.unobserve(t),Al--,Al===0&&(Ii.disconnect(),Ii=void 0)),i||(va.unobserve(t),H1--,H1===0&&(va.disconnect(),va=void 0))}})},bS=t=>{let e=!1;const n={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:r=>{e&&(r.target.dataset.focusVisible="")},blur:r=>{delete r.target.dataset.focusVisible}};return Object.keys(n).forEach(r=>t.addEventListener(r,n[r],!0)),{destroy(){Object.keys(n).forEach(r=>t.removeEventListener(r,n[r],!0))}}};const ES=async t=>new Promise(e=>{if(t.kind==="file")return e(t.getAsFile());t.getAsString(e)});var vS=(t,e={})=>{const n=i=>{i.preventDefault()},r=async i=>{i.preventDefault(),i.stopPropagation();try{const o=await(a=>new Promise((s,l)=>{const{items:c}=a.dataTransfer;if(!c)return s([]);Promise.all(Array.from(c).map(ES)).then(d=>{s(d.filter(u=>Jd(u)&&gu(u)||/^http/.test(u)))}).catch(l)}))(i);t.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:i,resources:o},...e}))}catch{}};return t.addEventListener("drop",r),t.addEventListener("dragover",n),{destroy(){t.removeEventListener("drop",r),t.removeEventListener("dragover",n)}}};let Sd=null;var R0=()=>{if(Sd===null)if(Vn()){const t=dn("canvas");Sd=!$u(t,{failIfMajorPerformanceCaveat:!0}),_n(t)}else Sd=!1;return Sd},W1=t=>t instanceof WebGLTexture,ey=([t,e,n,r])=>[r.x,r.y,t.x,t.y,n.x,n.y,e.x,e.y];function wS(t){let e,n,r,i;return{c(){e=dt("div"),n=dt("canvas"),I(e,"class","PinturaCanvas")},m(o,a){it(o,e,a),vt(e,n),t[36](n),r||(i=[Et(n,"measure",t[37]),fn(yr.call(null,n))],r=!0)},p:Pe,i:Pe,o:Pe,d(o){o&&nt(e),t[36](null),r=!1,sn(i)}}}function xS(t,e,n){let r,i,o,a,s,l,c;const d=[0,0,0,0],u=yn(),p=Vn()&&(W=>{const Dt=.5*W,N=dn("canvas",{"data-retain":!0,width:W,height:W}),yt=N.getContext("2d");return yt.fillStyle="#f0f",yt.fillRect(0,0,Dt,Dt),yt.fillRect(Dt,Dt,Dt,Dt),N})(128),h=Vi();let g,{isAnimated:m}=e,{isTransparent:$}=e,{maskRect:b}=e,{maskOpacity:E=1}=e,{maskFrameOpacity:v=.95}=e,{maskMarkupOpacity:w=1}=e,{clipAnnotationsToImage:T=!0}=e,{pixelRatio:M=1}=e,{textPixelRatio:A=M}=e,{backgroundColor:x}=e,{willRender:C=xn}=e,{didRender:H=xn}=e,{willRequest:S}=e,{loadImageData:y=xn}=e,{enableGrid:L=!1}=e,{gridColors:O}=e,{gridSize:_}=e,{gridOpacity:P=0}=e,{images:U=[]}=e,{interfaceImages:X=[]}=e,{selectionColor:k}=e,F=null,Q=null,rt=null;const $t=(W,Dt)=>W.set(Dt,{hard:!m}),V={precision:1e-4*.01};let Y=0;const q=T0(void 0,{duration:0});G(t,q,W=>n(35,c=W));const et=_e(1,V);G(t,et,W=>n(34,s=W));const D=_e(1,V);G(t,D,W=>n(50,o=W));const ot=Pt();G(t,ot,W=>n(52,l=W));const st=Pt();G(t,st,W=>n(51,a=W));const gt={},Lt=(W,Dt)=>{let N=gt[W.id];const yt=Math.min(1,2048/Dt.width);let Ot=N?N.element:dn("canvas",{width:Dt.width*yt,height:Dt.height*yt,"data-retain":!0});if(!N||((zt,Yt)=>{if(zt.total!==Yt.length)return!0;const wt=zt.last,Qt=Yt[Yt.length-1];return wt.drawMode!==Qt.drawMode||!(!ks(wt)||ks(Qt)&&li(wt,Qt))||!(!Da(wt)||Da(Qt)&&wt.x===Qt.x&&wt.y===Qt.y&&wt.rx===Qt.rx&&wt.ry===Qt.ry)||!(!Fs(wt)||Fs(Qt)&&Qt.points.length===wt.points.length)})(N,W.actions)){Ot=Ot.cloneNode(),((Yt,wt,Qt)=>{const{selectionColor:re=[1,1,1],scalar:pe=1}=Qt||{};let Ee=!1;for(const $e of wt){const Be=$e.drawMode==="subtract";if(Be&&!Ee)continue;Yt.globalCompositeOperation=Be?"destination-out":"source-over",Yt.save(),Yt.beginPath();const ge=_b($e);mb(Yt,pe,pe),a0(Yt,$e.rotation,ge),Ab(Yt,$e.flipX,$e.flipY,ge),$e.width?d0(Yt,{...$e,backgroundColor:re}):$e.points?xh(Yt,Object.assign({},$e,$e.pathClose?{backgroundColor:re,strokeColor:[0,0,0,0]}:{strokeColor:re,strokeJoin:"round",strokeCap:"round"})):$e.rx&&u0(Yt,{...$e,backgroundColor:re,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),Yt.restore(),Ee=!0}})(Ot.getContext("2d"),W.actions,{selectionColor:[1,0,1],scalar:yt});const zt=W.actions.length;gt[W.id]={total:zt,last:{...W.actions[zt-1]},element:Ot}}return{x:0,y:0,...Dt,fillColor:W.color||[1,1,1],backgroundImage:Ot}};let Xt;const Ct=()=>{cancelAnimationFrame(Xt),Xt=requestAnimationFrame(()=>{me=!0,fe=0,i()})},Ut=new Map([]),Le=new Map([]),mt=(W,Dt)=>({filterParam:W==="pixelated"?F.textureFilterNearest:F.textureFilterLinear,wrapParam:Dt==="repeat"?F.textureRepeat:F.textureClamp}),pt=(W,Dt,N)=>{if(!Ut.has(W)){Ut.set(W,W);const zt=mt(Dt,N);if(!pn(yt=W)&&(ub(yt)||jl(yt)||sc(yt)||Qd(yt))){const Yt=F.textureCreate();F.textureUpdate(Yt,W,zt),Ut.set(W,Yt)}else y(W).then(Yt=>{if(!F||!Yt)return;const wt=F.textureCreate();F.textureUpdate(wt,Yt,zt),Ut.set(W,wt),Ct()}).catch(Yt=>{Ut.set(W,Yt)})}var yt,Ot;if(Qd(W)&&((Ot=W).currentTime>0&&!Ot.paused&&!Ot.ended&&Ot.readyState>2||W.dataset.redraw==="true")){const zt=Ut.get(W),Yt=mt(Dt,N);return F.textureUpdate(zt,W,Yt),W.dataset.redraw=!1,zt}return Ut.get(W)},It=(W,Dt={})=>{const N=Dt.id||W.id;if(!W.text.length)return void Le.delete(N);let{text:yt,textAlign:Ot,fontFamily:zt,fontSize:Yt=16,fontWeight:wt,fontVariant:Qt,fontStyle:re,letterSpacing:pe,lineHeight:Ee=Yt,width:$e,height:Be}=W,{outline:ge=0,blur:St=0,paddingTop:kt=0,paddingRight:K=mr,paddingBottom:Nt=0,paddingLeft:_t=mr}=Dt;$e=qe($e)?Math.floor($e):$e,Be=qe(Be)?Math.floor(Be):Be;const{textSize:Ft,signature:Mt}=((te="",Ue)=>{let{width:ln=0,height:Mn="auto",fontSize:hn,fontFamily:xt,lineHeight:ie,fontWeight:kn,fontStyle:Jn,fontVariant:ir,letterSpacing:Fn}=Ue;const Bn=Gd({text:te,fontFamily:xt,fontWeight:kn,fontStyle:Jn,fontVariant:ir,fontSize:hn,lineHeight:ie,letterSpacing:Fn,width:ln,height:Mn});let wn=mg.get(Bn);if(wn)return wn;let xr=1;hn>1e3&&Gi()&&(xr=hn/1e3,hn=1e3,ie*=xr);const kr=r0(dn("pre",{contenteditable:"true",spellcheck:"false",style:`${$b}${s0({fontFamily:xt,fontWeight:kn,fontStyle:Jn,fontVariant:ir,fontSize:hn,letterSpacing:Fn,lineHeight:ie})};${l0(te,Ue)}"`,innerHTML:te})),Hi=kr.getBoundingClientRect();return wn={signature:yb(kr).flat().map(Fr=>Fr.text).join("_;_"),textSize:No(so(Hi),Fr=>Math.ceil(Fr*xr))},mg.set(Bn,wn),kr.remove(),wn})(yt,{...W,width:$e,height:Be}),Te=Gd({text:yt,textAlign:Ot,fontFamily:zt,fontSize:Yt,fontWeight:wt,fontVariant:Qt,fontStyle:re,lineHeight:Ee,letterSpacing:pe,outline:ge,blur:St,signature:Mt});if(!Ut.has(Te)){Ut.set(Te,yt);const te=Math.ceil(Ft.width),Ue=Math.ceil(Ft.height/Ee)*Ee;if(te===0||Ue===0)return;const ln=x0(),Mn=Math.min(1,(ln-(_t+K)*A)/(te*A),(ln-(kt+Nt)*A)/(Ue*A));Eb(yt,{fontSize:Yt,fontFamily:zt,fontWeight:wt,fontVariant:Qt,fontStyle:re,letterSpacing:pe,textAlign:Ot,lineHeight:Ee,width:$e,height:Be,imageWidth:te,imageHeight:Ue,paddingLeft:_t,paddingTop:kt,paddingRight:K,paddingBottom:Nt,pixelRatio:A*Mn,willRequest:S,outline:ge,blur:St,color:[1,0,1]}).then(hn=>{if(!F)return;const xt=F.textureCreate();F.textureUpdate(xt,hn,{filterParam:F.textureFilterLinear,wrapParam:F.textureClamp,scalar:Mn}),Ut.set(Te,xt),Le.set(N,xt),Ct()}).catch(console.error)}const Gt=Ut.get(Te);return W1(Gt)?Gt:Le.get(N)},At=new Map,Tt=(W,Dt)=>{let N;if(W.backgroundImage)N=pt(W.backgroundImage,W.backgroundImageRendering,W.backgroundRepeat==="repeat"?"repeat":void 0);else if(pn(W.text)){if(W.width&&W.width<1||W.height&&W.height<1)return;N=It(W,Dt)}else W.bitmap&&W.points&&(N=(yt=>{const{id:Ot,points:zt,strokeWidth:Yt,strokeCap:wt,strokeJoin:Qt,strokeColor:re}=yt;let pe=Ut.get(Ot),Ee=At.get(Ot);const $e=Gd({points:zt.map(Mt=>`${Mt.x},${Mt.y}`).join(","),strokeWidth:Yt,strokeCap:wt,strokeJoin:Qt,strokeColor:re});if(Ee){const{hash:Mt}=Ee;if(Ut.has(Ot)){if($e===Mt)return Ut.get(Ot)}else Ee=void 0}if(!Ee){const Mt=dn("canvas",{width:1,height:1});Ee={canvas:Mt,hash:void 0},At.set(yt.id,Ee),pe=F.textureCreate(),F.textureUpdate(pe,Mt,{filterParam:F.textureFilterLinear,wrapParam:F.textureClamp}),Ut.set(Ot,pe)}const{canvas:Be}=Ee,ge=Math.ceil(yt.strokeWidth),St=Lr(zt),kt=Math.floor(St.x)-.5*ge,K=Math.floor(St.y)-.5*ge,Nt=Math.ceil(St.width+ge),_t=Math.ceil(St.height+ge);Be.width=Math.max(Nt,1),Be.height=Math.max(_t,1);const Ft=Be.getContext("2d");return Ft.clearRect(0,0,Be.width,Be.height),Nt>=1&&_t>=1&&(Ft.translate(-kt,-K),xh(Ft,yt),Ft.resetTransform()),F.textureUpdate(pe,Be,{filterParam:F.textureFilterLinear,wrapParam:F.textureClamp}),At.set(Ot,{canvas:Be,hash:$e}),Ut.get(Ot)})(W));return N},le=({texture:W,size:Dt,origin:N,translation:yt,rotation:Ot,scale:zt,colorMatrix:Yt,opacity:wt,convolutionMatrix:Qt,gamma:re,vignette:pe,maskFeather:Ee,maskCornerRadius:$e,overlayColor:Be,enableOverlay:ge,enableManipulation:St,enableAntialiasing:kt})=>{let K=0,Nt=0;if(M===1){const _t=Math.abs(1-zt)<Number.EPSILON;K=_t&&Q%2!=0?.5:0,Nt=_t&&rt%2!=0?.5:0}return F.drawImage(W,Dt,N.x,N.y,yt.x+K,yt.y+Nt,Ot.x,Ot.y,Ot.z,zt,Yt,rn(wt,0,1),Qt,re,pe,Ee,$e,Be,ge,St,kt),W},oe=(W,Dt,N,yt,Ot,zt,Yt,wt,Qt)=>{const re={...Dt},pe={width:Ot.width/A*N,height:Ot.height/A*N},Ee=ht(0,0),$e={width:pe.width,height:pe.height};return re.x-=Qt*N,re.y-=zt*N,W.width?(re.height=re.height?re.height+zt*N/yt:pe.height,re.width+=(Qt+Yt)*N/yt,W.textAlign==="center"?Ee.x=.5*(re.width-$e.width/yt):W.textAlign==="right"&&(Ee.x=re.width-$e.width/yt)):(re.width=pe.width,re.height=pe.height),{rect:re,backgroundPosition:Ee,backgroundSize:$e}},Zt=(W=[],Dt)=>{W.forEach(N=>{let yt=Tt(N);const Ot=N.status==="loading"||N.backgroundImage&&yt===N.backgroundImage;Ot&&Ct();const zt=N.status==="error"||N.backgroundImage&&yt instanceof Error;let Yt=W1(yt)?yt:void 0;const wt=N._scale||1,Qt=N._translate||u,re=N.strokeWidth&&N.strokeWidth*wt,pe=!!N.width,Ee=!pe&&pn(N.text)&&Yt,$e=er(N.points),Be=Da(N);if($e){const ge=N.points.map(St=>ht(St.x*wt+Qt.x,St.y*wt+Qt.y));if(N.bitmap){yt&&Dt.push(yt);const St=Lr(ge),kt=Math.ceil(N.strokeWidth*wt);F.drawRect({x:Math.floor(St.x)-.5*kt,y:Math.floor(St.y)-.5*kt,width:Math.ceil(St.width+kt),height:Math.ceil(St.height+kt)},N.rotation,N.flipX,N.flipY,[0,0,0,0],void 0,Yt,void 0,void 0,void 0,void 0,void 0,void 0,N.opacity,void 0,void 0,!1,!1)}else F.drawPath(ge,N.rotation,N.flipX,N.flipY,re,N.strokeColor,N.pathClose,N.backgroundColor,N.opacity)}else if(Be){let ge=N.x,St=N.y;ge*=wt,St*=wt,ge+=Qt.x,St+=Qt.y;const kt=ht(ge,St);F.drawEllipse(kt,N.rx*wt,N.ry*wt,N.rotation,N.flipX,N.flipY,N.backgroundColor,Yt,void 0,void 0,N.backgroundCorners&&ey(N.backgroundCorners),re,N.strokeColor,N.opacity,N.inverted),yt&&Dt.push(yt),(Ot||zt)&&(N.backgroundColor||N.strokeColor&&N.strokeWidth||F.drawEllipse(kt,N.rx*wt,N.ry*wt,N.rotation,N.flipX,N.flipY,zt?[1,0,0,.25*N.opacity]:[0,0,0,.25*N.opacity]),zt&&ae(kt),Ot&&Vt(kt))}else if(Ee||pe){const ge=Yt&&F.textureGetSize(Yt);let St,kt,K,Nt=N.fillColor,_t=N.backgroundColor,Ft=N.strokeColor,Mt=[N.cornerRadius,N.cornerRadius,N.cornerRadius,N.cornerRadius].map(Gt=>Gt*wt);St=N.width?Q$(N):{x:N.x,y:N.y,...ge},wt&&Qt&&(St.x*=wt,St.y*=wt,St.x+=Qt.x,St.y+=Qt.y,St.width*=wt,St.height*=wt),yt&&Dt.push(yt);const{backgroundRepeat:Te="no-repeat"}=N;if(ge){if(N.backgroundImage&&(N.backgroundSize||N.backgroundPosition||N.backgroundRepeat)){const Gt=Lo(ge.width,ge.height);if(N.backgroundRepeat==="repeat"&&(kt={...ge},K={x:0,y:0}),N.backgroundSize==="contain"){const te=Cr(St,Gt,St);kt=Fa(te),K=N.backgroundPosition?N.backgroundPosition:ht(.5*(St.width-kt.width),.5*(St.height-kt.height))}else if(N.backgroundSize==="cover"){const te=Yo(St,Gt,St);kt=Fa(te),N.backgroundPosition?K=N.backgroundPosition:(K=ht(te.x,te.y),K=ht(.5*(St.width-kt.width),.5*(St.height-kt.height)))}else N.backgroundSize?(kt=N.backgroundSize,K=N.backgroundPosition||{x:0,y:0}):N.backgroundPosition&&(kt={...ge},K=N.backgroundPosition)}else if(N.text){const Gt={...St};if(N.backgroundColor||N.strokeColor){_t=void 0,Ft=void 0;const xt={width:ge.width/A*wt,height:ge.height/A*wt},ie=(N.width||xt.width-2*mr)*wt,kn=(N.height||xt.height)*wt;F.drawRect({...St,width:ie,height:kn},N.rotation,N.flipX,N.flipY,Mt,N.backgroundColor,void 0,void 0,void 0,!1,void 0,re,N.strokeColor,N.opacity,void 0,void 0,void 0,N.inverted)}let te=1;N.fontSize>1e3&&Gi()&&(te=N.fontSize/1e3),Nt=N.color||[0,0,0],N._prerender&&(Nt[3]=0);const Ue=oe(N,Gt,wt,te,ge,0,mr,0,mr);St=Ue.rect,K=Ue.backgroundPosition,kt=Ue.backgroundSize;const{textShadowX:ln,textShadowY:Mn,textShadowBlur:hn}=N;if(ln||Mn||hn){const xt=Math.ceil(.5*hn),ie=xt,kn=Math.max(mr,xt),Jn=xt,ir=Math.max(mr,xt),Fn=Tt(N,{id:N.id+"shadow",blur:hn,paddingTop:ie,paddingRight:kn,paddingBottom:Jn,paddingLeft:ir});if(Fn&&!N._prerender){Dt.push(Fn);const Bn=F.textureGetSize(Fn),{rect:wn,backgroundPosition:xr,backgroundSize:kr}=oe(N,Gt,wt,te,Bn,ie,kn,0,ir),Hi=nn(St),Fr=nn(wn);Fr.x+=ln,Fr.y+=Mn;const co=ka(Fr,N.rotation,Hi),ur={x:co.x-.5*wn.width,y:co.y-.5*wn.height,width:wn.width,height:wn.height};N.height&&(ur.height-=Mn),F.drawRect(ur,N.rotation,N.flipX,N.flipY,[0,0,0,0],void 0,Fn,kr,xr,!1,void 0,void 0,void 0,N.opacity,void 0,0,N.textShadowColor)}}if(N.textOutlineWidth){const xt=Math.ceil(.5*N.textOutlineWidth),ie=xt,kn=mr+xt,Jn=xt,ir=mr+xt,Fn=Tt(N,{id:N.id+"outline",outline:N.textOutlineWidth,paddingTop:ie,paddingRight:kn,paddingBottom:Jn,paddingLeft:ir});if(Fn&&!N._prerender){const Bn=F.textureGetSize(Fn);Dt.push(Fn);const{rect:wn,backgroundPosition:xr,backgroundSize:kr}=oe(N,Gt,wt,te,Bn,ie,kn,0,ir);F.drawRect(wn,N.rotation,N.flipX,N.flipY,[0,0,0,0],void 0,Fn,kr,xr,!1,void 0,void 0,void 0,N.opacity,void 0,0,N.textOutlineColor)}}}}if(F.drawRect(St,N.rotation,N.flipX,N.flipY,Mt,_t,Yt,kt,K,Te==="repeat",N.backgroundCorners&&ey(N.backgroundCorners),re,Ft,N.opacity,void 0,N.feather,Nt,N.inverted),Ot||zt){N.backgroundColor&&N.backgroundColor[3]!==0||N.strokeColor&&N.strokeWidth||F.drawRect(St,N.rotation,N.flipX,N.flipY,Mt,zt?[1,.2549,.2118,.25*N.opacity]:[0,0,0,.25*N.opacity]);const Gt=nn(St);zt&&ae(Gt),Ot&&Vt(Gt)}}else yt&&Dt.push(yt)})};let Se=0;const Ie=[{x:-5,y:-5},{x:5,y:5}],He=[{x:5,y:-5},{x:-5,y:5}],Ce=ib({x:0,y:0},10,10,0,!1,!1,16);Ce.length=9;const Vt=W=>{Se=Date.now()/50,F.drawEllipse(W,15,15,0,!1,!1,[0,0,0,.5]);const Dt=Ls(Ce.map(N=>({x:N.x+W.x,y:N.y+W.y})),Se,W.x,W.y);F.drawPath(Dt,0,!1,!1,2,[1,1,1])},ae=W=>{F.drawEllipse(W,13,13,0,!1,!1,[1,.2549,.2118,.75]);const Dt=Ie.map(yt=>({x:yt.x+W.x,y:yt.y+W.y})),N=He.map(yt=>({x:yt.x+W.x,y:yt.y+W.y}));F.drawPath(Dt,0,!1,!1,3,[1,1,1]),F.drawPath(N,0,!1,!1,3,[1,1,1])},ue=(W,Dt,N,yt,Ot,zt)=>F.drawRect(Dt,0,!1,!1,d,d,W,yt,N,!0,void 0,0,void 0,zt,void 0,void 0,Ot);let me=!1,Ze=!0,lt=!1;const Bt=[],ye=[],se=[],Je=()=>{se.length=0;const W=U[0],{manipulationShapes:Dt,manipulationShapesDirty:N,annotationShapes:yt,annotationShapesDirty:Ot,interfaceShapes:zt,decorationShapes:Yt,frameShapes:wt,selectionShapes:Qt}=C({opacity:W.opacity,rotation:W.rotation,scale:W.scale,images:U,size:fr(Q,rt),backgroundColor:[...c],selectionRect:l}),re=[...c],pe=l,Ee=rn(s,0,1),$e=a,Be=Math.abs(W.rotation.x/Math.PI*2-1),ge=Math.abs(W.rotation.y/Math.PI*2-1),St=Be<.99||ge<.99,kt={...W.size},K=W.backgroundColor,Nt=W.backgroundImage,_t=Dt.length>0,Ft=yt.length>0,Mt=K[3]>0,Te=!!T&&w>=1;if(Ee<1&&Mt){const Gt=re[0],te=re[1],Ue=re[2],ln=1-Ee,Mn=K[0]*ln,hn=K[1]*ln,xt=K[2]*ln,ie=1-ln;re[0]=Mn+Gt*ie,re[1]=hn+te*ie,re[2]=xt+Ue*ie,re[3]=1}if(F.setCanvasColor($?d:re),_t&&(N||me)?(F.disableMask(),F.drawToImageBlendBuffer(kt),Bt.length=0,Zt(Dt,Bt)):_t||(Bt.length=0),se.push(...Bt),Ze&&(F.drawToImageOverlayBuffer(kt,A),Ze=!1),St?(Ft&&(Ot||me)||!lt?(F.disableMask(),F.drawToImageOverlayBuffer(kt,A),ye.length=0,Zt(yt,ye)):Ft||(ye.length=0),lt=!0):lt=!1,F.drawToCanvas(),F.enableMask(pe,Ee),L&&_>=1&&O.length===2&&P&&((Gt,te,Ue,ln,Mn)=>{const hn=fr(te,te),xt=pt(p,"pixelated","repeat"),ie=ht(-Gt.x%te,-Gt.y%te),kn=ht(ie.x+.5*hn.width,ie.y);ue(xt,Gt,ie,hn,Ue,Mn),ue(xt,Gt,kn,hn,ln,Mn)})(pe,_,O[0],O[1],P),Mt&&F.drawRect(pe,0,!1,!1,d,K),Nt){F.enableMask(pe,1);const Gt=Math.max(b.width/Nt.width,b.height/Nt.height),te=Nt.width*Gt,Ue=Nt.height*Gt,ln={x:b.x+.5*b.width-.5*te,y:b.y+.5*b.height-.5*Ue,width:te,height:Ue};F.drawRect(ln,0,!1,!1,d,d,pt(Nt,"linear")),F.enableMask(pe,Ee)}if(Te&&F.enablePreviewStencil(),se.push(...[...U].reverse().map(Gt=>le({...Gt,texture:pt(Gt.data),enableOverlay:St&&Ft,enableManipulation:_t,enableAntialiasing:!0,mask:pe,maskOpacity:Ee,overlayColor:$e}))),F.enableMask(pe,w),St||(Te&&F.applyPreviewStencil(),F.resetCanvasMatrix(),F.updateCanvasMatrix(kt,W.origin,W.translation,W.scale,W.rotation),ye.length=0,Zt(yt,ye),Te&&F.disablePreviewStencil()),se.push(...ye),F.resetCanvasMatrix(),F.enableMask(pe,w),Zt(Yt,se),wt.length){F.enableMask(pe,1);const Gt=wt.filter(Ue=>!Ue.expandsCanvas),te=wt.filter(Ue=>Ue.expandsCanvas);Gt.length&&Zt(Gt,se),te.length&&(F.enableMask({x:pe.x+.5,y:pe.y+.5,width:pe.width-1,height:pe.height-1},o),Zt(te,se))}if(k&&Qt.length&&!St){F.resetCanvasMatrix(),F.updateCanvasMatrix(kt,W.origin,W.translation,W.scale,W.rotation);const Gt=[...k];Gt[3]=.5;const te=[{id:"selection",color:Gt,actions:[...Qt]}].map(Ue=>Lt(Ue,kt));Zt(te,se),F.resetCanvasMatrix()}F.disableMask(),Zt(zt,se),X.forEach(Gt=>{if(F.enableMask(Gt.mask,Gt.maskOpacity),Gt.backgroundColor){const Ue=Nt&&Yo({...Gt.mask},Nt.width/Nt.height),ln=Nt&&pt(Nt,"linear");F.drawRect(Gt.mask,0,!1,!1,Gt.maskCornerRadius,Gt.backgroundColor,ln,Ue,Ue,void 0,void 0,void 0,void 0,Gt.opacity,Gt.maskFeather),ln&&se.push(ln)}const te=le({...Gt,texture:pt(Gt.data),enableAntialiasing:!1,translation:{x:Gt.translation.x+Gt.offset.x-.5*Q,y:Gt.translation.y+Gt.offset.y-.5*rt}});se.push(te)}),F.disableMask(),(Gt=>{Ut.forEach((te,Ue)=>{!Gt.find(ln=>ln===te)&&W1(te)&&(Array.from(Le.values()).includes(te)||(Ut.delete(Ue),F.textureDelete(te)))})})(se),H(),me=!1};let Me,fe=0;const tn=()=>{clearTimeout(Me);const W=Date.now();W-fe<48?Me=setTimeout(tn,48):(fe=W,Je())};return Vb(()=>i()),lo(()=>n(30,F=fS(g,{alpha:$}))),gi(()=>{F&&(At.forEach(({canvas:W})=>_n(W)),At.clear(),F.release(),n(30,F=void 0),n(0,g=void 0))}),t.$$set=W=>{"isAnimated"in W&&n(9,m=W.isAnimated),"isTransparent"in W&&n(10,$=W.isTransparent),"maskRect"in W&&n(11,b=W.maskRect),"maskOpacity"in W&&n(12,E=W.maskOpacity),"maskFrameOpacity"in W&&n(13,v=W.maskFrameOpacity),"maskMarkupOpacity"in W&&n(14,w=W.maskMarkupOpacity),"clipAnnotationsToImage"in W&&n(15,T=W.clipAnnotationsToImage),"pixelRatio"in W&&n(16,M=W.pixelRatio),"textPixelRatio"in W&&n(17,A=W.textPixelRatio),"backgroundColor"in W&&n(18,x=W.backgroundColor),"willRender"in W&&n(19,C=W.willRender),"didRender"in W&&n(20,H=W.didRender),"willRequest"in W&&n(21,S=W.willRequest),"loadImageData"in W&&n(22,y=W.loadImageData),"enableGrid"in W&&n(23,L=W.enableGrid),"gridColors"in W&&n(24,O=W.gridColors),"gridSize"in W&&n(25,_=W.gridSize),"gridOpacity"in W&&n(26,P=W.gridOpacity),"images"in W&&n(27,U=W.images),"interfaceImages"in W&&n(28,X=W.interfaceImages),"selectionColor"in W&&n(29,k=W.selectionColor)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&g){const W=getComputedStyle(g).getPropertyValue("--color-transition-duration");n(31,Y=(Dt=>{let N=parseFloat(Dt);return/^[0-9]+s$/.test(Dt)?1e3*N:N})(W))}262656&t.$$.dirty[0]|1&t.$$.dirty[1]&&x&&q.set(x,{duration:m?Y:0}),4096&t.$$.dirty[0]&&$t(et,qe(E)?E:1),8192&t.$$.dirty[0]&&$t(D,qe(v)?v:1),2048&t.$$.dirty[0]&&b&&ot.set(b),24&t.$$.dirty[1]&&c&&st.set([c[0],c[1],c[2],rn(s,0,1)]),1207959558&t.$$.dirty[0]&&n(33,r=!!(F&&Q&&rt&&U.length)),1073807366&t.$$.dirty[0]&&Q&&rt&&F&&(fe=0,F.resize(Q,rt,M)),4&t.$$.dirty[1]&&n(32,i=r?R0()?tn:Je:be),6&t.$$.dirty[1]&&r&&i&&i()},[g,Q,rt,h,q,et,D,ot,st,m,$,b,E,v,w,T,M,A,x,C,H,S,y,L,O,_,P,U,X,k,F,Y,i,r,s,c,function(W){on[W?"unshift":"push"](()=>{g=W,n(0,g)})},W=>{n(1,Q=W.detail.width),n(2,rt=W.detail.height),h("measure",{width:Q,height:rt})}]}class IS extends Xe{constructor(e){super(),Ye(this,e,xS,wS,ze,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28,selectionColor:29},null,[-1,-1,-1])}}var he=(t,e=Boolean,n=" ")=>t.filter(e).join(n);function ny(t,e,n){const r=t.slice();return r[17]=e[n],r}const TS=t=>({tab:4&t}),ry=t=>({tab:t[17]});function iy(t){let e,n,r,i=[],o=new Map,a=t[2];const s=l=>l[17].id;for(let l=0;l<a.length;l+=1){let c=ny(t,a,l),d=s(c);o.set(d,i[l]=oy(d,c))}return{c(){e=dt("ul");for(let l=0;l<i.length;l+=1)i[l].c();I(e,"class",n=he(["PinturaTabList",t[0]])),I(e,"role","tablist"),I(e,"data-layout",t[1])},m(l,c){it(l,e,c);for(let d=0;d<i.length;d+=1)i[d].m(e,null);t[14](e),r=!0},p(l,c){1124&c&&(a=l[2],we(),i=Wa(i,c,s,1,l,a,o,e,qs,oy,null,ny),xe()),(!r||1&c&&n!==(n=he(["PinturaTabList",l[0]])))&&I(e,"class",n),(!r||2&c)&&I(e,"data-layout",l[1])},i(l){if(!r){for(let c=0;c<a.length;c+=1)B(i[c]);r=!0}},o(l){for(let c=0;c<i.length;c+=1)j(i[c]);r=!1},d(l){l&&nt(e);for(let c=0;c<i.length;c+=1)i[c].d();t[14](null)}}}function oy(t,e){let n,r,i,o,a,s,l,c,d,u;const p=e[11].default,h=An(p,e,e[10],ry);function g(...$){return e[12](e[17],...$)}function m(...$){return e[13](e[17],...$)}return{key:t,first:null,c(){n=dt("li"),r=dt("button"),h&&h.c(),o=Kt(),I(r,"type","button"),r.disabled=i=e[17].disabled,I(n,"role","tab"),I(n,"aria-controls",a=e[17].href.substr(1)),I(n,"id",s=e[17].tabId),I(n,"aria-selected",l=e[17].selected),this.first=n},m($,b){it($,n,b),vt(n,r),h&&h.m(r,null),vt(n,o),c=!0,d||(u=[Et(r,"keydown",g),Et(r,"click",m)],d=!0)},p($,b){e=$,h&&h.p&&(!c||1028&b)&&Ln(h,p,e,e[10],c?On(p,e[10],b,TS):Dn(e[10]),ry),(!c||4&b&&i!==(i=e[17].disabled))&&(r.disabled=i),(!c||4&b&&a!==(a=e[17].href.substr(1)))&&I(n,"aria-controls",a),(!c||4&b&&s!==(s=e[17].tabId))&&I(n,"id",s),(!c||4&b&&l!==(l=e[17].selected))&&I(n,"aria-selected",l)},i($){c||(B(h,$),c=!0)},o($){j(h,$),c=!1},d($){$&&nt(n),h&&h.d($),d=!1,sn(u)}}}function RS(t){let e,n,r=t[4]&&iy(t);return{c(){r&&r.c(),e=Zn()},m(i,o){r&&r.m(i,o),it(i,e,o),n=!0},p(i,[o]){i[4]?r?(r.p(i,o),16&o&&B(r,1)):(r=iy(i),r.c(),B(r,1),r.m(e.parentNode,e)):r&&(we(),j(r,1,1,()=>{r=null}),xe())},i(i){n||(B(r),n=!0)},o(i){j(r),n=!1},d(i){r&&r.d(i),i&&nt(e)}}}function SS(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:u=[]}=e,{layout:p}=e;const h=Vi(),g=b=>{const E=o.querySelectorAll('[role="tab"] button')[b];E&&E.focus()},m=(b,E)=>{b.preventDefault(),b.stopPropagation(),h("select",E)},$=({key:b},E)=>{if(!/arrow/i.test(b))return;const v=u.findIndex(w=>w.id===E);return/right|down/i.test(b)?g(v<u.length-1?v+1:0):/left|up/i.test(b)?g(v>0?v-1:u.length-1):void 0};return t.$$set=b=>{"class"in b&&n(0,l=b.class),"name"in b&&n(7,c=b.name),"selected"in b&&n(8,d=b.selected),"tabs"in b&&n(9,u=b.tabs),"layout"in b&&n(1,p=b.layout),"$$scope"in b&&n(10,s=b.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&n(2,r=u.map(b=>{const E=b.id===d;return{...b,tabId:`tab-${c}-${b.id}`,href:`#panel-${c}-${b.id}`,selected:E}})),4&t.$$.dirty&&n(4,i=r.length>1)},[l,p,r,o,i,m,$,c,d,u,s,a,(b,E)=>$(E,b.id),(b,E)=>m(E,b.id),function(b){on[b?"unshift":"push"](()=>{o=b,n(3,o)})}]}class S0 extends Xe{constructor(e){super(),Ye(this,e,SS,RS,ze,{class:0,name:7,selected:8,tabs:9,layout:1})}}const MS=t=>({panel:16&t}),ay=t=>({panel:t[4][0].id,panelIsActive:!0});function sy(t,e,n){const r=t.slice();return r[14]=e[n].id,r[15]=e[n].shouldDraw,r[16]=e[n].panelId,r[17]=e[n].tabindex,r[18]=e[n].labelledBy,r[19]=e[n].isActive,r[20]=e[n].hidden,r[3]=e[n].visible,r}const CS=t=>({panel:16&t,panelIsActive:16&t}),ly=t=>({panel:t[14],panelIsActive:t[19]});function _S(t){let e,n,r,i,o,a;const s=t[11].default,l=An(s,t,t[10],ay);return{c(){e=dt("div"),n=dt("div"),l&&l.c(),I(n,"class",r=he([t[1]])),I(e,"class",t[0]),I(e,"style",t[2])},m(c,d){it(c,e,d),vt(e,n),l&&l.m(n,null),i=!0,o||(a=[Et(e,"measure",t[13]),fn(yr.call(null,e))],o=!0)},p(c,d){l&&l.p&&(!i||1040&d)&&Ln(l,s,c,c[10],i?On(s,c[10],d,MS):Dn(c[10]),ay),(!i||2&d&&r!==(r=he([c[1]])))&&I(n,"class",r),(!i||1&d)&&I(e,"class",c[0]),(!i||4&d)&&I(e,"style",c[2])},i(c){i||(B(l,c),i=!0)},o(c){j(l,c),i=!1},d(c){c&&nt(e),l&&l.d(c),o=!1,sn(a)}}}function PS(t){let e,n,r,i,o,a=[],s=new Map,l=t[4];const c=d=>d[14];for(let d=0;d<l.length;d+=1){let u=sy(t,l,d),p=c(u);s.set(p,a[d]=dy(p,u))}return{c(){e=dt("div");for(let d=0;d<a.length;d+=1)a[d].c();I(e,"class",n=he(["PinturaTabPanels",t[0]])),I(e,"style",t[2])},m(d,u){it(d,e,u);for(let p=0;p<a.length;p+=1)a[p].m(e,null);r=!0,i||(o=[Et(e,"measure",t[12]),fn(yr.call(null,e,{observePosition:!0}))],i=!0)},p(d,u){1042&u&&(l=d[4],we(),a=Wa(a,u,c,1,d,l,s,e,qs,dy,null,sy),xe()),(!r||1&u&&n!==(n=he(["PinturaTabPanels",d[0]])))&&I(e,"class",n),(!r||4&u)&&I(e,"style",d[2])},i(d){if(!r){for(let u=0;u<l.length;u+=1)B(a[u]);r=!0}},o(d){for(let u=0;u<a.length;u+=1)j(a[u]);r=!1},d(d){d&&nt(e);for(let u=0;u<a.length;u+=1)a[u].d();i=!1,sn(o)}}}function cy(t){let e;const n=t[11].default,r=An(n,t,t[10],ly);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||1040&o)&&Ln(r,n,i,i[10],e?On(n,i[10],o,CS):Dn(i[10]),ly)},i(i){e||(B(r,i),e=!0)},o(i){j(r,i),e=!1},d(i){r&&r.d(i)}}}function dy(t,e){let n,r,i,o,a,s,l,c,d,u=e[15]&&cy(e);return{key:t,first:null,c(){n=dt("div"),u&&u.c(),r=Kt(),I(n,"class",i=he(["PinturaTabPanel",e[1]])),n.hidden=o=e[20],I(n,"id",a=e[16]),I(n,"tabindex",s=e[17]),I(n,"aria-labelledby",l=e[18]),I(n,"data-inert",c=!e[3]),this.first=n},m(p,h){it(p,n,h),u&&u.m(n,null),vt(n,r),d=!0},p(p,h){(e=p)[15]?u?(u.p(e,h),16&h&&B(u,1)):(u=cy(e),u.c(),B(u,1),u.m(n,r)):u&&(we(),j(u,1,1,()=>{u=null}),xe()),(!d||2&h&&i!==(i=he(["PinturaTabPanel",e[1]])))&&I(n,"class",i),(!d||16&h&&o!==(o=e[20]))&&(n.hidden=o),(!d||16&h&&a!==(a=e[16]))&&I(n,"id",a),(!d||16&h&&s!==(s=e[17]))&&I(n,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&I(n,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&I(n,"data-inert",c)},i(p){d||(B(u),d=!0)},o(p){j(u),d=!1},d(p){p&&nt(n),u&&u.d()}}}function AS(t){let e,n,r,i;const o=[PS,_S],a=[];function s(l,c){return l[5]?0:1}return e=s(t),n=a[e]=o[e](t),{c(){n.c(),r=Zn()},m(l,c){a[e].m(l,c),it(l,r,c),i=!0},p(l,[c]){let d=e;e=s(l),e===d?a[e].p(l,c):(we(),j(a[d],1,1,()=>{a[d]=null}),xe(),n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),B(n,1),n.m(r.parentNode,r))},i(l){i||(B(n),i=!0)},o(l){j(n),i=!1},d(l){a[e].d(l),l&&nt(r)}}}function OS(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:u=[]}=e,{visible:p}=e,{style:h}=e;const g={};return t.$$set=m=>{"class"in m&&n(0,s=m.class),"name"in m&&n(6,l=m.name),"selected"in m&&n(7,c=m.selected),"panelClass"in m&&n(1,d=m.panelClass),"panels"in m&&n(8,u=m.panels),"visible"in m&&n(3,p=m.visible),"style"in m&&n(2,h=m.style),"$$scope"in m&&n(10,a=m.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&n(4,r=u.map(m=>{const $=m===c;$&&n(9,g[m]=!0,g);const b=p?p.indexOf(m)!==-1:$;return{id:m,panelId:`panel-${l}-${m}`,labelledBy:`tab-${l}-${m}`,isActive:$,hidden:!$,visible:b,tabindex:$?0:-1,shouldDraw:$||g[m]}})),16&t.$$.dirty&&n(5,i=r.length>1)},[s,d,h,p,r,i,l,c,u,g,a,o,function(m){Zo.call(this,t,m)},function(m){Zo.call(this,t,m)}]}class M0 extends Xe{constructor(e){super(),Ye(this,e,OS,AS,ze,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var C0=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(n=>!!e[n].get)};function uy(t){let e,n,r,i;const o=[t[4]];function a(c){t[22](c)}var s=t[10];function l(c){let d={};for(let u=0;u<o.length;u+=1)d=Tn(d,o[u]);return c[2]!==void 0&&(d.name=c[2]),{props:d}}return s&&(e=eu(s,l(t)),on.push(()=>Zr(e,"name",a)),t[23](e),e.$on("measure",t[11])),{c(){e&&qt(e.$$.fragment),r=Zn()},m(c,d){e&&Ht(e,c,d),it(c,r,d),i=!0},p(c,d){const u=16&d[0]?gr(o,[wr(c[4])]):{};if(!n&&4&d[0]&&(n=!0,u.name=c[2],di(()=>n=!1)),s!==(s=c[10])){if(e){we();const p=e;j(p.$$.fragment,1,0,()=>{Wt(p,1)}),xe()}s?(e=eu(s,l(c)),on.push(()=>Zr(e,"name",a)),c[23](e),e.$on("measure",c[11]),qt(e.$$.fragment),B(e.$$.fragment,1),Ht(e,r.parentNode,r)):e=null}else s&&e.$set(u)},i(c){i||(e&&B(e.$$.fragment,c),i=!0)},o(c){e&&j(e.$$.fragment,c),i=!1},d(c){t[23](null),c&&nt(r),e&&Wt(e,c)}}}function LS(t){let e,n,r,i=t[5]&&uy(t);return{c(){e=dt("div"),i&&i.c(),I(e,"data-util",t[2]),I(e,"class",n=he(["PinturaUtilPanel",t[1]])),I(e,"style",t[6])},m(o,a){it(o,e,a),i&&i.m(e,null),t[24](e),r=!0},p(o,a){o[5]?i?(i.p(o,a),32&a[0]&&B(i,1)):(i=uy(o),i.c(),B(i,1),i.m(e,null)):i&&(we(),j(i,1,1,()=>{i=null}),xe()),(!r||4&a[0])&&I(e,"data-util",o[2]),(!r||2&a[0]&&n!==(n=he(["PinturaUtilPanel",o[1]])))&&I(e,"class",n),(!r||64&a[0])&&I(e,"style",o[6])},i(o){r||(B(i),r=!0)},o(o){j(i),r=!1},d(o){o&&nt(e),i&&i.d(),t[24](null)}}}function DS(t,e,n){let r,i,o,a,s,l;const c=Vi();let{isActive:d=!0}=e,{stores:u}=e,{content:p}=e,{component:h}=e,{locale:g}=e,{class:m}=e;const $=_r("isAnimated");let b;G(t,$,P=>n(21,l=P));const E=_e(0),v=ke(E,P=>rn(P,0,1));G(t,v,P=>n(20,s=P));let w=!d;const T=Pt(d);G(t,T,P=>n(25,a=P));const M={isActive:ke(T,async(P,U)=>{if(!P)return U(P);await qb(),U(P)}),isActiveFraction:ke(v,P=>P),isVisible:ke(v,P=>P>0)},A=p.view,x=C0(A),C=Object.keys(p.props||{}).reduce((P,U)=>(x.includes(U)&&(P[U]=p.props[U]),P),{}),H=Object.keys(M).reduce((P,U)=>(x.includes(U)&&(P[U]=M[U]),P),{});let S,y;const L=P=>{n(17,b={...P.detail}),_&&d&&c("measure",{...b})};qr("measurable",yr);const O=Ha().$$.context;let _=!1;return lo(()=>{if(n(19,_=!0),o)return;n(0,h=new A({target:y,props:{...i},context:O})),n(2,S=h.name);const P=h.$on("measure",L);return()=>{P(),h.$destroy()}}),t.$$set=P=>{"isActive"in P&&n(12,d=P.isActive),"stores"in P&&n(13,u=P.stores),"content"in P&&n(14,p=P.content),"component"in P&&n(0,h=P.component),"locale"in P&&n(15,g=P.locale),"class"in P&&n(1,m=P.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&b&&d&&h&&c("measure",b),2101248&t.$$.dirty[0]&&E.set(d?1:0,{hard:l===!1}),1310720&t.$$.dirty[0]&&(s<=0&&!w?n(18,w=!0):s>0&&w&&n(18,w=!1)),786432&t.$$.dirty[0]&&_&&c(w?"hide":"show"),1048576&t.$$.dirty[0]&&c("fade",s),1048576&t.$$.dirty[0]&&n(6,r=s<1?"opacity: "+s:void 0),4096&t.$$.dirty[0]&&ut(T,a=d,a),40960&t.$$.dirty[0]&&n(4,i={...C,...H,stores:u,locale:g})},n(5,o=!x.includes("external")),[h,m,S,y,i,o,r,$,v,T,A,L,d,u,p,g,E,b,w,_,s,l,function(P){S=P,n(2,S)},function(P){on[P?"unshift":"push"](()=>{h=P,n(0,h)})},function(P){on[P?"unshift":"push"](()=>{y=P,n(3,y)})}]}class dE extends Xe{constructor(e){super(),Ye(this,e,DS,LS,ze,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function kS(t){let e,n,r;const i=t[5].default,o=An(i,t,t[4],null);return{c(){e=vr("svg"),o&&o.c(),I(e,"class",t[3]),I(e,"style",t[2]),I(e,"width",t[0]),I(e,"height",t[1]),I(e,"viewBox",n="0 0 "+t[0]+`
    `+t[1]),I(e,"xmlns","http://www.w3.org/2000/svg"),I(e,"aria-hidden","true"),I(e,"focusable","false"),I(e,"stroke-linecap","round"),I(e,"stroke-linejoin","round")},m(a,s){it(a,e,s),o&&o.m(e,null),r=!0},p(a,[s]){o&&o.p&&(!r||16&s)&&Ln(o,i,a,a[4],r?On(i,a[4],s,null):Dn(a[4]),null),(!r||8&s)&&I(e,"class",a[3]),(!r||4&s)&&I(e,"style",a[2]),(!r||1&s)&&I(e,"width",a[0]),(!r||2&s)&&I(e,"height",a[1]),(!r||3&s&&n!==(n="0 0 "+a[0]+`
    `+a[1]))&&I(e,"viewBox",n)},i(a){r||(B(o,a),r=!0)},o(a){j(o,a),r=!1},d(a){a&&nt(e),o&&o.d(a)}}}function FS(t,e,n){let{$$slots:r={},$$scope:i}=e,{width:o=24}=e,{height:a=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&n(0,o=c.width),"height"in c&&n(1,a=c.height),"style"in c&&n(2,s=c.style),"class"in c&&n(3,l=c.class),"$$scope"in c&&n(4,i=c.$$scope)},[o,a,s,l,i,r]}class Ui extends Xe{constructor(e){super(),Ye(this,e,FS,kS,ze,{width:0,height:1,style:2,class:3})}}var uE=(t,e)=>e===t.target||e.contains(t.target),py=(t,e,n)=>{return(pn(e)?e:t)+(n?` (${r=n,r.map(i=>i==="CMD"?pb()?"":"Ctrl":i).join("+")})`:"");var r};function hy(t){let e,n;return e=new Ui({props:{class:"PinturaButtonIcon",$$slots:{default:[BS]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};536870920&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function BS(t){let e;return{c(){e=vr("g")},m(n,r){it(n,e,r),e.innerHTML=t[3]},p(n,r){8&r&&(e.innerHTML=n[3])},d(n){n&&nt(e)}}}function my(t){let e;return{c(){e=dt("span"),I(e,"class",t[11])},m(n,r){it(n,e,r),e.innerHTML=t[0]},p(n,r){1&r&&(e.innerHTML=n[0]),2048&r&&I(e,"class",n[11])},d(n){n&&nt(e)}}}function NS(t){let e,n,r,i,o;const a=t[27].default,s=An(a,t,t[29],null),l=s||function(c){let d,u,p,h=c[3]&&hy(c),g=c[0]&&my(c);return{c(){d=dt("span"),h&&h.c(),u=Kt(),g&&g.c(),I(d,"class",c[13])},m(m,$){it(m,d,$),h&&h.m(d,null),vt(d,u),g&&g.m(d,null),p=!0},p(m,$){m[3]?h?(h.p(m,$),8&$&&B(h,1)):(h=hy(m),h.c(),B(h,1),h.m(d,u)):h&&(we(),j(h,1,1,()=>{h=null}),xe()),m[0]?g?g.p(m,$):(g=my(m),g.c(),g.m(d,null)):g&&(g.d(1),g=null),(!p||8192&$)&&I(d,"class",m[13])},i(m){p||(B(h),p=!0)},o(m){j(h),p=!1},d(m){m&&nt(d),h&&h.d(),g&&g.d()}}}(t);return{c(){e=dt("button"),l&&l.c(),I(e,"type",t[6]),I(e,"style",t[4]),e.disabled=t[5],I(e,"class",t[12]),I(e,"title",n=py(t[0],t[1],t[2]))},m(c,d){it(c,e,d),l&&l.m(e,null),t[28](e),r=!0,i||(o=[Et(e,"keydown",function(){vn(t[8])&&t[8].apply(this,arguments)}),Et(e,"click",function(){vn(t[7])&&t[7].apply(this,arguments)}),Et(e,"pointerdown",function(){vn(t[14])&&t[14].apply(this,arguments)}),fn(t[9].call(null,e))],i=!0)},p(c,[d]){t=c,s?s.p&&(!r||536870912&d)&&Ln(s,a,t,t[29],r?On(a,t[29],d,null):Dn(t[29]),null):l&&l.p&&(!r||10249&d)&&l.p(t,r?d:-1),(!r||64&d)&&I(e,"type",t[6]),(!r||16&d)&&I(e,"style",t[4]),(!r||32&d)&&(e.disabled=t[5]),(!r||4096&d)&&I(e,"class",t[12]),(!r||7&d&&n!==(n=py(t[0],t[1],t[2])))&&I(e,"title",n)},i(c){r||(B(l,c),r=!0)},o(c){j(l,c),r=!1},d(c){c&&nt(e),l&&l.d(c),t[28](null),i=!1,sn(o)}}}function GS(t,e,n){let r,i,o,a,s,l,{$$slots:c={},$$scope:d}=e,{class:u}=e,{label:p}=e,{title:h}=e,{shortcut:g}=e,{labelClass:m}=e,{innerClass:$}=e,{hideLabel:b=!1}=e,{icon:E}=e,{style:v}=e,{disabled:w}=e,{type:T="button"}=e,{onclick:M}=e,{onkeydown:A}=e,{onhold:x}=e,{action:C=()=>{}}=e,{holdThreshold:H=500}=e,{holdSpeedUpFactor:S=.5}=e,{holdSpeedMin:y=20}=e;const L=_=>{n(25,l=setTimeout(()=>{x(),L(Math.max(_*S,y))},_))};let O;return t.$$set=_=>{"class"in _&&n(15,u=_.class),"label"in _&&n(0,p=_.label),"title"in _&&n(1,h=_.title),"shortcut"in _&&n(2,g=_.shortcut),"labelClass"in _&&n(16,m=_.labelClass),"innerClass"in _&&n(17,$=_.innerClass),"hideLabel"in _&&n(18,b=_.hideLabel),"icon"in _&&n(3,E=_.icon),"style"in _&&n(4,v=_.style),"disabled"in _&&n(5,w=_.disabled),"type"in _&&n(6,T=_.type),"onclick"in _&&n(7,M=_.onclick),"onkeydown"in _&&n(8,A=_.onkeydown),"onhold"in _&&n(19,x=_.onhold),"action"in _&&n(9,C=_.action),"holdThreshold"in _&&n(20,H=_.holdThreshold),"holdSpeedUpFactor"in _&&n(21,S=_.holdSpeedUpFactor),"holdSpeedMin"in _&&n(22,y=_.holdSpeedMin),"$$scope"in _&&n(29,d=_.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&n(26,i=x?()=>{l&&(clearTimeout(l),n(25,l=void 0),document.documentElement.removeEventListener("pointerup",i))}:be),68681728&t.$$.dirty&&n(14,r=x?()=>{document.documentElement.addEventListener("pointerup",i),L(H)}:be),131072&t.$$.dirty&&n(13,o=he(["PinturaButtonInner",$])),294912&t.$$.dirty&&n(12,a=he(["PinturaButton",b&&"PinturaButtonIconOnly",u])),327680&t.$$.dirty&&n(11,s=he([b?"implicit":"PinturaButtonLabel",m]))},[p,h,g,E,v,w,T,M,A,C,O,s,a,o,r,u,m,$,b,x,H,S,y,_=>uE(_,O),()=>O,l,i,c,function(_){on[_?"unshift":"push"](()=>{O=_,n(10,O)})},d]}class qa extends Xe{constructor(e){super(),Ye(this,e,GS,NS,ze,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var zS=(t,e)=>{const n=t.findIndex(e);if(n>=0)return t.splice(n,1)};const US=80;var lc=(t,e={})=>{const{inertia:n=!1,inertiaDurationMultiplier:r=US,shouldStartInteraction:i=()=>!0,pinch:o=!1,multiTouch:a,getEventPosition:s=V=>ht(V.clientX,V.clientY),observeKeys:l=!1}=e;function c(V,Y){t.dispatchEvent(new CustomEvent(V,{detail:Y}))}function d(){M&&M(),M=void 0}const u=[],p=V=>V.timeStamp===0?Date.now():V.timeStamp,h=()=>{const V=je(u[0].position);if(u[1]){const Y=.5*(u[1].position.x-V.x),q=.5*(u[1].position.y-V.y);V.x+=Y,V.y+=q}return V},g=V=>{V.origin.x=V.position.x,V.origin.y=V.position.y,V.translation.x=0,V.translation.y=0},m=V=>{const Y=(q=>u.findIndex(et=>et.event.pointerId===q.pointerId))(V);if(!(Y<0))return u[Y]},$=()=>u.length===1,b=()=>u.length===2,E=V=>{const Y=zl(V.map(q=>q.position));return{center:Y,distance:((q,et)=>q.reduce((D,ot)=>D+oi(et,ot.position),0)/q.length)(V,Y),velocity:zl(V.map(q=>q.velocity)),translation:zl(V.map(q=>q.translation))}};let v,w,T,M,A,x,C,H,S=0,y;t.addEventListener("pointerdown",U);const L=["Meta","Control","Alt","Shift"];function O(V){if(!L.includes(V.key))return;const{metaKey:Y,ctrlKey:q,altKey:et,shiftKey:D}=V;P({metaKey:Y,ctrlKey:q,altKey:et,shiftKey:D})}let _=Date.now();const P=V=>{const Y=je(u[0].translation);let q=C;o&&b()&&(q*=oi(u[0].position,u[1].position)/A,Ar(Y,u[1].translation)),Ar(Y,x);const et=Date.now();et-_<16||(_=et,c("interactionupdate",{position:h(),translation:Y,scalar:o?q:void 0,isMultiTouching:b(),...V}))};function U(V){if(!b()&&!(Y=>qe(Y.button)&&Y.button!==0)(V)&&i(V,t)){if(d(),(Y=>{const q=p(Y),et={timeStamp:q,timeStampInitial:q,position:s(Y),origin:s(Y),velocity:yn(),velocityHistory:[],velocityAverage:yn(),translation:yn(),interactionState:void 0,event:Y};u.push(et),et.interactionState=E(u)})(V),l&&(window.addEventListener("keydown",O),window.addEventListener("keyup",O)),$())document.documentElement.addEventListener("pointermove",X),document.documentElement.addEventListener("pointerup",k),document.documentElement.addEventListener("pointercancel",k),document.addEventListener("visibilitychange",Q),H=!1,C=1,x=yn(),A=void 0,c("interactionstart",{origin:je(m(V).origin)});else if(o)H=!0,A=oi(u[0].position,u[1].position),x.x+=u[0].translation.x,x.y+=u[0].translation.y,g(u[0]);else if(a===!1)return u.length=0,$t(),c("interactioncancel")}}function X(V){V.preventDefault(),(ot=>{const st=m(ot);if(!st)return;const gt=p(ot),Lt=s(ot),Xt=Math.max(1,gt-st.timeStamp);st.velocity.x=(Lt.x-st.position.x)/Xt,st.velocity.y=(Lt.y-st.position.y)/Xt,st.velocityHistory.push(je(st.velocity)),st.velocityHistory=st.velocityHistory.slice(-3),st.velocityAverage=st.velocityHistory.reduce((Ct,Ut,Le,mt)=>(Ct.x+=Ut.x/mt.length,Ct.y+=Ut.y/mt.length,Ct),yn()),st.translation.x=Lt.x-st.origin.x,st.translation.y=Lt.y-st.origin.y,st.timeStamp=gt,st.position.x=Lt.x,st.position.y=Lt.y,st.event=ot})(V);const{metaKey:Y=!1,ctrlKey:q=!1,altKey:et=!1,shiftKey:D=!1}=l?V:{};P({metaKey:Y,ctrlKey:q,altKey:et,shiftKey:D})}function k(V){if(!m(V))return;const Y=h(),q=(Xt=>{const Ct=zS(u,Ut=>Ut.event.pointerId===Xt.pointerId);if(Ct)return Ct[0]})(V);if(o&&$()){const Xt=oi(u[0].position,q.position);C*=Xt/A,x.x+=u[0].translation.x+q.translation.x,x.y+=u[0].translation.y+q.translation.y,g(u[0])}let et=!1,D=!1;if(!H&&q){const Xt=performance.now(),Ct=Xt-q.timeStampInitial;et=jo(q.translation)<64&&Ct<300,D=!!(y&&et&&Xt-S<700&&jo(y,q.position)<128),et&&(y=je(q.position),S=Xt)}if(u.length>0)return;$t();const ot=je(q.translation),st=je(q.velocityAverage);let gt=!1;c("interactionrelease",{isTap:et,isDoubleTap:D,position:Y,translation:ot,scalar:C,preventInertia:()=>gt=!0});const Lt=oi(st);if(gt||!n||Lt<.25)return rt(ot,{isTap:et,isDoubleTap:D});w=je(Y),T=je(ot),v=T0(je(ot),{easing:gS,duration:Lt*r}),v.set({x:ot.x+50*st.x,y:ot.y+50*st.y}).then(()=>{M&&rt(to(v),{isTap:et,isDoubleTap:D})}),M=v.subscribe(F)}function F(V){V&&c("interactionupdate",{position:ht(w.x+(V.x-T.x),w.y+(V.y-T.y)),translation:V,scalar:o?C:void 0})}function Q(V){if(document.visibilityState==="visible"||!u.length)return;const Y=E(u);d(),c("interactionend",{...Y}),u.length=0,$t()}function rt(V,Y){d(),c("interactionend",{...Y,translation:V,scalar:o?C:void 0})}function $t(){l&&window.removeEventListener("keydown",O),l&&window.removeEventListener("keyup",O),document.documentElement.removeEventListener("pointermove",X),document.documentElement.removeEventListener("pointerup",k),document.documentElement.removeEventListener("pointercancel",k),document.addEventListener("visibilitychange",Q)}return{destroy(){d(),t.removeEventListener("pointerdown",U)}}},cc=(t,e={})=>{const{direction:n,shiftMultiplier:r=10,bubbles:i=!1,preventDefault:o=!1,stopKeydownPropagation:a=!0}=e,s=n==="horizontal",l=n==="vertical",c=d=>{const{key:u}=d,p=d.shiftKey,h=/up|down/i.test(u),g=/left|right/i.test(u);if(!g&&!h||s&&h||l&&g)return;const m=p?r:1;a&&d.stopPropagation(),o&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:i,detail:ht((/left/i.test(u)?-1:/right/i.test(u)?1:0)*m,(/up/i.test(u)?-1:/down/i.test(u)?1:0)*m)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}};function ko(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const fy=(t,e,n)=>{if(!e||!n)return{...t};const r=t.x+ko(e.x-t.x,n),i=t.x+t.width+ko(e.x+e.width-(t.x+t.width),n),o=t.y+ko(e.y-t.y,n);return{x:r,y:o,width:i-r,height:t.y+t.height+ko(e.y+e.height-(t.y+t.height),n)-o}},VS=(t,e,n)=>e&&n?ht(t.x+ko(e.x-t.x,n),t.y+ko(e.y-t.y,n)):{...t};var pE=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},bu=t=>{let e=t.detail||0;const{deltaX:n,deltaY:r,wheelDelta:i,wheelDeltaX:o,wheelDeltaY:a}=t;return qe(o)&&Math.abs(o)>Math.abs(a)?e=o/-120:qe(n)&&Math.abs(n)>Math.abs(r)?e=n/20:(i||a)&&(e=(i||a)/-120),e||(e=r/20),(Gi()||oo())&&(e*=2),e};function HS(t){let e,n,r,i,o,a,s;const l=t[36].default,c=An(l,t,t[35],null);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),I(n,"style",t[5]),I(e,"class",r=he(["PinturaScrollable",t[0]])),I(e,"style",t[4]),I(e,"data-direction",t[1]),I(e,"data-state",t[6])},m(d,u){it(d,e,u),vt(e,n),c&&c.m(n,null),t[38](e),o=!0,a||(s=[Et(n,"interactionstart",t[8]),Et(n,"interactionupdate",t[10]),Et(n,"interactionend",t[11]),Et(n,"interactionrelease",t[9]),fn(lc.call(null,n,{inertia:!0})),Et(n,"measure",t[37]),fn(yr.call(null,n)),Et(e,"wheel",t[13],{passive:!1}),Et(e,"scroll",t[15]),Et(e,"focusin",t[14]),Et(e,"nudge",t[16]),Et(e,"measure",t[12]),fn(yr.call(null,e,{observePosition:!0})),fn(i=cc.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],a=!0)},p(d,u){c&&c.p&&(!o||16&u[1])&&Ln(c,l,d,d[35],o?On(l,d[35],u,null):Dn(d[35]),null),(!o||32&u[0])&&I(n,"style",d[5]),(!o||1&u[0]&&r!==(r=he(["PinturaScrollable",d[0]])))&&I(e,"class",r),(!o||16&u[0])&&I(e,"style",d[4]),(!o||2&u[0])&&I(e,"data-direction",d[1]),(!o||64&u[0])&&I(e,"data-state",d[6]),i&&vn(i.update)&&2&u[0]&&i.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(d){o||(B(c,d),o=!0)},o(d){j(c,d),o=!1},d(d){d&&nt(e),c&&c.d(d),t[38](null),a=!1,sn(s)}}}function WS(t,e,n){let r,i,o,a,s,l,c,d,{$$slots:u={},$$scope:p}=e;const h=Vi();let g,m,$,b,E="idle",v=_e(0);G(t,v,Y=>n(34,d=Y));let w,{class:T}=e,{scrollBlockInteractionDist:M=5}=e,{scrollStep:A=10}=e,{scrollFocusMargin:x=64}=e,{scrollDirection:C="x"}=e,{scrollAutoCancel:H=!1}=e,{elasticity:S=0}=e,{onscroll:y=be}=e,{maskFeatherSize:L}=e,{maskFeatherStartOpacity:O}=e,{maskFeatherEndOpacity:_}=e,{scroll:P}=e,U="",X=!0;const k=v.subscribe(Y=>{const q=yn();q[C]=Y,y(q)}),F=Y=>Math.max(Math.min(0,Y),$[r]-m[r]);let Q,rt,$t;const V=(Y,q={})=>{const{elastic:et=!1,animate:D=!1,preventScrollState:ot=!1}=q;Math.abs(Y-g)>M&&E==="idle"&&!b&&!ot&&n(27,E="scrolling");const st=F(Y),gt=et&&S&&!b?st+ko(Y-st,S):st;let Lt=!0;D?Lt=!1:X||(Lt=!b),X=!1,v.set(gt,{hard:Lt}).then(Xt=>{b&&(X=!0)})};return gi(()=>{k()}),t.$$set=Y=>{"class"in Y&&n(0,T=Y.class),"scrollBlockInteractionDist"in Y&&n(20,M=Y.scrollBlockInteractionDist),"scrollStep"in Y&&n(21,A=Y.scrollStep),"scrollFocusMargin"in Y&&n(22,x=Y.scrollFocusMargin),"scrollDirection"in Y&&n(1,C=Y.scrollDirection),"scrollAutoCancel"in Y&&n(23,H=Y.scrollAutoCancel),"elasticity"in Y&&n(24,S=Y.elasticity),"onscroll"in Y&&n(25,y=Y.onscroll),"maskFeatherSize"in Y&&n(19,L=Y.maskFeatherSize),"maskFeatherStartOpacity"in Y&&n(17,O=Y.maskFeatherStartOpacity),"maskFeatherEndOpacity"in Y&&n(18,_=Y.maskFeatherEndOpacity),"scroll"in Y&&n(26,P=Y.scroll),"$$scope"in Y&&n(35,p=Y.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&n(31,r=C==="x"?"width":"height"),2&t.$$.dirty[0]&&n(29,i=C.toUpperCase()),8&t.$$.dirty[0]&&n(33,o=w&&getComputedStyle(w)),8&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(32,a=o&&pE(o.getPropertyValue("--scrollable-feather-size"))),268828676&t.$$.dirty[0]|11&t.$$.dirty[1]&&d!=null&&$&&a!=null&&m){const Y=-1*d/a,q=-($[r]-m[r]-d)/a;n(17,O=rn(1-Y,0,1)),n(18,_=rn(1-q,0,1)),n(19,L=a),n(4,U=`--scrollable-feather-start-opacity: ${O};--scrollable-feather-end-opacity: ${_}`)}67108872&t.$$.dirty[0]&&w&&P!==void 0&&(qe(P)?V(P):V(P.scrollOffset,P)),268435460&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(30,s=$&&m?m[r]>$[r]:void 0),1207959552&t.$$.dirty[0]&&n(6,l=he([E,s?"overflows":void 0])),1610612736&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(5,c=s?`transform: translate${i}(${d}px)`:void 0)},[T,C,m,w,U,c,l,v,()=>{s&&(rt=!1,Q=!0,$t=ht(0,0),b=!1,n(27,E="idle"),g=to(v))},({detail:Y})=>{s&&(b=!0,n(27,E="idle"))},({detail:Y})=>{s&&(rt||Q&&(Q=!1,jo(Y.translation)<.1)||(!H||C!=="x"||(q=>{const et=zi(ht(q.x-$t.x,q.y-$t.y),Math.abs);$t=je(q);const D=jo(et),ot=et.x-et.y;return!(D>1&&ot<-.5)})(Y.translation)?V(g+Y.translation[C],{elastic:!0}):rt=!0))},({detail:Y})=>{if(!s||rt)return;const q=g+Y.translation[C],et=F(q);X=!1,v.set(et).then(D=>{b&&(X=!0)})},({detail:Y})=>{n(28,$=Y),h("measure",{x:Y.x,y:Y.y,width:Y.width,height:Y.height})},Y=>{if(!s)return;Y.preventDefault(),Y.stopPropagation();const q=Y.shiftKey,et=bu(Y)*(q?-1:1),D=to(v);V(D+et*A,{animate:!0})},Y=>{if(!s||!b)return;let q=Y.target;Y.target.classList.contains("implicit")&&(q=q.parentNode);const et=q[C==="x"?"offsetLeft":"offsetTop"],D=et+q[C==="x"?"offsetWidth":"offsetHeight"],ot=to(v),st=x+L;ot+et<st?V(-et+st):ot+D>$[r]-st&&V($[r]-D-st,{animate:!0})},()=>{n(3,w[C==="x"?"scrollLeft":"scrollTop"]=0,w)},({detail:Y})=>{if(w.querySelector("[data-focus-visible]"))return;const q=-2*Y[C],et=to(v);V(et+q*A,{animate:!0,preventScrollState:!0})},O,_,L,M,A,x,H,S,y,P,E,$,i,s,r,a,o,d,p,u,Y=>n(2,m=Y.detail),function(Y){on[Y?"unshift":"push"](()=>{w=Y,n(3,w)})}]}class _0 extends Xe{constructor(e){super(),Ye(this,e,WS,HS,ze,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function gy(t,{delay:e=0,duration:n=400,easing:r=m0}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>"opacity: "+o*i}}function qS(t){let e,n,r,i,o;return{c(){e=dt("span"),I(e,"class","PinturaStatusMessage")},m(a,s){it(a,e,s),e.innerHTML=t[0],r=!0,i||(o=[Et(e,"measure",function(){vn(t[1])&&t[1].apply(this,arguments)}),fn(yr.call(null,e))],i=!0)},p(a,[s]){t=a,(!r||1&s)&&(e.innerHTML=t[0])},i(a){r||(Na(()=>{n||(n=Ag(e,gy,{duration:500},!0)),n.run(1)}),r=!0)},o(a){n||(n=Ag(e,gy,{duration:500},!1)),n.run(0),r=!1},d(a){a&&nt(e),a&&n&&n.end(),i=!1,sn(o)}}}function jS(t,e,n){let{text:r}=e,{onmeasure:i=be}=e;return t.$$set=o=>{"text"in o&&n(0,r=o.text),"onmeasure"in o&&n(1,i=o.onmeasure)},[r,i]}class hE extends Xe{constructor(e){super(),Ye(this,e,jS,qS,ze,{text:0,onmeasure:1})}}function YS(t){let e,n,r,i,o,a,s,l,c;return{c(){e=dt("span"),n=vr("svg"),r=vr("g"),i=vr("circle"),o=vr("circle"),a=Kt(),s=dt("span"),l=Sn(t[3]),I(i,"class","PinturaProgressIndicatorBar"),I(i,"r","8.5"),I(i,"cx","10"),I(i,"cy","10"),I(i,"stroke-linecap","round"),I(i,"opacity",".25"),I(o,"class","PinturaProgressIndicatorFill"),I(o,"r","8.5"),I(o,"stroke-dasharray",t[2]),I(o,"cx","10"),I(o,"cy","10"),I(o,"transform","rotate(-90) translate(-20)"),I(r,"fill","none"),I(r,"stroke","currentColor"),I(r,"stroke-width","2.5"),I(r,"stroke-linecap","round"),I(r,"opacity",t[1]),I(n,"width","20"),I(n,"height","20"),I(n,"viewBox","0 0 20 20"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"aria-hidden","true"),I(n,"focusable","false"),I(s,"class","implicit"),I(e,"class","PinturaProgressIndicator"),I(e,"data-status",t[0]),I(e,"style",c="opacity:"+t[4])},m(d,u){it(d,e,u),vt(e,n),vt(n,r),vt(r,i),vt(r,o),vt(e,a),vt(e,s),vt(s,l)},p(d,[u]){4&u&&I(o,"stroke-dasharray",d[2]),2&u&&I(r,"opacity",d[1]),8&u&&Kn(l,d[3]),1&u&&I(e,"data-status",d[0]),16&u&&c!==(c="opacity:"+d[4])&&I(e,"style",c)},i:Pe,o:Pe,d(d){d&&nt(e)}}}function XS(t,e,n){let r,i,o,a,s,l,c;const d=Vi();let{progress:u}=e,{min:p=0}=e,{max:h=100}=e,{labelBusy:g="Busy"}=e,{opacity:m}=e;const $=_e(m,{precision:.01});G(t,$,T=>n(4,c=T));const b=_e(0,{precision:.01}),E=_e(0,{precision:.01});G(t,E,T=>n(13,s=T));const v=ke([b],T=>rn(T,p,h));G(t,v,T=>n(14,l=T));const w=v.subscribe(T=>{u===1&&Math.round(T)>=100&&d("complete")});return lo(()=>{E.set(1)}),gi(()=>{w()}),t.$$set=T=>{"progress"in T&&n(8,u=T.progress),"min"in T&&n(9,p=T.min),"max"in T&&n(10,h=T.max),"labelBusy"in T&&n(11,g=T.labelBusy),"opacity"in T&&n(12,m=T.opacity)},t.$$.update=()=>{4096&t.$$.dirty&&qe(m)&&$.set(m),256&t.$$.dirty&&u&&u!==1/0&&b.set(100*u),18688&t.$$.dirty&&n(3,r=u===1/0?g:Math.round(l)+"%"),16640&t.$$.dirty&&n(2,i=u===1/0?"26.5 53":l/100*53+" 53"),8192&t.$$.dirty&&n(1,o=s),256&t.$$.dirty&&n(0,a=u===1/0?"busy":"loading")},[a,o,i,r,c,$,E,v,u,p,h,g,m,s,l]}class mE extends Xe{constructor(e){super(),Ye(this,e,XS,YS,ze,{progress:8,min:9,max:10,labelBusy:11,opacity:12})}}function ZS(t){let e,n,r;const i=t[5].default,o=An(i,t,t[4],null);return{c(){e=dt("span"),o&&o.c(),I(e,"class",n="PinturaStatusAside "+t[0]),I(e,"style",t[1])},m(a,s){it(a,e,s),o&&o.m(e,null),r=!0},p(a,[s]){o&&o.p&&(!r||16&s)&&Ln(o,i,a,a[4],r?On(i,a[4],s,null):Dn(a[4]),null),(!r||1&s&&n!==(n="PinturaStatusAside "+a[0]))&&I(e,"class",n),(!r||2&s)&&I(e,"style",a[1])},i(a){r||(B(o,a),r=!0)},o(a){j(o,a),r=!1},d(a){a&&nt(e),o&&o.d(a)}}}function KS(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{offset:a=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&n(2,a=c.offset),"opacity"in c&&n(3,s=c.opacity),"class"in c&&n(0,l=c.class),"$$scope"in c&&n(4,o=c.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&n(1,r=`transform:translateX(${a}px);opacity:${s}`)},[l,r,a,s,o,i]}class fE extends Xe{constructor(e){super(),Ye(this,e,KS,ZS,ze,{offset:2,opacity:3,class:0})}}const{document:yy}=y0;function QS(t){let e,n,r,i;return{c(){e=Kt(),n=dt("button"),I(n,"class","PinturaImageButton"),I(n,"type","button"),I(n,"title",t[1]),n.disabled=t[2]},m(o,a){it(o,e,a),it(o,n,a),n.innerHTML=t[0],t[11](n),r||(i=[Et(yy.body,"load",t[5],!0),Et(yy.body,"error",t[6],!0),Et(n,"pointerdown",t[4])],r=!0)},p(o,[a]){1&a&&(n.innerHTML=o[0]),2&a&&I(n,"title",o[1]),4&a&&(n.disabled=o[2])},i:Pe,o:Pe,d(o){o&&nt(e),o&&nt(n),t[11](null),r=!1,sn(i)}}}function JS(t,e,n){let r,{html:i}=e,{title:o}=e,{onclick:a}=e,{disabled:s=!1}=e,{ongrab:l=be}=e,{ondrag:c=be}=e,{ondrop:d=be}=e;const u=$=>jo(p,ht($.pageX,$.pageY))<256;let p;const h=$=>{document.documentElement.removeEventListener("pointermove",g),document.documentElement.removeEventListener("pointerup",h);const b=ht($.pageX,$.pageY);if(jo(p,b)<32)return a($);u($)||d($)},g=$=>{u($)||c($)},m=$=>r&&r.contains($)&&$.nodeName==="IMG";return t.$$set=$=>{"html"in $&&n(0,i=$.html),"title"in $&&n(1,o=$.title),"onclick"in $&&n(7,a=$.onclick),"disabled"in $&&n(2,s=$.disabled),"ongrab"in $&&n(8,l=$.ongrab),"ondrag"in $&&n(9,c=$.ondrag),"ondrop"in $&&n(10,d=$.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&r&&r.querySelector("img")&&n(3,r.dataset.loader=!0,r)},[i,o,s,r,$=>{p=ht($.pageX,$.pageY),l($),document.documentElement.addEventListener("pointermove",g),document.documentElement.addEventListener("pointerup",h)},({target:$})=>{m($)&&n(3,r.dataset.load=!0,r)},({target:$})=>{m($)&&n(3,r.dataset.error=!0,r)},a,l,c,d,function($){on[$?"unshift":"push"](()=>{r=$,n(3,r)})}]}class gE extends Xe{constructor(e){super(),Ye(this,e,JS,QS,ze,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function $y(t,e,n){const r=t.slice();return r[14]=e[n],r}function by(t,e){let n,r,i,o,a,s,l;function c(){return e[10](e[14])}function d(...h){return e[11](e[14],...h)}function u(...h){return e[12](e[14],...h)}function p(...h){return e[13](e[14],...h)}return r=new gE({props:{onclick:c,ongrab:d,ondrag:u,ondrop:p,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){n=dt("li"),qt(r.$$.fragment),i=Kt(),I(n,"style",e[6]),this.first=n},m(h,g){it(h,n,g),Ht(r,n,null),vt(n,i),a=!0,s||(l=fn(o=e[8].call(null,n,e[14])),s=!0)},p(h,g){e=h;const m={};5&g&&(m.onclick=c),9&g&&(m.ongrab=d),17&g&&(m.ondrag=u),33&g&&(m.ondrop=p),3&g&&(m.disabled=e[1]||e[14].disabled),1&g&&(m.title=e[14].title),1&g&&(m.html=e[14].thumb),r.$set(m),(!a||64&g)&&I(n,"style",e[6]),o&&vn(o.update)&&1&g&&o.update.call(null,e[14])},i(h){a||(B(r.$$.fragment,h),a=!0)},o(h){j(r.$$.fragment,h),a=!1},d(h){h&&nt(n),Wt(r),s=!1,l()}}}function tM(t){let e,n,r=[],i=new Map,o=t[0];const a=s=>s[14].id;for(let s=0;s<o.length;s+=1){let l=$y(t,o,s),c=a(l);i.set(c,r[s]=by(c,l))}return{c(){e=dt("ul");for(let s=0;s<r.length;s+=1)r[s].c();I(e,"class","PinturaImageButtonList")},m(s,l){it(s,e,l);for(let c=0;c<r.length;c+=1)r[c].m(e,null);n=!0},p(s,[l]){127&l&&(o=s[0],we(),r=Wa(r,l,a,1,s,o,i,e,qs,by,null,$y),xe())},i(s){if(!n){for(let l=0;l<o.length;l+=1)B(r[l]);n=!0}},o(s){for(let l=0;l<r.length;l+=1)j(r[l]);n=!1},d(s){s&&nt(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function eM(t,e,n){let r,i,{items:o}=e,{disabled:a}=e,{onclickitem:s}=e,{ongrabitem:l}=e,{ondragitem:c}=e,{ondropitem:d}=e;const u=_e(0,{stiffness:.25,damping:.9});return G(t,u,p=>n(9,i=p)),lo(()=>u.set(1)),t.$$set=p=>{"items"in p&&n(0,o=p.items),"disabled"in p&&n(1,a=p.disabled),"onclickitem"in p&&n(2,s=p.onclickitem),"ongrabitem"in p&&n(3,l=p.ongrabitem),"ondragitem"in p&&n(4,c=p.ondragitem),"ondropitem"in p&&n(5,d=p.ondropitem)},t.$$.update=()=>{512&t.$$.dirty&&n(6,r="opacity:"+i)},[o,a,s,l,c,d,r,u,(p,h)=>h.mount&&h.mount(p.firstChild,h),i,p=>s(p.id),(p,h)=>l&&l(p.id,h),(p,h)=>c&&c(p.id,h),(p,h)=>d&&d(p.id,h)]}class nM extends Xe{constructor(e){super(),Ye(this,e,eM,tM,ze,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var Fl=()=>Vn()&&window.devicePixelRatio||1;let q1=null;var _h=t=>(q1===null&&(q1=Fl()===1?Math.round:e=>e),q1(t)),Ph=(t,e={})=>{if(t){if(e.preventScroll&&oo()){const n=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=n)}t.focus(e)}},yE=t=>/date|email|number|search|text|url/.test(t.type),Bs=t=>(e=>/textarea/i.test(e.nodeName))(t)||yE(t)||t.isContentEditable;const rM=t=>({}),Ey=t=>({}),iM=t=>({}),vy=t=>({});function oM(t){let e,n;const r=[t[7]];let i={$$slots:{default:[sM]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new qa({props:i}),t[46](e),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=128&a[0]?gr(r,[wr(o[7])]):{};524288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){t[46](null),Wt(e,o)}}}function aM(t){let e,n;const r=[t[7]];let i={};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new qa({props:i}),t[45](e),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=128&a[0]?gr(r,[wr(o[7])]):{};e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){t[45](null),Wt(e,o)}}}function sM(t){let e;const n=t[44].label,r=An(n,t,t[50],vy);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||524288&o[1])&&Ln(r,n,i,i[50],e?On(n,i[50],o,iM):Dn(i[50]),vy)},i(i){e||(B(r,i),e=!0)},o(i){j(r,i),e=!1},d(i){r&&r.d(i)}}}function wy(t){let e,n,r,i,o,a,s;const l=t[44].details,c=An(l,t,t[50],Ey);return{c(){e=dt("div"),c&&c.c(),n=Kt(),r=dt("span"),I(r,"class","PinturaPanelTip"),I(r,"style",t[10]),I(e,"class",i=he(["PinturaPanel","pintura-editor-panel",t[2]])),I(e,"tabindex","-1"),I(e,"style",t[11])},m(d,u){it(d,e,u),c&&c.m(e,null),vt(e,n),vt(e,r),t[47](e),o=!0,a||(s=[Et(e,"close",t[48]),Et(e,"keydown",t[18]),Et(e,"measure",t[49]),fn(yr.call(null,e))],a=!0)},p(d,u){c&&c.p&&(!o||524288&u[1])&&Ln(c,l,d,d[50],o?On(l,d[50],u,rM):Dn(d[50]),Ey),(!o||1024&u[0])&&I(r,"style",d[10]),(!o||4&u[0]&&i!==(i=he(["PinturaPanel","pintura-editor-panel",d[2]])))&&I(e,"class",i),(!o||2048&u[0])&&I(e,"style",d[11])},i(d){o||(B(c,d),o=!0)},o(d){j(c,d),o=!1},d(d){d&&nt(e),c&&c.d(d),t[47](null),a=!1,sn(s)}}}function lM(t){let e,n,r,i,o,a,s,l,c;const d=[aM,oM],u=[];function p(g,m){return g[1]?0:1}n=p(t),r=u[n]=d[n](t);let h=t[6]&&wy(t);return{c(){e=Kt(),r.c(),i=Kt(),h&&h.c(),o=Kt(),a=Zn()},m(g,m){it(g,e,m),u[n].m(g,m),it(g,i,m),h&&h.m(g,m),it(g,o,m),it(g,a,m),s=!0,l||(c=[Et(document.body,"pointerdown",function(){vn(t[9])&&t[9].apply(this,arguments)}),Et(document.body,"pointerup",function(){vn(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(g,m){let $=n;n=p(t=g),n===$?u[n].p(t,m):(we(),j(u[$],1,1,()=>{u[$]=null}),xe(),r=u[n],r?r.p(t,m):(r=u[n]=d[n](t),r.c()),B(r,1),r.m(i.parentNode,i)),t[6]?h?(h.p(t,m),64&m[0]&&B(h,1)):(h=wy(t),h.c(),B(h,1),h.m(o.parentNode,o)):h&&(we(),j(h,1,1,()=>{h=null}),xe())},i(g){s||(B(r),B(h),B(!1),s=!0)},o(g){j(r),j(h),j(!1),s=!1},d(g){g&&nt(e),u[n].d(g),g&&nt(i),h&&h.d(g),g&&nt(o),g&&nt(a),l=!1,sn(c)}}}function cM(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,{$$slots:M={},$$scope:A}=e,{buttonClass:x}=e,{buttonLabel:C}=e,{buttonLabelClass:H}=e,{buttonHideLabel:S}=e,{buttonIcon:y}=e,{buttonTitle:L}=e,{panelClass:O}=e,{isActive:_=!1}=e,{onshow:P=({panel:mt})=>Ph(mt,{preventScroll:!0})}=e,{onhide:U=be}=e;const X=_r("isAnimated");G(t,X,mt=>n(43,T=mt));const k=_r("rootPortal");G(t,k,mt=>n(38,$=mt));const F=_r("rootRect");let Q,rt,$t;G(t,F,mt=>n(41,v=mt));const V=()=>n(26,$t=r&&r.getBoundingClientRect());let Y=yn(),q=_e(0);G(t,q,mt=>n(40,E=mt));let et=yn();const D=Pt({x:0,y:0});G(t,D,mt=>n(39,b=mt));const ot=_e(-5,{stiffness:.1,damping:.35,precision:.001});G(t,ot,mt=>n(42,w=mt));let st=!0;const gt=mt=>uE(mt,$)||rt.isEventTarget(mt);let Lt,Xt,Ct=!1;const Ut=mt=>{Bs(mt.target)||(_||V(),n(31,Xt=mt),n(0,_=!_))},Le=mt=>{/down/i.test(mt.key)&&(n(0,_=!0),n(31,Xt=mt))};return gi(()=>{if(!$||!Lt)return;const mt=Lt;qb().then(()=>{mt.parentNode&&mt.remove()})}),t.$$set=mt=>{"buttonClass"in mt&&n(19,x=mt.buttonClass),"buttonLabel"in mt&&n(1,C=mt.buttonLabel),"buttonLabelClass"in mt&&n(20,H=mt.buttonLabelClass),"buttonHideLabel"in mt&&n(21,S=mt.buttonHideLabel),"buttonIcon"in mt&&n(22,y=mt.buttonIcon),"buttonTitle"in mt&&n(23,L=mt.buttonTitle),"panelClass"in mt&&n(2,O=mt.panelClass),"isActive"in mt&&n(0,_=mt.isActive),"onshow"in mt&&n(24,P=mt.onshow),"onhide"in mt&&n(25,U=mt.onhide),"$$scope"in mt&&n(50,A=mt.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(r=rt&&rt.getElement()),1073741825&t.$$.dirty[0]&&n(8,g=_?mt=>{Ct&&(n(30,Ct=!1),gt(mt)||n(0,_=!1))}:void 0),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&q.set(_?1:0,{hard:T===!1}),1&t.$$.dirty[0]|4096&t.$$.dirty[1]&&ot.set(_?0:-5,{hard:T===!1}),2048&t.$$.dirty[1]&&n(34,i=1-w/-5),1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&v&&_&&V(),67108873&t.$$.dirty[0]|1024&t.$$.dirty[1]&&v&&Q&&$t&&_){n(29,st=!0);let mt=$t.x-v.x+.5*$t.width-.5*Q.width,pt=$t.y-v.y+$t.height;const It=12,At=12,Tt=v.width-12,le=v.height-12,oe=mt,Zt=pt,Se=oe+Q.width,Ie=Zt+Q.height;oe<It&&(n(28,et.x=oe-It,et),mt=It),Se>Tt&&(n(28,et.x=Se-Tt,et),mt=Tt-Q.width),Ie>le?(n(27,Y.y=-1,Y),At<pt-Q.height-$t.height?(n(28,et.y=0,et),pt-=Q.height+$t.height):(n(28,et.y=pt-(Ie-le),et),pt-=Ie-le-12,n(29,st=!1))):n(27,Y.y=1,Y),ut(D,b=zi(ht(mt,pt),_h),b)}512&t.$$.dirty[1]&&n(6,o=E>0),512&t.$$.dirty[1]&&n(37,a=E<1),134217728&t.$$.dirty[0]|2304&t.$$.dirty[1]&&n(36,s=`translateX(${Math.round(b.x)+12*Y.x}px) translateY(${Math.round(b.y)+12*Y.y+Y.y*w}px)`),1024&t.$$.dirty[1]&&n(35,l=`--panel-max-height:${v.height-24}px`),624&t.$$.dirty[1]&&n(11,c=a?`opacity: ${E}; pointer-events: ${E<1?"none":"all"}; transform: ${s};${l}`:`transform: ${s};${l}`),8&t.$$.dirty[1]&&n(32,d=.5+.5*i),8&t.$$.dirty[1]&&n(33,u=i),939524104&t.$$.dirty[0]|262&t.$$.dirty[1]&&n(10,p=b&&Q&&`opacity:${st?u:0};transform:scaleX(${d})rotate(45deg);top:${Y.y<0?et.y+Q.height:0}px;left:${et.x+.5*Q.width}px`),1&t.$$.dirty[0]&&n(9,h=_?mt=>{gt(mt)||n(30,Ct=!0)}:void 0),96&t.$$.dirty[0]|128&t.$$.dirty[1]&&o&&$&&Lt&&Lt.parentNode!==$&&$.append(Lt),1&t.$$.dirty[0]&&(_||n(31,Xt=void 0)),16777313&t.$$.dirty[0]|1&t.$$.dirty[1]&&_&&o&&Lt&&P({e:Xt,panel:Lt}),33554497&t.$$.dirty[0]&&o&&!_&&U(),16252930&t.$$.dirty[0]&&n(7,m={label:C,icon:y,class:he(["PinturaPanelButton",x]),onkeydown:Le,onclick:Ut,hideLabel:S,labelClass:H,title:L})},[_,C,O,Q,rt,Lt,o,m,g,h,p,c,X,k,F,q,D,ot,mt=>{/esc/i.test(mt.key)&&(n(0,_=!1),r.focus())},x,H,S,y,L,P,U,$t,Y,et,st,Ct,Xt,d,u,i,l,s,a,$,b,E,v,w,T,M,function(mt){on[mt?"unshift":"push"](()=>{rt=mt,n(4,rt)})},function(mt){on[mt?"unshift":"push"](()=>{rt=mt,n(4,rt)})},function(mt){on[mt?"unshift":"push"](()=>{Lt=mt,n(5,Lt)})},mt=>{mt.stopPropagation(),n(0,_=!1)},mt=>n(3,Q=so(mt.detail)),A]}class Eu extends Xe{constructor(e){super(),Ye(this,e,cM,lM,ze,{buttonClass:19,buttonLabel:1,buttonLabelClass:20,buttonHideLabel:21,buttonIcon:22,buttonTitle:23,panelClass:2,isActive:0,onshow:24,onhide:25},null,[-1,-1])}}var dM={Up:38,Down:40,Left:37,Right:39};function uM(t){let e,n,r,i,o,a,s,l;const c=t[15].default,d=An(c,t,t[14],null);return{c(){e=dt("li"),n=dt("input"),r=Kt(),i=dt("label"),d&&d.c(),I(n,"type","radio"),I(n,"class","implicit"),I(n,"id",t[7]),I(n,"name",t[0]),n.value=t[3],n.disabled=t[6],n.hidden=t[5],n.checked=t[4],I(i,"for",t[7]),I(i,"title",t[2]),I(e,"class",o=he(["PinturaRadioGroupOption",t[1]])),I(e,"data-hidden",t[5]),I(e,"data-disabled",t[6]),I(e,"data-selected",t[4])},m(u,p){it(u,e,p),vt(e,n),vt(e,r),vt(e,i),d&&d.m(i,null),a=!0,s||(l=[Et(n,"change",x5(t[16])),Et(n,"keydown",t[9]),Et(n,"click",t[10])],s=!0)},p(u,[p]){(!a||128&p)&&I(n,"id",u[7]),(!a||1&p)&&I(n,"name",u[0]),(!a||8&p)&&(n.value=u[3]),(!a||64&p)&&(n.disabled=u[6]),(!a||32&p)&&(n.hidden=u[5]),(!a||16&p)&&(n.checked=u[4]),d&&d.p&&(!a||16384&p)&&Ln(d,c,u,u[14],a?On(c,u[14],p,null):Dn(u[14]),null),(!a||128&p)&&I(i,"for",u[7]),(!a||4&p)&&I(i,"title",u[2]),(!a||2&p&&o!==(o=he(["PinturaRadioGroupOption",u[1]])))&&I(e,"class",o),(!a||32&p)&&I(e,"data-hidden",u[5]),(!a||64&p)&&I(e,"data-disabled",u[6]),(!a||16&p)&&I(e,"data-selected",u[4])},i(u){a||(B(d,u),a=!0)},o(u){j(d,u),a=!1},d(u){u&&nt(e),d&&d.d(u),s=!1,sn(l)}}}function pM(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:u}=e,{checked:p}=e,{onkeydown:h}=e,{onclick:g}=e,{hidden:m=!1}=e,{disabled:$=!1}=e;const b=Object.values(dM),E=_r("keysPressed");return G(t,E,v=>n(17,i=v)),t.$$set=v=>{"name"in v&&n(0,s=v.name),"class"in v&&n(1,l=v.class),"label"in v&&n(2,c=v.label),"id"in v&&n(11,d=v.id),"value"in v&&n(3,u=v.value),"checked"in v&&n(4,p=v.checked),"onkeydown"in v&&n(12,h=v.onkeydown),"onclick"in v&&n(13,g=v.onclick),"hidden"in v&&n(5,m=v.hidden),"disabled"in v&&n(6,$=v.disabled),"$$scope"in v&&n(14,a=v.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&n(7,r=`${s}-${d}`)},[s,l,c,u,p,m,$,r,E,v=>{h(v)},v=>{i.some(w=>b.includes(w))||g(v)},d,h,g,a,o,function(v){Zo.call(this,t,v)}]}class $E extends Xe{constructor(e){super(),Ye(this,e,pM,uM,ze,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var ql=(t=[])=>t.reduce((e,n)=>(er(n)?er(n[1]):n.options)?e.concat(er(n)?n[1]:n.options):(e.push(n),e),[]);const Md=(t,e,n)=>{let r;return er(t)?r={id:e,value:t[0],label:t[1],...t[2]||{}}:(r=t,r.id=r.id!=null?r.id:e),n?n(r):r};var jn=(t,e,n)=>Xn(t)?t(e,n):t;const bE=(t,e)=>t.map(([n,r,i])=>{if(er(r))return[jn(n,e),bE(r,e)];{const o=[n,jn(r,e)];if(i){let a={...i};i.icon&&(a.icon=jn(i.icon,e)),o.push(a)}return o}});var EE=(t,e)=>bE(t,e),vE=(t,e)=>Array.isArray(t)&&Array.isArray(e)?Ko(t,e):t===e;function xy(t,e,n){const r=t.slice();return r[27]=e[n],r}const hM=t=>({option:1024&t[0]}),Iy=t=>({option:t[27]});function Ty(t,e,n){const r=t.slice();return r[27]=e[n],r}const mM=t=>({option:1024&t[0]}),Ry=t=>({option:t[27]}),fM=t=>({option:1024&t[0]}),Sy=t=>({option:t[27]});function My(t){let e,n,r,i,o,a=[],s=new Map,l=t[1]&&Cy(t),c=t[10];const d=u=>u[27].id;for(let u=0;u<c.length;u+=1){let p=xy(t,c,u),h=d(p);s.set(h,a[u]=Dy(h,p))}return{c(){e=dt("fieldset"),l&&l.c(),n=Kt(),r=dt("ul");for(let u=0;u<a.length;u+=1)a[u].c();I(r,"class","PinturaRadioGroupOptions"),I(e,"class",i=he(["PinturaRadioGroup",t[3]])),I(e,"data-layout",t[5]),I(e,"title",t[7])},m(u,p){it(u,e,p),l&&l.m(e,null),vt(e,n),vt(e,r);for(let h=0;h<a.length;h+=1)a[h].m(r,null);o=!0},p(u,p){u[1]?l?l.p(u,p):(l=Cy(u),l.c(),l.m(e,n)):l&&(l.d(1),l=null),8419153&p[0]&&(c=u[10],we(),a=Wa(a,p,d,1,u,c,s,r,qs,Dy,null,xy),xe()),(!o||8&p[0]&&i!==(i=he(["PinturaRadioGroup",u[3]])))&&I(e,"class",i),(!o||32&p[0])&&I(e,"data-layout",u[5]),(!o||128&p[0])&&I(e,"title",u[7])},i(u){if(!o){for(let p=0;p<c.length;p+=1)B(a[p]);o=!0}},o(u){for(let p=0;p<a.length;p+=1)j(a[p]);o=!1},d(u){u&&nt(e),l&&l.d();for(let p=0;p<a.length;p+=1)a[p].d()}}}function Cy(t){let e,n,r;return{c(){e=dt("legend"),n=Sn(t[1]),I(e,"class",r=t[2]&&"implicit")},m(i,o){it(i,e,o),vt(e,n)},p(i,o){2&o[0]&&Kn(n,i[1]),4&o[0]&&r!==(r=i[2]&&"implicit")&&I(e,"class",r)},d(i){i&&nt(e)}}}function gM(t){let e,n;return e=new $E({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[bM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.name=r[4]),1024&i[0]&&(o.label=r[27].label),1024&i[0]&&(o.id=r[27].id),1024&i[0]&&(o.value=r[27].value),1024&i[0]&&(o.disabled=r[27].disabled),1024&i[0]&&(o.hidden=r[27].hidden),256&i[0]&&(o.class=r[8]),1025&i[0]&&(o.checked=r[12](r[27])===r[0]),1024&i[0]&&(o.onkeydown=r[13](r[27])),1024&i[0]&&(o.onclick=r[14](r[27])),8389696&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function yM(t){let e,n,r,i,o,a,s=[],l=new Map;const c=t[22].group,d=An(c,t,t[23],Sy),u=d||function(g){let m,$,b=g[27].label+"";return{c(){m=dt("span"),$=Sn(b),I(m,"class","PinturaRadioGroupOptionGroupLabel")},m(E,v){it(E,m,v),vt(m,$)},p(E,v){1024&v[0]&&b!==(b=E[27].label+"")&&Kn($,b)},d(E){E&&nt(m)}}}(t);let p=t[27].options;const h=g=>g[27].id;for(let g=0;g<p.length;g+=1){let m=Ty(t,p,g),$=h(m);l.set($,s[g]=Ly($,m))}return{c(){e=dt("li"),u&&u.c(),n=Kt(),r=dt("ul");for(let g=0;g<s.length;g+=1)s[g].c();i=Kt(),I(r,"class","PinturaRadioGroupOptions"),I(e,"class",o=he(["PinturaRadioGroupOptionGroup",t[9]]))},m(g,m){it(g,e,m),u&&u.m(e,null),vt(e,n),vt(e,r);for(let $=0;$<s.length;$+=1)s[$].m(r,null);vt(e,i),a=!0},p(g,m){d?d.p&&(!a||8389632&m[0])&&Ln(d,c,g,g[23],a?On(c,g[23],m,fM):Dn(g[23]),Sy):u&&u.p&&(!a||1024&m[0])&&u.p(g,a?m:[-1,-1]),8418641&m[0]&&(p=g[27].options,we(),s=Wa(s,m,h,1,g,p,l,r,qs,Ly,null,Ty),xe()),(!a||512&m[0]&&o!==(o=he(["PinturaRadioGroupOptionGroup",g[9]])))&&I(e,"class",o)},i(g){if(!a){B(u,g);for(let m=0;m<p.length;m+=1)B(s[m]);a=!0}},o(g){j(u,g);for(let m=0;m<s.length;m+=1)j(s[m]);a=!1},d(g){g&&nt(e),u&&u.d(g);for(let m=0;m<s.length;m+=1)s[m].d()}}}function _y(t){let e,n;return e=new Ui({props:{$$slots:{default:[$M]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};8389632&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function $M(t){let e,n=t[27].icon+"";return{c(){e=vr("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1024&i[0]&&n!==(n=r[27].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Py(t){let e,n,r=t[27].label+"";return{c(){e=dt("span"),n=Sn(r),I(e,"class",t[6])},m(i,o){it(i,e,o),vt(e,n)},p(i,o){1024&o[0]&&r!==(r=i[27].label+"")&&Kn(n,r),64&o[0]&&I(e,"class",i[6])},d(i){i&&nt(e)}}}function bM(t){let e;const n=t[22].option,r=An(n,t,t[23],Iy),i=r||function(o){let a,s,l,c=o[27].icon&&_y(o),d=!o[27].hideLabel&&Py(o);return{c(){c&&c.c(),a=Kt(),d&&d.c(),s=Kt()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&B(c,1)):(c=_y(u),c.c(),B(c,1),c.m(a.parentNode,a)):c&&(we(),j(c,1,1,()=>{c=null}),xe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=Py(u),d.c(),d.m(s.parentNode,s))},i(u){l||(B(c),l=!0)},o(u){j(c),l=!1},d(u){c&&c.d(u),u&&nt(a),d&&d.d(u),u&&nt(s)}}}(t);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){r?r.p&&(!e||8389632&a[0])&&Ln(r,n,o,o[23],e?On(n,o[23],a,hM):Dn(o[23]),Iy):i&&i.p&&(!e||1088&a[0])&&i.p(o,e?a:[-1,-1])},i(o){e||(B(i,o),e=!0)},o(o){j(i,o),e=!1},d(o){i&&i.d(o)}}}function Ay(t){let e,n;return e=new Ui({props:{$$slots:{default:[EM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};8389632&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function EM(t){let e,n=t[27].icon+"";return{c(){e=vr("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1024&i[0]&&n!==(n=r[27].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Oy(t){let e,n,r=t[27].label+"";return{c(){e=dt("span"),n=Sn(r),I(e,"class",t[6])},m(i,o){it(i,e,o),vt(e,n)},p(i,o){1024&o[0]&&r!==(r=i[27].label+"")&&Kn(n,r),64&o[0]&&I(e,"class",i[6])},d(i){i&&nt(e)}}}function vM(t){let e;const n=t[22].option,r=An(n,t,t[23],Ry),i=r||function(o){let a,s,l,c=o[27].icon&&Ay(o),d=!o[27].hideLabel&&Oy(o);return{c(){c&&c.c(),a=Kt(),d&&d.c(),s=Kt()},m(u,p){c&&c.m(u,p),it(u,a,p),d&&d.m(u,p),it(u,s,p),l=!0},p(u,p){u[27].icon?c?(c.p(u,p),1024&p[0]&&B(c,1)):(c=Ay(u),c.c(),B(c,1),c.m(a.parentNode,a)):c&&(we(),j(c,1,1,()=>{c=null}),xe()),u[27].hideLabel?d&&(d.d(1),d=null):d?d.p(u,p):(d=Oy(u),d.c(),d.m(s.parentNode,s))},i(u){l||(B(c),l=!0)},o(u){j(c),l=!1},d(u){c&&c.d(u),u&&nt(a),d&&d.d(u),u&&nt(s)}}}(t);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){r?r.p&&(!e||8389632&a[0])&&Ln(r,n,o,o[23],e?On(n,o[23],a,mM):Dn(o[23]),Ry):i&&i.p&&(!e||1088&a[0])&&i.p(o,e?a:[-1,-1])},i(o){e||(B(i,o),e=!0)},o(o){j(i,o),e=!1},d(o){i&&i.d(o)}}}function Ly(t,e){let n,r,i;return r=new $E({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[vM]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=Zn(),qt(r.$$.fragment),this.first=n},m(o,a){it(o,n,a),Ht(r,o,a),i=!0},p(o,a){e=o;const s={};16&a[0]&&(s.name=e[4]),1024&a[0]&&(s.label=e[27].label),1024&a[0]&&(s.id=e[27].id),1024&a[0]&&(s.value=e[27].value),1024&a[0]&&(s.disabled=e[27].disabled),1024&a[0]&&(s.hidden=e[27].hidden),256&a[0]&&(s.class=e[8]),1025&a[0]&&(s.checked=e[12](e[27])===e[0]),1024&a[0]&&(s.onkeydown=e[13](e[27])),1024&a[0]&&(s.onclick=e[14](e[27])),8389696&a[0]&&(s.$$scope={dirty:a,ctx:e}),r.$set(s)},i(o){i||(B(r.$$.fragment,o),i=!0)},o(o){j(r.$$.fragment,o),i=!1},d(o){o&&nt(n),Wt(r,o)}}}function Dy(t,e){let n,r,i,o,a;const s=[yM,gM],l=[];function c(d,u){return d[27].options?0:1}return r=c(e),i=l[r]=s[r](e),{key:t,first:null,c(){n=Zn(),i.c(),o=Zn(),this.first=n},m(d,u){it(d,n,u),l[r].m(d,u),it(d,o,u),a=!0},p(d,u){let p=r;r=c(e=d),r===p?l[r].p(e,u):(we(),j(l[p],1,1,()=>{l[p]=null}),xe(),i=l[r],i?i.p(e,u):(i=l[r]=s[r](e),i.c()),B(i,1),i.m(o.parentNode,o))},i(d){a||(B(i),a=!0)},o(d){j(i),a=!1},d(d){d&&nt(n),l[r].d(d),d&&nt(o)}}}function wM(t){let e,n,r,i=t[11].length&&My(t);return{c(){i&&i.c(),e=Kt(),n=Zn()},m(o,a){i&&i.m(o,a),it(o,e,a),it(o,n,a),r=!0},p(o,a){o[11].length?i?(i.p(o,a),2048&a[0]&&B(i,1)):(i=My(o),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(we(),j(i,1,1,()=>{i=null}),xe())},i(o){r||(B(i),B(!1),r=!0)},o(o){j(i),j(!1),r=!1},d(o){i&&i.d(o),o&&nt(e),o&&nt(n)}}}function xM(t,e,n){let r,i,o,{$$slots:a={},$$scope:s}=e;const l=Vi();let{label:c}=e,{hideLabel:d=!0}=e,{class:u}=e,{name:p="radio-group-"+Ua()}=e,{selectedIndex:h=-1}=e,{options:g=[]}=e,{onchange:m}=e,{layout:$}=e,{optionMapper:b}=e,{optionFilter:E}=e,{value:v}=e,{optionLabelClass:w}=e,{title:T}=e,{locale:M}=e,{optionClass:A}=e,{optionGroupClass:x}=e;const C=S=>o.findIndex(y=>y.id===S.id),H=(S,y)=>{n(0,h=C(S));const L={index:h,...S};((O,..._)=>{O&&O(..._)})(m,L,y),l("change",L)};return t.$$set=S=>{"label"in S&&n(1,c=S.label),"hideLabel"in S&&n(2,d=S.hideLabel),"class"in S&&n(3,u=S.class),"name"in S&&n(4,p=S.name),"selectedIndex"in S&&n(0,h=S.selectedIndex),"options"in S&&n(15,g=S.options),"onchange"in S&&n(16,m=S.onchange),"layout"in S&&n(5,$=S.layout),"optionMapper"in S&&n(17,b=S.optionMapper),"optionFilter"in S&&n(18,E=S.optionFilter),"value"in S&&n(19,v=S.value),"optionLabelClass"in S&&n(6,w=S.optionLabelClass),"title"in S&&n(7,T=S.title),"locale"in S&&n(20,M=S.locale),"optionClass"in S&&n(8,A=S.optionClass),"optionGroupClass"in S&&n(9,x=S.optionGroupClass),"$$scope"in S&&n(23,s=S.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&n(11,r=EE(E?g.filter(E):g,M)),133120&t.$$.dirty[0]&&n(10,i=((S=[],y)=>{let L=0;return S.map(O=>(L++,er(O)?er(O[1])?{id:L,label:O[0],options:O[1].map(_=>Md(_,++L,y))}:Md(O,L,y):O.options?{id:O.id||L,label:O.label,options:O.options.map(_=>Md(_,++L,y))}:Md(O,L,y)))})(r,b)),1024&t.$$.dirty[0]&&n(21,o=ql(i)),2654209&t.$$.dirty[0]&&h<0&&(n(0,h=o.findIndex(S=>vE(S.value,v))),h<0&&n(0,h=(S=>S.findIndex(y=>y[0]===void 0))(g)))},[h,c,d,u,p,$,w,T,A,x,i,r,C,S=>y=>{var L;L=y.key,/enter| /i.test(L)&&H(S,y)},S=>y=>{H(S,y)},g,m,b,E,v,M,o,a,s]}class dc extends Xe{constructor(e){super(),Ye(this,e,xM,wM,ze,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function ky(t){let e,n,r,i,o,a,s,l,c,d;return{c(){e=dt("div"),n=dt("button"),r=Sn(""),o=Kt(),a=dt("button"),s=Sn(""),I(n,"type","button"),I(n,"tabindex","-1"),I(n,"aria-label",i="increase "+t[7]),I(a,"type","button"),I(a,"tabindex","-1"),I(a,"aria-label",l="decrease "+t[7]),I(e,"class","PinturaInputSpinners")},m(u,p){it(u,e,p),vt(e,n),vt(n,r),vt(e,o),vt(e,a),vt(a,s),c||(d=[Et(n,"click",t[17]),Et(a,"click",t[18])],c=!0)},p(u,p){128&p&&i!==(i="increase "+u[7])&&I(n,"aria-label",i),128&p&&l!==(l="decrease "+u[7])&&I(a,"aria-label",l)},d(u){u&&nt(e),c=!1,sn(d)}}}function IM(t){let e,n,r,i,o,a,s=t[1]==="number"&&t[9]&&ky(t);return{c(){e=dt("div"),n=dt("input"),i=Kt(),s&&s.c(),I(n,"class","PinturaInputField"),I(n,"title",t[7]),I(n,"type",t[1]),I(n,"min",t[4]),I(n,"max",t[5]),I(n,"step",t[6]),I(n,"inputmode",t[3]),n.value=r=t[14]?t[13]:t[0],I(n,"style",t[11]),I(n,"placeholder",t[8]),I(n,"maxlength",t[12]),n.disabled=t[2],I(n,"spellcheck","false"),I(n,"autocorrect","off"),I(n,"autocapitalize","off"),I(e,"class","PinturaInput")},m(l,c){it(l,e,c),vt(e,n),t[27](n),vt(e,i),s&&s.m(e,null),o||(a=[Et(n,"input",t[16]),Et(n,"blur",function(){vn(t[14]&&t[15])&&(t[14]&&t[15]).apply(this,arguments)}),Et(n,"keydown",t[19]),Et(n,"keyup",t[20])],o=!0)},p(l,[c]){t=l,128&c&&I(n,"title",t[7]),2&c&&I(n,"type",t[1]),16&c&&I(n,"min",t[4]),32&c&&I(n,"max",t[5]),64&c&&I(n,"step",t[6]),8&c&&I(n,"inputmode",t[3]),24577&c&&r!==(r=t[14]?t[13]:t[0])&&n.value!==r&&(n.value=r),2048&c&&I(n,"style",t[11]),256&c&&I(n,"placeholder",t[8]),4096&c&&I(n,"maxlength",t[12]),4&c&&(n.disabled=t[2]),t[1]==="number"&&t[9]?s?s.p(t,c):(s=ky(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Pe,o:Pe,d(l){l&&nt(e),t[27](null),s&&s.d(),o=!1,sn(a)}}}function TM(t,e,n){let r,i,o,a,s,l,c,{value:d}=e,{type:u="text"}=e,{disabled:p=!1}=e,{inputmode:h}=e,{min:g}=e,{max:m}=e,{step:$}=e,{onchange:b=be}=e,{onkeydown:E=be}=e,{title:v}=e,{stepMultiplier:w=10}=e,{placeholder:T}=e,{enableSpinButtons:M=!0}=e,{enableStopPropagation:A=!1}=e;const x=()=>{let y=l.value;return u==="number"&&(y=h==="numeric"?parseInt(y,10):parseFloat(y),!qe(y)||Number.isNaN(y)?y=g||0:r&&(y=rn(y,g,m))),y};let C=d;const H=()=>{const y=rn(x()+(c?$*w:$),g,m);y!==d&&(n(25,C=y),n(0,d=y),b(d))},S=()=>{const y=rn(x()-(c?$*w:$),g,m);y!==d&&(n(25,C=y),n(0,d=y),b(d))};return t.$$set=y=>{"value"in y&&n(0,d=y.value),"type"in y&&n(1,u=y.type),"disabled"in y&&n(2,p=y.disabled),"inputmode"in y&&n(3,h=y.inputmode),"min"in y&&n(4,g=y.min),"max"in y&&n(5,m=y.max),"step"in y&&n(6,$=y.step),"onchange"in y&&n(21,b=y.onchange),"onkeydown"in y&&n(22,E=y.onkeydown),"title"in y&&n(7,v=y.title),"stepMultiplier"in y&&n(23,w=y.stepMultiplier),"placeholder"in y&&n(8,T=y.placeholder),"enableSpinButtons"in y&&n(9,M=y.enableSpinButtons),"enableStopPropagation"in y&&n(24,A=y.enableStopPropagation)},t.$$.update=()=>{48&t.$$.dirty&&n(14,r=qe(g)&&qe(m)),33555457&t.$$.dirty&&n(13,i=l===document.activeElement?C:d),32&t.$$.dirty&&n(26,o=m?(m+"").length:void 0),67108872&t.$$.dirty&&n(12,a=h==="numeric"&&o?o:void 0),67108864&t.$$.dirty&&n(11,s=o?`min-width:${o}em`:void 0)},[d,u,p,h,g,m,$,v,T,M,l,s,a,i,r,()=>{n(25,C=x()),b(d)},()=>{n(25,C=l.value),b(x())},H,S,y=>{c=y.shiftKey,E(y);const{key:L}=y;A&&y.stopPropagation(),/up|down/i.test(L)&&(/up/i.test(L)&&H(),/down/i.test(L)&&S(),y.preventDefault(),y.stopPropagation())},y=>{const{key:L}=y;/up|down/i.test(L)&&(y.preventDefault(),y.stopPropagation())},b,E,w,A,C,o,function(y){on[y?"unshift":"push"](()=>{l=y,n(10,l)})}]}class wE extends Xe{constructor(e){super(),Ye(this,e,TM,IM,ze,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:21,onkeydown:22,title:7,stepMultiplier:23,placeholder:8,enableSpinButtons:9,enableStopPropagation:24})}}const RM=t=>({}),Fy=t=>({});function SM(t){let e,n,r,i,o=(t[2]||t[21])+"",a=t[6]&&By(t);return{c(){a&&a.c(),e=Kt(),n=dt("span"),I(n,"class",r=he(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){a&&a.m(s,l),it(s,e,l),it(s,n,l),n.innerHTML=o,i=!0},p(s,l){s[6]?a?(a.p(s,l),64&l[0]&&B(a,1)):(a=By(s),a.c(),B(a,1),a.m(e.parentNode,e)):a&&(we(),j(a,1,1,()=>{a=null}),xe()),(!i||2097156&l[0])&&o!==(o=(s[2]||s[21])+"")&&(n.innerHTML=o),(!i||40&l[0]&&r!==(r=he(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&I(n,"class",r)},i(s){i||(B(a),i=!0)},o(s){j(a),i=!1},d(s){a&&a.d(s),s&&nt(e),s&&nt(n)}}}function MM(t){let e,n;return e=new wE({props:{value:t[10],onchange:t[17],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:t[8].reduce(Uy,1/0),max:t[8].reduce(Vy,-1/0),enableSpinButtons:!1}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};1024&i[0]&&(o.value=r[10]),131072&i[0]&&(o.onchange=r[17]),256&i[0]&&(o.min=r[8].reduce(Uy,1/0)),256&i[0]&&(o.max=r[8].reduce(Vy,-1/0)),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function By(t){let e,n;return e=new Ui({props:{class:"PinturaButtonIcon",$$slots:{default:[CM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};536870976&i[0]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function CM(t){let e;return{c(){e=vr("g")},m(n,r){it(n,e,r),e.innerHTML=t[6]},p(n,r){64&r[0]&&(e.innerHTML=n[6])},d(n){n&&nt(e)}}}function _M(t){let e,n,r,i,o,a;const s=[MM,SM],l=[];function c(d,u){return d[18]?0:1}return n=c(t),r=l[n]=s[n](t),{c(){e=dt("span"),r.c(),I(e,"slot","label"),I(e,"title",i=jn(t[1],t[16])),I(e,"class",o=he(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(d,u){it(d,e,u),l[n].m(e,null),a=!0},p(d,u){let p=n;n=c(d),n===p?l[n].p(d,u):(we(),j(l[p],1,1,()=>{l[p]=null}),xe(),r=l[n],r?r.p(d,u):(r=l[n]=s[n](d),r.c()),B(r,1),r.m(e,null)),(!a||65538&u[0]&&i!==(i=jn(d[1],d[16])))&&I(e,"title",i),(!a||262160&u[0]&&o!==(o=he(["PinturaButtonInner",d[18]&&"PinturaComboBox",d[4]])))&&I(e,"class",o)},i(d){a||(B(r),a=!0)},o(d){j(r),a=!1},d(d){d&&nt(e),l[n].d()}}}function PM(t){let e,n,r=t[31].label+"";return{c(){e=dt("span"),n=Sn(r),I(e,"slot","group")},m(i,o){it(i,e,o),vt(e,n)},p(i,o){1&o[1]&&r!==(r=i[31].label+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function Ny(t){let e,n;return e=new Ui({props:{style:Xn(t[14])?t[14](t[31].value):t[14],$$slots:{default:[AM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};16384&i[0]|1&i[1]&&(o.style=Xn(r[14])?r[14](r[31].value):r[14]),536870912&i[0]|1&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function AM(t){let e,n=t[31].icon+"";return{c(){e=vr("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1&i[1]&&n!==(n=r[31].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function Gy(t){let e,n,r,i,o,a=t[31].label+"",s=t[31].sublabel&&zy(t);return{c(){e=dt("span"),n=new Ub(!1),r=Kt(),s&&s.c(),n.a=r,I(e,"style",i=Xn(t[15])?t[15](t[31].value):t[15]),I(e,"class",o=he(["PinturaDropdownOptionLabel",t[11]]))},m(l,c){it(l,e,c),n.m(a,e),vt(e,r),s&&s.m(e,null)},p(l,c){1&c[1]&&a!==(a=l[31].label+"")&&n.p(a),l[31].sublabel?s?s.p(l,c):(s=zy(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),32768&c[0]|1&c[1]&&i!==(i=Xn(l[15])?l[15](l[31].value):l[15])&&I(e,"style",i),2048&c[0]&&o!==(o=he(["PinturaDropdownOptionLabel",l[11]]))&&I(e,"class",o)},d(l){l&&nt(e),s&&s.d()}}}function zy(t){let e,n=t[31].sublabel+"";return{c(){e=dt("span"),I(e,"class","PinturaDropdownOptionSublabel")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){1&i[1]&&n!==(n=r[31].sublabel+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function OM(t){let e,n,r,i=t[31].icon&&Ny(t),o=!t[31].hideLabel&&Gy(t);return{c(){e=dt("span"),i&&i.c(),n=Kt(),o&&o.c(),I(e,"slot","option")},m(a,s){it(a,e,s),i&&i.m(e,null),vt(e,n),o&&o.m(e,null),r=!0},p(a,s){a[31].icon?i?(i.p(a,s),1&s[1]&&B(i,1)):(i=Ny(a),i.c(),B(i,1),i.m(e,n)):i&&(we(),j(i,1,1,()=>{i=null}),xe()),a[31].hideLabel?o&&(o.d(1),o=null):o?o.p(a,s):(o=Gy(a),o.c(),o.m(e,null))},i(a){r||(B(i),r=!0)},o(a){j(i),r=!1},d(a){a&&nt(e),i&&i.d(),o&&o.d()}}}function LM(t){let e,n,r,i,o,a;const s=t[27].controls,l=An(s,t,t[29],Fy);return r=new dc({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:he(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[OM,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]],group:[PM,({option:c})=>({31:c}),({option:c})=>[0,c?1:0]]},$$scope:{ctx:t}}}),{c(){e=dt("div"),l&&l.c(),n=Kt(),qt(r.$$.fragment),I(e,"slot","details"),I(e,"class","PinturaOptionsListWrapper")},m(c,d){it(c,e,d),l&&l.m(e,null),vt(e,n),Ht(r,e,null),i=!0,o||(a=Et(e,"keydown",t[24]),o=!0)},p(c,d){l&&l.p&&(!i||536870912&d[0])&&Ln(l,s,c,c[29],i?On(s,c[29],d,RM):Dn(c[29]),Fy);const u={};128&d[0]&&(u.name=c[7]),1024&d[0]&&(u.value=c[10]),512&d[0]&&(u.selectedIndex=c[9]),4096&d[0]&&(u.optionFilter=c[12]),8192&d[0]&&(u.optionMapper=c[13]),2048&d[0]&&(u.optionLabelClass=he(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(u.options=c[19]),536922112&d[0]|1&d[1]&&(u.$$scope={dirty:d,ctx:c}),r.$set(u)},i(c){i||(B(l,c),B(r.$$.fragment,c),i=!0)},o(c){j(l,c),j(r.$$.fragment,c),i=!1},d(c){c&&nt(e),l&&l.d(c),Wt(r),o=!1,a()}}}function DM(t){let e,n,r;function i(a){t[28](a)}let o={onshow:t[23],buttonClass:he(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[LM],label:[_M]},$$scope:{ctx:t}};return t[20]!==void 0&&(o.isActive=t[20]),e=new Eu({props:o}),on.push(()=>Zr(e,"isActive",i)),{c(){qt(e.$$.fragment)},m(a,s){Ht(e,a,s),r=!0},p(a,s){const l={};33&s[0]&&(l.buttonClass=he(["PinturaDropdownButton",a[0],a[5]&&"PinturaDropdownIconOnly"])),540016638&s[0]&&(l.$$scope={dirty:s,ctx:a}),!n&&1048576&s[0]&&(n=!0,l.isActive=a[20],di(()=>n=!1)),e.$set(l)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){Wt(e,a)}}}const Uy=(t,[e])=>e<t?e:t,Vy=(t,[e])=>e>t?e:t;function kM(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:u}=e,{hideLabel:p=!1}=e,{icon:h}=e,{name:g}=e,{options:m=[]}=e,{selectedIndex:$=-1}=e,{value:b}=e,{optionLabelClass:E}=e,{optionFilter:v}=e,{optionMapper:w}=e,{optionIconStyle:T}=e,{optionLabelStyle:M}=e,{locale:A}=e,{onchange:x=be}=e,{onload:C=be}=e,{ondestroy:H=be}=e,{enableInput:S=!1}=e,y;return lo(()=>C({options:m})),gi(()=>H({options:m})),t.$$set=L=>{"class"in L&&n(0,s=L.class),"title"in L&&n(1,l=L.title),"label"in L&&n(2,c=L.label),"labelClass"in L&&n(3,d=L.labelClass),"innerClass"in L&&n(4,u=L.innerClass),"hideLabel"in L&&n(5,p=L.hideLabel),"icon"in L&&n(6,h=L.icon),"name"in L&&n(7,g=L.name),"options"in L&&n(8,m=L.options),"selectedIndex"in L&&n(9,$=L.selectedIndex),"value"in L&&n(10,b=L.value),"optionLabelClass"in L&&n(11,E=L.optionLabelClass),"optionFilter"in L&&n(12,v=L.optionFilter),"optionMapper"in L&&n(13,w=L.optionMapper),"optionIconStyle"in L&&n(14,T=L.optionIconStyle),"optionLabelStyle"in L&&n(15,M=L.optionLabelStyle),"locale"in L&&n(16,A=L.locale),"onchange"in L&&n(17,x=L.onchange),"onload"in L&&n(25,C=L.onload),"ondestroy"in L&&n(26,H=L.ondestroy),"enableInput"in L&&n(18,S=L.enableInput),"$$scope"in L&&n(29,a=L.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&n(19,r=A?EE(m,A):m),525312&t.$$.dirty[0]&&n(21,i=r.reduce((L,O)=>{if(L)return L;const _=Array.isArray(O)?O:[O,O],[P,U]=_;return vE(P,b)?U:void 0},void 0)||(L=>{const O=L.find(_=>_[0]===void 0);if(O)return O[1]})(r)||b)},[s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,M,A,x,S,r,y,i,L=>{n(21,i=L.value),x(L),n(20,y=!1)},({e:L,panel:O})=>{if(L&&L.key&&/up|down/i.test(L.key))return Ph(O.querySelector("input:not([disabled])"));Ph(O.querySelector("fieldset"))},L=>{/tab/i.test(L.key)&&L.preventDefault()},C,H,o,function(L){y=L,n(20,y)},a]}class xE extends Xe{constructor(e){super(),Ye(this,e,kM,DM,ze,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableInput:18},null,[-1,-1])}}function FM(t){let e;return{c(){e=dt("div"),I(e,"slot","details")},m(n,r){it(n,e,r),t[14](e)},p:Pe,d(n){n&&nt(e),t[14](null)}}}function BM(t){let e,n,r;function i(a){t[15](a)}let o={buttonLabel:t[0],buttonClass:t[1],buttonIcon:t[2],buttonHideLabel:t[3],buttonTitle:t[4],buttonLabelClass:t[5],onshow:t[6],onhide:t[7],$$slots:{details:[FM]},$$scope:{ctx:t}};return t[9]!==void 0&&(o.isActive=t[9]),e=new Eu({props:o}),on.push(()=>Zr(e,"isActive",i)),{c(){qt(e.$$.fragment)},m(a,s){Ht(e,a,s),r=!0},p(a,[s]){const l={};1&s&&(l.buttonLabel=a[0]),2&s&&(l.buttonClass=a[1]),4&s&&(l.buttonIcon=a[2]),8&s&&(l.buttonHideLabel=a[3]),16&s&&(l.buttonTitle=a[4]),32&s&&(l.buttonLabelClass=a[5]),64&s&&(l.onshow=a[6]),128&s&&(l.onhide=a[7]),65792&s&&(l.$$scope={dirty:s,ctx:a}),!n&&512&s&&(n=!0,l.isActive=a[9],di(()=>n=!1)),e.$set(l)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){Wt(e,a)}}}function NM(t,e,n){let{buttonLabel:r}=e,{buttonClass:i}=e,{buttonIcon:o}=e,{buttonHideLabel:a}=e,{buttonTitle:s}=e,{buttonLabelClass:l}=e,{root:c}=e,{ondestroy:d=be}=e,{onshow:u=be}=e,{onhide:p=be}=e,h,g=!1;return gi(d),t.$$set=m=>{"buttonLabel"in m&&n(0,r=m.buttonLabel),"buttonClass"in m&&n(1,i=m.buttonClass),"buttonIcon"in m&&n(2,o=m.buttonIcon),"buttonHideLabel"in m&&n(3,a=m.buttonHideLabel),"buttonTitle"in m&&n(4,s=m.buttonTitle),"buttonLabelClass"in m&&n(5,l=m.buttonLabelClass),"root"in m&&n(10,c=m.root),"ondestroy"in m&&n(11,d=m.ondestroy),"onshow"in m&&n(6,u=m.onshow),"onhide"in m&&n(7,p=m.onhide)},t.$$.update=()=>{1280&t.$$.dirty&&h&&c&&h.firstChild!==c&&(h.hasChildNodes()?h.replaceChild(c,h.firstChild):h.append(c))},[r,i,o,a,s,l,u,p,h,g,c,d,()=>n(9,g=!1),()=>n(9,g=!0),function(m){on[m?"unshift":"push"](()=>{h=m,n(8,h)})},function(m){g=m,n(9,g)}]}class GM extends Xe{constructor(e){super(),Ye(this,e,NM,BM,ze,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var Bl=(t,e,n)=>(t-e)/(n-e);const zM=t=>({}),Hy=t=>({});function Wy(t){let e,n,r,i,o,a,s,l;return n=new Ui({props:{$$slots:{default:[UM]},$$scope:{ctx:t}}}),o=new Ui({props:{$$slots:{default:[VM]},$$scope:{ctx:t}}}),{c(){e=dt("button"),qt(n.$$.fragment),r=Kt(),i=dt("button"),qt(o.$$.fragment),I(e,"type","button"),I(e,"aria-label","Increase"),I(i,"type","button"),I(i,"aria-label","Decrease")},m(c,d){it(c,e,d),Ht(n,e,null),it(c,r,d),it(c,i,d),Ht(o,i,null),a=!0,s||(l=[Et(e,"pointerdown",t[20](1)),Et(i,"pointerdown",t[20](-1))],s=!0)},p(c,d){const u={};128&d[1]&&(u.$$scope={dirty:d,ctx:c}),n.$set(u);const p={};128&d[1]&&(p.$$scope={dirty:d,ctx:c}),o.$set(p)},i(c){a||(B(n.$$.fragment,c),B(o.$$.fragment,c),a=!0)},o(c){j(n.$$.fragment,c),j(o.$$.fragment,c),a=!1},d(c){c&&nt(e),Wt(n),c&&nt(r),c&&nt(i),Wt(o),s=!1,sn(l)}}}function UM(t){let e;return{c(){e=vr("path"),I(e,"d","M8 12 h8 M12 8 v8")},m(n,r){it(n,e,r)},p:Pe,d(n){n&&nt(e)}}}function VM(t){let e;return{c(){e=vr("path"),I(e,"d","M9 12 h6")},m(n,r){it(n,e,r)},p:Pe,d(n){n&&nt(e)}}}function HM(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,g,m,$,b;const E=t[36].default,v=An(E,t,t[38],null),w=t[36].knob,T=An(w,t,t[38],Hy);let M=t[9]&&Wy(t);return{c(){e=dt("div"),n=dt("div"),r=dt("input"),o=Kt(),a=dt("div"),v&&v.c(),l=Kt(),c=dt("div"),d=dt("div"),T&&T.c(),h=Kt(),M&&M.c(),I(r,"type","range"),I(r,"id",t[3]),I(r,"min",t[0]),I(r,"max",t[1]),I(r,"step",t[2]),r.value=t[14],I(r,"style",i=t[10]?"pointer-events:none":""),I(a,"class",s=he(["PinturaSliderTrack",t[5]])),I(a,"style",t[4]),I(d,"class",u=he(["PinturaSliderKnob",t[7]])),I(d,"style",t[6]),I(c,"class","PinturaSliderKnobController"),I(c,"style",t[17]),I(n,"class","PinturaSliderControl"),I(n,"style",p="--slider-position:"+Math.round(t[15])),I(e,"class",g=he(["PinturaSlider",t[12]])),I(e,"data-direction",t[8])},m(A,x){it(A,e,x),vt(e,n),vt(n,r),t[37](r),vt(n,o),vt(n,a),v&&v.m(a,null),vt(n,l),vt(n,c),vt(c,d),T&&T.m(d,null),vt(e,h),M&&M.m(e,null),m=!0,$||(b=[Et(r,"input",t[18]),Et(r,"nudge",t[19]),fn(cc.call(null,r)),Et(n,"pointerdown",function(){vn(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],$=!0)},p(A,x){t=A,(!m||8&x[0])&&I(r,"id",t[3]),(!m||1&x[0])&&I(r,"min",t[0]),(!m||2&x[0])&&I(r,"max",t[1]),(!m||4&x[0])&&I(r,"step",t[2]),(!m||16384&x[0])&&(r.value=t[14]),(!m||1024&x[0]&&i!==(i=t[10]?"pointer-events:none":""))&&I(r,"style",i),v&&v.p&&(!m||128&x[1])&&Ln(v,E,t,t[38],m?On(E,t[38],x,null):Dn(t[38]),null),(!m||32&x[0]&&s!==(s=he(["PinturaSliderTrack",t[5]])))&&I(a,"class",s),(!m||16&x[0])&&I(a,"style",t[4]),T&&T.p&&(!m||128&x[1])&&Ln(T,w,t,t[38],m?On(w,t[38],x,zM):Dn(t[38]),Hy),(!m||128&x[0]&&u!==(u=he(["PinturaSliderKnob",t[7]])))&&I(d,"class",u),(!m||64&x[0])&&I(d,"style",t[6]),(!m||131072&x[0])&&I(c,"style",t[17]),(!m||32768&x[0]&&p!==(p="--slider-position:"+Math.round(t[15])))&&I(n,"style",p),t[9]?M?(M.p(t,x),512&x[0]&&B(M,1)):(M=Wy(t),M.c(),B(M,1),M.m(e,null)):M&&(we(),j(M,1,1,()=>{M=null}),xe()),(!m||4096&x[0]&&g!==(g=he(["PinturaSlider",t[12]])))&&I(e,"class",g),(!m||256&x[0])&&I(e,"data-direction",t[8])},i(A){m||(B(v,A),B(T,A),B(M),m=!0)},o(A){j(v,A),j(T,A),j(M),m=!1},d(A){A&&nt(e),t[37](null),v&&v.d(A),T&&T.d(A),M&&M.d(),$=!1,sn(b)}}}function WM(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,{$$slots:E={},$$scope:v}=e,{min:w=0}=e,{max:T=100}=e,{step:M=1}=e,{id:A}=e,{value:x=0}=e,{valueMin:C}=e,{valueMax:H}=e,{trackStyle:S}=e,{trackClass:y}=e,{knobStyle:L}=e,{knobClass:O}=e,{ongrab:_=be}=e,{onchange:P=be}=e,{onrelease:U=be}=e,{onexceed:X=be}=e,{direction:k="x"}=e,{getValue:F=xn}=e,{setValue:Q=xn}=e,{enableSpinButtons:rt=!0}=e,{enableForceUseKnob:$t=!1}=e,{enableStopPropagation:V=!0}=e,{enablePointerdownListener:Y=!0}=e,{maxInteractionDistance:q=6}=e,{class:et}=e;const D=pt=>Q(((It,At)=>(At=1/At,Math.round(It*At)/At))(rn(pt,w,T),M),x),ot=(pt,It,At={})=>{const{grabbed:Tt=!1,released:le=!1}=At,oe=D(w+pt/It*i),Zt=C||w,Se=H||T;n(21,x=pn(oe)?oe:rn(oe,Zt,Se)),b!==oe&&(b=oe,!pn(oe)&&(oe<Zt||oe>Se)&&X(x,oe),x!==$&&($=x,Tt&&_(x),P(x),le&&U(x)))};let st;const gt=pt=>{const It=pt[d]-m;ot(g+It,h)},Lt=pt=>{h=void 0,document.documentElement.removeEventListener("pointermove",gt),document.documentElement.removeEventListener("pointerup",Lt),P(x),U(x)},Xt=()=>{n(21,x=D(r+Ut*M)),P(x)};let Ct,Ut=1,Le=!1;const mt=pt=>{clearTimeout(Ct),Le||Xt(),U(x),document.removeEventListener("pointerup",mt)};return t.$$set=pt=>{"min"in pt&&n(0,w=pt.min),"max"in pt&&n(1,T=pt.max),"step"in pt&&n(2,M=pt.step),"id"in pt&&n(3,A=pt.id),"value"in pt&&n(21,x=pt.value),"valueMin"in pt&&n(22,C=pt.valueMin),"valueMax"in pt&&n(23,H=pt.valueMax),"trackStyle"in pt&&n(4,S=pt.trackStyle),"trackClass"in pt&&n(5,y=pt.trackClass),"knobStyle"in pt&&n(6,L=pt.knobStyle),"knobClass"in pt&&n(7,O=pt.knobClass),"ongrab"in pt&&n(24,_=pt.ongrab),"onchange"in pt&&n(25,P=pt.onchange),"onrelease"in pt&&n(26,U=pt.onrelease),"onexceed"in pt&&n(27,X=pt.onexceed),"direction"in pt&&n(8,k=pt.direction),"getValue"in pt&&n(28,F=pt.getValue),"setValue"in pt&&n(29,Q=pt.setValue),"enableSpinButtons"in pt&&n(9,rt=pt.enableSpinButtons),"enableForceUseKnob"in pt&&n(10,$t=pt.enableForceUseKnob),"enableStopPropagation"in pt&&n(30,V=pt.enableStopPropagation),"enablePointerdownListener"in pt&&n(11,Y=pt.enablePointerdownListener),"maxInteractionDistance"in pt&&n(31,q=pt.maxInteractionDistance),"class"in pt&&n(12,et=pt.class),"$$scope"in pt&&n(38,v=pt.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&n(14,r=x!==void 0?F(x):0),3&t.$$.dirty[0]&&(i=T-w),16387&t.$$.dirty[0]&&n(33,o=Bl(r,w,T)),4&t.$$.dirty[1]&&n(15,a=100*o),256&t.$$.dirty[0]&&n(34,s=k.toUpperCase()),256&t.$$.dirty[0]&&n(35,l=k==="x"?"Width":"Height"),16&t.$$.dirty[1]&&(c="offset"+l),t.$$.dirty[1],8&t.$$.dirty[1]&&(d="page"+s),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(17,u=`transform: translate${s}(${a}%)`)},[w,T,M,A,S,y,L,O,k,rt,$t,Y,et,pt=>{let It=!1;V&&pt.stopPropagation(),clearTimeout(st);const At=p.getBoundingClientRect();if(h=p[c],m=pt[d],g=m-At[k],$t){if(Math.abs(g-o*h)>q)return;It=!0,pt.stopPropagation()}return document.activeElement!==p&&p.focus(),ot(g,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",gt),document.documentElement.addEventListener("pointerup",Lt),It},r,a,p,u,pt=>{h||(n(21,x=Q(parseFloat(pt.target.value))),x!==$&&($=x,P(x)))},pt=>{const It=p[c];ot(r/i*It+pt.detail[k],It),clearTimeout(st),st=setTimeout(()=>{U(x)},250)},pt=>It=>{clearTimeout(st),Ut=pt,Le=!1,Ct=setInterval(()=>{Le=!0,Xt()},100),document.addEventListener("pointercancel",mt),document.addEventListener("pointerup",mt)},x,C,H,_,P,U,X,F,Q,V,q,pt=>{const It=p.getBoundingClientRect(),At=pt[d]-It[k],Tt=p[c];return Math.abs(At-o*Tt)},o,s,l,E,function(pt){on[pt?"unshift":"push"](()=>{p=pt,n(16,p)})},v]}class P0 extends Xe{constructor(e){super(),Ye(this,e,WM,HM,ze,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function qy(t){let e,n;return e=new Ui({props:{class:"PinturaButtonIcon",$$slots:{default:[qM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};1048580&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function qM(t){let e;return{c(){e=vr("g")},m(n,r){it(n,e,r),e.innerHTML=t[2]},p(n,r){4&r&&(e.innerHTML=n[2])},d(n){n&&nt(e)}}}function jy(t){let e,n,r=jn(t[8],t[6])+"";return{c(){e=dt("span"),n=Sn(r),I(e,"class","PinturaButtonLabelPrefix")},m(i,o){it(i,e,o),vt(e,n)},p(i,o){320&o&&r!==(r=jn(i[8],i[6])+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function jM(t){let e,n,r,i,o,a,s,l,c,d=t[2]&&qy(t),u=t[8]&&jy(t);return{c(){e=dt("span"),d&&d.c(),n=Kt(),u&&u.c(),r=Kt(),i=dt("span"),o=Sn(t[9]),I(i,"class",a=he(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),I(e,"slot","label"),I(e,"title",s=jn(t[1],t[6])),I(e,"class",l=he(["PinturaButtonInner",t[4]]))},m(p,h){it(p,e,h),d&&d.m(e,null),vt(e,n),u&&u.m(e,null),vt(e,r),vt(e,i),vt(i,o),c=!0},p(p,h){p[2]?d?(d.p(p,h),4&h&&B(d,1)):(d=qy(p),d.c(),B(d,1),d.m(e,n)):d&&(we(),j(d,1,1,()=>{d=null}),xe()),p[8]?u?u.p(p,h):(u=jy(p),u.c(),u.m(e,r)):u&&(u.d(1),u=null),(!c||512&h)&&Kn(o,p[9]),(!c||40&h&&a!==(a=he(["PinturaButtonLabel",p[3],p[5]&&"implicit"])))&&I(i,"class",a),(!c||66&h&&s!==(s=jn(p[1],p[6])))&&I(e,"title",s),(!c||16&h&&l!==(l=he(["PinturaButtonInner",p[4]])))&&I(e,"class",l)},i(p){c||(B(d),c=!0)},o(p){j(d),c=!1},d(p){p&&nt(e),d&&d.d(),u&&u.d()}}}function YM(t){let e,n,r,i,o;const a=[t[12],{value:t[7]},{onchange:t[11]}];let s={};for(let l=0;l<a.length;l+=1)s=Tn(s,a[l]);return n=new P0({props:s}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"slot","details")},m(l,c){it(l,e,c),Ht(n,e,null),r=!0,i||(o=Et(e,"keydown",t[10]),i=!0)},p(l,c){const d=6272&c?gr(a,[4096&c&&wr(l[12]),128&c&&{value:l[7]},2048&c&&{onchange:l[11]}]):{};n.$set(d)},i(l){r||(B(n.$$.fragment,l),r=!0)},o(l){j(n.$$.fragment,l),r=!1},d(l){l&&nt(e),Wt(n),i=!1,o()}}}function XM(t){let e,n;return e=new Eu({props:{panelClass:"PinturaSliderPanel",buttonClass:he(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[YM],label:[jM]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,[i]){const o={};33&i&&(o.buttonClass=he(["PinturaSliderButton",r[0],r[5]&&"PinturaSliderIconOnly"])),1053694&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function ZM(t,e,n){const r=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"];let i=Mg(e,r),{class:o}=e,{title:a}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:u=!1}=e,{locale:p}=e,{value:h}=e,{onchange:g=be}=e,{labelPrefix:m}=e;const{min:$,max:b,getValue:E=xn}=i;let v;const w=T=>n(9,v=(M=>Xn(s)?s(E(M),$,b,M):s)(T));return t.$$set=T=>{e=Tn(Tn({},e),Jl(T)),n(12,i=Mg(e,r)),"class"in T&&n(0,o=T.class),"title"in T&&n(1,a=T.title),"label"in T&&n(13,s=T.label),"icon"in T&&n(2,l=T.icon),"labelClass"in T&&n(3,c=T.labelClass),"innerClass"in T&&n(4,d=T.innerClass),"hideLabel"in T&&n(5,u=T.hideLabel),"locale"in T&&n(6,p=T.locale),"value"in T&&n(7,h=T.value),"onchange"in T&&n(14,g=T.onchange),"labelPrefix"in T&&n(8,m=T.labelPrefix)},t.$$.update=()=>{8320&t.$$.dirty&&w(h)},[o,a,l,c,d,u,p,h,m,v,T=>{/tab/i.test(T.key)&&T.preventDefault()},T=>{w(T),g(T)},i,s,g]}class KM extends Xe{constructor(e){super(),Ye(this,e,ZM,XM,ze,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function Yy(t){let e,n,r=jn(t[0],t[1])+"";return{c(){e=dt("span"),n=Sn(r),I(e,"class",t[3])},m(i,o){it(i,e,o),vt(e,n)},p(i,o){3&o&&r!==(r=jn(i[0],i[1])+"")&&Kn(n,r),8&o&&I(e,"class",i[3])},d(i){i&&nt(e)}}}function QM(t){let e,n,r,i,o=t[0]&&Yy(t);return r=new uc({props:{items:t[2]}}),{c(){e=dt("li"),o&&o.c(),n=Kt(),qt(r.$$.fragment),I(e,"class","PinturaShapeStyle")},m(a,s){it(a,e,s),o&&o.m(e,null),vt(e,n),Ht(r,e,null),i=!0},p(a,[s]){a[0]?o?o.p(a,s):(o=Yy(a),o.c(),o.m(e,n)):o&&(o.d(1),o=null);const l={};4&s&&(l.items=a[2]),r.$set(l)},i(a){i||(B(r.$$.fragment,a),i=!0)},o(a){j(r.$$.fragment,a),i=!1},d(a){a&&nt(e),o&&o.d(),Wt(r)}}}function JM(t,e,n){let r,{title:i}=e,{locale:o}=e,{items:a}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&n(0,i=l.title),"locale"in l&&n(1,o=l.locale),"items"in l&&n(2,a=l.items),"hideTitle"in l&&n(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r="PinturaShapeStyleLabel"+(s?" implicit":""))},[i,o,a,r,s]}class t4 extends Xe{constructor(e){super(),Ye(this,e,JM,QM,ze,{title:0,locale:1,items:2,hideTitle:4})}}var Xy=(t,e,n)=>{let r,i,o;const a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),d=n*(1-(1-s)*e);switch(a%6){case 0:r=n,i=d,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=d;break;case 3:r=l,i=c,o=n;break;case 4:r=d,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]};function e4(t){let e,n,r;return{c(){e=dt("div"),n=dt("span"),I(e,"class","PinturaColorPreview"),I(e,"title",t[0]),I(e,"style",r="--color:"+t[1])},m(i,o){it(i,e,o),vt(e,n)},p(i,[o]){1&o&&I(e,"title",i[0]),2&o&&r!==(r="--color:"+i[1])&&I(e,"style",r)},i:Pe,o:Pe,d(i){i&&nt(e)}}}function n4(t,e,n){let r,{color:i}=e,{title:o}=e;return t.$$set=a=>{"color"in a&&n(2,i=a.color),"title"in a&&n(0,o=a.title)},t.$$.update=()=>{4&t.$$.dirty&&n(1,r=i?Pr(i):"transparent")},[o,r,i]}class IE extends Xe{constructor(e){super(),Ye(this,e,n4,e4,ze,{color:2,title:0})}}var A0=t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((e,n)=>e/(n===3?1:255)):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,n,r,i,o]=e.split("");e=e.length>=4&&e.length<=5?`#${n}${n}${r}${r}${i}${i}${o?`${o}${o}`:""}`:e;const[a,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[s,l,c,d].filter(u=>u!==void 0).map(u=>parseInt(u,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);function Zy(t){let e,n;return{c(){e=dt("span"),n=Sn(t[0])},m(r,i){it(r,e,i),vt(e,n)},p(r,i){1&i[0]&&Kn(n,r[0])},d(r){r&&nt(e)}}}function r4(t){let e,n,r,i;n=new IE({props:{color:t[4],title:jn(t[8],t[10])}});let o=!t[9]&&Zy(t);return{c(){e=dt("span"),qt(n.$$.fragment),r=Kt(),o&&o.c(),I(e,"slot","label"),I(e,"class","PinturaButtonLabel")},m(a,s){it(a,e,s),Ht(n,e,null),vt(e,r),o&&o.m(e,null),i=!0},p(a,s){const l={};16&s[0]&&(l.color=a[4]),1280&s[0]&&(l.title=jn(a[8],a[10])),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=Zy(a),o.c(),o.m(e,null))},i(a){i||(B(n.$$.fragment,a),i=!0)},o(a){j(n.$$.fragment,a),i=!1},d(a){a&&nt(e),Wt(n),o&&o.d()}}}function Ky(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,g;c=new P0({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[20],onchange:t[26],value:t[15],min:0,max:1,step:.01}});let m=t[11]&&Qy(t),$=t[14]&&Jy(t);return{c(){e=dt("div"),n=dt("div"),r=dt("div"),i=dt("div"),l=Kt(),qt(c.$$.fragment),d=Kt(),m&&m.c(),u=Kt(),$&&$.c(),I(i,"role","button"),I(i,"aria-label","Saturation slider"),I(i,"class","PinturaPickerKnob"),I(i,"tabindex","0"),I(i,"style",o=`background-color:${t[19]};`),I(r,"class","PinturaPickerKnobController"),I(r,"style",a=`transform:translate(${t[24]}%,${t[23]}%)`),I(n,"class","PinturaSaturationPicker"),I(n,"style",s="background-color: "+t[20]),I(e,"class","PinturaPicker")},m(b,E){it(b,e,E),vt(e,n),vt(n,r),vt(r,i),t[38](n),vt(e,l),Ht(c,e,null),vt(e,d),m&&m.m(e,null),vt(e,u),$&&$.m(e,null),p=!0,h||(g=[Et(i,"nudge",t[29]),fn(cc.call(null,i,{preventDefault:!0})),Et(n,"pointerdown",t[28])],h=!0)},p(b,E){(!p||524288&E[0]&&o!==(o=`background-color:${b[19]};`))&&I(i,"style",o),(!p||25165824&E[0]&&a!==(a=`transform:translate(${b[24]}%,${b[23]}%)`))&&I(r,"style",a),(!p||1048576&E[0]&&s!==(s="background-color: "+b[20]))&&I(n,"style",s);const v={};1048576&E[0]&&(v.knobStyle="background-color:"+b[20]),32768&E[0]&&(v.value=b[15]),c.$set(v),b[11]?m?(m.p(b,E),2048&E[0]&&B(m,1)):(m=Qy(b),m.c(),B(m,1),m.m(e,u)):m&&(we(),j(m,1,1,()=>{m=null}),xe()),b[14]?$?$.p(b,E):($=Jy(b),$.c(),$.m(e,null)):$&&($.d(1),$=null)},i(b){p||(B(c.$$.fragment,b),B(m),p=!0)},o(b){j(c.$$.fragment,b),j(m),p=!1},d(b){b&&nt(e),t[38](null),Wt(c),m&&m.d(),$&&$.d(),h=!1,sn(g)}}}function Qy(t){let e,n;return e=new P0({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[17],trackStyle:`background-image:linear-gradient(to right,${t[18]},${t[19]})`,onchange:t[27],value:t[16],min:0,max:1,step:.01}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};131072&i[0]&&(o.knobStyle="background-color:"+r[17]),786432&i[0]&&(o.trackStyle=`background-image:linear-gradient(to right,${r[18]},${r[19]})`),65536&i[0]&&(o.value=r[16]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function Jy(t){let e,n,r;return{c(){e=dt("input"),I(e,"class","PinturaColorPickerInput"),I(e,"type","text"),e.value=t[22]},m(i,o){it(i,e,o),n||(r=[Et(e,"keydown",t[31]),Et(e,"input",t[30])],n=!0)},p(i,o){4194304&o[0]&&e.value!==i[22]&&(e.value=i[22])},d(i){i&&nt(e),n=!1,sn(r)}}}function t2(t){let e,n;return e=new dc({props:{label:jn(t[10].labelColorPalette,t[10]),class:he(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[39]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[40],$$slots:{option:[o4,({option:r})=>({52:r}),({option:r})=>[0,r?2097152:0]],group:[i4,({option:r})=>({52:r}),({option:r})=>[0,r?2097152:0]]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};1024&i[0]&&(o.label=jn(r[10].labelColorPalette,r[10])),512&i[0]&&(o.class=he(["PinturaColorPresets",r[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&i[0]&&(o.name=r[1]),16&i[0]&&(o.value=r[4]),1028&i[0]&&(o.options=r[2].map(r[39])),8&i[0]&&(o.selectedIndex=r[3]),128&i[0]&&(o.optionMapper=r[7]),64&i[0]&&(o.optionLabelClass=r[6]),512&i[0]|6291456&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function i4(t){let e,n,r=t[52].label+"";return{c(){e=dt("span"),n=Sn(r),I(e,"slot","group")},m(i,o){it(i,e,o),vt(e,n)},p(i,o){2097152&o[1]&&r!==(r=i[52].label+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function e2(t){let e,n,r=t[52].label+"";return{c(){e=dt("span"),n=Sn(r),I(e,"class","PinturaButtonLabel")},m(i,o){it(i,e,o),vt(e,n)},p(i,o){2097152&o[1]&&r!==(r=i[52].label+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function o4(t){let e,n,r,i;n=new IE({props:{title:t[52].label,color:t[52].value}});let o=!t[9]&&e2(t);return{c(){e=dt("span"),qt(n.$$.fragment),r=Kt(),o&&o.c(),I(e,"slot","option")},m(a,s){it(a,e,s),Ht(n,e,null),vt(e,r),o&&o.m(e,null),i=!0},p(a,s){const l={};2097152&s[1]&&(l.title=a[52].label),2097152&s[1]&&(l.color=a[52].value),n.$set(l),a[9]?o&&(o.d(1),o=null):o?o.p(a,s):(o=e2(a),o.c(),o.m(e,null))},i(a){i||(B(n.$$.fragment,a),i=!0)},o(a){j(n.$$.fragment,a),i=!1},d(a){a&&nt(e),Wt(n),o&&o.d()}}}function a4(t){let e,n,r,i=t[13]&&Ky(t),o=t[12]&&t2(t);return{c(){e=dt("div"),i&&i.c(),n=Kt(),o&&o.c(),I(e,"slot","details"),I(e,"class","PinturaColorPickerPanel")},m(a,s){it(a,e,s),i&&i.m(e,null),vt(e,n),o&&o.m(e,null),r=!0},p(a,s){a[13]?i?(i.p(a,s),8192&s[0]&&B(i,1)):(i=Ky(a),i.c(),B(i,1),i.m(e,n)):i&&(we(),j(i,1,1,()=>{i=null}),xe()),a[12]?o?(o.p(a,s),4096&s[0]&&B(o,1)):(o=t2(a),o.c(),B(o,1),o.m(e,null)):o&&(we(),j(o,1,1,()=>{o=null}),xe())},i(a){r||(B(i),B(o),r=!0)},o(a){j(i),j(o),r=!1},d(a){a&&nt(e),i&&i.d(),o&&o.d()}}}function s4(t){let e,n;return e=new Eu({props:{buttonClass:he(["PinturaColorPickerButton",t[5]]),$$slots:{details:[a4],label:[r4]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};32&i[0]&&(o.buttonClass=he(["PinturaColorPickerButton",r[5]])),33554399&i[0]|4194304&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function l4(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,{label:b}=e,{name:E}=e,{options:v=[]}=e,{selectedIndex:w=-1}=e,{value:T}=e,{buttonClass:M}=e,{optionLabelClass:A}=e,{optionMapper:x}=e,{onchange:C}=e,{title:H}=e,{hidePresetLabel:S=!0}=e,{locale:y}=e,{enableOpacity:L=!0}=e,{enablePresets:O=!0}=e,{enablePicker:_=!0}=e,{enableInput:P=!1}=e;const U=(D,ot)=>{if(u=[D[0],D[1],D[2]],ot){let st=((gt,Lt,Xt)=>{let Ct=Math.max(gt,Lt,Xt),Ut=Ct-Math.min(gt,Lt,Xt),Le=Ut&&(Ct==gt?(Lt-Xt)/Ut:Ct==Lt?2+(Xt-gt)/Ut:4+(gt-Lt)/Ut);return[60*(Le<0?Le+6:Le)/360,Ct&&Ut/Ct,Ct]})(...u);n(15,s=st[0]),n(33,l=st[1]),n(34,c=st[2]),n(16,d=qe(D[3])?D[3]:1)}n(17,p=Pr(D)),n(18,h=Pr([...u,0])),n(19,g=Pr([...u,1])),n(20,m=Pr(Xy(s,1,1)))},X=()=>{const D=[...Xy(s,l,c),d];U(D),C(D)},k=D=>{const ot=D.length===3?[...D,1]:D;U(ot,!0),C(ot)},F=(D,ot)=>{const st=rn(D.x/ot.width,0,1),gt=rn(D.y/ot.height,0,1);var Lt;Lt=1-gt,n(33,l=st),n(34,c=Lt),d===0&&n(16,d=1),X()};let Q,rt,$t,V;const Y=D=>{const ot=Un(ng(D),V);F(Ar(je($t),ot),rt)},q=D=>{rt=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",q)};let et;return t.$$set=D=>{"label"in D&&n(0,b=D.label),"name"in D&&n(1,E=D.name),"options"in D&&n(2,v=D.options),"selectedIndex"in D&&n(3,w=D.selectedIndex),"value"in D&&n(4,T=D.value),"buttonClass"in D&&n(5,M=D.buttonClass),"optionLabelClass"in D&&n(6,A=D.optionLabelClass),"optionMapper"in D&&n(7,x=D.optionMapper),"onchange"in D&&n(32,C=D.onchange),"title"in D&&n(8,H=D.title),"hidePresetLabel"in D&&n(9,S=D.hidePresetLabel),"locale"in D&&n(10,y=D.locale),"enableOpacity"in D&&n(11,L=D.enableOpacity),"enablePresets"in D&&n(12,O=D.enablePresets),"enablePicker"in D&&n(13,_=D.enablePicker),"enableInput"in D&&n(14,P=D.enableInput)},t.$$.update=()=>{16&t.$$.dirty[0]|16&t.$$.dirty[1]&&(!T||$&&Ko(T,$)||(n(35,$=[...T]),U(T,!0))),4&t.$$.dirty[1]&&n(24,r=100*l),8&t.$$.dirty[1]&&n(23,i=100-100*c),32&t.$$.dirty[1]&&n(37,o=!!et&&et.length>=4&&et.length<=5),18448&t.$$.dirty[0]|64&t.$$.dirty[1]&&n(22,a=P&&T?((D,ot,st)=>{let gt=D.map(Lt=>Math.round(255*Lt).toString(16).toLowerCase().padStart(2,"0"));return(!ot&&gt.length>3||gt[3]==="ff")&&gt.pop(),st&&(gt=gt.map(Lt=>Lt.substring(0,1))),"#"+gt.join("")})(T,L,o):void 0)},[b,E,v,w,T,M,A,x,H,S,y,L,O,_,P,s,d,p,h,g,m,Q,a,i,r,k,D=>{n(15,s=D),d===0&&n(16,d=1),X()},D=>{n(16,d=D),X()},D=>{D.stopPropagation(),rt=fr(Q.offsetWidth,Q.offsetHeight),$t=(ot=>ht(ot.offsetX,ot.offsetY))(D),V=ng(D),F($t,rt),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",q)},D=>{rt=fr(Q.offsetWidth,Q.offsetHeight);const ot=r/100*rt.width,st=i/100*rt.height;F({x:ot+D.detail.x,y:st+D.detail.y},rt)},D=>{const{value:ot}=D.target,st=ot.length;if(!ot.startsWith("#")||st<4||st===6||st===8||st>9||!L&&st>7)return;const gt=A0(ot);gt&&(n(36,et=ot),U(gt),C(gt))},D=>{D.stopPropagation()},C,l,c,$,et,o,function(D){on[D?"unshift":"push"](()=>{Q=D,n(21,Q)})},([D,ot])=>[D,Xn(ot)?ot(y):ot],D=>k(D.value)]}class c4 extends Xe{constructor(e){super(),Ye(this,e,l4,s4,ze,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:32,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function d4(t){let e,n,r;return n=new uc({props:{items:t[0]}}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"class","PinturaShorthandControl PinturaShapeStyle")},m(i,o){it(i,e,o),Ht(n,e,null),r=!0},p(i,[o]){const a={};1&o&&(a.items=i[0]),n.$set(a)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Wt(n)}}}function u4(t,e,n){let r,i,{value:o}=e,{onchange:a}=e,{controls:s=[]}=e;return t.$$set=l=>{n(6,e=Tn(Tn({},e),Jl(l))),"value"in l&&n(1,o=l.value),"onchange"in l&&n(2,a=l.onchange),"controls"in l&&n(3,s=l.controls)},t.$$.update=()=>{n(4,r=(l=>{const{controls:c,...d}=l;return d})(e)),30&t.$$.dirty&&n(0,i=s.map((l,c)=>{const[d,u,p]=l;return[d,u,{...r,...p,value:o[c],onchange:h=>{const g=[...o];g[c]=h,a(g)}}]}))},e=Jl(e),[i,o,a,s,r]}class p4 extends Xe{constructor(e){super(),Ye(this,e,u4,d4,ze,{value:1,onchange:2,controls:3})}}function n2(t,e,n){const r=t.slice();return r[9]=e[n][0],r[0]=e[n][1],r[10]=e[n][2],r[2]=e[n][3],r}function h4(t){let e,n,r;const i=[t[10]];var o=t[3][t[9]]||t[9];function a(s){let l={};for(let c=0;c<i.length;c+=1)l=Tn(l,i[c]);return{props:l}}return o&&(e=eu(o,a())),{c(){e&&qt(e.$$.fragment),n=Zn()},m(s,l){e&&Ht(e,s,l),it(s,n,l),r=!0},p(s,l){const c=4&l?gr(i,[wr(s[10])]):{};if(o!==(o=s[3][s[9]]||s[9])){if(e){we();const d=e;j(d.$$.fragment,1,0,()=>{Wt(d,1)}),xe()}o?(e=eu(o,a()),qt(e.$$.fragment),B(e.$$.fragment,1),Ht(e,n.parentNode,n)):e=null}else o&&e.$set(c)},i(s){r||(e&&B(e.$$.fragment,s),r=!0)},o(s){e&&j(e.$$.fragment,s),r=!1},d(s){s&&nt(n),e&&Wt(e,s)}}}function m4(t){let e,n=t[9],r=t[9]&&j1(t);return{c(){r&&r.c(),e=Zn()},m(i,o){r&&r.m(i,o),it(i,e,o)},p(i,o){i[9]?n?ze(n,i[9])?(r.d(1),r=j1(i),r.c(),r.m(e.parentNode,e)):r.p(i,o):(r=j1(i),r.c(),r.m(e.parentNode,e)):n&&(r.d(1),r=null),n=i[9]},i:Pe,o(i){j(r)},d(i){i&&nt(e),r&&r.d(i)}}}function f4(t){let e,n,r=t[10].innerHTML+"";return{c(){e=new Ub(!1),n=Zn(),e.a=n},m(i,o){e.m(r,i,o),it(i,n,o)},p(i,o){4&o&&r!==(r=i[10].innerHTML+"")&&e.p(r)},i:Pe,o:Pe,d(i){i&&nt(n),i&&e.d()}}}function g4(t){let e,n=t[10].textContent+"";return{c(){e=Sn(n)},m(r,i){it(r,e,i)},p(r,i){4&i&&n!==(n=r[10].textContent+"")&&Kn(e,n)},i:Pe,o:Pe,d(r){r&&nt(e)}}}function y4(t){let e,n;return e=new uc({props:{items:t[2],discardEmptyItems:!0}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};4&i&&(o.items=r[2]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function j1(t){let e,n,r,i,o;const a=[y4,g4,f4],s=[];function l(u,p){return u[2]&&u[2].length?0:u[10].textContent?1:u[10].innerHTML?2:-1}~(n=l(t))&&(r=s[n]=a[n](t));let c=[t[4](t[10])],d={};for(let u=0;u<c.length;u+=1)d=Tn(d,c[u]);return{c(){e=dt(t[9]),r&&r.c(),i=Kt(),/-/.test(t[9])?_g(e,d):Cg(e,d)},m(u,p){it(u,e,p),~n&&s[n].m(e,null),vt(e,i),o=!0},p(u,p){let h=n;n=l(u),n===h?~n&&s[n].p(u,p):(r&&(we(),j(s[h],1,1,()=>{s[h]=null}),xe()),~n?(r=s[n],r?r.p(u,p):(r=s[n]=a[n](u),r.c()),B(r,1),r.m(e,i)):r=null),d=gr(c,[4&p&&u[4](u[10])]),/-/.test(u[9])?_g(e,d):Cg(e,d)},i(u){o||(B(r),o=!0)},o(u){j(r),o=!1},d(u){u&&nt(e),~n&&s[n].d()}}}function r2(t,e){let n,r,i,o,a,s;const l=[m4,h4],c=[];function d(u,p){return 4&p&&(r=null),r==null&&(r=!u[5](u[9])),r?0:1}return i=d(e,-1),o=c[i]=l[i](e),{key:t,first:null,c(){n=Zn(),o.c(),a=Zn(),this.first=n},m(u,p){it(u,n,p),c[i].m(u,p),it(u,a,p),s=!0},p(u,p){let h=i;i=d(e=u,p),i===h?c[i].p(e,p):(we(),j(c[h],1,1,()=>{c[h]=null}),xe(),o=c[i],o?o.p(e,p):(o=c[i]=l[i](e),o.c()),B(o,1),o.m(a.parentNode,a))},i(u){s||(B(o),s=!0)},o(u){j(o),s=!1},d(u){u&&nt(n),c[i].d(u),u&&nt(a)}}}function $4(t){let e,n,r=[],i=new Map,o=t[2];const a=s=>s[0]+s[1];for(let s=0;s<o.length;s+=1){let l=n2(t,o,s),c=a(l);i.set(c,r[s]=r2(c,l))}return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Zn()},m(s,l){for(let c=0;c<r.length;c+=1)r[c].m(s,l);it(s,e,l),n=!0},p(s,[l]){62&l&&(o=s[2],we(),r=Wa(r,l,a,1,s,o,i,e.parentNode,qs,r2,e,n2),xe())},i(s){if(!n){for(let l=0;l<o.length;l+=1)B(r[l]);n=!0}},o(s){for(let l=0;l<r.length;l+=1)j(r[l]);n=!1},d(s){for(let l=0;l<r.length;l+=1)r[l].d(s);s&&nt(e)}}}function b4(t,e,n){let r,i,{items:o}=e,{discardEmptyItems:a=!0}=e,{key:s=""}=e;const l={Button:qa,ImageButton:gE,ImageButtonList:nM,Dropdown:xE,RadioGroup:dc,Input:wE,Panel:GM,ProgressIndicator:mE,ShapeStyle:t4,ToggleSlider:KM,ColorPicker:c4,ShorthandControl:p4},c=u=>!pn(u)||!!l[u],d=u=>{if(!u)return!1;const[p,,h,g=[]]=u;return!!c(p)||g.some(d)||h.textContent||h.innerHTML};return t.$$set=u=>{"items"in u&&n(6,o=u.items),"discardEmptyItems"in u&&n(7,a=u.discardEmptyItems),"key"in u&&n(0,s=u.key)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=s),192&t.$$.dirty&&n(2,i=(o&&a?o.filter(d):o)||[])},[s,r,i,l,(u={})=>{const{textContent:p,innerHTML:h,...g}=u;return g},c,o,a]}class uc extends Xe{constructor(e){super(),Ye(this,e,b4,$4,ze,{items:6,discardEmptyItems:7,key:0})}}let Y1=null;var E4=t=>{if(Y1===null&&(Y1=Vn()&&"visualViewport"in window),!Y1)return!1;const e=visualViewport.height,n=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",n),()=>visualViewport.removeEventListener("resize",n)};function i2(t){let e,n;const r=[{onclick:t[1]},t[3]];let i={};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new qa({props:i}),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=10&a[0]?gr(r,[2&a[0]&&{onclick:o[1]},8&a[0]&&wr(o[3])]):{};e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function o2(t){let e,n;const r=[{onclick:t[0]},{class:"PinturaInputFormButtonConfirm"},t[2]];let i={};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new qa({props:i}),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=5&a[0]?gr(r,[1&a[0]&&{onclick:o[0]},r[1],4&a[0]&&wr(o[2])]):{};e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function v4(t){let e,n,r,i,o,a,s,l,c=t[3]&&i2(t);const d=t[24].default,u=An(d,t,t[23],null);let p=t[2]&&o2(t);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),r=Kt(),i=dt("div"),u&&u.c(),o=Kt(),p&&p.c(),I(i,"class","PinturaInputFormFields"),I(n,"class","PinturaInputFormInner"),I(e,"class","PinturaInputForm"),I(e,"data-layout",t[4]),I(e,"style",t[6])},m(h,g){it(h,e,g),vt(e,n),c&&c.m(n,null),vt(n,r),vt(n,i),u&&u.m(i,null),vt(n,o),p&&p.m(n,null),t[25](e),a=!0,s||(l=[Et(i,"keydown",t[10]),Et(e,"focusin",t[7]),Et(e,"focusout",t[8]),Et(e,"measure",t[9]),fn(yr.call(null,e))],s=!0)},p(h,g){h[3]?c?(c.p(h,g),8&g[0]&&B(c,1)):(c=i2(h),c.c(),B(c,1),c.m(n,r)):c&&(we(),j(c,1,1,()=>{c=null}),xe()),u&&u.p&&(!a||8388608&g[0])&&Ln(u,d,h,h[23],a?On(d,h[23],g,null):Dn(h[23]),null),h[2]?p?(p.p(h,g),4&g[0]&&B(p,1)):(p=o2(h),p.c(),B(p,1),p.m(n,null)):p&&(we(),j(p,1,1,()=>{p=null}),xe()),(!a||16&g[0])&&I(e,"data-layout",h[4]),(!a||64&g[0])&&I(e,"style",h[6])},i(h){a||(B(c),B(u,h),B(p),a=!0)},o(h){j(c),j(u,h),j(p),a=!1},d(h){h&&nt(e),c&&c.d(),u&&u.d(h),p&&p.d(),t[25](null),s=!1,sn(l)}}}function w4(t,e,n){let r,i,o,a,s,{$$slots:l={},$$scope:c}=e,{onconfirm:d}=e,{oncancel:u}=e,{autoFocus:p=!0}=e,{autoPositionCursor:h=!0}=e,{buttonConfirm:g}=e,{buttonCancel:m}=e,{layout:$="stack"}=e,{parentRect:b}=e,{align:E}=e,{justify:v}=e,{parentMargin:w=16}=e,{panelOffset:T=yn()}=e,M=!1,A,x,C="",H=0;const S=()=>{const _=s.querySelector("input, textarea");_.focus(),H>=1||_.select()},y=()=>{M=!0,O||!ci()&&!hu()||n(19,C="top:1em;bottom:auto;"),ci()&&(_=>{let P;const U=k=>P=k.touches[0].screenY,X=k=>{const F=k.touches[0].screenY,Q=k.target;/textarea/i.test(Q.nodeName)?(F>P?Q.scrollTop==0&&k.preventDefault():F<P?Q.scrollTop+Q.offsetHeight==Q.scrollHeight&&k.preventDefault():k.preventDefault(),P=F):k.preventDefault()};_.addEventListener("touchstart",U),_.addEventListener("touchmove",X)})(s),n(20,H=1)};let L;const O=E4(_=>{o?_!=="hidden"||M?(clearTimeout(x),x=void 0,n(19,C=`top:${visualViewport.height-A.height-T.y}px`),_==="visible"?(n(5,s.dataset.stick=!0,s),S(),y()):(M=!1,n(20,H=0))):S():n(19,C="top: 4.5em; bottom: auto")});return lo(()=>{p&&S()}),gi(()=>{O&&O()}),t.$$set=_=>{"onconfirm"in _&&n(0,d=_.onconfirm),"oncancel"in _&&n(1,u=_.oncancel),"autoFocus"in _&&n(11,p=_.autoFocus),"autoPositionCursor"in _&&n(12,h=_.autoPositionCursor),"buttonConfirm"in _&&n(2,g=_.buttonConfirm),"buttonCancel"in _&&n(3,m=_.buttonCancel),"layout"in _&&n(4,$=_.layout),"parentRect"in _&&n(13,b=_.parentRect),"align"in _&&n(14,E=_.align),"justify"in _&&n(15,v=_.justify),"parentMargin"in _&&n(16,w=_.parentMargin),"panelOffset"in _&&n(17,T=_.panelOffset),"$$scope"in _&&n(23,c=_.$$scope)},t.$$.update=()=>{385024&t.$$.dirty[0]&&n(21,r=b&&A?((_,P,U,X,k)=>{let F,Q;return F=X==="center"?_.x+.5*_.width-.5*P.width:X==="right"?_.x+_.width-P.width-k:_.x+k,Q=U==="center"?_.y+.5*_.height-.5*P.height:U==="bottom"?_.y+_.height-P.height-k:_.y+k,`left:${F}px;top:${Q}px;right:auto;bottom:auto;`})(b,A,E,v,w):void 0),32&t.$$.dirty[0]&&n(22,i=s&&getComputedStyle(s)),4194304&t.$$.dirty[0]&&(o=i&&i.getPropertyValue("--editor-modal")==="1"),3670016&t.$$.dirty[0]&&n(6,a=`opacity:${H};${r||C}`)},[d,u,g,m,$,s,a,_=>{var P;((U=>/textarea/i.test(U))(_.target)||yE(_.target))&&(L=Date.now(),h&&((P=_.target).selectionStart=P.selectionEnd=P.value.length),clearTimeout(x),x=setTimeout(y,200))},_=>{Date.now()-L>50||(_.stopPropagation(),S())},({detail:_})=>{n(18,A={width:_.width,height:_.height})},_=>_.key==="Enter"?d():_.key==="Escape"?u():void 0,p,h,b,E,v,w,T,A,C,H,r,i,c,l,function(_){on[_?"unshift":"push"](()=>{s=_,n(5,s)})}]}class x4 extends Xe{constructor(e){super(),Ye(this,e,w4,v4,ze,{onconfirm:0,oncancel:1,autoFocus:11,autoPositionCursor:12,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:13,align:14,justify:15,parentMargin:16,panelOffset:17},null,[-1,-1])}}const I4=["aspectRatio","isRotatedSideways","flip","cropSize"],a2=b0.map(([t])=>t).filter(t=>!I4.includes(t));var wa=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),TE=(t,e)=>(e?w0(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),s2=(t,e=xn)=>{const{subscribe:n,set:r}=Pt(void 0);return{subscribe:n,destroy:((i,o)=>{const a=matchMedia(i);return a.addListener(o),o(a),{get matches(){return a.matches},destroy:()=>a.removeListener(o)}})(t,({matches:i})=>r(e(i))).destroy}},RE=t=>/video/.test(t.type),l2=(t,e,n)=>new Promise((r,i)=>{(async()=>{RE(t)&&r(await(l=>new Promise((c,d)=>{const u=dn("video");u.onseeked=()=>{const p=dn("canvas");lb(u).then(({width:h,height:g})=>{p.width=h,p.height=g;const m=p.getContext("2d",{willReadFrequently:!0}),$=()=>{m.drawImage(u,0,0,p.width,p.height);const b=m.getImageData(0,0,p.width,p.height);_n(p),URL.revokeObjectURL(u.src),c(b)};oo()?setTimeout($,16):$()})},u.onloadeddata=()=>{u.currentTime=0},u.onerror=p=>{console.error(p),d(u.error)},u.src=URL.createObjectURL(l),u.load()}))(t));const o=await e.read(t),a=l=>j$(l,n).then(c=>e.apply(c,o)).then(r).catch(i);if(q$(t)||!W$()||oo()||ci())return a(t);let s;try{s=await mu((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await pu()?I0()&&o>1?r(await(async l=>ic(await Us(l)))(s)):r(s):r(e.apply(s,o)):a(t)})()}),c2=(t,e)=>new Promise(async n=>{if(t.width<e.width&&t.height<e.height)return n(t);const r=Math.min(e.width/t.width,e.height/t.height),i=r*t.width,o=r*t.height,a=dn("canvas",{width:i,height:o}),s=a.getContext("2d",{willReadFrequently:!0}),l=jl(t)?await Us(t):t;s.drawImage(l,0,0,i,o),n(ic(a))});let X1=null;var T4=()=>{if(X1===null){let t=dn("canvas");X1=!!$u(t),_n(t),t=void 0}return X1};const d2=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ia={precision:1e-4},Cd={precision:.01*Ia.precision};var R4=()=>{const t=[],e=[],n=[],r=()=>{e.forEach(o=>o(n))},i=o=>{o.unsub=o.subscribe(a=>((s,l)=>{const c=t.indexOf(s);c<0||(n[c]=l,r())})(o,a)),r()};return{get length(){return t.length},clear:()=>{t.forEach(o=>o.unsub()),t.length=0,n.length=0},unshift:o=>{t.unshift(o),i(o)},get:o=>t[o],push:o=>{t.push(o),i(o)},remove:o=>{o.unsub();const a=t.indexOf(o);t.splice(a,1),n.splice(a,1)},forEach:o=>t.forEach(o),filter:o=>t.filter(o),subscribe:o=>(e.push(o),o(n),()=>{e.splice(e.indexOf(o),1)})}},Z1=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,S4=(t={})=>new Promise(e=>{const{accept:n="image/*"}=t,r=dn("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:n}),i=()=>{const[o]=r.files;r.parentNode&&r.remove(),r.removeEventListener("change",i),e(o)};r.addEventListener("change",i),ci()&&document.body.append(r),r.click()}),M4=t=>{try{return t()}catch(e){console.error(e)}},C4=([t,e])=>t+.5*(e-t),Uo=t=>Math.round(100*t),SE=t=>ht(t.clientX,t.clientY),Ah=(t,e,n)=>{const r=SE(t);return Un(Un(r,e),n)};function _4(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,M,{root:A}=e,{locale:x}=e,{stores:C}=e,{allowPan:H=!0}=e,{allowZoom:S=!0}=e,{enablePan:y=!0}=e,{enableZoom:L=!0}=e,{enableZoomControls:O=L}=e,{enableZoomInput:_=!0}=e,{enablePanInput:P=!0}=e,{enablePanLimit:U=!0}=e,{panLimitGutterScalar:X=0}=e,{zoomOptions:k=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:F=.25}=e,{zoomAdjustFactor:Q=.1}=e,{zoomAdjustWheelFactor:rt=1}=e,{elasticity:$t=5}=e,{imageSelectionRectCentered:V}=e,{imageSelectionRectScalar:Y}=e,{zoomLevel:q=null}=e,{zoomControls:et}=e,{zoomMultiTouching:D=!1}=e;const{isAnimated:ot,isInteracting:st,rootRect:gt,stageRect:Lt,stageScalar:Xt,imageSelectionPan:Ct,imageSelectionZoom:Ut,imageSelectionStageFitScalar:Le,imageSelectionRect:mt,imageSelectionStoredState:pt,imagePreviewUpscale:It}=C;G(t,ot,K=>n(68,T=K)),G(t,st,K=>n(67,v=K)),G(t,gt,K=>n(65,b=K)),G(t,Lt,K=>n(64,$=K)),G(t,Xt,K=>n(45,w=K)),G(t,Ct,K=>n(63,h=K)),G(t,Ut,K=>n(42,p=K)),G(t,Le,K=>n(43,g=K)),G(t,mt,K=>n(66,E=K)),G(t,pt,K=>n(69,M=K)),G(t,It,K=>n(44,m=K));let At=!1,Tt,le,oe,Zt;const Se=K=>{const Nt=A.querySelector(".PinturaMain > .PinturaUtilMain")||A.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!Nt&&!!Nt.contains(K.target)&&!Bs(K.target)},Ie=(K={})=>{const{pan:Nt=h,zoom:_t=p}=K;ut(pt,M={translation:Nt,zoom:_t},M)},He=()=>h&&h.x===0&&h.y===0,Ce=()=>{ut(Ut,p=void 0,p),He()||ut(Ct,h=yn(),h),ae.set(void 0,{hard:!0})},Vt=()=>{Ce(),Ie()},ae=_e(void 0,{precision:.01});ae.subscribe(K=>{if(K===void 0)return ut(Ut,p=void 0,p),void(He()||ut(Ct,h=yn(),h));const Nt=p;K<=1?He()||ut(Ct,h=yn(),h):K<=Nt&&ut(Ct,h=Ci(h,.8),h),ut(Ut,p=K,p)});const ue=K=>{ae.update(Nt=>{const _t=K(Nt||g);return Ie({zoom:_t}),_t})},me=K=>{K?ae.set(K,{hard:T===!1}):(K=void 0,ae.set(void 0,{hard:!0})),ut(Ut,p=K,p),Ie({zoom:K})},Ze=(K,Nt)=>{const _t=Y*Nt,Ft={...V},Mt=1-rn(X,0,1);qn(Ft,_t<Mt?_t:Mt);const Te={...V};qn(Te,_t),ai(Te,K);const Gt={...Te};return Te.x>Ft.x&&(Gt.x=Ft.x),Te.y>Ft.y&&(Gt.y=Ft.y),Te.x+Te.width<Ft.x+Ft.width&&(Gt.x=Ft.x+Ft.width-Te.width),Te.y+Te.height<Ft.y+Ft.height&&(Gt.y=Ft.y+Ft.height-Te.height),Un(nn(Gt),nn(Ft))},lt=({translation:K,zoom:Nt=1,elastify:_t=!0})=>{if(!Tt)return;let Ft=K;const Mt=ht(Tt.x+Ft.x,Tt.y+Ft.y);if(!U)return Mt;const Te=Ze(Mt,Nt);return _t?VS(Te,Mt,$t):Te};let Bt,ye;const se=()=>{ye=void 0,ut(st,v=!0,v),n(33,At=P),Bt=!1,oe=!1,Tt={...h},le=m?p||g:o?p||1:p||g},Je=K=>{const{scalar:Nt,translation:_t,isMultiTouching:Ft}=K.detail;if(!Tt||!Ft&&!P)return;Ft&&Ci(_t,.5),(P||Ft)&&(Bt=!0),D||n(12,D=Ft);const Mt=r?rn(le*Nt,s,l):1,Te=lt({translation:_t,zoom:Mt,elastify:!0}),Gt=Bo(Te);Zt=Bo(h),oe=Gt<Zt,r&&Ut.set(Mt),Ct.set(Te),ye=D&&{translation:K.detail.translation,scalar:Nt}},Me=K=>{ut(st,v=!1,v),n(33,At=!1),n(12,D=!1),oe&&Zt<50&&(Tt=void 0,le=void 0,Ct.set(yn()))},fe=K=>{ut(st,v=!1,v),n(33,At=!1),n(12,D=!1),Promise.resolve().then(()=>{if(Bt&&Tt){const Nt=ye||K.detail,_t=r?rn(le*Nt.scalar,s,l):1,Ft=lt({elastify:!1,translation:Nt.translation,zoom:_t});Ct.set(Ft)}Tt=void 0,le=void 0,P&&K.detail.isDoubleTap&&Vt(),Ie()})};let tn,W=Date.now(),Dt=0,N=!1,yt=!1;const Ot=K=>{if(!Se(K)||(K.preventDefault(),K.stopPropagation(),yt))return;clearTimeout(tn);const Nt=bu(K),_t=Date.now(),Ft=_t-W;W=_t;const Mt=Math.abs(Nt/Ft)>.2;Dt=Mt?Dt+1:0;const Te=1+-1*Nt*rt/(Mt?50:100),Gt=Ah(K,b,$);zt(Gt,Te,{isZoomingFast:Mt})},zt=(K,Nt,{isZoomingFast:_t})=>{const Ft=m?p||g:o?p||1:p||g,Mt=Ft*Nt,Te=yn(),Gt=h,te=m?g:o?1:g,Ue=Math.abs(Mt-te),ln=Mt<Ft,Mn=Ft>te&&ln||Ft<te&&Mt>Ft,hn=Dt>=5;if(_t||(N=!1),Dt>0&&!N&&(N=Mn),hn&&N)return Vt(),yt=!0,void setTimeout(()=>{yt=!1},100);if(hn)return;!_t&&Mn&&Ue<=.05&&(tn=setTimeout(()=>{Vt()},250)),ut(Ut,p=rn(Mt,s,l),p);const xt=Re(E);qn(xt,Ft),ai(xt,Gt);const ie=nn(xt),kn=Re(xt);qn(kn,p-Ft+1,K);const Jn=nn(kn),ir=rg(Un(Jn,ie),Ft);((Fn,Bn,wn)=>{Fn.x=Bn,Fn.y=wn})(Te,Gt.x+ir.x,Gt.y+ir.y),ut(Ct,h=ln&&_t?Ci(je(h),.85):Ze(Te,Ft),h),Ie()},Yt=K=>(K?"add":"remove")+"EventListener";let wt,Qt,re,pe;const Ee=K=>{K.preventDefault(),Qt={...h},pe=Re(E),re=Ah(K,b,$),wt=m?p||g:o?p||1:p||g},$e=K=>{K.preventDefault(),ut(Ut,p=rn(K.scale*wt,s,l),p);const Nt=Re(pe);qn(Nt,wt),ai(Nt,Qt);const _t=nn(Nt),Ft=Re(Nt);qn(Ft,p-wt+1,re);const Mt=nn(Ft),Te=rg(Un(Mt,_t),wt),Gt={x:Qt.x+Te.x,y:Qt.y+Te.y};ut(Ct,h=Ze(Gt,p),h)},Be=K=>{K.preventDefault()},ge=K=>{A[Yt(K)]("wheel",Ot),ci()||(A[Yt(K)]("gesturestart",Ee),A[Yt(K)]("gesturechange",$e),A[Yt(K)]("gestureend",Be))},St=K=>{const Nt=Yt(K);A[Nt]("interactionstart",se),A[Nt]("interactionupdate",Je),A[Nt]("interactionrelease",Me),A[Nt]("interactionend",fe)};let kt;return lo(()=>{kt=lc(A,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:Se})}),gi(()=>{ge(!1),St(!1),kt.destroy(),kt=void 0}),t.$$set=K=>{"root"in K&&n(13,A=K.root),"locale"in K&&n(14,x=K.locale),"stores"in K&&n(15,C=K.stores),"allowPan"in K&&n(16,H=K.allowPan),"allowZoom"in K&&n(17,S=K.allowZoom),"enablePan"in K&&n(18,y=K.enablePan),"enableZoom"in K&&n(19,L=K.enableZoom),"enableZoomControls"in K&&n(20,O=K.enableZoomControls),"enableZoomInput"in K&&n(21,_=K.enableZoomInput),"enablePanInput"in K&&n(22,P=K.enablePanInput),"enablePanLimit"in K&&n(23,U=K.enablePanLimit),"panLimitGutterScalar"in K&&n(24,X=K.panLimitGutterScalar),"zoomOptions"in K&&n(25,k=K.zoomOptions),"zoomAdjustStep"in K&&n(26,F=K.zoomAdjustStep),"zoomAdjustFactor"in K&&n(27,Q=K.zoomAdjustFactor),"zoomAdjustWheelFactor"in K&&n(28,rt=K.zoomAdjustWheelFactor),"elasticity"in K&&n(29,$t=K.elasticity),"imageSelectionRectCentered"in K&&n(30,V=K.imageSelectionRectCentered),"imageSelectionRectScalar"in K&&n(31,Y=K.imageSelectionRectScalar),"zoomLevel"in K&&n(32,q=K.zoomLevel),"zoomControls"in K&&n(11,et=K.zoomControls),"zoomMultiTouching"in K&&n(12,D=K.zoomMultiTouching)},t.$$.update=()=>{var K,Nt;2752512&t.$$.dirty[0]&&n(35,r=S&&L&&_),327680&t.$$.dirty[0]&&n(34,i=H&&y),196608&t.$$.dirty[0]&&(H||S?(ut(Ut,p=L?M.zoom:void 0,p),ut(Ct,h=y?je(M.translation):He()?h:yn(),h),ae.set(p)):Ce()),16384&t.$$.dirty[1]&&(o=w>=1),33570816&t.$$.dirty[0]|28672&t.$$.dirty[1]&&n(39,a=[(m||w<1)&&[g,Uo(g)+"%",{sublabel:x.labelZoomFit}],...k.map(_t=>[_t,Uo(_t)+"%"])].filter(Boolean).map(_t=>(_t[0]===1&&(_t[2]={sublabel:x.labelZoomActual}),_t)).sort((_t,Ft)=>{const Mt=_t[0]||g,Te=Ft[0]||g;return Mt<Te?-1:Te<Mt?1:0})),4352&t.$$.dirty[1]&&n(37,s=Math.min(a.reduce((_t,[Ft])=>Ft<_t?Ft:_t,Number.MAX_SAFE_INTEGER),g)),256&t.$$.dirty[1]&&n(36,l=a.reduce((_t,[Ft])=>Ft>_t?Ft:_t,Number.MIN_SAFE_INTEGER)),2&t.$$.dirty[1]&&q!==null&&me(q),30720&t.$$.dirty[1]&&n(41,d=p||(m||w<1?g:1)),1280&t.$$.dirty[1]&&n(38,(K=a.map(([_t])=>_t),Nt=d,c=K.findIndex(_t=>_t===Nt))),1024&t.$$.dirty[1]&&n(40,u=Uo(d)+"%"),202522624&t.$$.dirty[0]|3040&t.$$.dirty[1]&&n(11,et=(S||S)&&O?[["Button","zoom-out",{hideLabel:!0,label:x.labelZoomOut,icon:x.iconZoomOut,disabled:p===s,onclick:()=>ue(_t=>Math.max(s,_t-F)),onhold:()=>ue(_t=>Math.max(s,_t*(1-Q)))}],["Dropdown","zoom-level",{label:u,labelClass:"PinturaFixedWidthCharacters",options:a,selectedIndex:c,onchange:_t=>me(_t.value)}],["Button","zoom-in",{hideLabel:!0,label:x.labelZoomIn,icon:x.iconZoomIn,disabled:p===l,onclick:()=>ue(_t=>Math.min(l,_t+F)),onhold:()=>ue(_t=>Math.min(l,_t*(1+Q)))}]]:[]),8192&t.$$.dirty[0]|16&t.$$.dirty[1]&&A&&ge(r),8192&t.$$.dirty[0]|8&t.$$.dirty[1]&&A&&St(i),4202496&t.$$.dirty[0]|12&t.$$.dirty[1]&&A&&A.style.setProperty("--cursor",i&&P?At?"grabbing":"grab":"")},[ot,st,gt,Lt,Xt,Ct,Ut,Le,mt,pt,It,et,D,A,x,C,H,S,y,L,O,_,P,U,X,k,F,Q,rt,$t,V,Y,q,At,i,r,l,s,c,a,u,d,p,g,m,w]}class P4 extends Xe{constructor(e){super(),Ye(this,e,_4,null,ze,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1])}}const A4=t=>new Promise(e=>{const n=new FileReader;n.onload=()=>e(n.result),n.readAsArrayBuffer(t)}),K1=(t,e=0,n=t.byteLength)=>{const r=[],i=e+n;for(;e<i;){const o=t.getUint32(e);if(o<0)break;const a=t.getUint32(e+4);if(r.push({type:a,size:o,offset:e,bodyOffset:e+8,bodySize:o-8}),o<8)break;e+=o}return r},O4=(t,{limit:e=1024}={})=>{let n=0;if(n+=4,t.getUint32(n)!==1718909296)return 0;n+=4;const r=t.getUint32(n);return r===1836069938?((i,o,a)=>{let s=!1,l=-1;for(let h=o;h<a;h++)if(s||i.getUint32(h)!==1953653099||(s=!0,h+=4),s&&i.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=i.getUint32(l-28),d=i.getUint32(l-20),u=i.getUint32(l-32),p=i.getUint32(l-16);return c===65536&&d===4294901760?90:u===4294901760&&p===4294901760?180:c===4294901760&&d===65536?270:0})(t,n,e):r===1903435808?(i=>{const o=K1(i).find(c=>c.type===1836019574);if(!o)return 0;const a=K1(i,o.bodyOffset,o.bodySize);a.filter(c=>c.type===1953653099).forEach(c=>{a.push(...K1(i,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=a.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const u=i.getUint8(d);let p=d+4;p+=c===1836476516?32:36,p+=u===1?12:0;const h=i.getInt32(p),g=i.getInt32(p+4);if(h===0&&g>0)return 90;if(h<0&&g===0)return 180;if(h===0&&g<0)return 270}return 0})(t):0},{window:Ra}=y0;function u2(t){let e,n,r,i=t[42]&&p2(t),o=t[39]&&g2(t);return{c(){i&&i.c(),e=Kt(),o&&o.c(),n=Zn()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[42]?i?(i.p(a,s),2048&s[1]&&B(i,1)):(i=p2(a),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(we(),j(i,1,1,()=>{i=null}),xe()),a[39]?o?(o.p(a,s),256&s[1]&&B(o,1)):(o=g2(a),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(we(),j(o,1,1,()=>{o=null}),xe())},i(a){r||(B(i),B(o),r=!0)},o(a){j(i),j(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function p2(t){let e,n,r,i,o,a;const s=[D4,L4],l=[];function c(d,u){return d[40]?0:d[35]?1:-1}return~(r=c(t))&&(i=l[r]=s[r](t)),{c(){e=dt("div"),n=dt("p"),i&&i.c(),I(n,"style",t[73]),I(e,"class","PinturaStatus"),I(e,"style",o="opacity: "+t[55])},m(d,u){it(d,e,u),vt(e,n),~r&&l[r].m(n,null),a=!0},p(d,u){let p=r;r=c(d),r===p?~r&&l[r].p(d,u):(i&&(we(),j(l[p],1,1,()=>{l[p]=null}),xe()),~r?(i=l[r],i?i.p(d,u):(i=l[r]=s[r](d),i.c()),B(i,1),i.m(n,null)):i=null),(!a||2048&u[2])&&I(n,"style",d[73]),(!a||16777216&u[1]&&o!==(o="opacity: "+d[55]))&&I(e,"style",o)},i(d){a||(B(i),a=!0)},o(d){j(i),a=!1},d(d){d&&nt(e),~r&&l[r].d()}}}function L4(t){let e,n,r,i;e=new hE({props:{text:t[35].text||"",onmeasure:t[214]}});let o=t[35].aside&&h2(t);return{c(){qt(e.$$.fragment),n=Kt(),o&&o.c(),r=Zn()},m(a,s){Ht(e,a,s),it(a,n,s),o&&o.m(a,s),it(a,r,s),i=!0},p(a,s){const l={};16&s[1]&&(l.text=a[35].text||""),e.$set(l),a[35].aside?o?(o.p(a,s),16&s[1]&&B(o,1)):(o=h2(a),o.c(),B(o,1),o.m(r.parentNode,r)):o&&(we(),j(o,1,1,()=>{o=null}),xe())},i(a){i||(B(e.$$.fragment,a),B(o),i=!0)},o(a){j(e.$$.fragment,a),j(o),i=!1},d(a){Wt(e,a),a&&nt(n),o&&o.d(a),a&&nt(r)}}}function D4(t){let e,n,r,i;return e=new hE({props:{text:t[40],onmeasure:t[214]}}),r=new fE({props:{class:"PinturaStatusIcon",offset:t[83],opacity:t[84],$$slots:{default:[B4]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment),n=Kt(),qt(r.$$.fragment)},m(o,a){Ht(e,o,a),it(o,n,a),Ht(r,o,a),i=!0},p(o,a){const s={};512&a[1]&&(s.text=o[40]),e.$set(s);const l={};2097152&a[2]&&(l.offset=o[83]),4194304&a[2]&&(l.opacity=o[84]),8&a[0]|536870912&a[18]&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){i||(B(e.$$.fragment,o),B(r.$$.fragment,o),i=!0)},o(o){j(e.$$.fragment,o),j(r.$$.fragment,o),i=!1},d(o){Wt(e,o),o&&nt(n),Wt(r,o)}}}function h2(t){let e,n;return e=new fE({props:{class:"PinturaStatusButton",offset:t[83],opacity:t[84],$$slots:{default:[k4]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};2097152&i[2]&&(o.offset=r[83]),4194304&i[2]&&(o.opacity=r[84]),16&i[1]|536870912&i[18]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function m2(t){let e,n;return e=new mE({props:{progress:t[35].progressIndicator.progress}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};16&i[1]&&(o.progress=r[35].progressIndicator.progress),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function f2(t){let e,n;const r=[t[35].closeButton,{hideLabel:!0}];let i={};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new qa({props:i}),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=16&a[1]?gr(r,[wr(o[35].closeButton),r[1]]):{};e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function k4(t){let e,n,r,i=t[35].progressIndicator.visible&&m2(t),o=t[35].closeButton&&t[35].text&&f2(t);return{c(){i&&i.c(),e=Kt(),o&&o.c(),n=Zn()},m(a,s){i&&i.m(a,s),it(a,e,s),o&&o.m(a,s),it(a,n,s),r=!0},p(a,s){a[35].progressIndicator.visible?i?(i.p(a,s),16&s[1]&&B(i,1)):(i=m2(a),i.c(),B(i,1),i.m(e.parentNode,e)):i&&(we(),j(i,1,1,()=>{i=null}),xe()),a[35].closeButton&&a[35].text?o?(o.p(a,s),16&s[1]&&B(o,1)):(o=f2(a),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(we(),j(o,1,1,()=>{o=null}),xe())},i(a){r||(B(i),B(o),r=!0)},o(a){j(i),j(o),r=!1},d(a){i&&i.d(a),a&&nt(e),o&&o.d(a),a&&nt(n)}}}function F4(t){let e,n=t[3].iconSupportError+"";return{c(){e=vr("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){8&i[0]&&n!==(n=r[3].iconSupportError+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function B4(t){let e,n;return e=new Ui({props:{$$slots:{default:[F4]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};8&i[0]|536870912&i[18]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function g2(t){let e,n,r,i,o,a,s,l,c,d,u,p,h,g,m=t[10]&&y2(t),$=t[46]&&t[45]&&$2(t);const b=[V4,U4],E=[];function v(x,C){return x[46]?0:1}function w(x){t[427](x)}function T(x){t[428](x)}function M(x){t[429](x)}r=v(t),i=E[r]=b[r](t),a=new IS({props:{isAnimated:t[54],isTransparent:t[20],pixelRatio:t[58],textPixelRatio:t[6],backgroundColor:t[57],maskRect:t[59],maskOpacity:t[74]?t[74].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[86],images:t[56],interfaceImages:t[87],loadImageData:t[28],enableGrid:t[11],gridSize:t[88],gridColors:[t[89],t[90]],gridOpacity:t[91],selectionColor:t[92],willRequest:t[82]||t[93],willRender:t[424],didRender:t[425]}});let A={root:t[2],locale:t[3],stores:t[200],allowPan:t[95],enablePan:t[17],enablePanLimit:t[21],panLimitGutterScalar:t[22],enablePanInput:t[96],allowZoom:t[97],enableZoom:t[18],enableZoomInput:t[19]!==void 0?t[19]:t[98],enableZoomControls:t[99],zoomOptions:t[13]||t[23],zoomAdjustStep:t[14]||t[24],zoomAdjustFactor:t[15]||t[25],zoomAdjustWheelFactor:t[16]||t[26],imageSelectionRectCentered:t[100],imageSelectionRectScalar:t[101],elasticity:Oh*t[8]};return t[0]!==void 0&&(A.zoomLevel=t[0]),t[33]!==void 0&&(A.zoomControls=t[33]),t[34]!==void 0&&(A.zoomMultiTouching=t[34]),d=new P4({props:A}),on.push(()=>Zr(d,"zoomLevel",w)),on.push(()=>Zr(d,"zoomControls",T)),on.push(()=>Zr(d,"zoomMultiTouching",M)),{c(){m&&m.c(),e=Kt(),$&&$.c(),n=Kt(),i.c(),o=Kt(),qt(a.$$.fragment),s=Kt(),l=dt("div"),c=Kt(),qt(d.$$.fragment),I(l,"class","PinturaRootPortal")},m(x,C){m&&m.m(x,C),it(x,e,C),$&&$.m(x,C),it(x,n,C),E[r].m(x,C),it(x,o,C),Ht(a,x,C),it(x,s,C),it(x,l,C),t[426](l),it(x,c,C),Ht(d,x,C),g=!0},p(x,C){x[10]?m?(m.p(x,C),1024&C[0]&&B(m,1)):(m=y2(x),m.c(),B(m,1),m.m(e.parentNode,e)):m&&(we(),j(m,1,1,()=>{m=null}),xe()),x[46]&&x[45]?$?($.p(x,C),49152&C[1]&&B($,1)):($=$2(x),$.c(),B($,1),$.m(n.parentNode,n)):$&&(we(),j($,1,1,()=>{$=null}),xe());let H=r;r=v(x),r===H?E[r].p(x,C):(we(),j(E[H],1,1,()=>{E[H]=null}),xe(),i=E[r],i?i.p(x,C):(i=E[r]=b[r](x),i.c()),B(i,1),i.m(o.parentNode,o));const S={};8388608&C[1]&&(S.isAnimated=x[54]),1048576&C[0]&&(S.isTransparent=x[20]),134217728&C[1]&&(S.pixelRatio=x[58]),64&C[0]&&(S.textPixelRatio=x[6]),67108864&C[1]&&(S.backgroundColor=x[57]),268435456&C[1]&&(S.maskRect=x[59]),4096&C[2]&&(S.maskOpacity=x[74]?x[74].maskOpacity:1),128&C[0]&&(S.maskMarkupOpacity=x[7]),32&C[0]&&(S.maskFrameOpacity=x[5]),16777216&C[2]&&(S.clipAnnotationsToImage=x[86]),33554432&C[1]&&(S.images=x[56]),33554432&C[2]&&(S.interfaceImages=x[87]),268435456&C[0]&&(S.loadImageData=x[28]),2048&C[0]&&(S.enableGrid=x[11]),67108864&C[2]&&(S.gridSize=x[88]),402653184&C[2]&&(S.gridColors=[x[89],x[90]]),536870912&C[2]&&(S.gridOpacity=x[91]),1073741824&C[2]&&(S.selectionColor=x[92]),1048576&C[2]|1&C[3]&&(S.willRequest=x[82]||x[93]),512&C[0]|541982784&C[1]|2&C[3]&&(S.willRender=x[424]),124&C[2]&&(S.didRender=x[425]),a.$set(S);const y={};4&C[0]&&(y.root=x[2]),8&C[0]&&(y.locale=x[3]),4&C[3]&&(y.allowPan=x[95]),131072&C[0]&&(y.enablePan=x[17]),2097152&C[0]&&(y.enablePanLimit=x[21]),4194304&C[0]&&(y.panLimitGutterScalar=x[22]),8&C[3]&&(y.enablePanInput=x[96]),16&C[3]&&(y.allowZoom=x[97]),262144&C[0]&&(y.enableZoom=x[18]),524288&C[0]|32&C[3]&&(y.enableZoomInput=x[19]!==void 0?x[19]:x[98]),64&C[3]&&(y.enableZoomControls=x[99]),8396800&C[0]&&(y.zoomOptions=x[13]||x[23]),16793600&C[0]&&(y.zoomAdjustStep=x[14]||x[24]),33587200&C[0]&&(y.zoomAdjustFactor=x[15]||x[25]),67174400&C[0]&&(y.zoomAdjustWheelFactor=x[16]||x[26]),128&C[3]&&(y.imageSelectionRectCentered=x[100]),256&C[3]&&(y.imageSelectionRectScalar=x[101]),256&C[0]&&(y.elasticity=Oh*x[8]),!u&&1&C[0]&&(u=!0,y.zoomLevel=x[0],di(()=>u=!1)),!p&&4&C[1]&&(p=!0,y.zoomControls=x[33],di(()=>p=!1)),!h&&8&C[1]&&(h=!0,y.zoomMultiTouching=x[34],di(()=>h=!1)),d.$set(y)},i(x){g||(B(m),B($),B(i),B(a.$$.fragment,x),B(d.$$.fragment,x),g=!0)},o(x){j(m),j($),j(i),j(a.$$.fragment,x),j(d.$$.fragment,x),g=!1},d(x){m&&m.d(x),x&&nt(e),$&&$.d(x),x&&nt(n),E[r].d(x),x&&nt(o),Wt(a,x),x&&nt(s),x&&nt(l),t[426](null),x&&nt(c),Wt(d,x)}}}function y2(t){let e,n,r,i,o;return n=new uc({props:{items:t[70]}}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"class","PinturaNav PinturaNavTools")},m(a,s){it(a,e,s),Ht(n,e,null),r=!0,i||(o=[Et(e,"measure",t[411]),fn(yr.call(null,e))],i=!0)},p(a,s){const l={};256&s[2]&&(l.items=a[70]),n.$set(l)},i(a){r||(B(n.$$.fragment,a),r=!0)},o(a){j(n.$$.fragment,a),r=!1},d(a){a&&nt(e),Wt(n),i=!1,sn(o)}}}function $2(t){let e,n,r;return n=new _0({props:{elasticity:t[8]*Lh,scrollDirection:t[76]?"y":"x",$$slots:{default:[z4]},$$scope:{ctx:t}}}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"class","PinturaNav PinturaNavMain")},m(i,o){it(i,e,o),Ht(n,e,null),r=!0},p(i,o){const a={};256&o[0]&&(a.elasticity=i[8]*Lh),16384&o[2]&&(a.scrollDirection=i[76]?"y":"x"),8192&o[1]|393216&o[2]|536870912&o[18]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Wt(n)}}}function N4(t){let e,n=t[586].icon+"";return{c(){e=vr("g")},m(r,i){it(r,e,i),e.innerHTML=n},p(r,i){268435456&i[18]&&n!==(n=r[586].icon+"")&&(e.innerHTML=n)},d(r){r&&nt(e)}}}function G4(t){let e,n,r,i,o,a=t[586].label+"";return e=new Ui({props:{$$slots:{default:[N4]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment),n=Kt(),r=dt("span"),i=Sn(a)},m(s,l){Ht(e,s,l),it(s,n,l),it(s,r,l),vt(r,i),o=!0},p(s,l){const c={};805306368&l[18]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!o||268435456&l[18])&&a!==(a=s[586].label+"")&&Kn(i,a)},i(s){o||(B(e.$$.fragment,s),o=!0)},o(s){j(e.$$.fragment,s),o=!1},d(s){Wt(e,s),s&&nt(n),s&&nt(r)}}}function z4(t){let e,n;const r=[t[80],{tabs:t[79]}];let i={$$slots:{default:[G4,({tab:o})=>({586:o}),({tab:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o?268435456:0]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new S0({props:i}),e.$on("select",t[412]),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=393216&a[2]?gr(r,[262144&a[2]&&wr(o[80]),131072&a[2]&&{tabs:o[79]}]):{};805306368&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function U4(t){let e,n,r;function i(a){t[420](a)}let o={class:"PinturaMain",content:{...t[47].find(t[419]),props:t[27][t[44]]},locale:t[3],stores:t[200]};return t[1][t[44]]!==void 0&&(o.component=t[1][t[44]]),e=new dE({props:o}),on.push(()=>Zr(e,"component",i)),e.$on("measure",t[226]),e.$on("show",t[421]),e.$on("hide",t[422]),e.$on("fade",t[423]),{c(){qt(e.$$.fragment)},m(a,s){Ht(e,a,s),r=!0},p(a,s){const l={};134217728&s[0]|73728&s[1]&&(l.content={...a[47].find(a[419]),props:a[27][a[44]]}),8&s[0]&&(l.locale=a[3]),!n&&2&s[0]|8192&s[1]&&(n=!0,l.component=a[1][a[44]],di(()=>n=!1)),e.$set(l)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){Wt(e,a)}}}function V4(t){let e,n;const r=[{class:"PinturaMain"},{visible:t[63]},t[80],{panels:t[78]}];let i={$$slots:{default:[H4,({panel:o,panelIsActive:a})=>({584:o,585:a}),({panel:o,panelIsActive:a})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(o?67108864:0)|(a?134217728:0)]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new M0({props:i}),e.$on("measure",t[418]),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=327682&a[2]?gr(r,[r[0],2&a[2]&&{visible:o[63]},262144&a[2]&&wr(o[80]),65536&a[2]&&{panels:o[78]}]):{};134217738&a[0]|65664&a[1]|2&a[2]|738197504&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function H4(t){let e,n,r;function i(...s){return t[413](t[584],...s)}function o(s){t[414](s,t[584])}let a={content:{...t[47].find(i),props:t[27][t[584]]},locale:t[3],isActive:t[585],stores:t[200]};return t[1][t[584]]!==void 0&&(a.component=t[1][t[584]]),e=new dE({props:a}),on.push(()=>Zr(e,"component",o)),e.$on("measure",t[226]),e.$on("show",function(){return t[415](t[584])}),e.$on("hide",function(){return t[416](t[584])}),e.$on("fade",function(...s){return t[417](t[584],...s)}),{c(){qt(e.$$.fragment)},m(s,l){Ht(e,s,l),r=!0},p(s,l){t=s;const c={};134217728&l[0]|65536&l[1]|67108864&l[18]&&(c.content={...t[47].find(i),props:t[27][t[584]]}),8&l[0]&&(c.locale=t[3]),134217728&l[18]&&(c.isActive=t[585]),!n&&2&l[0]|67108864&l[18]&&(n=!0,c.component=t[1][t[584]],di(()=>n=!1)),e.$set(c)},i(s){r||(B(e.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),r=!1},d(s){Wt(e,s)}}}function b2(t){let e,n;return{c(){e=dt("span"),I(e,"class","PinturaEditorOverlay"),I(e,"style",n="opacity:"+t[102])},m(r,i){it(r,e,i)},p(r,i){512&i[3]&&n!==(n="opacity:"+r[102])&&I(e,"style",n)},d(r){r&&nt(e)}}}function E2(t){let e,n;const r=[{layout:"row"},{parentRect:t[51]},t[61]];let i={$$slots:{default:[W4]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new x4({props:i}),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=1074790400&a[1]?gr(r,[r[0],1048576&a[1]&&{parentRect:o[51]},1073741824&a[1]&&wr(o[61])]):{};1073741824&a[1]|1&a[2]|536870912&a[18]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function W4(t){let e,n,r;return{c(){e=dt("input"),e.value=n=t[61].text,I(e,"placeholder",r=t[61].placeholder),I(e,"type","text"),I(e,"spellcheck","false"),I(e,"autocorrect","off"),I(e,"autocapitalize","off")},m(i,o){it(i,e,o),t[430](e)},p(i,o){1073741824&o[1]&&n!==(n=i[61].text)&&e.value!==n&&(e.value=n),1073741824&o[1]&&r!==(r=i[61].placeholder)&&I(e,"placeholder",r)},d(i){i&&nt(e),t[430](null)}}}function q4(t){let e,n,r,i,o,a;Na(t[410]);let s=t[41]&&u2(t),l=t[102]>0&&b2(t),c=t[61]&&E2(t);return{c(){e=dt("div"),s&&s.c(),n=Kt(),l&&l.c(),r=Kt(),c&&c.c(),I(e,"id",t[4]),I(e,"class",t[77]),I(e,"data-env",t[75]),I(e,"dir",t[12])},m(d,u){it(d,e,u),s&&s.m(e,null),vt(e,n),l&&l.m(e,null),vt(e,r),c&&c.m(e,null),t[431](e),i=!0,o||(a=[Et(Ra,"keydown",t[217]),Et(Ra,"keyup",t[218]),Et(Ra,"blur",t[219]),Et(Ra,"paste",t[223]),Et(Ra,"resize",t[410]),Et(e,"ping",function(){vn(t[69])&&t[69].apply(this,arguments)}),Et(e,"contextmenu",t[220]),Et(e,"touchstart",t[215],{passive:!1}),Et(e,"touchmove",function(){vn(t[72])&&t[72].apply(this,arguments)}),Et(e,"pointermove",function(){vn(t[71])&&t[71].apply(this,arguments)}),Et(e,"transitionend",t[205]),Et(e,"dropfiles",t[221]),Et(e,"measure",t[432]),Et(e,"click",function(){vn(t[43]?t[222]:be)&&(t[43]?t[222]:be).apply(this,arguments)}),fn(yr.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),fn(bS.call(null,e)),fn(vS.call(null,e))],o=!0)},p(d,u){(t=d)[41]?s?(s.p(t,u),1024&u[1]&&B(s,1)):(s=u2(t),s.c(),B(s,1),s.m(e,n)):s&&(we(),j(s,1,1,()=>{s=null}),xe()),t[102]>0?l?l.p(t,u):(l=b2(t),l.c(),l.m(e,r)):l&&(l.d(1),l=null),t[61]?c?(c.p(t,u),1073741824&u[1]&&B(c,1)):(c=E2(t),c.c(),B(c,1),c.m(e,null)):c&&(we(),j(c,1,1,()=>{c=null}),xe()),(!i||16&u[0])&&I(e,"id",t[4]),(!i||32768&u[2])&&I(e,"class",t[77]),(!i||8192&u[2])&&I(e,"data-env",t[75]),(!i||4096&u[0])&&I(e,"dir",t[12])},i(d){i||(B(s),B(c),i=!0)},o(d){j(s),j(c),i=!1},d(d){d&&nt(e),s&&s.d(),l&&l.d(),c&&c.d(),t[431](null),o=!1,sn(a)}}}const Oh=1,Lh=10;function j4(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,M,A,x,C,H,S,y,L,O,_,P,U,X,k,F,Q,rt,$t,V,Y,q,et,D,ot,st,gt,Lt,Xt,Ct,Ut,Le,mt,pt,It,At,Tt,le,oe,Zt,Se,Ie,He,Ce,Vt,ae,ue,me,Ze,lt,Bt,ye,se,Je,Me,fe,tn,W,Dt,N,yt,Ot,zt,Yt,wt,Qt,re,pe,Ee,$e,Be,ge,St,kt,K,Nt,_t,Ft,Mt,Te,Gt,te,Ue,ln,Mn,hn,xt,ie,kn,Jn,ir,Fn,Bn,wn,xr,kr,Hi,Fr,co,ur,uo,or,ar,Ke,js,Wn,ja,po,pc,Kr,sr,gn,Ya,Xa,ho,mo,Qo,Wi,Ys,fo,go,Ur,Za,Pi,Br,Ai,yo,$o,Vr,yi,Ir,bo,Eo,qi,pr,vo,wo,Xs,Nr,$r,Jo,xo,ta,ea,hr,Io,Qr,Ka,ji,Zs,Ks,$i,Qa,na,Ja,ra,ia,oa,To,aa,ts,Oi,Jr,es,Ro,Li,bi,R,jt,Jt,Oe,Qe,Ve,ce,ve,Ne,Ge,bn,Rn,mn,In,Ae,br,Yi,Qs,Js,tl,el,ns,rs,nl=Pe,So=Pe;G(t,yS,f=>n(398,Qa=f)),t.$$.on_destroy.push(()=>nl()),t.$$.on_destroy.push(()=>So());const Xi=Ni(),lr=Vi();let Er,Tr,{class:Rr}=e,{layout:un}=e,{stores:Ei}=e,{locale:an}=e,{id:vi}=e,{util:is}=e,{utils:xu}=e,{animations:os="auto"}=e,{disabled:rl=!1}=e,{status:wi}=e,{previewUpscale:hc=!1}=e,{previewPad:Iu=!1}=e,{previewMaskOpacity:F0=.95}=e,{previewImageDataMaxSize:mc}=e,{previewImageTextPixelRatio:B0}=e,{markupMaskOpacity:N0=1}=e,{zoomMaskOpacity:Tu=.85}=e,{elasticityMultiplier:sa=10}=e,{willRevert:Ru=()=>Promise.resolve(!0)}=e,{willProcessImage:Su=()=>Promise.resolve(!0)}=e,{willRenderCanvas:Mu=xn}=e,{willRenderToolbar:Cu=xn}=e,{willSetHistoryInitialState:_u=xn}=e,{enableButtonExport:Pu=!0}=e,{enableButtonRevert:Au=!0}=e,{enableNavigateHistory:Ou=!0}=e,{enableToolbar:fc=!0}=e,{enableUtils:Lu=!0}=e,{enableButtonClose:Du=!1}=e,{enableDropImage:ku=!1}=e,{enablePasteImage:Fu=!1}=e,{enableBrowseImage:Bu=!1}=e,{enableTransparencyGrid:G0=!1}=e,{layoutDirectionPreference:Nu="auto"}=e,{layoutHorizontalUtilsPreference:Gu="left"}=e,{layoutVerticalUtilsPreference:zu="bottom"}=e,{layoutVerticalToolbarPreference:gc="top"}=e,{layoutVerticalControlGroupsPreference:Uu="bottom"}=e,{layoutVerticalControlTabsPreference:Vu="bottom"}=e,{textDirection:z0}=e,{markupEditorZoomLevel:yc=null}=e,{markupEditorZoomLevels:U0}=e,{markupEditorZoomAdjustStep:V0}=e,{markupEditorZoomAdjustFactor:H0}=e,{markupEditorZoomAdjustWheelFactor:W0}=e,{markupEditorInteractionMode:Hu=!1}=e,{muteAudio:$c=!0}=e,{willSetMediaInitialTimeOffset:Wu=(f,z)=>f*C4(z[0])}=e,{enablePan:q0=!0}=e,{enableZoom:j0=!0}=e,{enableZoomControls:qu=!0}=e,{enableZoomInput:Y0}=e,{enablePanInput:ju}=e,{enableCanvasAlpha:bc=!1}=e,{enablePanLimit:X0}=e,{panLimitGutterScalar:Z0}=e,{zoomPresetOptions:K0=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:Q0=.25}=e,{zoomAdjustFactor:J0=.1}=e,{zoomAdjustWheelFactor:tm=1}=e,{zoomLevel:la=null}=e,{imagePreviewSrc:Yu}=e,{imageOrienter:Ec={read:()=>1,apply:f=>f}}=e,{pluginComponents:as}=e,{pluginOptions:ca={}}=e;const GE=Xi.sub,Hr={};let{root:Nn}=e;const Xu=()=>{Mt.setAttribute("data-redraw","true"),ls.set({})},Zu=Pt(!0);G(t,Zu,f=>n(464,co=f));const il=Pt(void 0);G(t,il,f=>n(406,bi=f));const Mo=Pt(0);G(t,Mo,f=>n(407,R=f));const em=Pt(0),nm=Pt(!1),vc=f=>{nm.set(f.type==="play"),Xi.pub(f.type)};let rm,Ku,im,Qu,Ju=!1;const tp=()=>{if(!i||!ss())return;Qu=d,ut(il,bi=void 0,bi);const f=Mt;Ju=!1;const z=1/24,J=ua();(Math.abs(l*J-R*J)<=z||J-J*R<=z)&&ut(Mo,R=s,R),xc(ua()*R),f.play().catch(()=>{});const at=()=>{ss()||(im=requestAnimationFrame(at),ut(Mo,R=wc()/ua(),R),Qu>=0&&R>=l&&(ut(Mo,R=l,R),da()),d>-1&&(Ju=!0),Ju&&d===-1&&u>0&&(ut(Mo,R=a[u][0],R),xc(R*ua())),Xu())};at()},da=()=>{i&&!ss()&&(ut(il,bi=void 0,bi),Qu=void 0,Mt.pause(),cancelAnimationFrame(im),Xu())},ss=()=>Mt&&Mt.paused,ep=()=>{if(i)return ss()?tp():da()},np=()=>{i&&(Mt.muted=!0)},rp=()=>{i&&(Mt.muted=!1)},om=()=>{i&&ut(ol,Li=!Li,Li)},ol=Pt($c);G(t,ol,f=>n(405,Li=f));const ua=()=>{if(i)return Mt.duration},wc=()=>{if(i)return Mt.currentTime},xc=f=>{i&&(Mt.currentTime=f,em.set(f))};qr("previewcontrols",{play:tp,pause:da,togglePlayPause:ep,mute:np,unmute:rp,toggleMute:om,setCurrentTime:xc,getCurrentTime:wc,getDuration:ua,currentTime:em,frameOffset:Mo,framePeekOffset:il,isPlaying:nm,isMuted:ol});const ls=Pt({});G(t,ls,f=>n(53,or=f)),qr("redrawTrigger",ls);const Ic=Pt(sa);G(t,Ic,f=>n(480,es=f)),qr("elasticityMultiplier",Ic);let al=[];const ip=_e();G(t,ip,f=>n(102,rs=f));const am=x0()||1024,sm=fr(am,am),lm=Jb(),zE=f=>Promise.resolve(Jr&&Jr(f,{resourceType:"image"})).then(z=>{if(z===!1)return;const{headers:J,credentials:at}=z||{};return fetch(f,{headers:J,credentials:at}).then(Z=>{if(Z.status!==200)throw`${Z.status} (${Z.statusText})`;return Z.blob()}).then(Z=>l2(Z,Ec,lm)).then(Z=>c2(Z,g))});let{imageSourceToImageData:op=f=>pn(f)?zE(f):Ql(f)?new Promise(z=>z(ic(f))):o0(f)||ac(f)?l2(f,Ec,lm).then(z=>c2(z,g)):void 0}=e;const ap=(()=>{let f,z;const J=a2.reduce((at,Z)=>(at[Z]=function(tt,bt,ee){let ne=[];return{set:bt,update:ee,publish:Rt=>{ne.forEach(De=>De(Rt))},subscribe:Rt=>(ne.push(Rt),tt(Rt),()=>{ne=ne.filter(De=>De!==Rt)})}}(tt=>{if(!z)return tt();z.stores[Z].subscribe(tt)()},tt=>{z&&z.stores[Z].set(tt)},tt=>{z&&z.stores[Z].update(tt)}),at),{});return{update:at=>{if(z=at,f&&(f.forEach(Z=>Z()),f=void 0),!at)return J.file.publish(void 0),void J.loadState.publish(void 0);f=a2.map(Z=>at.stores[Z].subscribe(tt=>{J[Z].publish(tt)}))},stores:J,destroy:()=>{f&&f.forEach(at=>at())}}})(),{file:sp,size:pa,duration:lp,trim:cp,volume:cm,minDuration:UE,maxDuration:dp,loadState:Tc,processState:up,cropAspectRatio:Rc,cropLimitToImage:pp,crop:xi,cropMinSize:VE,cropMaxSize:HE,cropRange:WE,cropOrigin:qE,cropRectAspectRatio:jE,rotation:cs,rotationRange:YE,targetSize:XE,flipX:Sc,flipY:Mc,backgroundColor:Cc,backgroundImage:dm,colorMatrix:um,convolutionMatrix:pm,gamma:hm,vignette:mm,noise:fm,decoration:hp,annotation:mp,manipulation:fp,redaction:gp,frame:ha,selection:yp,state:_c}=ap.stores;G(t,sp,f=>n(382,Ur=f)),G(t,pa,f=>n(355,te=f)),G(t,lp,f=>n(408,jt=f)),G(t,cp,f=>n(403,Oi=f)),G(t,cm,f=>n(404,Ro=f)),G(t,dp,f=>n(409,Jt=f)),G(t,Tc,f=>n(374,gn=f)),G(t,up,f=>n(373,sr=f)),G(t,Rc,f=>n(477,Ja=f)),G(t,pp,f=>n(86,ce=f)),G(t,xi,f=>n(393,$r=f)),G(t,cs,f=>n(358,Mn=f)),G(t,Sc,f=>n(357,ln=f)),G(t,Mc,f=>n(356,Ue=f)),G(t,Cc,f=>n(364,kr=f)),G(t,hp,f=>n(49,Gt=f)),G(t,mp,f=>n(50,hn=f)),G(t,fp,f=>n(361,Bn=f)),G(t,gp,f=>n(362,wn=f)),G(t,ha,f=>n(48,Te=f)),G(t,yp,f=>n(60,To=f)),G(t,_c,f=>n(466,Br=f));const gm=(f,z,J=0)=>new Promise((at,Z)=>{if(RE(f))return void(Gi()?(async ne=>{const Rt=await A4(ne),De=new DataView(Rt);return O4(De)})(f):Promise.resolve()).then(ne=>{const Rt=document.createElement("video");Rt.onerror=()=>console.error(Rt.error),Rt.playsInline=!0,Rt.preload="auto",Rt.onloadeddata=()=>{Rt.onloadeddata=void 0,Rt.dataset.rotation=ne||"0",eE(Rt).then(()=>{const De=Wu(Rt.duration,Oi||[[0,1]]);De>0?(Rt.onseeked=()=>{Rt.onseeked=void 0,at(Rt)},Rt.currentTime=De):(Rt.currentTime=De,at(Rt))})},Rt.src=URL.createObjectURL(f),Rt.load()});let tt,bt=!1;z.cancel=()=>bt=!0;const ee=Date.now();op(f).then(ne=>{const Rt=Date.now()-ee;clearTimeout(tt),tt=setTimeout(()=>{bt||at(ne)},Math.max(0,J-Rt))}).catch(Z)}),{images:ym,shapePreprocessor:$m,imageScrambler:bm,imageRedactionRendering:Em,willRequest:vm,willRequestResource:wm}=Ei;let sl;G(t,ym,f=>n(402,ts=f)),G(t,$m,f=>n(401,aa=f)),G(t,bm,f=>n(365,Hi=f)),G(t,Em,f=>n(363,xr=f)),G(t,vm,f=>n(82,Jr=f)),G(t,wm,f=>n(93,In=f));const ZE=ke(dm,(f,z)=>{if(!f)return z(void 0);sl&&(sl.cancel(),sl=void 0),sl={cancel:be},gm(f,sl).then(z).catch(J=>{})}),KE=_c.subscribe(f=>Xi.pub("update",f)),QE=Pt();qr("ui",Pt({})),qr("selection",yp);const $p=Pt(!0);G(t,$p,f=>n(95,br=f));const bp=Pt(!0);G(t,bp,f=>n(97,Qs=f));const Ep=Pt(!0);G(t,Ep,f=>n(400,oa=f));const Pc=Pt(!0);G(t,Pc,f=>n(478,ra=f));const vp=Pt(!0);G(t,vp,f=>n(98,Js=f));const wp=Pt();G(t,wp,f=>n(99,tl=f));const Ac=Pt();G(t,Ac,f=>n(479,ia=f));const xp=ke([Ac,Pc],()=>ia!==void 0?ia:ra);G(t,xp,f=>n(96,Yi=f));const ll=Pt([0,0,0]);G(t,ll,f=>n(57,yi=f));const Oc=Pt([1,1,1]);G(t,Oc,f=>n(462,Fn=f));const cl=_e([1,1,1]);G(t,cl,f=>n(461,ir=f));const Ip=Pt();G(t,Ip,f=>n(92,mn=f));const xm=Pt(),Tp=Pt();G(t,Tp,f=>n(52,ur=f));const ds=Pt();G(t,ds,f=>n(359,ie=f));const us=Pt(Go());G(t,us,f=>n(81,Ai=f));const Rp=Pt(0);G(t,Rp,f=>n(399,na=f));const dl=Pt(Go());G(t,dl,f=>n(85,Ve=f));const ma=Pt();G(t,ma,f=>n(459,Ft=f));const Lc=s2("(pointer: fine)",f=>f?"pointer-fine":"pointer-coarse");G(t,Lc,f=>n(380,fo=f));const Dc=s2("(hover: hover)",f=>f?"pointer-hover":"pointer-no-hover");G(t,Dc,f=>n(379,Ys=f));const Im=Pt(!1),ul=Pt(!1);G(t,ul,f=>n(360,Jn=f));const Sp=Ts(void 0,f=>{const z=_e(0),J=[ul.subscribe(at=>{z.set(at?1:0)}),z.subscribe(f)];return()=>J.forEach(at=>at())});G(t,Sp,f=>n(460,kn=f));const kc=Pt();G(t,kc,f=>n(465,mo=f));const Fc=Pt();let Mp;G(t,Fc,f=>n(54,Ke=f)),qr("isAnimated",Fc);const Bc=Pt(hc);G(t,Bc,f=>n(383,Za=f));const fa=Pt(!1);G(t,fa,f=>n(471,ea=f)),qr("imageIsStatic",fa);const pl=Pt();G(t,pl,f=>n(472,hr=f));const Cp=Pt();G(t,Cp,f=>n(469,xo=f));const Tm=Ts(void 0,f=>{const z=Pt(void 0),J=[xi.subscribe(()=>{if(!$r)return;if(ea)return z.set(Re($r));const at=fy($r,xo,5*sa);z.set(at)}),z.subscribe(f)];return()=>J.forEach(at=>at())}),ti=Pt();G(t,ti,f=>n(468,Nr=f));const Nc=Pt();G(t,Nc,f=>n(470,ta=f));const _p=Pt(void 0);G(t,_p,f=>n(475,Zs=f));const Rm=Pt(yn());G(t,Rm,f=>n(476,Ks=f));const Sm=(f,z)=>{if(!z||!f)return{top:0,right:0,bottom:0,left:0};const J=Sb(z,f,m),at=Rb(J,f);return{top:Math.abs(at.top),right:Math.abs(at.right),bottom:Math.abs(at.bottom),left:Math.abs(at.left)}},Mm=Pt({}),Pp=ke([ma,us,dl,Mm],([f,z,J,at],Z)=>{if(!f)return Z(void 0);let tt=0;O.length!==1||p||gc==="bottom"||(tt=J.y+J.height),Z(nr(f.x+z.x,f.y+z.y+tt,f.width,f.height))});let hl={left:0,right:0,top:0,bottom:0};const Gc=Pt(!1),ps=ke([Gc,ha,Pp,ul],([f,z,J,at],Z)=>{if(!J)return Z({left:0,right:0,top:0,bottom:0});if(!f)return;const tt=Math.min(J.width,J.height),bt=Sm({width:tt,height:tt},z);de(hl.top,4)===de(bt.top,4)&&de(hl.bottom,4)===de(bt.bottom,4)&&de(hl.right,4)===de(bt.right,4)&&de(hl.left,4)===de(bt.left,4)||(hl=bt,Z(bt))});G(t,ps,f=>n(391,vo=f));const hs=ke([Gc,ps],([f,z],J)=>{if(!f)return J(!1);J(Object.values(z).some(at=>at>0))});G(t,hs,f=>n(392,wo=f));const JE=ke([Gc,ma,hs,ps],([f,z,J,at],Z)=>{if(z)return f&&J?void Z(nr(z.x+at.left,z.y+at.top,z.width-at.left-at.right,z.height-at.top-at.bottom)):Z({...z})}),Di=ke([Pp,hs,ps],([f,z,J],at)=>f?z?void at(nr(f.x+J.left,f.y+J.top,f.width-J.left-J.right,f.height-J.top-J.bottom)):at(f):at(void 0));G(t,Di,f=>n(51,xt=f));const tv=ke([fa,pa,cs],([f,z,J],at)=>{if(!f||!z)return at(void 0);const Z=rr(z);at(Bi(Z,J))}),Ap=ke([tv],([f],z)=>{if(!f)return z(void 0);const J=Lr(f);z(Kl(J))});G(t,Ap,f=>n(394,Jo=f));const Zi=ke([Di,xi,Ap,Bc],([f,z,J,at],Z)=>{if(!f||!z||!(!hr&&!xo))return;const{width:tt,height:bt}=J||z,ee=Math.min(f.width/tt,f.height/bt);Z(at?ee:Math.min(1,ee))});G(t,Zi,f=>n(395,Qr=f)),qr("imageStaticVisualCorners",ke([fa,pa,cs,Di,ma,Zi],([f,z,J,at,Z,tt],bt)=>{if(!(f&&at&&Z&&z))return bt(void 0);const ee=rr(z),ne=Kl(qn(ee,tt)),Rt=Nd(at,ne);ne.x=Rt.x,ne.y=Rt.y,bt(Bi(ne,J))}));const ms=Pt(void 0);G(t,ms,f=>n(397,$i=f));const Cm=ke([xi,Di],([f,z])=>{if(z&&f)return Math.min(z.width/f.width,z.height/f.height)}),Op=ke([xi,ti],([f,z])=>f&&z?Math.min(f.width/z.width,f.height/z.height):1);G(t,Op,f=>n(101,ns=f));const ml=ke([ms,Op],([f,z])=>f&&z?z*f:1);G(t,ml,f=>n(474,Ka=f));const fs=Pt(yn());G(t,fs,f=>n(396,ji=f));const _m=Pt({scalar:Ka,translation:ji}),Pm=()=>{_m.set({scalar:void 0,translation:yn()})},zc=Ts(void 0,f=>{const z=_e(void 0,{precision:1e-4}),J=Fl()===1?tt=>Xr(tt,Math.round):xn,at=()=>{if(!Nr)return;const tt=Jn||!mo;if(ea){const ee=Re(Nr);return ai(ee,Ks),ai(ee,xt),z.set(ee,{hard:tt})}const bt=fy(Nr,Zs,Oh*sa);bt.width<0&&(bt.width=0,bt.x=Nr.x),bt.height<0&&(bt.height=0,bt.y=Nr.y),ai(bt,xt),ai(bt,ji),qn(bt,Ka),!tt&&J(bt),z.set(bt,{hard:tt})},Z=[Di.subscribe(at),ti.subscribe(at),ml.subscribe(at),fs.subscribe(at),ha.subscribe(at),z.subscribe(f)];return()=>Z.forEach(tt=>tt())});G(t,zc,f=>n(59,pr=f));const Lp=Pt(1);G(t,Lp,f=>n(467,Xs=f));const Dp=()=>{if(!$r||!xt)return;let f=zo(Re($r),Qr||1);const z=Nd(xt,zo(Re(Jo),Qr));ai(f,z);const J=Ft.width/f.width,at=Ft.height/f.height,Z=Math.min(1,J,at);Lp.set(Z),qn(f,Z),((tt,bt)=>{const[ee,ne,Rt,De]=Ds(tt);ee<bt.y&&(tt.y=Math.max(bt.y,tt.y)),ne>bt.width&&(tt.x=bt.width-tt.width),Rt>bt.height&&(tt.y=bt.height-tt.height),De<bt.x&&(tt.x=Math.max(bt.x,tt.x))})(f,{...Ft,x:0,y:0}),ti.set(f)},Am=ke([Di,Zi,xi,pa],([f,z,J,at],Z)=>{f&&(J||at)&&Z(Om(f,z||1,J||at))});G(t,Am,f=>n(100,el=f));const Om=(f,z,J)=>J.width<=f.width&&J.height<=f.height?Nd(f,zo(Re(J),z)):Cr(f,Gn(J));let kp,Lm;const Fp=f=>{if(p&&kp&&li(kp,f)&&Lm===Qr)return;if(ea)return Dp();kp=f,Lm=Qr;const z=Om(f,Qr,$r||te);ti.set(z)};let Dm=!1;const ev=Zi.subscribe(f=>{!Dm&&f!==void 0&&$r&&(Fp(xt),Dm=!0)}),nv=Di.subscribe(f=>{f&&Qr!==void 0&&$r&&Fp(f)}),rv=fa.subscribe(f=>{!f&&xt&&Fp(xt)});let Bp;const iv=Nc.subscribe(f=>{if(!f)return Bp=void 0,void ut(pl,hr=void 0,hr);Bp=Io;const z=Re($r);pl.set(z)}),ov=ti.subscribe(f=>{if(!f||!ta)return;const z=(J=Re(f),at=ta,J.x-=at.x,J.y-=at.y,J.width-=at.width,J.height-=at.height,J);var J,at;((tt,bt)=>{tt.x/=bt,tt.y/=bt,tt.width/=bt,tt.height/=bt})(z,Bp);const Z=((tt,bt)=>(tt.x+=bt.x,tt.y+=bt.y,tt.width+=bt.width,tt.height+=bt.height,tt))(Re(hr),z);xi.set(Z)}),av=xi.subscribe(f=>{if(!f||!Nr)return;if(ea)return void(ta||Dp());if(Jn||ta||xo)return;const z=Gn(Nr),J=Gn(f);if(de(z,6)===de(J,6))return;const{width:at,height:Z}=Jo||$r,tt=Math.min(xt.width/at,xt.height/Z),bt=fr(f.width*tt,f.height*tt),ee=.5*(Nr.width-bt.width),ne=.5*(Nr.height-bt.height),Rt=nr(Nr.x+ee,Nr.y+ne,bt.width,bt.height);ti.set(Rt)}),km=ke([Zi,xi,ti,fa],([f,z,J,at],Z)=>{if(!f||!z||!J)return;if(at)return Z(Xs);const tt=J.width/z.width,bt=J.height/z.height;Z(Math.max(tt,bt)/f)}),Uc=ke([Zi,km],([f,z],J)=>{z&&J(f*z)});G(t,Uc,f=>n(473,Io=f));let gs={left:0,right:0,top:0,bottom:0};const Fm=ke([ha,ti],([f,z],J)=>{if(!z)return J(gs);const at=Sm(z,f);de(gs.top,4)===de(at.top,4)&&de(gs.bottom,4)===de(at.bottom,4)&&de(gs.right,4)===de(at.right,4)&&de(gs.left,4)===de(at.left,4)||(gs=at,J(at))}),sv=ke([Fm],([f],z)=>{z(Object.values(f).some(J=>J>0))}),Np=_e(.075,{stiffness:.03,damping:.4,precision:.001}),lv=ke([cl,ll,Np,zc,ml,ha,sv,Fm,hs],([f,z,J,at,Z,tt,bt,ee,ne],Rt)=>{if(!at||p)return Rt([]);let{x:De,y:En,width:tr,height:en}=at;De+=.5,En+=.5,tr-=.5,en-=.5;const Cn=[];if(tt){if(bt){let{left:We,right:ni,top:$a,bottom:$s}=ee;We*=Z,ni*=Z,$a*=Z,$s*=Z;const c1=Z1(z)?[1,1,1,.125]:[0,0,0,.075];Cn.push({x:De-We-.5,y:En-$a-.5,width:tr+We+ni+1,height:en+$a+$s+1,strokeWidth:1,strokeColor:c1,opacity:ne?1:.5})}const Wr=Z1(f);tt&&tt.frameColor&&Z1(tt.frameColor)||Wr||(Cn.push({x:De-1,y:En-1,width:tr+2,height:en+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:J}),Cn.push({x:De+1,y:En+1,width:tr-2,height:en-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:J}))}Rt([...Cn,{x:De,y:En,width:tr,height:en,strokeWidth:1,strokeColor:f,opacity:J}])}),fl=Pt([]);G(t,fl,f=>n(385,yo=f));const Bm=ke([lv,fl],([f,z],J)=>{J([...f,...z])});G(t,Bm,f=>n(94,Ae=f));const Gp=_e(0,{precision:.001});G(t,Gp,f=>n(387,Vr=f));const zp=_e();G(t,zp,f=>n(390,Eo=f));const Up=_e();G(t,Up,f=>n(389,bo=f));const Vp=_e();G(t,Vp,f=>n(388,Ir=f));const Hp=_e();G(t,Hp,f=>n(386,$o=f));const gl=Pt(!1);G(t,gl,f=>n(372,Kr=f));const yl=Pt();let Co;G(t,yl,f=>n(375,Ya=f));const Wp=ke([gl,yl],([f,z],J)=>{if(!f||!z)return void J(void 0);if(Co&&(Co.cancel(),n(282,Co=void 0)),sc(z))return J(U$(z));const at=ei.length?0:Ke?250:0;n(282,Co={cancel:be}),gm(z,Co,at).then(J).catch(Z=>{ut(Tc,gn.error=Z,gn)}).finally(()=>{n(282,Co=void 0)})});nl(),nl=ao(Wp,f=>n(354,Mt=f));let{imagePreviewCurrent:$l}=e;const qp=Pt({});G(t,qp,f=>n(377,Qo=f));const Vc=Pt([]);G(t,Vc,f=>n(87,ve=f));const Hc=ke([Di,ds,pa,Tm,ti,Uc,cs,Sc,Mc,ml,fs,Im],([f,z,J,at,Z,tt,bt,ee,ne,Rt,De,En],tr)=>{if(!f||!Z)return;const en=iS(f,z,J,at,Z,Rt,De,tt,bt,ee,ne);!En&&S(en),tr(en)});G(t,Hc,f=>n(378,Wi=f));const Nm=ke([um,pm,hm,mm,fm],([f,z,J,at,Z],tt)=>{const bt=f&&Object.keys(f).map(ee=>f[ee]).filter(Boolean);tt({gamma:J||void 0,vignette:at||void 0,noise:Z||void 0,convolutionMatrix:z||void 0,colorMatrix:bt&&bt.length&&h0(bt)})});let Wc,jp;const Gm=(()=>{if(!ci())return!1;const f=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,z,J]=f.map(at=>parseInt(at,10)||0);return z>13||z===13&&J>=4})(),bl=Pt({});G(t,bl,f=>n(366,uo=f)),qr("env",bl);const zm=Fl(),Yp=Ts(zm,f=>{const z=()=>f(Fl()),J=matchMedia(`(resolution: ${zm}dppx)`);return J.addListener(z),()=>J.removeListener(z)});G(t,Yp,f=>n(58,qi=f));const ki=((f,z)=>{const{sub:J,pub:at}=Ni(),Z=[],tt=Pt(0),bt=[],ee=()=>bt.forEach(Rt=>Rt({index:to(tt),length:Z.length})),ne={get index(){return to(tt)},set index(Rt){Rt=Number.isInteger(Rt)?Rt:0,Rt=rn(Rt,0,Z.length-1),tt.set(Rt),z(Z[ne.index]),ee()},get state(){return Z[Z.length-1]},length:()=>Z.length,undo(){const Rt=ne.index--;return at("undo",Rt),Rt},redo(){const Rt=ne.index++;return at("redo",ne.index),Rt},revert(){Z.length=1,ne.index=0,at("revert")},write(Rt){Rt&&z({...f(),...Rt});const De=f(),En=Z[Z.length-1];JSON.stringify(De)!==JSON.stringify(En)&&(Z.length=ne.index+1,Z.push(De),tt.set(Z.length-1),ee(),at("writehistory"))},set(Rt={}){Z.length=0,ne.index=0;const De=Array.isArray(Rt)?Rt:[Rt];Z.push(...De),ne.index=Z.length-1},get:()=>[...Z],subscribe:Rt=>(bt.push(Rt),Rt({index:ne.index,length:Z.length}),()=>bt.splice(bt.indexOf(Rt),1)),on:J};return ne})(()=>Br,f=>{ut(_c,Br=f,Br),us.set(Ai)});So(),So=ao(ki,f=>n(384,Pi=f));const Um=()=>{const f={x:0,y:0,...te},z=Xr(Cr(f,Br.cropAspectRatio),Math.round),J=_u({...Br,rotation:0,crop:z},Br),at=[J];JSON.stringify(J)!==JSON.stringify(Br)&&at.push({...Br}),ki.set(at)},cv=Tc.subscribe(f=>{f&&f.complete&&Um()}),dv=()=>Ru().then(f=>f&&ki.revert()),_o=Pt(!1);G(t,_o,f=>n(367,ar=f));const uv=()=>{ut(_o,ar=!0,ar),Su().then(f=>{if(!f)return void ut(_o,ar=!1,ar);let z;z=El.subscribe(J=>{J===1&&(z&&z(),lr("processImage"))})})},pv=up.subscribe(f=>{if(!f)return void ut(_o,ar=!1,ar);ut(_o,ar=!0,ar);const{complete:z,abort:J}=f;(z||J)&&ut(_o,ar=!1,ar)}),ei=R4();G(t,ei,f=>n(56,Xa=f));const hv=ke([ei],([f],z)=>{if(!f.length)return z();const{origin:J,translation:at,rotation:Z,scale:tt}=f[0];z({origin:J,translation:at,rotation:Z,scale:tt})}),qc=Pt();G(t,qc,f=>n(381,go=f));let jc,Yc=[];const Vm=Pt(),Xp=Pt(),mv=ke([ms,Xp,Zi,Cm],([f,z,J,at])=>f||(z||J<1?at:1)),Hm={...Ei,imageFile:sp,imageSize:pa,mediaDuration:lp,mediaMinDuration:UE,mediaMaxDuration:dp,mediaTrim:cp,imageBackgroundColor:Cc,imageBackgroundImage:dm,imageCropAspectRatio:Rc,imageCropMinSize:VE,imageCropMaxSize:HE,imageCropLimitToImage:pp,imageCropRect:xi,imageCropRectOrigin:qE,imageCropRectSnapshot:pl,imageCropRectAspectRatio:jE,imageCropRange:WE,imageRotation:cs,imageRotationRange:YE,imageFlipX:Sc,imageFlipY:Mc,imageOutputSize:XE,imageColorMatrix:um,imageConvolutionMatrix:pm,imageGamma:hm,imageVignette:mm,imageNoise:fm,imageManipulation:fp,imageDecoration:hp,imageAnnotation:mp,imageRedaction:gp,imageFrame:ha,imagePreview:Wp,imagePreviewSource:yl,imageTransforms:Hc,imagePreviewModifiers:qp,history:ki,animation:kc,pixelRatio:Yp,elasticityMultiplier:sa,scrollElasticity:Lh,rangeInputElasticity:5,redrawTrigger:ls,pointerAccuracy:Lc,pointerHoverable:Dc,env:bl,rootRect:ds,stageRect:Di,stageRectBase:Pp,stageRecenter:Mm,stageScalar:Zi,stagePadding:ps,stagePadded:hs,presentationScalar:Uc,imagePreviewUpscale:Xp,utilRect:ma,utilRectPadded:JE,allowPlayPause:Zu,allowPan:$p,allowZoom:bp,allowZoomControls:Ep,enableZoomInput:vp,enablePanInput:Pc,enablePanInputStatus:xp,imageSelectionMultiTouching:Vm,rootBackgroundColor:ll,rootForegroundColor:Oc,rootLineColor:cl,rootColorSecondary:xm,imageOutlineOpacity:Np,utilTools:qc,imageSelectionPan:fs,imageSelectionZoom:ms,imageSelectionZoomCurrent:mv,imageSelectionStageFitScalar:Cm,imageSelectionStoredState:_m,imageOverlayMarkup:fl,interfaceImages:Vc,isInteracting:ul,isTransformingImage:Im,isInteractingFraction:Sp,imageCropRectIntent:Cp,imageCropRectPresentation:Tm,imageSelectionRect:ti,imageSelectionRectIntent:_p,imageSelectionRectPresentation:zc,imageSelectionRectSnapshot:Nc,imageScalar:km,imageTransformsInterpolated:hv,imageEffects:Nm};delete Hm.image;const fv="util-"+Ua();let Zp=[];const Wm=f=>_.find(([z])=>f===z);let Ki=[],qm=ci();const jm=(f,z,J)=>{let at=Se.getPropertyValue(f);at=J?J(at):/^[0-9]+$/.test(at)?parseFloat(at):void 0,z.set(at,{hard:!Ke})},ga=(f,z,J=!1)=>{const at=(Z=>{const tt=Se.getPropertyValue(Z);return A0(tt)})(f);at&&at[3]!==0&&(J||(at.length=3),z.set(at,{hard:!Ke}))},Kp=Pt();G(t,Kp,f=>n(88,Ne=f));const Qp=Pt();G(t,Qp,f=>n(89,Ge=f));const Jp=Pt();G(t,Jp,f=>n(90,bn=f));const Xc=_e(0,{damping:.9});G(t,Xc,f=>n(91,Rn=f));const Ym=()=>{ga("color",Oc),ga(bc?"--color-background":"background-color",ll),ga("outline-color",cl),ga("--color-primary",Ip),ga("--color-secondary",xm),ga("--grid-color-even",Qp,!0),ga("--grid-color-odd",Jp,!0),jm("--grid-size",Kp),jm("--editor-inset-top",Rp,f=>parseInt(f,10))},Xm=ke([Hc,Nm,Cc,ZE],([f,z,J,at])=>f&&{...f,...z,backgroundColor:J,backgroundImage:at});G(t,Xm,f=>n(376,ho=f));const gv=()=>{const f=ei.length?void 0:{resize:1.05},z=((J,at,Z={})=>{const{resize:tt=1,opacity:bt=0}=Z,ee={opacity:[_e(bt,{...Ia,stiffness:.1}),xn],resize:[_e(tt,{...Ia,stiffness:.1}),xn],translation:[_e(void 0,Ia),xn],rotation:[_e(void 0,Cd),xn],origin:[_e(void 0,Ia),xn],scale:[_e(void 0,Cd),xn],gamma:[_e(void 0,Cd),en=>en||1],vignette:[_e(void 0,Cd),en=>en||0],colorMatrix:[_e([...d2],Ia),en=>en||[...d2]],convolutionMatrix:[Pt(void 0),en=>en&&en.clarity||void 0],backgroundColor:[_e(void 0,Ia),(en,Cn,Wr)=>{if(Array.isArray(en)){if(Array.isArray(Cn)){const We=[...en];Cn[3]===0?(We[3]=0,Wr(We)):We[3]===0&&((en=[...Cn])[3]=0)}return en}}],backgroundImage:[Pt(void 0),xn]},ne=Object.entries(ee).map(([en,Cn])=>[en,Cn[0]]),Rt=ne.map(([,en])=>en),De=Object.entries(ee).reduce((en,[Cn,Wr])=>{const[We,ni]=Wr;return en[Cn]=($a,$s)=>We.set(ni($a,En[Cn],c1=>{We.set(c1,{hard:!0})}),$s),en},{});let En;const tr=ke(Rt,en=>(En=en.reduce((Cn,Wr,We)=>(Cn[ne[We][0]]=Wr,Cn),{}),En.data=J,En.size=at,En.scale*=en[1],En));return tr.get=()=>En,tr.set=(en,Cn)=>{const Wr={hard:!Cn};Object.entries(en).forEach(([We,ni])=>{De[We]&&De[We](ni,Wr)})},tr})(Mt,te,f);ei.unshift(z),Zm(ho)},Zm=f=>{ei.forEach((z,J)=>{const at=J===0?1:0;z.set({...f,opacity:at,resize:1},mo)})};let Zc;const El=T0(void 0,{duration:500});let t1;G(t,El,f=>n(55,po=f));const Kc=Pt(!1);let Qi;G(t,Kc,f=>n(371,pc=f));const Qc=_e(void 0,{stiffness:.1,damping:.7,precision:.25});G(t,Qc,f=>n(83,Oe=f));const Jc=_e(0,{stiffness:.1,precision:.05});G(t,Jc,f=>n(84,Qe=f));const vl=_e(0,{stiffness:.02,damping:.5,precision:.25});G(t,vl,f=>n(369,Wn=f));const e1=_e(void 0,{stiffness:.02,damping:.5,precision:.25});G(t,e1,f=>n(370,ja=f));const td=_e(void 0,{stiffness:.02,damping:.5,precision:.25});let ed;G(t,td,f=>n(368,js=f));const yv=()=>{lr("abortLoadImage")},$v=()=>{lr("abortProcessImage"),ut(_o,ar=!1,ar)},Km=f=>{f.target&&f.target.dataset.touchScroll==="true"||f.preventDefault()},bv=Gm?f=>{const z=f.touches?f.touches[0]:f;z.pageX>20&&z.pageX<window.innerWidth-20||Km(f)}:be,ya=Pt([]);G(t,ya,f=>n(463,Fr=f)),qr("keysPressed",ya);const n1=f=>{!f||Jd(f)&&!(z=>/^image/.test(z.type)&&!/svg/.test(z.type))(f)||!Jd(f)&&!/^http/.test(f)||lr("loadImage",f)},Ev=f=>{f&&n1(f)};let ys,wl,r1=[];const Qm=Pt();qr("rootPortal",Qm),qr("rootRect",ds);const Jm=()=>({foregroundColor:[...Fn],lineColor:[...ir],utilVisibility:{...k},isInteracting:Jn,isInteractingFraction:kn,rootRect:Re(ie),stageRect:Re(xt),manipulationShapesDirty:sd,annotationShapesDirty:rd,decorationShapesDirty:od,frameShapesDirty:ad}),tf=(f,z,J)=>Do(f,fr(Math.round(z.width/J),Math.round(z.height/J))),ef=(f,z,J)=>{var at;return f._translate=ht((at=z).x,at.y),f._scale=J,f},nd=f=>{const z=[];return f.forEach(J=>z.push(vv(J))),z.filter(Boolean)},vv=f=>Ws(f)?(f.points=[ht(f.x1,f.y1),ht(f.x2,f.y2)],f):(!(z=>Va(z)&&!z.text.length)(f)||f.backgroundColor&&f.backgroundColor[3]!==0||(xb(f)&&(f.width=5,f.height=f.lineHeight),f.strokeWidth=1,f.strokeColor=[1,1,1,.5],f.backgroundColor=[0,0,0,.1]),f);let nf,i1=[],o1=[],a1=[],s1=[],l1=[],rf={};const of=(f,z,J,at,Z,tt,bt)=>{const{manipulationShapesDirty:ee,annotationShapesDirty:ne,decorationShapesDirty:Rt,frameShapesDirty:De,selectionRect:En,scale:tr}=f,en=nf!==tr,Cn=en||!li(rf,En);Cn&&(nf=tr,rf=En),ee&&(a1=z.filter(bd).map(Ta).map(We=>Do(We,te))),(ne||J!==hn)&&(i1=J.filter(bd).map(Ta).sort((We,ni)=>We.alwaysOnTop?1:ni.alwaysOnTop?-1:0).map(We=>Do(We,te))),(en||id||ne||J!==hn)&&(o1=nd(i1.map(We=>m(We,{flipX:ln,flipY:Ue,rotation:Mn,scale:tr,context:rr(te)})).flat())),(Rt||at!==Gt||Cn)&&(s1=nd(at.filter(bd).map(Ta).sort((We,ni)=>We.alwaysOnTop?1:ni.alwaysOnTop?-1:0).map(We=>tf(We,En,tr)).map(We=>m(We,{context:En})).flat().map(We=>ef(We,En,tr)))),(De||tt!==Te||Cn)&&(l1=tt?nd([tt].map(Ta).map(We=>tf(We,En,tr)).map(m).flat().map(We=>ef(We,En,tr))):[]);let Wr=nd(Z.filter(bd));return typeof window<"u"&&(We=>{if(We&&We._9xhda1o)return;const[ni]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map($a=>$a.map($s=>String.fromCharCode($s)).join(""));Wr=[...Wr,{x:En.x+.5*En.width-82,y:En.y+En.height-16-12,width:164,height:16,text:ni,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{manipulationShapesDirty:ee,manipulationShapes:a1,annotationShapesDirty:ne,annotationShapes:o1,decorationShapesDirty:Rt,decorationShapes:s1,frameShapesDirty:De,frameShapes:l1,interfaceShapes:Wr,selectionShapes:bt.map(Ta).map(We=>Do(We,te))}};let rd=!0,id=!0,od=!0,ad=!0,sd=!0;return gi(()=>{da(),Mt&&pn(Mt.src)&&/^blob:/.test(Mt.src)&&URL.revokeObjectURL(Mt.src),KE(),nv(),ev(),rv(),iv(),ov(),av(),cv(),pv(),Lc.destroy(),Dc.destroy(),ap.destroy(),ei.clear(),i1.length=0,o1.length=0,a1.length=0,s1.length=0,l1.length=0;try{n(228,$l=void 0),n(283,Zc=void 0)}catch{}}),t.$$set=f=>{"class"in f&&n(229,Rr=f.class),"layout"in f&&n(230,un=f.layout),"stores"in f&&n(231,Ei=f.stores),"locale"in f&&n(3,an=f.locale),"id"in f&&n(4,vi=f.id),"util"in f&&n(232,is=f.util),"utils"in f&&n(233,xu=f.utils),"animations"in f&&n(234,os=f.animations),"disabled"in f&&n(235,rl=f.disabled),"status"in f&&n(227,wi=f.status),"previewUpscale"in f&&n(236,hc=f.previewUpscale),"previewPad"in f&&n(237,Iu=f.previewPad),"previewMaskOpacity"in f&&n(5,F0=f.previewMaskOpacity),"previewImageDataMaxSize"in f&&n(238,mc=f.previewImageDataMaxSize),"previewImageTextPixelRatio"in f&&n(6,B0=f.previewImageTextPixelRatio),"markupMaskOpacity"in f&&n(7,N0=f.markupMaskOpacity),"zoomMaskOpacity"in f&&n(239,Tu=f.zoomMaskOpacity),"elasticityMultiplier"in f&&n(8,sa=f.elasticityMultiplier),"willRevert"in f&&n(240,Ru=f.willRevert),"willProcessImage"in f&&n(241,Su=f.willProcessImage),"willRenderCanvas"in f&&n(9,Mu=f.willRenderCanvas),"willRenderToolbar"in f&&n(242,Cu=f.willRenderToolbar),"willSetHistoryInitialState"in f&&n(243,_u=f.willSetHistoryInitialState),"enableButtonExport"in f&&n(244,Pu=f.enableButtonExport),"enableButtonRevert"in f&&n(245,Au=f.enableButtonRevert),"enableNavigateHistory"in f&&n(246,Ou=f.enableNavigateHistory),"enableToolbar"in f&&n(10,fc=f.enableToolbar),"enableUtils"in f&&n(247,Lu=f.enableUtils),"enableButtonClose"in f&&n(248,Du=f.enableButtonClose),"enableDropImage"in f&&n(249,ku=f.enableDropImage),"enablePasteImage"in f&&n(250,Fu=f.enablePasteImage),"enableBrowseImage"in f&&n(251,Bu=f.enableBrowseImage),"enableTransparencyGrid"in f&&n(11,G0=f.enableTransparencyGrid),"layoutDirectionPreference"in f&&n(252,Nu=f.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in f&&n(253,Gu=f.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in f&&n(254,zu=f.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in f&&n(255,gc=f.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in f&&n(256,Uu=f.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in f&&n(257,Vu=f.layoutVerticalControlTabsPreference),"textDirection"in f&&n(12,z0=f.textDirection),"markupEditorZoomLevel"in f&&n(258,yc=f.markupEditorZoomLevel),"markupEditorZoomLevels"in f&&n(13,U0=f.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in f&&n(14,V0=f.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in f&&n(15,H0=f.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in f&&n(16,W0=f.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in f&&n(259,Hu=f.markupEditorInteractionMode),"muteAudio"in f&&n(260,$c=f.muteAudio),"willSetMediaInitialTimeOffset"in f&&n(261,Wu=f.willSetMediaInitialTimeOffset),"enablePan"in f&&n(17,q0=f.enablePan),"enableZoom"in f&&n(18,j0=f.enableZoom),"enableZoomControls"in f&&n(262,qu=f.enableZoomControls),"enableZoomInput"in f&&n(19,Y0=f.enableZoomInput),"enablePanInput"in f&&n(263,ju=f.enablePanInput),"enableCanvasAlpha"in f&&n(20,bc=f.enableCanvasAlpha),"enablePanLimit"in f&&n(21,X0=f.enablePanLimit),"panLimitGutterScalar"in f&&n(22,Z0=f.panLimitGutterScalar),"zoomPresetOptions"in f&&n(23,K0=f.zoomPresetOptions),"zoomAdjustStep"in f&&n(24,Q0=f.zoomAdjustStep),"zoomAdjustFactor"in f&&n(25,J0=f.zoomAdjustFactor),"zoomAdjustWheelFactor"in f&&n(26,tm=f.zoomAdjustWheelFactor),"zoomLevel"in f&&n(0,la=f.zoomLevel),"imagePreviewSrc"in f&&n(266,Yu=f.imagePreviewSrc),"imageOrienter"in f&&n(267,Ec=f.imageOrienter),"pluginComponents"in f&&n(268,as=f.pluginComponents),"pluginOptions"in f&&n(27,ca=f.pluginOptions),"root"in f&&n(2,Nn=f.root),"imageSourceToImageData"in f&&n(28,op=f.imageSourceToImageData),"imagePreviewCurrent"in f&&n(228,$l=f.imagePreviewCurrent)},t.$$.update=()=>{if(1&t.$$.dirty[0]|1024&t.$$.dirty[8]&&n(0,la=la===null?yc:la),2&t.$$.dirty[0]|1048576&t.$$.dirty[8]){let Z=!1;as.forEach(([tt])=>{Hr[tt]||(n(1,Hr[tt]={},Hr),Z=!0)}),Z&&n(280,al=[...as])}var f,z,J,at;if(8&t.$$.dirty[0]|65536&t.$$.dirty[7]|2&t.$$.dirty[9]&&n(335,O=an&&al.length?xu||al.map(([Z])=>Z):[]),134217728&t.$$.dirty[0]|2&t.$$.dirty[9]|33554432&t.$$.dirty[10]|1024&t.$$.dirty[12]&&n(336,_=((Z,tt,bt,ee)=>{const ne=tt.filter(([Rt])=>Z.includes(Rt)).filter(([Rt,{isSupported:De}])=>De({...ee,...bt[Rt]})).map(([Rt,De])=>[Rt,De.Component]);return Ko(ne,Zp,(Rt,De)=>Rt[0]===De[0]&&Rt[1]===De[1])?Zp:(Zp=ne,ne)})(O,al,ca,{src:Ur})),67108864&t.$$.dirty[10]&&n(291,P=_.length),8&t.$$.dirty[0]|4096&t.$$.dirty[9]|33554432&t.$$.dirty[10]&&n(47,U=P&&O.map(Z=>{const tt=Wm(Z);if(tt)return{id:Z,view:tt[1],tabIcon:an[Z+"Icon"],tabLabel:an[Z+"Label"]}}).filter(Boolean)||[]),65536&t.$$.dirty[1]&&n(353,r=!!U.find(Z=>Z.id==="trim")),12288&t.$$.dirty[11]|32&t.$$.dirty[13]&&n(290,i=!!(jt&&Mt&&r)),32768&t.$$.dirty[7]|4096&t.$$.dirty[9]&&n(44,X=P&&is&&typeof is=="string"&&Wm(is)?is:P>0?_[0][0]:void 0),8192&t.$$.dirty[1]|2048&t.$$.dirty[9]&&i&&X&&da(),2048&t.$$.dirty[9]|8192&t.$$.dirty[11]&&(i?(Mt.addEventListener("play",vc),Mt.addEventListener("pause",vc)):Mt&&Mt.nodeName==="video"&&(Mt.removeEventListener("play",vc),Mt.removeEventListener("pause",vc))),2048&t.$$.dirty[9]&&i&&Mo.set(wc()/ua()),24&t.$$.dirty[13]&&(Z=>{if(!ss())return;const tt=Date.now();if(Ku&&tt-Ku<16)return;Ku=tt;const bt=jt*Z;if(bt.toFixed(1)===rm)return;rm=bt.toFixed(1);const ee=Mt,ne=()=>{ee.removeEventListener("seeked",ne),Xu()};ee.addEventListener("seeked",ne),((Rt,De)=>{Rt.fastSeek&&Rt.fastSeek(De),Rt.currentTime=De})(ee,bt)})(bi||R),16&t.$$.dirty[13]&&n(351,o=R&&de(R,6)),97&t.$$.dirty[13]&&n(349,a=Oi||[[0,Math.min(jt,Jt)/jt]]),256&t.$$.dirty[11]&&(s=a[0][0]),256&t.$$.dirty[11]&&(l=a[a.length-1][1]),256&t.$$.dirty[11]&&n(352,c=a.map(([Z,tt])=>[de(Z,6),de(tt,6)])),3072&t.$$.dirty[11]&&n(350,d=c.findIndex(([Z,tt])=>o>=Z&&o<=tt)),3584&t.$$.dirty[11]&&(u=d===-1&&c.findIndex((Z,tt,bt)=>{const ee=bt[tt-1];return ee?o<=Z[0]&&o>=ee[1]:o<=Z[0]})),4096&t.$$.dirty[8]&&ol.set($c),8192&t.$$.dirty[11]|4&t.$$.dirty[13]&&(Mt&&Li?np():rp()),8192&t.$$.dirty[11]|2&t.$$.dirty[13]&&Mt&&(Z=>{i&&(Mt.volume=Math.min(1,Z))})(Ro),256&t.$$.dirty[0]&&ut(Ic,es=sa,es),8192&t.$$.dirty[7]&&n(345,p=un==="overlay"),1073741824&t.$$.dirty[7]|16&t.$$.dirty[11]&&n(45,h=Lu&&!p),134217730&t.$$.dirty[0]&&ca&&Object.entries(ca).forEach(([Z,tt])=>{Object.entries(tt).forEach(([bt,ee])=>{Hr[Z]&&n(1,Hr[Z][bt]=ee,Hr)})}),262144&t.$$.dirty[7]&&ip.set(rl?1:0),2097152&t.$$.dirty[7]&&(g=mc?(f=mc,z=sm,fr(Math.min(f.width,z.width),Math.min(f.height,z.height))):sm),1073741824&t.$$.dirty[12]&&ap.update(ts[0]),536870912&t.$$.dirty[12]&&(m=aa?(Z,tt)=>aa(Z,{flipX:void 0,flipY:void 0,rotation:void 0,...tt,isPreview:!0}):xn),536870912&t.$$.dirty[1]&&Array.isArray(To)&&lr("selectionchange",[...To]),16384&t.$$.dirty[8]|268435456&t.$$.dirty[12]&&wp.set(oa&&qu),34816&t.$$.dirty[8]&&Ac.set(Hu==="pan"||ju),2097152&t.$$.dirty[1]&&ur&&ds.set(nr(ur.x,ur.y,ur.width,ur.height)),262160&t.$$.dirty[11]|4&t.$$.dirty[12]&&ie&&p&&gn&&gn.complete&&(()=>{const Z=Ja,tt=Gn(ie);Z&&Z===tt||(Rc.set(Gn(ie)),Um())})(),33554432&t.$$.dirty[10]&&n(46,$t=O.length>1),32768&t.$$.dirty[1]&&($t||us.set(Go())),1024&t.$$.dirty[0]|134217728&t.$$.dirty[12]&&(fc||dl.set(nr(0,na,0,0))),524352&t.$$.dirty[11]&&n(348,b=!Jn&&$),67108864&t.$$.dirty[12]&&n(346,E=!Qa),2097152&t.$$.dirty[1]&&n(292,Be=ur&&ur.width>0&&ur.height>0),8&t.$$.dirty[0]|12288&t.$$.dirty[9]&&n(41,ge=Be&&an&&!!P),1024&t.$$.dirty[1]&&setTimeout(()=>n(281,Mp=ge),1),131072&t.$$.dirty[7]|4&t.$$.dirty[9]|160&t.$$.dirty[11]&&ut(kc,mo=os==="always"?b:os!=="never"&&b&&Mp&&E,mo),131072&t.$$.dirty[7]|96&t.$$.dirty[11]&&ut(Fc,Ke=os==="always"?$:os!=="never"&&$&&E,Ke),524288&t.$$.dirty[7]|16&t.$$.dirty[11]&&Bc.set(hc||p),1048576&t.$$.dirty[7]&&Gc.set(Iu),4&t.$$.dirty[0]|41943040&t.$$.dirty[12]&&Nn&&(Nn.dispatchEvent(wa("markupzoom",$i)),Nn.dispatchEvent(wa("zoom",qe($i)?$i:Qr))),4&t.$$.dirty[0]|16777216&t.$$.dirty[12]&&Nn&&(Nn.dispatchEvent(wa("markuppan",ji)),Nn.dispatchEvent(wa("pan",ji))),2097152&t.$$.dirty[12]&&$r&&Pm(),4194304&t.$$.dirty[12]&&Jo&&Dp(),8396800&t.$$.dirty[1]&&X&&Np.set(.075,{hard:!Ke}),4194304&t.$$.dirty[7]&&n(343,v=Tu),1572864&t.$$.dirty[12]&&n(344,w=wo?-Math.max(...Object.values(vo)):0),277872640&t.$$.dirty[1]|12&t.$$.dirty[11]&&pr){let Z=pr.x-xt.x,tt=xt.x+xt.width-(pr.x+pr.width),bt=pr.y-xt.y,ee=xt.y+xt.height-(pr.y+pr.height),ne=Math.min(Z,bt,tt,ee);Gp.set(ne>w?0:Math.min(v,Math.abs(ne/64)),{hard:!Ke})}if(134217728&t.$$.dirty[1]&&n(342,T=.55/qi),9437184&t.$$.dirty[1]|2&t.$$.dirty[11]&&xt&&zp.set({x:0,y:xt.y,width:xt.x<64?0:xt.x,height:xt.height+T},{hard:!Ke}),9437184&t.$$.dirty[1]|262146&t.$$.dirty[11]&&xt&&Up.set({x:0,y:0,width:ie.width,height:xt.y+T},{hard:!Ke}),9437184&t.$$.dirty[1]|262146&t.$$.dirty[11]&&xt){let Z=xt.x+xt.width,tt=ie.width-(xt.x+xt.width);tt<64&&(Z+=tt,tt=0),Vp.set({x:Z,y:xt.y,width:tt,height:xt.height+T},{hard:!Ke})}if(9437184&t.$$.dirty[1]|262144&t.$$.dirty[11]&&xt&&Hp.set({x:0,y:xt.y+xt.height,width:ie.width,height:ie.height-(xt.y+xt.height)},{hard:!Ke}),67108864&t.$$.dirty[1]|294912&t.$$.dirty[12]&&n(338,M=Eo&&{id:"stage-overlay",backgroundColor:yi,opacity:Vr,...Eo}),67108864&t.$$.dirty[1]|163840&t.$$.dirty[12]&&n(341,A=bo&&{id:"stage-overlay",backgroundColor:yi,opacity:Vr,...bo}),67108864&t.$$.dirty[1]|98304&t.$$.dirty[12]&&n(340,x=Ir&&{id:"stage-overlay",backgroundColor:yi,opacity:Vr,...Ir}),67108864&t.$$.dirty[1]|49152&t.$$.dirty[12]&&n(339,C=$o&&{id:"stage-overlay",backgroundColor:yi,opacity:Vr,...$o}),1879048192&t.$$.dirty[10]|1&t.$$.dirty[11]&&n(337,H=[A,x,C,M].filter(Boolean)),134217728&t.$$.dirty[10]|8192&t.$$.dirty[12]&&H&&yo&&fl.update(Z=>[...Z.filter(tt=>tt.id!=="stage-overlay"),...H]),262144&t.$$.dirty[8]|1024&t.$$.dirty[12]&&yl.set(Yu||Ur||void 0),4&t.$$.dirty[0]|2048&t.$$.dirty[7]|8192&t.$$.dirty[11]&&(n(228,$l=Mt),Mt&&Nn.dispatchEvent(wa("loadpreview",$l))),8&t.$$.dirty[12]&&Ya&&(fs.set(yn()),ms.set(void 0),Pm(),Vc.set([])),4096&t.$$.dirty[12]&&n(296,y=Pi.index>0),4096&t.$$.dirty[12]&&n(295,L=Pi.index<Pi.length-1),8&t.$$.dirty[1]&&Vm.set(jc),2048&t.$$.dirty[12]&&Xp.set(Za),8192&t.$$.dirty[1]&&QE.set(X),65664&t.$$.dirty[1]&&n(38,k=U.reduce((Z,tt)=>(Z[tt.id]=k&&k[tt.id]||0,Z),{})),8192&t.$$.dirty[1]&&n(80,F={name:fv,selected:X}),65536&t.$$.dirty[1]&&n(79,Q=U.map(Z=>({id:Z.id,icon:Z.tabIcon,label:Z.tabLabel}))),65536&t.$$.dirty[1]&&n(78,rt=U.map(Z=>Z.id)),4096&t.$$.dirty[7]&&n(77,V=he(["PinturaRoot","PinturaRootComponent",Rr])),262144&t.$$.dirty[11]&&n(331,Y=ie&&(ie.width>1e3?"wide":ie.width<600?"narrow":void 0)),262144&t.$$.dirty[11]&&n(318,q=ie&&(ie.width<=320||ie.height<=460)),262144&t.$$.dirty[11]&&n(330,et=ie&&(ie.height>1e3?"tall":ie.height<600?"short":void 0)),4&t.$$.dirty[0]&&n(298,D=Nn&&Nn.parentNode&&Nn.parentNode.classList.contains("PinturaModal")),1&t.$$.dirty[1]|524288&t.$$.dirty[9]|262144&t.$$.dirty[11]&&n(323,ot=D&&ie&&Wc>ie.width),2&t.$$.dirty[1]|524288&t.$$.dirty[9]|262144&t.$$.dirty[11]&&n(322,st=D&&ie&&jp>ie.height),12288&t.$$.dirty[10]&&n(324,gt=ot&&st),1048576&t.$$.dirty[0]&&n(321,Lt=bc),2097152&t.$$.dirty[10]&&n(293,Xt=Y==="narrow"),16&t.$$.dirty[8]|262144&t.$$.dirty[11]&&n(332,(J=ie,at=Nu,Ct=ie?at==="auto"?J.width>J.height?"landscape":"portrait":at==="horizontal"?J.width<500?"portrait":"landscape":at==="vertical"?J.height<400?"landscape":"portrait":void 0:"landscape")),4194304&t.$$.dirty[10]&&n(76,Ut=Ct==="landscape"),16384&t.$$.dirty[9]|1048576&t.$$.dirty[10]&&n(320,Le=Xt||et==="short"),1&t.$$.dirty[1]|262144&t.$$.dirty[11]&&n(319,mt=qm&&ie&&Wc===ie.width&&!Gm),4&t.$$.dirty[1]|512&t.$$.dirty[12]&&n(294,pt=[...go||[],...Yc].filter(Boolean)),32&t.$$.dirty[8]&&n(329,It="has-navigation-preference-"+Gu),64&t.$$.dirty[8]&&n(328,At="has-navigation-preference-"+zu),128&t.$$.dirty[8]&&n(325,Tt="has-toolbar-preference-"+gc),256&t.$$.dirty[8]&&n(327,le="has-controlgroups-preference-"+Uu),512&t.$$.dirty[8]&&n(326,oe="has-controltabs-preference-"+Vu),262144&t.$$.dirty[11]&&n(334,Zt=ie!==void 0&&ie.width>0&&ie.height>0),4&t.$$.dirty[0]|16777216&t.$$.dirty[10]&&n(333,Se=Zt&&Nn&&getComputedStyle(Nn)),8388608&t.$$.dirty[10]&&Se&&Ym(),1024&t.$$.dirty[0]|8437760&t.$$.dirty[1]|270336&t.$$.dirty[7]|524288&t.$$.dirty[9]|8388352&t.$$.dirty[10]|33554432&t.$$.dirty[11]|384&t.$$.dirty[12]&&bl.set({...uo,layoutMode:un,orientation:Ct,horizontalSpace:Y,verticalSpace:et,navigationHorizontalPreference:It,navigationVerticalPreference:At,controlGroupsVerticalPreference:le,controlTabsVerticalpreference:oe,toolbarVerticalPreference:Tt,isModal:D,isDisabled:rl,isCentered:gt,isCenteredHorizontally:ot,isCenteredVertically:st,isAnimated:Ke,isTransparent:Lt,pointerAccuracy:fo,pointerHoverable:Ys,isCompact:Le,hasSwipeNavigation:mt,hasLimitedSpace:q,hasToolbar:fc,hasNavigation:$t&&h,isIOS:qm,browserVersion:I0()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0}),33554432&t.$$.dirty[11]&&n(75,Ie=Object.entries(uo).map(([Z,tt])=>/^is|has/.test(Z)?tt?TE(Z):void 0:tt).filter(Boolean).join(" ")),8192&t.$$.dirty[1]&&X&&qc.set([]),96&t.$$.dirty[12]&&n(74,He=Wi&&Object.entries(Qo).filter(([,Z])=>Z!=null).reduce((Z,[,tt])=>Z={...Z,...tt},{})),4&t.$$.dirty[12]&&n(315,ue=gn&&gn.task==="any-to-file"),32&t.$$.dirty[10]&&ue&&ei&&ei.clear(),16&t.$$.dirty[12]&&n(317,Ce=!!ho&&!!ho.translation),16&t.$$.dirty[9]|128&t.$$.dirty[10]|8192&t.$$.dirty[11]&&Ce&&Mt&&Mt!==Zc&&(n(283,Zc=Mt),gv()),128&t.$$.dirty[10]|16&t.$$.dirty[12]&&Ce&&Zm(ho),33554432&t.$$.dirty[1]&&Xa&&Xa.length>1){let Z=[];ei.forEach((tt,bt)=>{bt!==0&&tt.get().opacity<=0&&Z.push(tt)}),Z.forEach(tt=>ei.remove(tt))}if(8&t.$$.dirty[0]|64&t.$$.dirty[10]&&n(40,ae=an&&Vt.length&&an.labelSupportError(Vt)),4&t.$$.dirty[12]&&n(307,me=gn&&!!gn.error),4&t.$$.dirty[12]&&n(43,Ze=!gn||!gn.complete&&gn.task===void 0),4&t.$$.dirty[12]&&n(308,lt=gn&&(gn.taskLengthComputable?gn.taskProgress:1/0)),32&t.$$.dirty[10]&&ue&&ut(gl,Kr=!1,Kr),8388608&t.$$.dirty[1]|32&t.$$.dirty[9]|4&t.$$.dirty[12]&&gn&&gn.complete){const Z=Ke?250:0;clearTimeout(t1),n(284,t1=setTimeout(()=>{ut(gl,Kr=!0,Kr)},Z))}if(4096&t.$$.dirty[1]|268435456&t.$$.dirty[9]|5&t.$$.dirty[12]&&n(312,Bt=gn&&!me&&!Ze&&!Kr),8&t.$$.dirty[9]|8192&t.$$.dirty[11]|8&t.$$.dirty[12]&&n(311,ye=!(!Ya||Mt&&!Co)),8388608&t.$$.dirty[1]|1&t.$$.dirty[12]&&(Kr?setTimeout(()=>Xc.set(1),Ke?500:0):Xc.set(0)),67108864&t.$$.dirty[11]|2&t.$$.dirty[12]&&n(306,se=!!(ar||sr&&sr.progress!==void 0&&!sr.complete)),134217728&t.$$.dirty[9]&&se&&da(),4096&t.$$.dirty[1]|4&t.$$.dirty[12]&&n(309,Je=gn&&!(gn.error||Ze)),8&t.$$.dirty[0]|4&t.$$.dirty[12]&&n(310,Me=an&&(gn?!gn.complete||gn.error?w0(an.statusLabelLoadImage(gn),gn.error&&gn.error.metadata,"{","}"):an.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):an.statusLabelLoadImage(gn))),8&t.$$.dirty[0]|2&t.$$.dirty[12]&&n(305,fe=sr&&an&&an.statusLabelProcessImage(sr)),2&t.$$.dirty[12]&&n(303,tn=sr&&(sr.taskLengthComputable?sr.taskProgress:1/0)),2&t.$$.dirty[12]&&n(304,W=sr&&!sr.error),2&t.$$.dirty[12]&&n(302,Dt=!(!sr||!sr.error)),8&t.$$.dirty[0]|4096&t.$$.dirty[1]|1024&t.$$.dirty[7]|2139095040&t.$$.dirty[9]|7&t.$$.dirty[10])if(wi){let Z,tt,bt,ee,ne;pn(wi)&&(Z=wi),qe(wi)?tt=wi:Array.isArray(wi)&&([Z,tt,ne]=wi,tt===!1&&(ee=!0),qe(tt)&&(bt=!0)),n(35,Qi=(Z||tt)&&{text:Z,aside:ee||bt,progressIndicator:{visible:bt,progress:tt},closeButton:ee&&{label:an.statusLabelButtonClose,icon:an.statusIconButtonClose,onclick:ne||(()=>n(227,wi=void 0))}})}else n(35,Qi=an&&Ze||me||Bt||ye?{text:Me,aside:me||Je,progressIndicator:{visible:Je,progress:lt},closeButton:me&&{label:an.statusLabelButtonClose,icon:an.statusIconButtonClose,onclick:yv}}:an&&se&&fe?{text:fe,aside:Dt||W,progressIndicator:{visible:W,progress:tn},closeButton:Dt&&{label:an.statusLabelButtonClose,icon:an.statusIconButtonClose,onclick:$v}}:void 0);if(1024&t.$$.dirty[7]&&n(314,N=wi!==void 0),8388608&t.$$.dirty[1]|524288&t.$$.dirty[9]|2&t.$$.dirty[12]&&D&&sr&&sr.complete&&(Kc.set(!0),setTimeout(()=>Kc.set(!1),Ke?100:0)),4&t.$$.dirty[0]|8192&t.$$.dirty[1]|1&t.$$.dirty[12]&&Kr&&Nn&&Nn.dispatchEvent(wa("selectutil",X)),4608&t.$$.dirty[1]|402653184&t.$$.dirty[9]|22&t.$$.dirty[10]|1073741824&t.$$.dirty[11]&&n(313,yt=pc||ae||Ze||me||Bt||ye||se||N),8&t.$$.dirty[10]&&ut(El,po=yt?1:0,po),8388608&t.$$.dirty[1]|8&t.$$.dirty[10]&&El.set(yt?1:0,{duration:Ke?500:1}),16777216&t.$$.dirty[1]&&n(42,Ot=po>0),16&t.$$.dirty[1]&&n(301,zt=!(!Qi||!Qi.aside)),8390672&t.$$.dirty[1]|4194368&t.$$.dirty[9]|536870912&t.$$.dirty[11]&&Ot&&Qi){clearTimeout(ed);const Z={hard:Ke===!1};if(zt){const tt=!!Qi.error||!Ke;Jc.set(1,Z),Qc.set(ja,{hard:tt}),n(285,ed=setTimeout(()=>{vl.set(16,Z)},1))}else Jc.set(0,Z),n(285,ed=setTimeout(()=>{vl.set(0,Z)},1))}if(2048&t.$$.dirty[1]&&(Ot||(td.set(void 0,{hard:!0}),Qc.set(void 0,{hard:!0}),vl.set(0,{hard:!0}))),268435456&t.$$.dirty[11]&&n(300,Yt=.5*Wn),2097152&t.$$.dirty[9]|134217728&t.$$.dirty[11]&&n(73,wt=`transform: translateX(${js-Yt}px)`),512&t.$$.dirty[1]|8192&t.$$.dirty[11]&&n(39,_t=Mt&&!ae),256&t.$$.dirty[1]|1572864&t.$$.dirty[9]&&n(297,re=Qt&&(_t||D)?Km:be),262144&t.$$.dirty[9]&&n(72,pe=re),262144&t.$$.dirty[9]&&n(71,Ee=re),8&t.$$.dirty[0]|4194304&t.$$.dirty[1]|973078528&t.$$.dirty[7]|1&t.$$.dirty[8]|245760&t.$$.dirty[9]|33554432&t.$$.dirty[11]&&n(70,$e=an&&or&&M4(()=>Cu([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[Du&&["Button","close",{label:an.labelClose,icon:an.iconButtonClose,onclick:()=>lr("close"),hideLabel:!0}],Au&&["Button","revert",{label:an.labelButtonRevert,icon:an.iconButtonRevert,disabled:!y,onclick:dv,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[Ou&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:an.labelButtonUndo,icon:an.iconButtonUndo,disabled:!y,onclick:ki.undo,hideLabel:!0}],["Button","redo",{label:an.labelButtonRedo,icon:an.iconButtonRedo,disabled:!L,onclick:ki.redo,hideLabel:!0}]]],pt.length&&["div","plugin-tools",{class:"PinturaNavSet"},pt.filter(Boolean).map(([Z,tt,bt])=>[Z,tt,{...bt}])]]],["div","gamma",{class:"PinturaNavGroup"},[Pu&&["Button","export",{label:an.labelButtonExport,icon:Xt&&an.iconButtonExport,class:"PinturaButtonExport",onclick:uv,hideLabel:Xt}]]]],{...uo},()=>ls.set({})))),2097152&t.$$.dirty[11]&&n(289,St=wn&&!!wn.length),1024&t.$$.dirty[9]|2113536&t.$$.dirty[11]&&n(288,kt=St&&Lb(te,wn)),1536&t.$$.dirty[9]|25174016&t.$$.dirty[11]&&St&&((Z,tt,bt,ee)=>{if(!tt)return;const ne={dataSizeScalar:bt};ee&&ee[3]>0&&(ne.backgroundColor=[...ee]),tt(Z,ne).then(Rt=>{ys&&_n(ys),n(286,ys=Rt)})})(Mt,Hi,kt,kr),128&t.$$.dirty[9]|6307840&t.$$.dirty[11]&&wn&&ys&&te){const{width:Z,height:tt}=te,bt=oo()?"pixelated":xr==="auto"?"auto":"pixelated";n(287,r1=wn.map(ee=>{const ne=nr(ee.x,ee.y,ee.width,ee.height),Rt=Bi(Re(ne),ee.rotation).map(De=>ht(De.x/Z,De.y/tt));return{...ee,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:ys,backgroundImageRendering:bt,backgroundCorners:Rt}}))}256&t.$$.dirty[9]|1048576&t.$$.dirty[11]&&n(37,K=[...r1,...Bn||[]]),32&t.$$.dirty[1]&&wl&&Qm.set(wl),4&t.$$.dirty[0]|256&t.$$.dirty[1]&&_t&&Nn.dispatchEvent(wa("ready")),524288&t.$$.dirty[1]&&n(64,rd=!0),245760&t.$$.dirty[11]&&n(65,id=!0),262144&t.$$.dirty[1]&&n(66,od=!0),131072&t.$$.dirty[1]&&n(67,ad=!0),64&t.$$.dirty[1]&&n(68,sd=!0)},n(347,$=!R0()),S=Fl()===1?f=>{f&&(zi(f.origin,Math.round),zi(f.translation,Math.round))}:xn,n(316,Vt=[!T4()&&"WebGL"].filter(Boolean)),n(299,Qt=ci()||hu()&&Gi()),n(69,Nt=((f,z=!0)=>J=>{J.type==="ping"&&(z&&J.stopPropagation(),f(J.detail.type,J.detail.data))})(Xi.pub)),[la,Hr,Nn,an,vi,F0,B0,N0,sa,Mu,fc,G0,z0,U0,V0,H0,W0,q0,j0,Y0,bc,X0,Z0,K0,Q0,J0,tm,ca,op,Wp,ki,Wc,jp,Yc,jc,Qi,wl,K,k,_t,ae,ge,Ot,Ze,X,h,$t,U,Te,Gt,hn,xt,ur,or,Ke,po,Xa,yi,qi,pr,To,Er,Tr,Ki,rd,id,od,ad,sd,Nt,$e,Ee,pe,wt,He,Ie,Ut,V,rt,Q,F,Ai,Jr,Oe,Qe,Ve,ce,ve,Ne,Ge,bn,Rn,mn,In,Ae,br,Yi,Qs,Js,tl,el,ns,rs,Zu,il,Mo,ol,ls,Ic,ip,sp,pa,lp,cp,cm,dp,Tc,up,Rc,pp,xi,cs,Sc,Mc,Cc,hp,mp,fp,gp,ha,yp,_c,ym,$m,bm,Em,vm,wm,$p,bp,Ep,Pc,vp,wp,Ac,xp,ll,Oc,cl,Ip,Tp,ds,us,Rp,dl,ma,Lc,Dc,ul,Sp,kc,Fc,Bc,fa,pl,Cp,ti,Nc,_p,Rm,ps,hs,Di,Ap,Zi,ms,Op,ml,fs,zc,Lp,Am,Uc,fl,Bm,Gp,zp,Up,Vp,Hp,gl,yl,qp,Vc,Hc,bl,Yp,_o,ei,qc,Hm,Kp,Qp,Jp,Xc,({target:f,propertyName:z})=>{f===Nn&&/background|outline/.test(z)&&Se&&Ym()},Xm,El,Kc,Qc,Jc,vl,e1,td,f=>{const z=!(!Qi||!Qi.closeButton)||!Ke;e1.set(f.detail.width,{hard:z}),td.set(Math.round(.5*-f.detail.width),{hard:z})},bv,ya,f=>{const{keyCode:z,metaKey:J,ctrlKey:at,shiftKey:Z}=f;if(z===9&&rl)return void f.preventDefault();if(f.target&&z===32&&Nn.contains(f.target)&&!Bs(f.target)&&(co&&i&&ep(),f.preventDefault()),z===90&&(J||at))return void(Z&&J?ki.redo():ki.undo());if(z===89&&at)return void ki.redo();if(z===229)return;const tt=new Set([...Fr,z]);ya.set(Array.from(tt))},({key:f,keyCode:z})=>{if(f==="Meta")return ya.set([]);ya.set(Fr.filter(J=>J!==z))},()=>{ya.set([])},f=>{Bs(f.target)||f.preventDefault()},f=>{ku&&n1(f.detail.resources[0])},()=>{Bu&&S4().then(Ev)},f=>{if(!Fu)return;const z=rn((window.innerWidth-Math.abs(ie.x))/ie.width,0,1),J=rn((window.innerHeight-Math.abs(ie.y))/ie.height,0,1);z<.75&&J<.75||n1((f.clipboardData||window.clipboardData).files[0])},Jm,of,f=>{Ft&&li(f.detail,Ft)||ut(ma,Ft=f.detail,Ft)},wi,$l,Rr,un,Ei,is,xu,os,rl,hc,Iu,mc,Tu,Ru,Su,Cu,_u,Pu,Au,Ou,Lu,Du,ku,Fu,Bu,Nu,Gu,zu,gc,Uu,Vu,yc,Hu,$c,Wu,qu,ju,()=>n(61,Er=void 0),(f,z,J)=>{const{text:at="",placeholder:Z="",autoClose:tt=!0,align:bt="top",justify:ee="center",buttonConfirm:ne,buttonCancel:Rt}=J;n(61,Er={align:bt,justify:ee,text:at,placeholder:Z,buttonConfirm:ne,buttonCancel:Rt,onconfirm:()=>{f(Tr.value),tt&&n(61,Er=void 0)},oncancel:()=>{z(void 0),n(61,Er=void 0)}})},Yu,Ec,as,GE,tp,da,ss,ep,np,rp,om,ua,wc,xc,al,Mp,Co,Zc,t1,ed,ys,r1,kt,St,i,P,Be,Xt,pt,L,y,re,D,Qt,Yt,zt,Dt,tn,W,fe,se,me,lt,Je,Me,ye,Bt,yt,N,ue,Vt,Ce,q,mt,Le,Lt,st,ot,gt,Tt,oe,le,At,It,et,Y,Ct,Se,Zt,O,_,H,M,C,x,A,T,v,w,p,E,$,b,a,d,o,c,r,Mt,te,Ue,ln,Mn,ie,Jn,Bn,wn,xr,kr,Hi,uo,ar,js,Wn,ja,pc,Kr,sr,gn,Ya,ho,Qo,Wi,Ys,fo,go,Ur,Za,Pi,yo,$o,Vr,Ir,bo,Eo,vo,wo,$r,Jo,Qr,ji,$i,Qa,na,oa,aa,ts,Oi,Ro,Li,bi,R,jt,Jt,function(){n(31,Wc=Ra.innerWidth),n(32,jp=Ra.innerHeight)},f=>ut(dl,Ve=f.detail,Ve),({detail:f})=>n(44,X=f),(f,z)=>z.id===f,function(f,z){t.$$.not_equal(Hr[z],f)&&(Hr[z]=f,n(1,Hr),n(268,as),n(27,ca))},f=>n(63,Ki=Ki.concat(f)),f=>n(63,Ki=Ki.filter(z=>z!==f)),(f,{detail:z})=>n(38,k[f]=z,k),f=>ut(us,Ai=f.detail,Ai),f=>f.id===X,function(f){t.$$.not_equal(Hr[X],f)&&(Hr[X]=f,n(1,Hr),n(268,as),n(27,ca))},()=>n(63,Ki=Ki.concat(X)),()=>n(63,Ki=Ki.filter(f=>f!==X)),({detail:f})=>n(38,k[X]=f,k),f=>{const z={...f,...Jm()},{annotationShapes:J,decorationShapes:at,interfaceShapes:Z,frameShapes:tt,selectionShapes:bt}=Mu({annotationShapes:hn,decorationShapes:Gt,interfaceShapes:Ae,frameShapes:Te,selectionShapes:To},z);return of(z,K,J,at,Z,tt,bt)},()=>{n(64,rd=!1),n(65,id=!1),n(66,od=!1),n(67,ad=!1),n(68,sd=!1)},function(f){on[f?"unshift":"push"](()=>{wl=f,n(36,wl)})},function(f){la=f,n(0,la),n(258,yc)},function(f){Yc=f,n(33,Yc)},function(f){jc=f,n(34,jc)},function(f){on[f?"unshift":"push"](()=>{Tr=f,n(62,Tr)})},function(f){on[f?"unshift":"push"](()=>{Nn=f,n(2,Nn)})},f=>ut(Tp,ur=f.detail,ur)]}class v2 extends Xe{constructor(e){super(),Ye(this,e,j4,q4,ze,{class:229,layout:230,stores:231,locale:3,id:4,util:232,utils:233,animations:234,disabled:235,status:227,previewUpscale:236,previewPad:237,previewMaskOpacity:5,previewImageDataMaxSize:238,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:239,elasticityMultiplier:8,willRevert:240,willProcessImage:241,willRenderCanvas:9,willRenderToolbar:242,willSetHistoryInitialState:243,enableButtonExport:244,enableButtonRevert:245,enableNavigateHistory:246,enableToolbar:10,enableUtils:247,enableButtonClose:248,enableDropImage:249,enablePasteImage:250,enableBrowseImage:251,enableTransparencyGrid:11,layoutDirectionPreference:252,layoutHorizontalUtilsPreference:253,layoutVerticalUtilsPreference:254,layoutVerticalToolbarPreference:255,layoutVerticalControlGroupsPreference:256,layoutVerticalControlTabsPreference:257,textDirection:12,markupEditorZoomLevel:258,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:259,muteAudio:260,willSetMediaInitialTimeOffset:261,enablePan:17,enableZoom:18,enableZoomControls:262,enableZoomInput:19,enablePanInput:263,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,hideTextInput:264,showTextInput:265,imagePreviewSrc:266,imageOrienter:267,pluginComponents:268,pluginOptions:27,sub:269,pluginInterface:1,root:2,play:270,pause:271,isPaused:272,togglePlayPause:273,mute:274,unmute:275,toggleMute:276,getDuration:277,getCurrentTime:278,setCurrentTime:279,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:228,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[229]}set class(e){this.$$set({class:e}),ct()}get layout(){return this.$$.ctx[230]}set layout(e){this.$$set({layout:e}),ct()}get stores(){return this.$$.ctx[231]}set stores(e){this.$$set({stores:e}),ct()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),ct()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),ct()}get util(){return this.$$.ctx[232]}set util(e){this.$$set({util:e}),ct()}get utils(){return this.$$.ctx[233]}set utils(e){this.$$set({utils:e}),ct()}get animations(){return this.$$.ctx[234]}set animations(e){this.$$set({animations:e}),ct()}get disabled(){return this.$$.ctx[235]}set disabled(e){this.$$set({disabled:e}),ct()}get status(){return this.$$.ctx[227]}set status(e){this.$$set({status:e}),ct()}get previewUpscale(){return this.$$.ctx[236]}set previewUpscale(e){this.$$set({previewUpscale:e}),ct()}get previewPad(){return this.$$.ctx[237]}set previewPad(e){this.$$set({previewPad:e}),ct()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),ct()}get previewImageDataMaxSize(){return this.$$.ctx[238]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),ct()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),ct()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),ct()}get zoomMaskOpacity(){return this.$$.ctx[239]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),ct()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),ct()}get willRevert(){return this.$$.ctx[240]}set willRevert(e){this.$$set({willRevert:e}),ct()}get willProcessImage(){return this.$$.ctx[241]}set willProcessImage(e){this.$$set({willProcessImage:e}),ct()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),ct()}get willRenderToolbar(){return this.$$.ctx[242]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),ct()}get willSetHistoryInitialState(){return this.$$.ctx[243]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),ct()}get enableButtonExport(){return this.$$.ctx[244]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),ct()}get enableButtonRevert(){return this.$$.ctx[245]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),ct()}get enableNavigateHistory(){return this.$$.ctx[246]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),ct()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),ct()}get enableUtils(){return this.$$.ctx[247]}set enableUtils(e){this.$$set({enableUtils:e}),ct()}get enableButtonClose(){return this.$$.ctx[248]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),ct()}get enableDropImage(){return this.$$.ctx[249]}set enableDropImage(e){this.$$set({enableDropImage:e}),ct()}get enablePasteImage(){return this.$$.ctx[250]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),ct()}get enableBrowseImage(){return this.$$.ctx[251]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),ct()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),ct()}get layoutDirectionPreference(){return this.$$.ctx[252]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),ct()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[253]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),ct()}get layoutVerticalUtilsPreference(){return this.$$.ctx[254]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),ct()}get layoutVerticalToolbarPreference(){return this.$$.ctx[255]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),ct()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[256]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),ct()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[257]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),ct()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),ct()}get markupEditorZoomLevel(){return this.$$.ctx[258]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),ct()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),ct()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),ct()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),ct()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),ct()}get markupEditorInteractionMode(){return this.$$.ctx[259]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),ct()}get muteAudio(){return this.$$.ctx[260]}set muteAudio(e){this.$$set({muteAudio:e}),ct()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[261]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),ct()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),ct()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),ct()}get enableZoomControls(){return this.$$.ctx[262]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),ct()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),ct()}get enablePanInput(){return this.$$.ctx[263]}set enablePanInput(e){this.$$set({enablePanInput:e}),ct()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),ct()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),ct()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),ct()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),ct()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),ct()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),ct()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),ct()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),ct()}get hideTextInput(){return this.$$.ctx[264]}get showTextInput(){return this.$$.ctx[265]}get imagePreviewSrc(){return this.$$.ctx[266]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),ct()}get imageOrienter(){return this.$$.ctx[267]}set imageOrienter(e){this.$$set({imageOrienter:e}),ct()}get pluginComponents(){return this.$$.ctx[268]}set pluginComponents(e){this.$$set({pluginComponents:e}),ct()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),ct()}get sub(){return this.$$.ctx[269]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),ct()}get play(){return this.$$.ctx[270]}get pause(){return this.$$.ctx[271]}get isPaused(){return this.$$.ctx[272]}get togglePlayPause(){return this.$$.ctx[273]}get mute(){return this.$$.ctx[274]}get unmute(){return this.$$.ctx[275]}get toggleMute(){return this.$$.ctx[276]}get getDuration(){return this.$$.ctx[277]}get getCurrentTime(){return this.$$.ctx[278]}get setCurrentTime(){return this.$$.ctx[279]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),ct()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[228]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),ct()}get history(){return this.$$.ctx[30]}}typeof window<"u"&&(t=>{if(t&&t._9xhda1o)return;const[e,n,r]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,118,97,108,105,100,32,108,105,99,101,110,115,101,46]].map(i=>i.map(o=>String.fromCharCode(o)).join(""));t&&t[e]&&t[e][n](r)})(window);const Y4=["klass","stores","isVisible","isActive","isActiveFraction","locale"],X4=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],Z4=["locale"];let Q1;const ME=new Set([]),Hd={},Dh=new Map,K4=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[n,r,i=()=>!0]=e.util;Dh.has(n)||(Dh.set(n,{Component:r,isSupported:i}),C0(r).filter(o=>!Y4.includes(o)).forEach(o=>{ME.add(o),Hd[o]?Hd[o].push(n):Hd[o]=[n]}))})};var CE=[...Zb,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"],Q4=(t,e,n={})=>{const{prefix:r="pintura:"}=n;return CE.map(i=>t.on(i,o=>Ql(e)?((a,s,l)=>a.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${r}${i}`,o):e(i,o)))};const J4=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],tC=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],eC=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],nC=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],rC=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],iC=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],oC=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],aC=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],sC=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],lC=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],cC=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],dC=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],uC=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],_E={chrome:tC,fade:eC,pastel:J4,cold:rC,warm:nC,monoDefault:iC,monoWash:aC,monoNoir:oC,monoStark:sC,sepiaDefault:lC,sepiaRust:dC,sepiaBlues:cC,sepiaColor:uC};var pC={filterFunctions:_E,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const hC={borderColor:"strokeColor",borderWidth:"strokeWidth",lineWidth:"strokeWidth",fontColor:"color",lineColor:"strokeColor",src:"backgroundImage",fit:"backgroundSize"},_d=t=>t===0||t==="0%"||t==="0px"?0:/px$/.test(t)?parseInt(t,10):/\%$/.test(t)?t:t<=1?100*t+"%":void 0,Pd=(t,e)=>{let n,r;return/%$/.test(t)?(n=parseFloat(t),r=parseFloat(e),n+r+"%"):/px$/.test(t)?(n=parseInt(t,10),r=parseInt(e,10),n+r+"px"):void 0},w2=(t,e)=>{const n=t,r=e,i=1.5707963267948966-e,o=Math.sin(1.5707963267948966),a=Math.sin(r),s=Math.sin(i),l=Math.cos(i),c=n/o;return ht(l*(c*a),l*(c*s))},mC=(t,{flip:e,aspectRatio:n,rotation:r,center:i,zoom:o,scaleToFit:a})=>{const s={flipX:!1,flipY:!1},l=!i||i&&i.x===.5&&i.y===.5;e&&e.horizontal&&(s.flipX=e.horizontal),e&&e.vertical&&(s.flipY=e.vertical);const c=((g,m)=>m!=null?1/m:g.width/g.height)(t,n),d=a!==!1,u=((g,m,$=1)=>{const b=g.height/g.width,E=m;let v=1,w=b;w>E&&(w=E,v=w/b);const T=Math.max(1/v,E/w),M=g.width/($*T*v);return{width:M,height:M*m}})(t,n,o),p=l?t:((g,m)=>{const $=m.x>.5?1-m.x:m.x,b=m.y>.5?1-m.y:m.y;return fr(2*$*g.width,2*b*g.height)})(t,d?i:{x:.5,y:.5}),h=((g,m)=>{let $=g.width,b=$*m;b>g.height&&(b=g.height,$=b/m);const E=.5*(g.width-$),v=.5*(g.height-b);return nr(E,v,$,b)})(t,n);if((n||!l||o)&&(s.crop=Cr(rr(p),c)),typeof r=="number"&&r!==null&&r!==0){r!=null&&(s.rotation=r);const g=((x,C)=>{const H=x.width,S=x.height,y=w2(H,C),L=w2(S,C),O=ht(x.x+Math.abs(y.x),x.y-Math.abs(y.y)),_=ht(x.x+x.width+Math.abs(L.y),x.y+Math.abs(L.x)),P=ht(x.x-Math.abs(L.y),x.y+x.height-Math.abs(L.x));return{width:oi(O,_),height:oi(O,P)}})(h,r),m=Math.max(g.width/p.width,g.height/p.height),$=ht(i.x*t.width,i.y*t.height),b=ob(t,r),E=oc(b),v=ht(.5*(b.width-t.width),.5*(b.height-t.height)),w=Bi({x:v.x+$.x-u.width/m*.5,y:v.y+$.y-u.height/m*.5,width:u.width/m,height:u.height/m},r),T=Ls(w.map(je),r,E.x,E.y),M=nn(Lr(T)),A=Ls(T.map(je),-2*r,M.x,M.y);s.crop=Lr(A)}else o!=null&&qn(s.crop,1/o);return d||(s.cropLimitToImage=!1),s};var fC=(t,e,n={})=>{const r={};if(!((o={})=>{if("markup"in o||"color"in o||"filter"in o)return!0;const{crop:a}=o;return!(!a||!("flip"in a||"center"in a||"aspectRatio"in a||"rotation"in a))})(n))return n;if(n.crop&&Object.assign(r,mC(e,n.crop)),n.markup){const o=Array.isArray(n.markup)?n.markup:Object.values(n.markup);r.decoration=o.map(a=>((s,l,c)=>{const d=Object.keys(c).reduce((u,p)=>{let h=c[p];return p=hC[p]||p,/px$/.test(h)?h=_d(h):/^(?:x|y|left|right|top|bottom|width|height|fontSize|borderWidth|strokeWidth)$/.test(p)&&typeof h=="number"&&(p!=="strokeWidth"&&p!=="borderWidth"&&p!=="fontSize"||(h=Math.min(s.width,s.height)*h+"px"),h=_d(h)),/color/i.test(p)&&h&&(h=A0(h)),h===null&&(h=void 0),u[p]=h,u},{});if(l==="line"&&(d.lineDecoration.length>=1&&(d.lineEnd="arrow"),d.lineDecoration.length===2&&(d.lineStart="arrow"),d.x1=d.x,d.y1=d.y,d.x2=Pd(d.x,d.width),d.y2=Pd(d.y,d.height),delete d.x,delete d.y,delete d.width,delete d.height,delete d.lineDecoration,delete d.lineStyle),l==="text"){if(!qe(d.y)){const u=Math.min(s.width,s.height);d.y=u*(parseFloat(d.y)/100)}d.y=d.y-d.fontSize,delete d.width,delete d.height,delete d.borderStyle,d.lineHeight=d.lineHeight||"120%"}if(l==="ellipse"){let u,p;if(/%$/.test(d.width)){u=parseFloat(d.width)/100,p=parseFloat(d.height)/100;const h=u*s.width,g=p*s.height;u=h/s.width*100,p=g/s.height*100}else u=d.width,p=d.height;d.rx=.5*u,d.ry=.5*p,/%$/.test(d.width)&&(d.rx+="%",d.ry+="%"),d.x=Pd(d.x,d.rx),d.y=Pd(d.y,d.ry),delete d.width,delete d.height,delete d.borderStyle}if(l==="rect"&&delete d.borderStyle,l==="path"){let u,p=[];for(const h of d.points)u?jo(u,h)<1e-9||(p.push(h),u=h,u=h):(p.push(h),u=h);d.points=p.map(h=>({x:_d(h.x),y:_d(h.y)}))}return d})(r.crop||e,a[0],a[1]))}if(n.color||n.colors){const o=n.color||n.colors;Object.keys(o).filter(a=>o[a]).map(a=>[a,Array.isArray(o[a].matrix)?o[a].matrix:Object.values(o[a].matrix)]).forEach(([a,s])=>{r.colorMatrix||(r.colorMatrix={}),r.colorMatrix[a]=s})}if(n.filter||n.filters){const o=n.filters||n.filter;r.colorMatrix||(r.colorMatrix={});const a=t?t.filterFunctions:_E;r.colorMatrix.filter=typeof o=="string"&&a[o]?a[o]():o.matrix}const i=n.size?n.size:!!n.resize&&n.resize.size;return i&&i.width&&i.height&&(r.targetSize={width:i.width,height:i.height}),r};const gC={base:0,min:-.25,max:.25,getLabel:t=>Uo(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(n=>({...n,brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},yC={base:1,min:.5,max:1.5,getLabel:t=>Uo(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(n=>({...n,contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},$C={base:1,min:0,max:2,getLabel:t=>Uo(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(n=>({...n,saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},bC={base:1,min:.5,max:1.5,getLabel:t=>Uo(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(n=>({...n,exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},EC={base:1,min:.15,max:4,getLabel:t=>Uo(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},vC={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},wC={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(n=>({...n,clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},xC={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(n=>({...n,temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var IC={finetuneControlConfiguration:{gamma:EC,brightness:gC,contrast:yC,saturation:$C,exposure:bC,temperature:xC,clarity:wC,vignette:vC},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!R0()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)},Ns=t=>t.charAt(0).toUpperCase()+t.slice(1);let Ol=null;var J1=()=>{if(Ol===null)if(Vn())try{Ol=document.fonts.check("16px TestNonExistingFont")===!1}catch{Ol=!1}else Ol=!1;return Ol};const nc=(t,e)=>n=>n[e?`${e}${Ns(t)}`:t],TC=t=>[t,""+t],vu=(t,e)=>n=>[t[n],nc(n,e)],PE=t=>Array.isArray(t)&&t.every(qe)?t.map(TC):t,xa=[1,.2549,.2118],x2=[1,1,1,0],RC=t=>{const{hideLabel:e=!0}=t||{};return GC(["new","add","subtract"].map(n=>[n,nc(n,"shapeLabelSelectionMode"),{icon:nc(n,"shapeIconSelectionMode"),hideLabel:e}]),{title:n=>n.shapeTitleSelectionMode,layout:"radio"})},SC=t=>AE(t,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,n)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*n}"/>`}),I2={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},Ao=(t,e={},n)=>{if(!I2[t])return;const{position:r="relative",inputMode:i="drag",isSelection:o=!1}=n||{};return[{...I2[t](),...e},{position:r,inputMode:i,isSelection:o}]},MC=t=>({sharpie:Ao("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:"0.5%",strokeColor:[...xa],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:Ao("eraser"),path:Ao("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...xa],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:Ao("line",{strokeColor:[...xa],strokeWidth:"0.5%"}),arrow:Ao("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...xa],strokeWidth:"0.5%"}),rectangle:Ao("rectangle",{strokeColor:[...x2],backgroundColor:[...xa]}),ellipse:Ao("ellipse",{strokeColor:[...x2],backgroundColor:[...xa]}),text:Ao("text",{color:[...xa],fontSize:"2%"}),...t}),th=(t,e,n)=>[t,e||nc(t,"shapeLabelTool"),{icon:nc(t,"shapeIconTool"),...n}],CC=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>pn(e)?th(e):Array.isArray(e)?Vs(e[1])?th(e[0],void 0,e[1]):th(e[0],e[1],e[2]):void 0).filter(Boolean),_C=t=>Object.keys(t).map(vu(t,"shapeTitleColor")),PC=t=>Object.keys(t).map(vu(t,"labelSize")),AC=t=>Object.keys(t).map(vu(t,"labelSize")),T2=t=>Object.keys(t).map(vu(t,"labelSize")),OC=t=>[...t],LC=t=>t.map(e=>[e,n=>n["shapeLabelFontStyle"+e.filter(r=>r!=="normal").map(Ns).join("")]]),DC=t=>t.map(e=>[TE(e),n=>n["shapeTitleLineDecoration"+Ns(e)],{icon:n=>n["shapeIconLineDecoration"+Ns(e)]}]),_i=(t,e)=>{const{defaultKey:n,defaultValue:r,defaultOptions:i}=e||{},o=[];return n&&(o[0]=[r,a=>a[n],{...i}]),[...o,...t]},R2=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),S2=(t={})=>["ToggleSlider",{...t}],kC=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:n=>n.shapeTitleFontFamily,onload:({options:n=[]})=>{J1()&&n.map(([r])=>r).filter(Boolean).filter(r=>!R2(r)).forEach(r=>{const i="PinturaFontTest-"+r.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(i)||document.body.append(dn("span",{textContent:" ",id:i,class:"PinturaFontTest",style:`font-family:${r};font-size:0;color:transparent;`}))})},ondestroy:()=>{J1()&&document.querySelectorAll(".PinturaFontTest").forEach(n=>n.remove())},optionLabelStyle:n=>"font-family: "+n,options:_i(t,e),optionFilter:n=>{if(!J1())return!0;const[r]=n;return r?R2(r):!0}}],wu=(t,e={})=>["ColorPicker",{options:_i(t),...e}],FC=(t,e={})=>wu(t,{title:n=>n.labelColor,...e}),BC=(t,e={})=>wu(t,{title:n=>n.shapeTitleBackgroundColor,...e}),NC=(t,e={})=>wu(t,{title:n=>n.shapeTitleStrokeColor,options:_i(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(n,r)=>{const i=r.strokeWidth;(qe(i)||pn(i)?parseFloat(i):0)>0||(r.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")},...e}),AE=(t,e)=>{const{title:n,optionHideLabel:r=!1,layout:i,optionIcon:o=!1}=e||{},a=PE(t),s=t.map(([u])=>pn(u)?parseFloat(u):u),l=Math.max(...s),c=Math.min(...s),d=l-c;return[i==="radio"?"RadioGroup":"Dropdown",{title:n===!1?void 0:n||(u=>u.shapeTitleStrokeWidth),options:u=>{const p=e?a.map(h=>{const[g,m,$={}]=h,b=pn(g)?parseFloat(g):g,E=(b-c)/d;let v;return o==="line"?v=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*E}em" d="M3,12 H20"/>`:o==="dot"?v=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*E}"/>`:pn(o)?v=o:Xn(o)&&(v=o(b,E)),[g,m,{icon:v,hideLabel:r,...$}]}):a;return cn(u,"backgroundColor")?_i(p,{defaultKey:"shapeLabelStrokeNone"}):_i(p)},onchange:(u,p)=>{if(!u)return;const h=p.strokeColor||[];if(h[3])return;const g=[...h];g[3]=1,p.strokeColor=g}}]},GC=(t,e)=>{const{title:n,layout:r}=e||{};return[r==="radio"?"RadioGroup":"Dropdown",{title:n,options:_i(t)}]},OE=(t,e,n)=>["Dropdown",{title:r=>r[e],options:_i(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:n}],zC=t=>OE(t,"shapeTitleLineStart","transform: scaleX(-1)"),UC=t=>OE(t,"shapeTitleLineEnd"),VC=t=>wu(t,{title:e=>e.shapeTitleTextColor,options:_i(t)}),HC=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:_i(t,{defaultKey:"shapeLabelFontStyleNormal"})}],LE=t=>["ShorthandControl",t],DE=(t,e,n,r)=>{r||t.find(([o])=>o===n)||(r={defaultKey:"labelAuto",defaultValue:n});const i=PE(t);return["Dropdown",{title:e,options:_i(i,r),...r}]},WC=(t,e)=>DE(t,n=>n.shapeTitleFontSize,"4%",e),qC=(t,e)=>DE(t,n=>n.shapeTitleLineHeight,"120%",e),jC=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:_i(t)}],eh={colorOptions:()=>_C({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>DC(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>OC([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>LC([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+Ns(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+Ns(t)]}]),strokeWidthOptions:()=>T2({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),brushSizeOptions:()=>T2(Object.entries({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}).reduce((t,[e,n])=>(t[e]=2*parseFloat(n)+"%",t),{})),fontSizeOptions:()=>PC({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>AC({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},YC=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),kE=(t,e)=>pn(e)?t+"%":t,FE=(t,e,n,r)=>pn(r)?Math.round(t/n*100)+"%":""+YC.format(t),nh={getValue:t=>parseFloat(t),setValue:kE,label:FE,step:.05,labelClass:"PinturaPercentageLabel"},XC={factory:LE,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...nh,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...nh,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...nh,min:0,max:25,labelPrefix:t=>t.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},Ad={defaultColor:{factory:FC,items:"colorOptions"},defaultNumber:{factory:S2},defaultPercentage:{factory:S2,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,n)=>Math.round(t/n*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:BC},strokeColor:{items:"colorOptions",factory:NC},strokeWidth:{items:"strokeWidthOptions",factory:AE},brushSize:{items:"brushSizeOptions",factory:SC},drawMode:{factory:RC},lineStart:{items:"lineEndStyleOptions",factory:zC},lineEnd:{items:"lineEndStyleOptions",factory:UC},color:{items:"colorOptions",factory:VC},fontFamily:{items:"fontFamilyOptions",factory:kC},fontStyle_fontWeight:{items:"fontStyleOptions",factory:HC},fontSize:{items:"fontSizeOptions",factory:WC},lineHeight:{items:"lineHeightOptions",factory:qC},textAlign:{items:"textAlignOptions",factory:jC},textShadowX_textShadowY_textShadowBlur_textShadowColor:XC,textOutlineWidth_textOutlineColor:{factory:LE,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:t=>parseFloat(t),setValue:kE,label:FE,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:t=>t.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},ZC=(t={})=>{const e={...Ad,...t},n={};return Object.entries(e).forEach(([r,i])=>{if(!/Options$/.test(r))if(Ad[r]&&Vs(i)&&!er(i)){const{component:o,factory:a,items:s,options:l={}}=e[r];if(pn(a))n[r]=[a,l];else{const c=Ad[r].items;let d=pn(c)?e[c]||eh[c]():void 0;pn(s)&&eh[s]?d=e[s]?e[s].every(p=>!Array.isArray(p))?e[s].map(p=>[p,p]):e[s]:eh[s]():(s||l.items)&&(d=s||l.items);let u=a||Ad[r].factory;Xn(u)?n[r]=d?u(d,l):u(l):o&&(n[r]=[o,{...l,items:s}])}}else n[r]=i}),n};function KC(t){let e,n,r,i,o;const a=t[7].default,s=An(a,t,t[6],null);return{c(){e=dt("div"),n=dt("div"),s&&s.c(),I(n,"class","PinturaToolbarInner"),I(e,"class","PinturaToolbar"),I(e,"data-layout",t[1]),I(e,"data-overflow",t[0])},m(l,c){it(l,e,c),vt(e,n),s&&s.m(n,null),r=!0,i||(o=[Et(n,"measure",t[3]),fn(yr.call(null,n)),Et(e,"measure",t[2]),fn(yr.call(null,e))],i=!0)},p(l,[c]){s&&s.p&&(!r||64&c)&&Ln(s,a,l,l[6],r?On(a,l[6],c,null):Dn(l[6]),null),(!r||2&c)&&I(e,"data-layout",l[1]),(!r||1&c)&&I(e,"data-overflow",l[0])},i(l){r||(B(s,l),r=!0)},o(l){j(s,l),r=!1},d(l){l&&nt(e),s&&s.d(l),i=!1,sn(o)}}}function QC(t,e,n){let r,i,{$$slots:o={},$$scope:a}=e,s=0,l=0,c=0;const d=()=>{n(0,i=r==="compact"&&s>c?"overflow":void 0)};return t.$$set=u=>{"$$scope"in u&&n(6,a=u.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&n(1,r=l>c?"compact":"default")},[i,r,({detail:u})=>{const{width:p}=u;n(5,c=p),d()},({detail:u})=>{const{width:p}=u;p>l&&n(4,l=p),s=p,i||d()},l,c,a,o]}class JC extends Xe{constructor(e){super(),Ye(this,e,QC,KC,ze,{})}}function t_(t){let e,n,r,i;const o=t[5].default,a=An(o,t,t[4],null);return{c(){e=dt("div"),a&&a.c(),I(e,"class",t[0])},m(s,l){it(s,e,l),a&&a.m(e,null),n=!0,r||(i=[Et(e,"measure",function(){vn(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),fn(t[2].call(null,e))],r=!0)},p(s,[l]){t=s,a&&a.p&&(!n||16&l)&&Ln(a,o,t,t[4],n?On(o,t[4],l,null):Dn(t[4]),null),(!n||1&l)&&I(e,"class",t[0])},i(s){n||(B(a,s),n=!0)},o(s){j(a,s),n=!1},d(s){s&&nt(e),a&&a.d(s),r=!1,sn(i)}}}function e_(t,e,n){let{$$slots:r={},$$scope:i}=e;const o=Vi();let{class:a=null}=e;const s=_r("measurable");let l=!1;return lo(()=>n(1,l=!0)),t.$$set=c=>{"class"in c&&n(0,a=c.class),"$$scope"in c&&n(4,i=c.$$scope)},[a,l,s,({detail:c})=>o("measure",c),i,r]}class n_ extends Xe{constructor(e){super(),Ye(this,e,e_,t_,ze,{class:0})}}const r_=t=>({}),M2=t=>({}),i_=t=>({}),C2=t=>({}),o_=t=>({}),_2=t=>({});function P2(t){let e,n;const r=t[4].header,i=An(r,t,t[3],_2);return{c(){e=dt("div"),i&&i.c(),I(e,"class","PinturaUtilHeader")},m(o,a){it(o,e,a),i&&i.m(e,null),n=!0},p(o,a){i&&i.p&&(!n||8&a)&&Ln(i,r,o,o[3],n?On(r,o[3],a,o_):Dn(o[3]),_2)},i(o){n||(B(i,o),n=!0)},o(o){j(i,o),n=!1},d(o){o&&nt(e),i&&i.d(o)}}}function A2(t){let e,n;const r=t[4].footer,i=An(r,t,t[3],M2);return{c(){e=dt("div"),i&&i.c(),I(e,"class","PinturaUtilFooter")},m(o,a){it(o,e,a),i&&i.m(e,null),n=!0},p(o,a){i&&i.p&&(!n||8&a)&&Ln(i,r,o,o[3],n?On(r,o[3],a,r_):Dn(o[3]),M2)},i(o){n||(B(i,o),n=!0)},o(o){j(i,o),n=!1},d(o){o&&nt(e),i&&i.d(o)}}}function a_(t){let e,n,r,i,o,a,s=t[1]&&P2(t);const l=t[4].main,c=An(l,t,t[3],C2),d=c||function(p){let h,g;return h=new n_({props:{class:"PinturaStage"}}),h.$on("measure",p[5]),{c(){qt(h.$$.fragment)},m(m,$){Ht(h,m,$),g=!0},p:Pe,i(m){g||(B(h.$$.fragment,m),g=!0)},o(m){j(h.$$.fragment,m),g=!1},d(m){Wt(h,m)}}}(t);let u=t[2]&&A2(t);return{c(){s&&s.c(),e=Kt(),n=dt("div"),d&&d.c(),r=Kt(),u&&u.c(),i=Kt(),o=Zn(),I(n,"class","PinturaUtilMain")},m(p,h){s&&s.m(p,h),it(p,e,h),it(p,n,h),d&&d.m(n,null),t[6](n),it(p,r,h),u&&u.m(p,h),it(p,i,h),it(p,o,h),a=!0},p(p,[h]){p[1]?s?(s.p(p,h),2&h&&B(s,1)):(s=P2(p),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(we(),j(s,1,1,()=>{s=null}),xe()),c&&c.p&&(!a||8&h)&&Ln(c,l,p,p[3],a?On(l,p[3],h,i_):Dn(p[3]),C2),p[2]?u?(u.p(p,h),4&h&&B(u,1)):(u=A2(p),u.c(),B(u,1),u.m(i.parentNode,i)):u&&(we(),j(u,1,1,()=>{u=null}),xe())},i(p){a||(B(s),B(d,p),B(u),B(!1),a=!0)},o(p){j(s),j(d,p),j(u),j(!1),a=!1},d(p){s&&s.d(p),p&&nt(e),p&&nt(n),d&&d.d(p),t[6](null),p&&nt(r),u&&u.d(p),p&&nt(i),p&&nt(o)}}}function s_(t,e,n){let{$$slots:r={},$$scope:i}=e,{hasHeader:o=!!e.$$slots.header}=e,{hasFooter:a=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{n(7,e=Tn(Tn({},e),Jl(l))),"hasHeader"in l&&n(1,o=l.hasHeader),"hasFooter"in l&&n(2,a=l.hasFooter),"root"in l&&n(0,s=l.root),"$$scope"in l&&n(3,i=l.$$scope)},e=Jl(e),[s,o,a,i,r,function(l){Zo.call(this,t,l)},function(l){on[l?"unshift":"push"](()=>{s=l,n(0,s)})}]}class O0 extends Xe{constructor(e){super(),Ye(this,e,s_,a_,ze,{hasHeader:1,hasFooter:2,root:0})}}function O2(t){let e,n;return{c(){e=dt("div"),I(e,"class","PinturaRangeInputMeter"),I(e,"style",n=`transform: translateX(${t[9].x-t[11].x}px) translateY(${t[9].y-t[11].y}px)`)},m(r,i){it(r,e,i),e.innerHTML=t[7]},p(r,i){128&i[0]&&(e.innerHTML=r[7]),512&i[0]&&n!==(n=`transform: translateX(${r[9].x-r[11].x}px) translateY(${r[9].y-r[11].y}px)`)&&I(e,"style",n)},d(r){r&&nt(e)}}}function l_(t){let e,n,r,i,o,a,s,l,c,d,u,p=t[9]&&O2(t);return{c(){e=dt("div"),n=dt("span"),r=Kt(),i=dt("button"),o=Sn(t[1]),s=Kt(),l=dt("div"),p&&p.c(),I(n,"class","PinturaRangeInputValue"),I(i,"class","PinturaRangeInputReset"),I(i,"type","button"),i.disabled=a=t[0]===t[2],I(l,"class","PinturaRangeInputInner"),I(l,"style",t[8]),I(l,"data-value-limited",t[5]),I(e,"class","PinturaRangeInput"),I(e,"tabindex","0")},m(h,g){it(h,e,g),vt(e,n),n.innerHTML=t[3],vt(e,r),vt(e,i),vt(i,o),vt(e,s),vt(e,l),p&&p.m(l,null),d||(u=[Et(i,"click",t[16]),Et(l,"interactionstart",t[12]),Et(l,"interactionupdate",t[14]),Et(l,"interactionend",t[15]),Et(l,"interactionrelease",t[13]),fn(c=lc.call(null,l,{inertia:t[6]})),Et(l,"measure",t[36]),fn(yr.call(null,l)),Et(e,"wheel",t[18],{passive:!1}),Et(e,"nudge",t[19]),fn(cc.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,g){8&g[0]&&(n.innerHTML=h[3]),2&g[0]&&Kn(o,h[1]),5&g[0]&&a!==(a=h[0]===h[2])&&(i.disabled=a),h[9]?p?p.p(h,g):(p=O2(h),p.c(),p.m(l,null)):p&&(p.d(1),p=null),256&g[0]&&I(l,"style",h[8]),32&g[0]&&I(l,"data-value-limited",h[5]),c&&vn(c.update)&&64&g[0]&&c.update.call(null,{inertia:h[6]})},i:Pe,o:Pe,d(h){h&&nt(e),p&&p.d(),d=!1,sn(u)}}}function c_(t,e,n){let r,i,o,a,s,l,c,d,u,{labelReset:p="Reset"}=e,{direction:h="x"}=e,{min:g=0}=e,{max:m=1}=e,{base:$=g}=e,{value:b=0}=e,{valueLabel:E=0}=e,{valueMin:v}=e,{valueMax:w}=e,{oninputstart:T=be}=e,{oninputmove:M=be}=e,{oninputend:A=be}=e,{elasticity:x=0}=e,{nudgeMultiplier:C}=e,{step:H=8}=e;const S=_r("isAnimated");G(t,S,D=>n(6,d=D));const y=(D,ot,st)=>Math.ceil((D-st)/ot)*ot+st;let L,O,_;const P={x:2,y:0},U=(D,ot,st)=>`M ${D-st} ${ot} a ${st} ${st} 0 1 0 0 -1`;let X,k,F=!1,Q={snap:!1,elastic:!1};const rt=(D,ot,st)=>{const gt=D[h]+ot[h],Lt=rn(gt,X[1][h],X[0][h]),Xt=x?Lt+ko(gt-Lt,x):Lt,Ct=st.elastic?Xt:Lt,Ut=ht(0,0);return Ut[h]=Ct,$t.set(Ut,{hard:st.snap}),rn(Y(Ut,h),g,m)},$t=_e();G(t,$t,D=>n(9,u=D));const V=(D,ot)=>{const st=.5*(L[ot]-a[ot])-(Bl(D,g,m)*a[ot]-.5*a[ot]);return{x:ot==="x"?st:0,y:ot==="y"?st:0}},Y=(D,ot)=>{const st=-(D[ot]-.5*L[ot])/a[ot];return g+st*r},q=$t.subscribe(D=>{D&&k&&M(rn(Y(D,h),g,m))}),et=D=>{const ot=[V(v??g,h),V(w??m,h)],st={x:h==="x"?u.x+D:0,y:h==="y"?u.y+D:0},gt=rn(st[h],ot[1][h],ot[0][h]),Lt={...u,[h]:gt};ut($t,u=Lt,u);const Xt=rn(Y(Lt,h),g,m);T(),M(Xt),A(Xt)};return gi(()=>{q()}),t.$$set=D=>{"labelReset"in D&&n(1,p=D.labelReset),"direction"in D&&n(20,h=D.direction),"min"in D&&n(21,g=D.min),"max"in D&&n(22,m=D.max),"base"in D&&n(2,$=D.base),"value"in D&&n(0,b=D.value),"valueLabel"in D&&n(3,E=D.valueLabel),"valueMin"in D&&n(23,v=D.valueMin),"valueMax"in D&&n(24,w=D.valueMax),"oninputstart"in D&&n(25,T=D.oninputstart),"oninputmove"in D&&n(26,M=D.oninputmove),"oninputend"in D&&n(27,A=D.oninputend),"elasticity"in D&&n(28,x=D.elasticity),"nudgeMultiplier"in D&&n(29,C=D.nudgeMultiplier),"step"in D&&n(30,H=D.step)},t.$$.update=()=>{if(6291456&t.$$.dirty[0]&&n(32,r=m-g),10485760&t.$$.dirty[0]&&n(34,i=v!=null?Math.max(v,g):g),20971520&t.$$.dirty[0]&&n(33,o=w!=null?Math.min(w,m):m),6291460&t.$$.dirty[0]&&n(35,s=Bl($,g,m)),16&t.$$.dirty[0]|16&t.$$.dirty[1]&&L){const D=.5*L.y;let ot,st=40*s,gt="",Lt=L.y,Xt="";for(let Ct=0;Ct<=40;Ct++){const Ut=P.x+10*Ct,Le=D;gt+=U(Ut,Le,Ct%5==0?2:.75)+" ",ot=Ut+P.x,Ct===st&&(Xt=`<path d="M${Ut} ${Le-4} l2 3 l-2 -1 l-2 1 z"/>`)}n(7,O=`<svg width="${ot}" height="${Lt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${ot} ${Lt}" aria-hidden="true" focusable="false">
        ${Xt}
        <rect rx="4" ry="4" y="${D-4}"" height="8"/>
        <path fill-rule="evenodd" d="${gt.trim()}"/></svg>`),n(31,_={x:ot-2*P.x,y:Lt})}16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(a=L&&_),6291456&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(5,l=i!==g||o!==m),32&t.$$.dirty[0]|12&t.$$.dirty[1]&&n(8,c=l?function(D,ot){const gt=Bl(D,g,m),Lt=Bl(ot,g,m);return`--range-mask-from:${100*de(y(gt,.025,0)-.0125)}%;--range-mask-to:${100*de(y(Lt,.025,0)-.0125)}%`}(i,o):""),1048657&t.$$.dirty[0]|2&t.$$.dirty[1]&&r&&L&&L.x&&L.y&&$t.set(V(b,h),{hard:d===!1})},[b,p,$,E,L,l,d,O,c,u,S,P,()=>{F=!1,k=to($t),X=[V(v??g,h),V(w??m,h)],T()},()=>{F=!0},({detail:D})=>{Q.snap=!F,Q.elastic=!F,rt(k,D.translation,Q)},({detail:D})=>{Q.snap=!1,Q.elastic=!1;const ot=rt(k,D.translation,Q);if(k=void 0,X=void 0,Math.abs(ot-$)<.01)return A($);A(ot)},()=>{n(0,b=rn($,i,o)),T(),A(b)},$t,D=>{D.preventDefault(),D.stopPropagation();const ot=bu(D)*H;et(ot)},({detail:D})=>{et(D[h]*Math.abs(C||8))},h,g,m,v,w,T,M,A,x,C,H,_,r,o,i,s,D=>n(4,L=(ot=>ht(ot.width,ot.height))(D.detail))]}class L0 extends Xe{constructor(e){super(),Ye(this,e,c_,l_,ze,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1])}}var d_={[Vo]:t=>({x:t.x,y:t.y}),[pi]:t=>({x:t.x+t.width,y:t.y}),[Ho]:t=>({x:t.x+t.width,y:t.y}),[hi]:t=>({x:t.x+t.width,y:t.y+t.height}),[Wo]:t=>({x:t.x,y:t.y+t.height}),[mi]:t=>({x:t.x,y:t.y+t.height}),[qo]:t=>({x:t.x,y:t.y}),[ui]:t=>({x:t.x,y:t.y})};function L2(t,e,n){const r=t.slice();return r[14]=e[n].key,r[15]=e[n].translate,r[16]=e[n].scale,r[17]=e[n].type,r[18]=e[n].opacity,r}function D2(t,e){let n,r,i,o,a,s,l,c;return{key:t,first:null,c(){n=dt("div"),I(n,"role","button"),I(n,"aria-label",r=`Drag ${e[17]} ${e[14]}`),I(n,"tabindex",i=e[17]==="edge"?-1:0),I(n,"class","PinturaRectManipulator"),I(n,"data-direction",o=e[14]),I(n,"data-shape",a=e[17]==="edge"?"edge":""+e[0]),I(n,"style",s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`),this.first=n},m(d,u){it(d,n,u),l||(c=[Et(n,"nudge",function(){vn(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),fn(cc.call(null,n,{preventDefault:!0})),Et(n,"interactionstart",function(){vn(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),Et(n,"interactionupdate",function(){vn(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),Et(n,"interactionend",function(){vn(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),fn(lc.call(null,n))],l=!0)},p(d,u){e=d,2&u&&r!==(r=`Drag ${e[17]} ${e[14]}`)&&I(n,"aria-label",r),2&u&&i!==(i=e[17]==="edge"?-1:0)&&I(n,"tabindex",i),2&u&&o!==(o=e[14])&&I(n,"data-direction",o),3&u&&a!==(a=e[17]==="edge"?"edge":""+e[0])&&I(n,"data-shape",a),2&u&&s!==(s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`)&&I(n,"style",s)},d(d){d&&nt(n),l=!1,sn(c)}}}function u_(t){let e,n=[],r=new Map,i=t[1];const o=a=>a[14];for(let a=0;a<i.length;a+=1){let s=L2(t,i,a),l=o(s);r.set(l,n[a]=D2(l,s))}return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Zn()},m(a,s){for(let l=0;l<n.length;l+=1)n[l].m(a,s);it(a,e,s)},p(a,[s]){99&s&&(i=a[1],n=Wa(n,s,o,1,a,i,r,e.parentNode,S5,D2,e,L2))},i:Pe,o:Pe,d(a){for(let s=0;s<n.length;s+=1)n[s].d(a);a&&nt(e)}}}function p_(t,e,n){let r,i,o,a,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=_r("isAnimated");G(t,d,m=>n(11,a=m));const u=_e(void 0,{precision:1e-4,stiffness:.2,damping:.4});G(t,u,m=>n(10,o=m));const p=_e(0,{precision:.001});let h;G(t,p,m=>n(9,i=m));const g=Vi();return t.$$set=m=>{"rect"in m&&n(7,s=m.rect),"visible"in m&&n(8,l=m.visible),"style"in m&&n(0,c=m.style)},t.$$.update=()=>{2304&t.$$.dirty&&u.set(l?1:.5,{hard:a===!1}),2304&t.$$.dirty&&p.set(l?1:0,{hard:a===!1}),1664&t.$$.dirty&&n(1,r=Object.keys(Eh).map((m,$)=>{const b=Eh[m],E=d_[b](s),v=b.length===1?"edge":"corner",w=v==="corner";return{key:b,type:v,scale:{x:/^(t|b)$/.test(b)?s.width:w?rn(o,.5,1.25):1,y:/^(r|l)$/.test(b)?s.height:w?rn(o,.5,1.25):1},translate:{x:E.x,y:E.y},opacity:i}}))},[c,r,d,u,p,(m,$)=>({detail:b})=>{h&&$!==h||m!=="resizestart"&&h===void 0||(m==="resizestart"&&(h=$),m==="resizeend"&&(h=void 0),g(m,{direction:$,translation:b&&b.translation}))},m=>({detail:$})=>{g("resizestart",{direction:m,translation:{x:0,y:0}}),g("resizemove",{direction:m,translation:$}),g("resizeend",{direction:m,translation:{x:0,y:0}})},s,l,i,o,a]}class h_ extends Xe{constructor(e){super(),Ye(this,e,p_,u_,ze,{rect:7,visible:8,style:0})}}var m_=t=>{function e(a,s){t.dispatchEvent(new CustomEvent(a,{detail:s}))}const n=a=>{a.preventDefault(),t.addEventListener("gesturechange",r),t.addEventListener("gestureend",i),e("gesturedown")},r=a=>{a.preventDefault(),e("gestureupdate",a.scale)},i=a=>{e("gestureup",a.scale),a.preventDefault(),o()},o=()=>{t.removeEventListener("gesturechange",r),t.removeEventListener("gestureend",i)};return t.addEventListener("gesturestart",n),{destroy:()=>{o(),t.removeEventListener("gesturestart",n)}}},D0={[Vo]:Wo,[Ho]:qo,[Wo]:Vo,[qo]:Ho,[ui]:hi,[pi]:mi,[hi]:ui,[mi]:pi},k0=t=>{const e=t===qo||t===Ho,n=t===Vo||t===Wo;return[t===Ho||t===pi||t===hi,t===qo||t===mi||t===ui,t===Vo||t===pi||t===ui,t===Wo||t===hi||t===mi,e,n,e||n]},k2=(t,e,n,r={})=>{const{target:i,translate:o}=e,{aspectRatio:a,minSize:s,maxSize:l}=r,c=Xl[D0[i]],d=Ar(ht(t.x,t.y),ht(c[0]*t.width,c[1]*t.height)),u=Xl[i],p=Ar(Re(t),ht(u[0]*t.width,u[1]*t.height)),[h,g,m,$,b,E,v]=k0(i);let w=o.x,T=o.y;b?T=0:E&&(w=0);const{inner:M,outer:A}=f_(d,i,n,{aspectRatio:a,minSize:s,maxSize:l});let[x,C,H,S]=Ds(t);if(h?S=d.x:g&&(C=d.x),$?x=d.y:m&&(H=d.y),h){const y=M.x+M.width,L=A.x+A.width;C=rn(p.x+w,y,L)}else if(g){const y=A.x,L=M.x;S=rn(p.x+w,y,L)}if($){const y=M.y+M.height,L=A.y+A.height;H=rn(p.y+T,y,L)}else if(m){const y=A.y,L=M.y;x=rn(p.y+T,y,L)}if(S>M.x&&(S=M.x),C<M.x+M.width&&(C=M.x+M.width),x>M.y&&(x=M.y),H<M.y+M.height&&(H=M.y+M.height),S<A.x){const y=A.x-S;S=A.x,C+=y}if(C>A.x+A.width){const y=C-(A.x+A.width);C=A.x+A.width,S-=y}if(x<A.y){const y=A.y-x;x=A.y,H+=y}if(H>A.y+A.height){const y=H-(A.y+A.height);H=A.y+A.height,x-=y}if(a)if(v){let y=C-S,L=H-x;b?(L=y/a,x=d.y-.5*L,H=d.y+.5*L):E&&(y=L*a,S=d.x-.5*y,C=d.x+.5*y)}else{const y=ht(p.x+w-d.x,p.y+T-d.y);i===pi?(y.x=Math.max(0,y.x),y.y=Math.min(0,y.y)):i===hi?(y.x=Math.max(0,y.x),y.y=Math.max(0,y.y)):i===mi?(y.x=Math.min(0,y.x),y.y=Math.max(0,y.y)):i===ui&&(y.x=Math.min(0,y.x),y.y=Math.min(0,y.y));const L=Bo(y),O=Bo(ht(M.width,M.height)),_=Bo(ht(A.width,A.height)),P=rn(L,O,_),U=ht(a,1),X=Ci(no(U),P);i===pi?(C=d.x+X.x,x=d.y-X.y):i===hi?(C=d.x+X.x,H=d.y+X.y):i===mi?(S=d.x-X.x,H=d.y+X.y):i===ui&&(S=d.x-X.x,x=d.y-X.y)}return nr(S,x,C-S,H-x)};const f_=(t,e,n,r)=>{const{aspectRatio:i,minSize:o,maxSize:a}=r,s=e===Ho||e===pi||e===hi,l=e===qo||e===mi||e===ui,c=e===Vo||e===pi||e===ui,d=e===Wo||e===hi||e===mi,u=e===qo||e===Ho,p=e===Vo||e===Wo,h=Re(n);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const g=((M,A)=>fi(0,0,M,A))(Math.min(h.width,a.width),Math.min(h.height,a.height));if(i){if(u){const M=Math.min(t.y,n.height-t.y);g.height=Math.min(2*M,g.height)}else if(p){const M=Math.min(t.x,n.width-t.x);g.width=Math.min(2*M,g.width)}}const m=i?Fa(Yo(rr(o),i)):o,$=i?Fa(Cr(g,i)):g;let b,E,v,w;s?b=t.x:l&&(E=t.x),d?v=t.y:c&&(w=t.y),s?E=b+m.width:l&&(b=E-m.width),d?w=v+m.height:c&&(v=w-m.height),u?(v=t.y-.5*m.height,w=t.y+.5*m.height):p&&(b=t.x-.5*m.width,E=t.x+.5*m.width);const T=Lr([ht(b,v),ht(E,w)]);return s?E=b+$.width:l&&(b=E-$.width),d?w=v+$.height:c&&(v=w-$.height),u?(v=t.y-.5*$.height,w=t.y+.5*$.height):p&&(b=t.x-.5*$.width,E=t.x+.5*$.width),b=Math.max(n.x,b),E=Math.min(n.x+n.width,E),v=Math.max(n.y,v),w=Math.min(n.y+n.height,w),{inner:T,outer:Lr([ht(b,v),ht(E,w)])}};var F2=t=>180*t/Math.PI;function g_(t){let e,n,r;return n=new L0({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(F2(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"class","PinturaImageRotator")},m(i,o){it(i,e,o),Ht(n,e,null),r=!0},p(i,[o]){const a={};32&o&&(a.elasticity=i[5]),512&o&&(a.min=i[9]),1024&o&&(a.max=i[10]),2048&o&&(a.value=i[11]),513&o&&(a.valueMin=Math.max(i[9],i[0])),1026&o&&(a.valueMax=Math.min(i[10],i[1])),64&o&&(a.labelReset=i[6]),4096&o&&(a.base=i[12]),2048&o&&(a.valueLabel=Math.round(F2(i[11]))+"&deg;"),4&o&&(a.oninputstart=i[2]),392&o&&(a.oninputmove=i[17]),400&o&&(a.oninputend=i[18]),n.$set(a)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Wt(n)}}}function y_(t,e,n){let r,i,o,a,s,l,c,{rotation:d}=e,{valueMin:u}=e,{valueMax:p}=e,{oninputstart:h=be}=e,{oninputmove:g=be}=e,{oninputend:m=be}=e,{elasticity:$=0}=e,{labelReset:b}=e,{rotationMin:E}=e,{rotationMax:v}=e;return t.$$set=w=>{"rotation"in w&&n(13,d=w.rotation),"valueMin"in w&&n(0,u=w.valueMin),"valueMax"in w&&n(1,p=w.valueMax),"oninputstart"in w&&n(2,h=w.oninputstart),"oninputmove"in w&&n(3,g=w.oninputmove),"oninputend"in w&&n(4,m=w.oninputend),"elasticity"in w&&n(5,$=w.elasticity),"labelReset"in w&&n(6,b=w.labelReset),"rotationMin"in w&&n(14,E=w.rotationMin),"rotationMax"in w&&n(15,v=w.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&n(9,r=E+1e-9),32768&t.$$.dirty&&n(10,i=v-1e-9),1536&t.$$.dirty&&n(12,o=r+.5*(i-r)),32768&t.$$.dirty&&n(16,a=2*v),8192&t.$$.dirty&&n(8,s=Math.sign(d)),73728&t.$$.dirty&&n(7,l=Math.round(Math.abs(d)/a)*a),8576&t.$$.dirty&&n(11,c=d-s*l)},[u,p,h,g,m,$,b,l,s,r,i,c,o,d,E,v,a,w=>g(s*l+w),w=>m(s*l+w)]}class $_ extends Xe{constructor(e){super(),Ye(this,e,y_,g_,ze,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function b_(t){let e,n,r,i,o;return{c(){e=dt("div"),n=dt("p"),r=Sn(t[0]),i=Sn("  "),o=Sn(t[1]),I(e,"class","PinturaImageInfo")},m(a,s){it(a,e,s),vt(e,n),vt(n,r),vt(n,i),vt(n,o)},p(a,[s]){1&s&&Kn(r,a[0]),2&s&&Kn(o,a[1])},i:Pe,o:Pe,d(a){a&&nt(e)}}}function E_(t,e,n){let{width:r}=e,{height:i}=e;return t.$$set=o=>{"width"in o&&n(0,r=o.width),"height"in o&&n(1,i=o.height)},[r,i]}class v_ extends Xe{constructor(e){super(),Ye(this,e,E_,b_,ze,{width:0,height:1})}}function w_(t){let e,n;return e=new dc({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};256&i&&(o.options=r[8]),128&i&&(o.selectedIndex=r[7]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function x_(t){let e,n;return e=new xE({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[w_]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,[i]){const o={};1&i&&(o.icon=r[0]),2&i&&(o.label=r[1]),4&i&&(o.labelClass=r[2]),8&i&&(o.hideLabel=r[3]),512&i&&(o.options=r[9]),16&i&&(o.selectedIndex=r[4]),32&i&&(o.onchange=r[5]),64&i&&(o.optionMapper=r[6]),262528&i&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}const B2='fill="none" stroke="currentColor"';function I_(t,e,n){let r,i,o,{icon:a}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:u}=e,{onchange:p}=e,{optionMapper:h}=e,{filter:g="landscape"}=e,{onfilterchange:m=be}=e;const $=(E,v,w,T,M)=>`
    <rect ${B2} x="${E}" y="${v}" width="${w}" height="${T}" rx="${M}"/>`,b=(E,v)=>`<path ${B2} d="M${E} ${v} l2 2 l3 -4"/>`;return t.$$set=E=>{"icon"in E&&n(0,a=E.icon),"label"in E&&n(1,s=E.label),"labelClass"in E&&n(2,l=E.labelClass),"hideLabel"in E&&n(3,c=E.hideLabel),"options"in E&&n(12,d=E.options),"selectedIndex"in E&&n(4,u=E.selectedIndex),"onchange"in E&&n(5,p=E.onchange),"optionMapper"in E&&n(6,h=E.optionMapper),"filter"in E&&n(11,g=E.filter),"onfilterchange"in E&&n(13,m=E.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&n(9,r=((E,v)=>(E||[]).map(w=>pn(w[0])?(w[1]=w[1].map(v),w):v(w)))(d,(E=>v=>{const[w,T,M={}]=v;return qe(w)&&(M.hidden=E==="landscape"?w<1:w>1),[w,T,M]})(g))),2048&t.$$.dirty&&n(7,i=g==="landscape"?0:1),128&t.$$.dirty&&n(8,o=[["landscape","Landscape",{hideLabel:!0,icon:$(2,6,19,12,2)+(i===0?b(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:$(5,3,13,18,2)+(i===1?b(9,12):"")}]])},[a,s,l,c,u,p,h,i,o,r,E=>{n(11,g=E.value),m(E.value)},g,d,m]}class T_ extends Xe{constructor(e){super(),Ye(this,e,I_,x_,ze,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const N2=t=>zi(t,e=>de(e,6)),G2=t=>Xr(t,e=>de(e,6)),Oo=(t,e,n=1e-4)=>Math.abs(t-e)<n;var R_=(t,e,n,r,i={})=>{const{aspectRatio:o}=i;t=G2(t),r=r.map(N2);const a=sg(t,D0[n.target]),s=zi(a,b=>de(b,6)),l=o?Yo(i.minSize,o):i.minSize,c=o?Cr(i.maxSize,o):i.maxSize,d=sg(e,n.target);if(oi(d,a)<1){e=Re(t);const b=Math.min(l.width/t.width,l.height/t.height);qn(e,b,a)}e=ag(Re(e),l,c,a);let u=Re(e);e=G2(e);const p=rb(r,1),h=Xo(t),g=Xo(e),m=h.findIndex(b=>Pa(zi(b,E=>de(E,6)),s)),$=b=>p.map(E=>n0(E,b)).filter(Boolean).pop();if(o){const b=g.map((E,v)=>{if(v===m)return;const w=ht(a.x-E.x,a.y-E.y);no(w),Ci(w,.5);const T=ht(a.x-w.x,a.y-w.y),M=Ba(T,N2(E)),A=$(M);if(!A)return;const x=h[v];return{intersection:A,cornerDist:oi(a,x),intersectionDist:oi(a,A)}}).filter(Boolean);if(b.length){const E=b.reduce((v,w)=>{const T=w.intersectionDist/w.cornerDist;return T<v?T:v},Number.MAX_SAFE_INTEGER);u=Re(t),qn(u,E,a)}}else{const b=n.target.length===1,E=!(r[0].y===r[1].y||r[0].x===r[1].x),v=h.map((w,T)=>{if(T===m)return;const M=g[T],A=!Oo(M.x,s.x)&&!Oo(M.y,s.y);if(!b&&!E&&A||b&&(Oo(M.x,s.x)||Oo(M.y,s.y)))return;const x=je(b?w:a),C=Un(je(x),M);no(C),Ci(C,.5),b?Ar(x,C):Un(x,C);const H=Ba(x,M);return $(H)||void 0}).filter(Boolean);if(v.length){const[w,T,M,A]=k0(n.target);let[x,C,H,S]=Ds(e);v.forEach(({x:y,y:L})=>{const O=de(y,6),_=de(L,6);M&&!Oo(_,s.y)&&(x=Math.max(x,L)),w&&!Oo(O,s.x)&&(C=Math.min(C,y)),A&&!Oo(_,s.y)&&(H=Math.min(H,L)),T&&!Oo(O,s.x)&&(S=Math.max(S,y))}),u=DR([x,C,H,S]),qn(u,.9999,a)}}return ag(u,l,c,a),u};function S_(t){let e,n;return e=new uc({props:{items:t[11]}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};2048&i[0]&&(o.items=r[11]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function M_(t){let e,n,r;return n=new JC({props:{$$slots:{default:[S_]},$$scope:{ctx:t}}}),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"slot","header")},m(i,o){it(i,e,o),Ht(n,e,null),r=!0},p(i,o){const a={};2048&o[0]|1&o[7]&&(a.$$scope={dirty:o,ctx:i}),n.$set(a)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){j(n.$$.fragment,i),r=!1},d(i){i&&nt(e),Wt(n)}}}function z2(t){let e,n;return e=new qa({props:{onclick:t[87],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};16&i[0]&&(o.label=r[4].cropLabelButtonRecenter),16&i[0]&&(o.icon=r[4].cropIconButtonRecenter),512&i[0]&&(o.disabled=!r[9]),1610612736&i[0]&&(o.style=`opacity: ${r[29]}; transform: translate3d(${r[30].x}px, ${r[30].y}px, 0)`),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function U2(t){let e,n;return e=new h_({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[67]),e.$on("resizemove",t[68]),e.$on("resizeend",t[69]),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};256&i[0]&&(o.rect=r[8]),4096&i[0]&&(o.visible=r[12]),2&i[0]&&(o.style=r[1]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function V2(t){let e,n;return e=new v_({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};8192&i[0]&&(o.width=Math.round(r[13].width)),8192&i[0]&&(o.height=Math.round(r[13].height)),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function C_(t){let e,n,r,i,o,a,s,l,c=t[21]&&t[10]&&z2(t),d=t[21]&&U2(t),u=t[22]&&V2(t);return{c(){e=dt("div"),n=dt("div"),c&&c.c(),r=Kt(),d&&d.c(),o=Kt(),u&&u.c(),I(n,"class","PinturaStage"),I(e,"slot","main")},m(p,h){it(p,e,h),vt(e,n),c&&c.m(n,null),vt(n,r),d&&d.m(n,null),t[161](n),vt(e,o),u&&u.m(e,null),a=!0,s||(l=[fn(yr.call(null,n)),Et(n,"measure",t[159]),Et(n,"wheel",function(){vn(t[2]&&t[86])&&(t[2]&&t[86]).apply(this,arguments)},{passive:!1}),Et(n,"interactionstart",t[73]),Et(n,"interactionupdate",t[74]),Et(n,"interactionrelease",t[76]),Et(n,"interactionend",t[75]),fn(i=lc.call(null,n,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:W2,getEventPosition:t[162]})),Et(n,"gesturedown",t[83]),Et(n,"gestureupdate",t[84]),Et(n,"gestureup",t[85]),fn(m_.call(null,n))],s=!0)},p(p,h){(t=p)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&B(c,1)):(c=z2(t),c.c(),B(c,1),c.m(n,r)):c&&(we(),j(c,1,1,()=>{c=null}),xe()),t[21]?d?(d.p(t,h),2097152&h[0]&&B(d,1)):(d=U2(t),d.c(),B(d,1),d.m(n,null)):d&&(we(),j(d,1,1,()=>{d=null}),xe()),i&&vn(i.update)&&16777220&h[0]&&i.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:W2,getEventPosition:t[162]}),t[22]?u?(u.p(t,h),4194304&h[0]&&B(u,1)):(u=V2(t),u.c(),B(u,1),u.m(e,null)):u&&(we(),j(u,1,1,()=>{u=null}),xe())},i(p){a||(B(c),B(d),B(u),a=!0)},o(p){j(c),j(d),j(u),a=!1},d(p){p&&nt(e),c&&c.d(),d&&d.d(),t[161](null),u&&u.d(),s=!1,sn(l)}}}function H2(t){let e,n,r,i;const o=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let a={$$slots:{default:[__,({tab:c})=>({216:c}),({tab:c})=>[0,0,0,0,0,0,c?1073741824:0]]},$$scope:{ctx:t}};for(let c=0;c<o.length;c+=1)a=Tn(a,o[c]);e=new S0({props:a}),e.$on("select",t[160]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[O_,({panel:c})=>({215:c}),({panel:c})=>[0,0,0,0,0,0,c?536870912:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=Tn(l,s[c]);return r=new M0({props:l}),{c(){qt(e.$$.fragment),n=Kt(),qt(r.$$.fragment)},m(c,d){Ht(e,c,d),it(c,n,d),Ht(r,c,d),i=!0},p(c,d){const u=262272&d[0]?gr(o,[o[0],128&d[0]&&{tabs:c[7]},262144&d[0]&&wr(c[18])]):{};1073741824&d[6]|1&d[7]&&(u.$$scope={dirty:d,ctx:c}),e.$set(u);const p=393216&d[0]?gr(s,[s[0],s[1],131072&d[0]&&{panels:c[17]},262144&d[0]&&wr(c[18])]):{};511721496&d[0]|536870912&d[6]|1&d[7]&&(p.$$scope={dirty:d,ctx:c}),r.$set(p)},i(c){i||(B(e.$$.fragment,c),B(r.$$.fragment,c),i=!0)},o(c){j(e.$$.fragment,c),j(r.$$.fragment,c),i=!1},d(c){Wt(e,c),c&&nt(n),Wt(r,c)}}}function __(t){let e,n,r=t[216].label+"";return{c(){e=dt("span"),n=Sn(r)},m(i,o){it(i,e,o),vt(e,n)},p(i,o){1073741824&o[6]&&r!==(r=i[216].label+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function P_(t){let e,n;return e=new L0({props:{elasticity:t[25]*t[43],base:F_,min:t[23],max:k_,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[80],oninputmove:t[81],oninputend:t[82]}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};33554432&i[0]&&(o.elasticity=r[25]*r[43]),8388608&i[0]&&(o.min=r[23]),134217728&i[0]&&(o.valueMin=r[27][0]),134217728&i[0]&&(o.valueMax=r[27][1]),268435456&i[0]&&(o.value=r[28]),16&i[0]&&(o.labelReset=r[4].labelReset),268435456&i[0]&&(o.valueLabel=Math.round(100*r[28])+"%"),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function A_(t){let e,n;return e=new $_({props:{elasticity:t[25]*t[43],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[70],oninputmove:t[71],oninputend:t[72]}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};33554432&i[0]&&(o.elasticity=r[25]*r[43]),16384&i[0]&&(o.rotation=r[14]),16&i[0]&&(o.labelReset=r[4].labelReset),67108864&i[0]&&(o.valueMin=r[26][0]),67108864&i[0]&&(o.valueMax=r[26][1]),8&i[0]&&(o.rotationMin=-r[3]),8&i[0]&&(o.rotationMax=r[3]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function O_(t){let e,n,r,i;const o=[A_,P_],a=[];function s(l,c){return l[215]===l[92]+"-rotation"?0:l[215]===l[92]+"-zoom"?1:-1}return~(e=s(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),r=Zn()},m(l,c){~e&&a[e].m(l,c),it(l,r,c),i=!0},p(l,c){let d=e;e=s(l),e===d?~e&&a[e].p(l,c):(n&&(we(),j(a[d],1,1,()=>{a[d]=null}),xe()),~e?(n=a[e],n?n.p(l,c):(n=a[e]=o[e](l),n.c()),B(n,1),n.m(r.parentNode,r)):n=null)},i(l){i||(B(n),i=!0)},o(l){j(n),i=!1},d(l){~e&&a[e].d(l),l&&nt(r)}}}function L_(t){let e,n,r=t[19]&&H2(t);return{c(){e=dt("div"),r&&r.c(),I(e,"slot","footer"),I(e,"style",t[16])},m(i,o){it(i,e,o),r&&r.m(e,null),n=!0},p(i,o){i[19]?r?(r.p(i,o),524288&o[0]&&B(r,1)):(r=H2(i),r.c(),B(r,1),r.m(e,null)):r&&(we(),j(r,1,1,()=>{r=null}),xe()),(!n||65536&o[0])&&I(e,"style",i[16])},i(i){n||(B(r),n=!0)},o(i){j(r),n=!1},d(i){i&&nt(e),r&&r.d()}}}function D_(t){let e,n,r;function i(a){t[163](a)}let o={hasHeader:t[20],$$slots:{footer:[L_],main:[C_],header:[M_]},$$scope:{ctx:t}};return t[15]!==void 0&&(o.root=t[15]),e=new O0({props:o}),on.push(()=>Zr(e,"root",i)),e.$on("measure",t[164]),{c(){qt(e.$$.fragment)},m(a,s){Ht(e,a,s),r=!0},p(a,s){const l={};1048576&s[0]&&(l.hasHeader=a[20]),2146402302&s[0]|1&s[7]&&(l.$$scope={dirty:s,ctx:a}),!n&&32768&s[0]&&(n=!0,l.root=a[15],di(()=>n=!1)),e.$set(l)},i(a){r||(B(e.$$.fragment,a),r=!0)},o(a){j(e.$$.fragment,a),r=!1},d(a){Wt(e,a)}}}const k_=1,F_=0,W2=(t,e)=>t.target===e;function B_(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,M,A,x,C,H,S,y,L,O,_,P,U,X,k,F,Q,rt,$t,V,Y,q,et,D,ot,st,gt,Lt,Xt,Ct,Ut,Le,mt,pt,It,At,Tt,le,oe,Zt,Se,Ie,He,Ce,Vt,ae,ue,me,Ze,lt,Bt,ye,se,Je=Pe,Me=()=>(Je(),Je=ao(fe,R=>n(12,_=R)),fe);t.$$.on_destroy.push(()=>Je());let{isActive:fe}=e;Me();let{stores:tn}=e,{cropImageSelectionCornerStyle:W="circle"}=e,{cropWillRenderImageSelectionGuides:Dt=(R,jt)=>{const Jt=R=="rotate";return{rows:Jt?5:3,cols:Jt?5:3,opacity:.25*jt}}}=e,{cropAutoCenterImageSelectionTimeout:N}=e,{cropEnableZoomMatchImageAspectRatio:yt=!0}=e,{cropEnableRotateMatchImageAspectRatio:Ot="never"}=e,{cropEnableRotationInput:zt=!0}=e,{cropEnableZoom:Yt=!0}=e,{cropEnableZoomInput:wt=!0}=e,{cropEnableZoomAutoHide:Qt=!0}=e,{cropEnableImageSelection:re=!0}=e,{cropEnableInfoIndicator:pe=!1}=e,{cropEnableZoomTowardsWheelPosition:Ee=!0}=e,{cropEnableLimitWheelInputToCropSelection:$e=!0}=e,{cropEnableCenterImageSelection:Be=!0}=e,{cropEnableButtonRotateLeft:ge=!0}=e,{cropEnableButtonRotateRight:St=!1}=e,{cropEnableButtonFlipHorizontal:kt=!0}=e,{cropEnableButtonFlipVertical:K=!1}=e,{cropSelectPresetOptions:Nt}=e,{cropEnableSelectPreset:_t=!0}=e,{cropEnableFilterMatchAspectRatio:Ft=!0}=e,{cropSelectPresetFilter:Mt=!1}=e,{cropEnableButtonToggleCropLimit:Te=!1}=e,{cropWillRenderTools:Gt=xn}=e,{cropActiveTransformTool:te="rotation"}=e,{cropMinimizeToolbar:Ue="auto"}=e,{cropInteractionFocus:ln="image"}=e,{cropRotationRange:Mn=_a}=e,{cropMaskOpacity:hn=.85}=e,{locale:xt={}}=e;const ie=_r("isAnimated");G(t,ie,R=>n(138,P=R));const kn=_r("elasticityMultiplier");G(t,kn,R=>n(25,me=R));const Jn=_r("redrawTrigger");G(t,Jn,R=>n(158,ue=R));const ir=_r("imageIsStatic");G(t,ir,R=>n(144,$t=R));const Fn=_r("imageStaticVisualCorners");G(t,Fn,R=>n(179,oe=R));let Bn="idle";const wn=Pt();G(t,wn,R=>n(155,Ce=R));const xr=()=>Tt===void 0,kr=R=>1/R,Hi=R=>{Ft&&Mt!==R&&(n(94,Mt=R),Tt&&Tt!==1&&Fr()&&ut(pr,Tt=kr(Tt),Tt))},Fr=()=>{if(Tt===1||!r)return!1;const R=kr(Tt);return!!ql(Ce).find(([jt])=>jt===R)},co=(R,jt,Jt)=>Fi(Jt)?jt.width===Math.round(R.height)||jt.height===Math.round(R.width):jt.width===Math.round(R.width)||jt.height===Math.round(R.height),ur=()=>(xr()||Ot==="always"&&Fr())&&((R,jt,Jt)=>{const Oe=No(X$(Mr(jt),Jt),ce=>Math.abs(Math.round(ce))),Qe=oc(Oe),Ve=nn(R);return Pa(Qe,Ve)})(V,Xt,Ct)&&co(V,Xt,Ct),uo=R=>{if(Ot!=="never"&&ur()){ut(Ur,Ct+=R,Ct);const jt=Fi(Ct),Jt=jt?Xt.height:Xt.width,Oe=jt?Xt.width:Xt.height;ut(Ir,V=nr(0,0,Jt,Oe),V),xr()||ut(pr,Tt=Lo(Jt,Oe),Tt)}else ut(Ur,Ct+=R,Ct)},{history:or,env:ar,isInteracting:Ke,isInteractingFraction:js,isTransformingImage:Wn,rootRect:ja,stageRect:po,utilRect:pc,utilRectPadded:Kr,rootLineColor:sr,allowPan:gn,allowZoom:Ya,allowPlayPause:Xa,rangeInputElasticity:ho,presentationScalar:mo,utilTools:Qo,imagePreviewModifiers:Wi,imageOutlineOpacity:Ys,imageFlipX:fo,imageFlipY:go,imageRotation:Ur,imageRotationRange:Za,imageOutputSize:Pi,imageSelectionRect:Br,imageSelectionRectSnapshot:Ai,imageSelectionRectIntent:yo,imageSelectionRectPresentation:$o,imageCropRectIntent:Vr,imageCropRectOrigin:yi,imageCropRect:Ir,imageCropMinSize:bo,imageCropMaxSize:Eo,imageCropRange:qi,imageCropAspectRatio:pr,imageCropLimitToImage:vo,imageSize:wo,imageScalar:Xs,imageOverlayMarkup:Nr,stagePadded:$r,stageRecenter:Jo}=tn;let xo;G(t,ar,R=>n(139,U=R)),G(t,Ke,R=>n(143,rt=R)),G(t,Wn,R=>n(172,gt=R)),G(t,ja,R=>n(24,mt=R)),G(t,po,R=>n(150,st=R)),G(t,Kr,R=>n(147,et=R)),G(t,mo,R=>n(146,q=R)),G(t,Qo,R=>n(181,Se=R)),G(t,Wi,R=>n(171,F=R)),G(t,fo,R=>n(157,ae=R)),G(t,go,R=>n(156,Vt=R)),G(t,Ur,R=>n(14,Ct=R)),G(t,Za,R=>n(26,Ze=R)),G(t,Pi,R=>n(182,Ie=R)),G(t,Br,R=>n(149,ot=R)),G(t,Ai,R=>n(148,D=R)),G(t,yo,R=>n(180,Zt=R)),G(t,$o,R=>n(142,Q=R)),G(t,Vr,R=>n(174,pt=R)),G(t,yi,R=>n(176,At=R)),G(t,Ir,R=>n(13,V=R)),G(t,bo,R=>n(153,Le=R)),G(t,Eo,R=>n(178,le=R)),G(t,qi,R=>n(175,It=R)),G(t,pr,R=>n(177,Tt=R)),G(t,vo,R=>n(152,Ut=R)),G(t,wo,R=>n(151,Xt=R)),G(t,Xs,R=>n(145,Y=R)),G(t,$r,R=>n(141,k=R));const ta=(R,jt)=>{const Jt={target:R,translate:jt},Oe=yd(Mr(Le),q),Qe=yd(Mr(le),q);let Ve=k2(D,Jt,{...et,x:0,y:0},{aspectRatio:Tt,minSize:Oe,maxSize:Qe});if(Ve=((ve,Ne,Ge)=>{const[bn,Rn,mn,In]=Ds(ve),Ae={...ve};if(bn<Ne.y&&(ve.height=ve.height-(Ne.y-bn),ve.y=Ne.y),Rn>Ne.x+Ne.width&&(ve.width=Ne.x+Ne.width-ve.x),mn>Ne.y+Ne.height&&(ve.height=Ne.y+Ne.height-ve.y),In<Ne.x&&(ve.width=ve.width-(Ne.x-In),ve.x=Ne.x),Ge){const br=Math.min(1,Ae.width/ve.width,Ae.height/ve.height);return zo(Ae,br)}return ve})(Ve,{...et,x:0,y:0},Tt),!Ut)return{boundsLimited:Ve,boundsIntent:Ve};let ce=R_(D,Ve,Jt,oe,{aspectRatio:Tt,minSize:Oe,maxSize:Qe});return{boundsLimited:ce,boundsIntent:ce}},ea=(R,jt)=>{const Jt={target:R,translate:jt},Oe=yd(Mr(Le),q),Qe=yd(Mr(le),q),Ve=((ce,ve,Ne={})=>{const{target:Ge,translate:bn}=ve,{aspectRatio:Rn,minSize:mn}=Ne,In=Xl[D0[Ge]],Ae=Ar(Re(ce),ht(In[0]*ce.width,In[1]*ce.height)),br=Xl[Ge],Yi=Ar(Re(ce),ht(br[0]*ce.width,br[1]*ce.height)),[Qs,Js,tl,el,ns,rs,nl]=k0(Ge);let So=bn.x,Xi=bn.y;ns?Xi=0:rs&&(So=0);let[lr,Er,Tr,Rr]=Ds(ce);if(Qs?Rr=Ae.x:Js&&(Er=Ae.x),el?lr=Ae.y:tl&&(Tr=Ae.y),Qs?Er=Yi.x+So:Js&&(Rr=Yi.x+So),el?Tr=Yi.y+Xi:tl&&(lr=Yi.y+Xi),mn&&ns&&Tr-lr<mn.height){const un=mn.height-(Tr-lr);lr-=.5*un,Tr+=.5*un}if(mn&&rs&&Er-Rr<mn.width){const un=mn.width-(Er-Rr);Rr-=.5*un,Er+=.5*un}if(Rn)if(nl){let un=Er-Rr,Ei=Tr-lr;ns?(Ei=un/Rn,lr=Ae.y-.5*Ei,Tr=Ae.y+.5*Ei):rs&&(un=Ei*Rn,Rr=Ae.x-.5*un,Er=Ae.x+.5*un)}else{const un=ht(Yi.x+So-Ae.x,Yi.y+Xi-Ae.y);Ge===pi?(un.x=Math.max(0,un.x),un.y=Math.min(0,un.y)):Ge===hi?(un.x=Math.max(0,un.x),un.y=Math.max(0,un.y)):Ge===mi?(un.x=Math.min(0,un.x),un.y=Math.max(0,un.y)):Ge===ui&&(un.x=Math.min(0,un.x),un.y=Math.min(0,un.y));const Ei=Bo(un),an=ht(Rn,1),vi=Ci(no(an),Ei);Ge===pi?(Er=Ae.x+vi.x,lr=Ae.y-vi.y):Ge===hi?(Er=Ae.x+vi.x,Tr=Ae.y+vi.y):Ge===mi?(Rr=Ae.x-vi.x,Tr=Ae.y+vi.y):Ge===ui&&(Rr=Ae.x-vi.x,lr=Ae.y-vi.y)}return nr(Rr,lr,Er-Rr,Tr-lr)})(D,Jt,{aspectRatio:Tt,minSize:Oe});return{boundsLimited:k2(D,Jt,{...et,x:0,y:0},{aspectRatio:Tt,minSize:Oe,maxSize:Qe}),boundsIntent:Ve}};let hr,Io;const Qr=({translation:R,scalar:jt})=>{$t&&(jt=1,R=Gl(je(R)));const Jt=Math.min(ot.width/V.width,ot.height/V.height),Oe=Ci(je(R),1/Jt);let Qe;if(Io){const Ve=Un(je(Io),R);Io=R,Qe=ai(Re(V),Ve)}else Qe=ai(Re(hr),Gl(je(Oe))),jt!==void 0&&qn(Qe,1/jt);ut(Vr,pt=Qe,pt),ut(Ir,V=Qe,V)},Ka=ke([qi,Ir],([R,jt],Jt)=>{if(!jt)return;const[Oe,Qe]=R,Ve=Gn(jt);Jt([Fa(Xr(Yo(Oe,Ve),de)),Fa(Xr(Cr(Qe,Ve),de))])});G(t,Ka,R=>n(173,Lt=R));const ji=ke([wo,vo,bo,Eo,qi,Ur],([R,jt,Jt,Oe,Qe,Ve],ce)=>{if(!R)return;const ve=Qe[0],Ne=Qe[1];let Ge,bn;jt?(Ge=((Rn,mn,In)=>Fi(In)?1-1/Math.min(Rn.height/mn.width,Rn.width/mn.height):1-1/Math.min(Rn.width/mn.width,Rn.height/mn.height))(R,Ne,Ve),bn=Math.min(ve.width/Jt.width,ve.height/Jt.height)):(Ge=-1,bn=1),ce([Ge,bn].map(Rn=>de(Rn)))});G(t,ji,R=>n(27,lt=R));const Zs=ke([wo,Ir,qi,Ur],([R,jt,Jt,Oe],Qe)=>{if(!R||!jt)return Qe(0);let Ve;const ce=Jt[0],ve=Jt[1],Ne=jt.width,Ge=jt.height,bn=Gn(jt),Rn=Fi(Oe)?fr(R.height,R.width):R,mn=Cr(Rn,bn);if(Ne<=mn.width||Ge<=mn.height){const In=mn.width-ce.width,Ae=mn.height-ce.height;Ve=In===0||Ae===0?1:1-Math.min((Ne-ce.width)/In,(Ge-ce.height)/Ae)}else{const In=ve.width-mn.width,Ae=ve.height-mn.height,br=Cr({width:In,height:Ae},bn);Ve=-Math.min((Ne-mn.width)/br.width,(Ge-mn.height)/br.height)}Qe(Ve)});G(t,Zs,R=>n(28,Bt=R));const Ks=R=>{const jt=Gn(hr);let Jt,Oe,Qe;const Ve=Fi(Ct)?fr(Xt.height,Xt.width):Xt,ce=Cr(Ve,jt);if(R>=0){const Ge=ce.width-It[0].width,bn=ce.height-It[0].height;Jt=ce.width-Ge*R,Oe=ce.height-bn*R,Qe=Yo({width:Jt,height:Oe},jt)}else{const Ge=It[1].width-ce.width,bn=It[1].height-ce.height;Jt=ce.width+Ge*-R,Oe=ce.height+bn*-R,Qe=Cr({width:Jt,height:Oe},jt)}Jt=Qe.width,Oe=Qe.height;const ve=hr.x+.5*hr.width-.5*Jt,Ne=hr.y+.5*hr.height-.5*Oe;ut(Ir,V={x:ve,y:Ne,width:Jt,height:Oe},V)};let $i;const Qa=R=>{const jt=qn(Re($i),1/R);ut(Vr,pt=jt,pt),ut(Ir,V=jt,V)};let na;const Ja=()=>{Jo.set({})};let ra;const ia=_e(0,{precision:1e-4});G(t,ia,R=>n(29,ye=R));const oa=_e();G(t,oa,R=>n(30,se=R));const To=ke([pr,Pi,wn],([R,jt,Jt],Oe)=>{if(!r)return;const Qe=ql(Jt),Ve=[...Qe].map(ce=>ce[0]).sort((ce,ve)=>er(ce[0])&&!er(ve[0])?1:-1).find(ce=>{if(er(ce)&&jt){const[ve,Ne]=ce,Ge=jt.width===ve&&jt.height===Ne,bn=R===Lo(ve,Ne);return Ge&&bn}return ce===R});if(!Ve)return Oe(void 0);Oe(Qe.map(ce=>ce[0]).findIndex(ce=>er(ce)?Ko(ce,Ve):ce===Ve))});G(t,To,R=>n(154,He=R));const aa=(R,jt)=>{if(!r||R===-1||R===void 0)return;const Jt=ql(jt)[R][0];return Jt?er(Jt)?Lo(Jt[0],Jt[1]):Jt:void 0},ts=ke([sr,$o,js],([R,jt,Jt],Oe)=>{const{rows:Qe,cols:Ve,opacity:ce}=Dt(Bn,Jt);if(!jt||ce<=0)return Oe([]);const{x:ve,y:Ne,width:Ge,height:bn}=jt,Rn=Ge/Ve,mn=bn/Qe,In=[];for(let Ae=1;Ae<=Qe-1;Ae++){const br=Ne+mn*Ae;In.push({id:"image-selection-guide-row-"+Ae,points:[ht(ve,br),ht(ve+Ge,br)],opacity:ce,strokeWidth:1,strokeColor:R})}for(let Ae=1;Ae<=Ve-1;Ae++){const br=ve+Rn*Ae;In.push({id:"image-selection-guide-col-"+Ae,points:[ht(br,Ne),ht(br,Ne+bn)],opacity:ce,strokeWidth:1,strokeColor:R})}Oe(In)});G(t,ts,R=>n(140,X=R));const Oi="crop-"+Ua();let Jr,es=Oi+"-"+(zt?te:"zoom"),Ro=es,Li;const bi=_e(P?20:0);return G(t,bi,R=>n(137,O=R)),t.$$set=R=>{"isActive"in R&&Me(n(0,fe=R.isActive)),"stores"in R&&n(96,tn=R.stores),"cropImageSelectionCornerStyle"in R&&n(1,W=R.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in R&&n(97,Dt=R.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in R&&n(98,N=R.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in R&&n(99,yt=R.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in R&&n(100,Ot=R.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in R&&n(101,zt=R.cropEnableRotationInput),"cropEnableZoom"in R&&n(2,Yt=R.cropEnableZoom),"cropEnableZoomInput"in R&&n(102,wt=R.cropEnableZoomInput),"cropEnableZoomAutoHide"in R&&n(103,Qt=R.cropEnableZoomAutoHide),"cropEnableImageSelection"in R&&n(104,re=R.cropEnableImageSelection),"cropEnableInfoIndicator"in R&&n(105,pe=R.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in R&&n(106,Ee=R.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in R&&n(107,$e=R.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in R&&n(108,Be=R.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in R&&n(109,ge=R.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in R&&n(110,St=R.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in R&&n(111,kt=R.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in R&&n(112,K=R.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in R&&n(113,Nt=R.cropSelectPresetOptions),"cropEnableSelectPreset"in R&&n(114,_t=R.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in R&&n(115,Ft=R.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in R&&n(94,Mt=R.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in R&&n(116,Te=R.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in R&&n(117,Gt=R.cropWillRenderTools),"cropActiveTransformTool"in R&&n(118,te=R.cropActiveTransformTool),"cropMinimizeToolbar"in R&&n(119,Ue=R.cropMinimizeToolbar),"cropInteractionFocus"in R&&n(120,ln=R.cropInteractionFocus),"cropRotationRange"in R&&n(3,Mn=R.cropRotationRange),"cropMaskOpacity"in R&&n(121,hn=R.cropMaskOpacity),"locale"in R&&n(4,xt=R.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&ir.set(ln==="selection"&&_),1048576&t.$$.dirty[3]&&n(128,r=Nt&&Array.isArray(Nt)&&Nt.length),1048576&t.$$.dirty[3]|16&t.$$.dirty[4]&&wn.set(r?Nt:[]),4096&t.$$.dirty[0]&&_&&Ys.set(1),4096&t.$$.dirty[0]&&gn.set(!_),4096&t.$$.dirty[0]&&Ya.set(!_),4096&t.$$.dirty[0]&&_&&Xa.set(!0),32768&t.$$.dirty[4]&&n(123,h=U.layoutMode==="overlay"),1075838976&t.$$.dirty[3]&&n(127,T=_t&&!h),41943040&t.$$.dirty[4]&&n(136,l=et&&ot&&Nd(et,ot)),33558528&t.$$.dirty[4]&&n(134,c=!(!ot||!l)),33559552&t.$$.dirty[4]&&n(132,d=c&&li(ot,l,R=>de(R,5))),16400&t.$$.dirty[0]|26148866&t.$$.dirty[3]|2013298968&t.$$.dirty[4]|15&t.$$.dirty[5]&&n(11,i=ue&&Gt([ge&&["Button","rotate-left",{label:xt.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:xt.cropIconButtonRotateLeft,onclick:()=>{uo(-Math.PI/2),or.write()}}],St&&["Button","rotate-right",{label:xt.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:xt.cropIconButtonRotateRight,onclick:()=>{uo(Math.PI/2),or.write()}}],kt&&["Button","flip-horizontal",{label:xt.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:xt.cropIconButtonFlipHorizontal,onclick:()=>{Fi(Ct)?ut(go,Vt=!Vt,Vt):ut(fo,ae=!ae,ae),or.write()}}],K&&["Button","flip-vertical",{label:xt.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:xt.cropIconButtonFlipVertical,onclick:()=>{Fi(Ct)?ut(fo,ae=!ae,ae):ut(go,Vt=!Vt,Vt),or.write()}}],T&&r&&[Mt===!1?"Dropdown":T_,"select-preset",{icon:jn(xt.cropIconSelectPreset,xt,aa(He,Ce)),label:jn(xt.cropLabelSelectPreset,xt,aa(He,Ce)),labelClass:"PinturaToolbarContentWide",options:Ce,filter:Mt,onfilterchange:Hi,selectedIndex:He,onchange:({value:R})=>{er(R)?(ut(pr,Tt=Lo(R[0],R[1]),Tt),ut(Pi,Ie=OR(R),Ie)):ut(pr,Tt=R,Tt),d&&Ja(),or.write()},optionMapper:R=>{let jt=!1;const Jt=er(R.value)?R.value[0]/R.value[1]:R.value;if(Jt){const Oe=Rs(Xt,Ct,Jt);jt=Oe.width<Le.width||Oe.height<Le.height}return R.icon=((Oe,Qe={})=>{const{width:Ve=24,height:ce=24,bounds:ve=16,radius:Ne=3}=Qe;let Ge,bn,Rn,mn,In=er(Oe)?Lo(Oe[0],Oe[1]):Oe,Ae=!!In;return In=Ae?In:1,Rn=In>1?ve:In*ve,mn=Rn/In,Ge=Math.round(.5*(Ve-Rn)),bn=Math.round(.5*(ce-mn)),`<rect fill="${Ae?"currentColor":"none"}" stroke="${Ae?"none":"currentColor"}" stroke-width="${Ve/16}" stroke-dasharray="${[Ve/12,Ve/6].join(" ")}" x="${Ge}" y="${bn}" width="${Rn}" height="${mn}" rx="${Ne}"/>`})(R.value,{bounds:14}),{...R,disabled:jt}}}],Te&&["Dropdown","select-crop-limit",{icon:jn(xt.cropIconCropBoundary,xt,Ut),label:xt.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:R})=>{ut(vo,Ut=R,Ut),or.write()},options:[[!0,xt.cropLabelCropBoundaryEdge,{icon:jn(xt.cropIconCropBoundary,xt,!0)}],[!1,xt.cropLabelCropBoundaryNone,{icon:jn(xt.cropIconCropBoundary,xt,!1)}]]}]].filter(Boolean),U,()=>Jn.set({})).filter(Boolean)),6144&t.$$.dirty[0]|1140850688&t.$$.dirty[3]|32768&t.$$.dirty[4]&&ut(Qo,Se=_&&Ue!=="never"&&(Ue==="always"||U.verticalSpace==="short"||h)?i.map(([R,jt,Jt])=>Array.isArray(Jt)?[R,jt,Jt]:[R,jt,{...Jt,hideLabel:!0}]):[],Se),268435456&t.$$.dirty[4]&&n(23,o=Ut?0:-1),75497472&t.$$.dirty[4]&&n(129,a=et&&ht(-(st.x-et.x),-(st.y-et.y))),262176&t.$$.dirty[4]&&n(130,s=Q&&ht(_h(Q.x+.5*Q.width+a.x),_h(Q.y+.5*Q.height+a.y))),16777216&t.$$.dirty[4]&&n(133,u=D!=null),8392704&t.$$.dirty[4]&&n(135,p=et&&l&&(l.height===et.height||l.width===et.width)),6293504&t.$$.dirty[4]&&n(131,g=!p&&q<1&&Y<1),1920&t.$$.dirty[4]&&n(9,m=c&&!u&&(!d||g)),8192&t.$$.dirty[0]|1073745920&t.$$.dirty[3]&&n(22,$=pe&&!!V&&!h),262176&t.$$.dirty[4]&&n(8,v=Q&&a&&{x:Q.x+a.x,y:Q.y+a.y,width:Q.width,height:Q.height}),256&t.$$.dirty[0]|1073743872&t.$$.dirty[3]&&n(21,b=re&&!!v&&!h),32800&t.$$.dirty[3]|1048640&t.$$.dirty[4]&&n(10,E=Be&&!!s&&!N&&!$t),512&t.$$.dirty[0]|536870944&t.$$.dirty[3]|524288&t.$$.dirty[4]&&m&&N&&!rt&&(clearTimeout(ra),n(122,ra=setTimeout(Ja,N))),536870912&t.$$.dirty[3]|524288&t.$$.dirty[4]&&rt&&clearTimeout(ra),1536&t.$$.dirty[0]|16384&t.$$.dirty[4]&&ia.set(E&&m?1:0,{hard:P===!1}),16448&t.$$.dirty[4]&&oa.set(s,{hard:P===!1}),4096&t.$$.dirty[0]|131072&t.$$.dirty[4]&&(_&&!k?(ut(Wi,F.crop={maskOpacity:hn,maskMarkupOpacity:hn},F),Wi.set(F)):(delete F.crop,Wi.set(F))),65536&t.$$.dirty[4]&&X&&Nr.update(R=>{const jt=R.filter(Jt=>!/^image\-selection\-guide/.test(Jt.id));return _?[...jt,...X]:jt}),32768&t.$$.dirty[4]&&n(126,w=U.verticalSpace!=="short"),1140850688&t.$$.dirty[3]|4&t.$$.dirty[4]&&n(20,M=Ue==="never"&&!h||w&&Ue!=="always"),4&t.$$.dirty[0]|512&t.$$.dirty[3]&&n(125,A=Yt&&wt),1024&t.$$.dirty[3]|6&t.$$.dirty[4]&&n(124,x=Qt?w&&A:A),256&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(19,C=zt||x),1&t.$$.dirty[4]&&(x||n(5,Ro=es)),32&t.$$.dirty[0]&&n(18,H={name:Oi,selected:Ro}),16&t.$$.dirty[0]|256&t.$$.dirty[3]|1&t.$$.dirty[4]&&n(7,S=[zt&&{id:Oi+"-rotation",label:xt.cropLabelTabRotation},x&&{id:Oi+"-zoom",label:xt.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&n(17,y=S.map(R=>R.id)),64&t.$$.dirty[0]|1073741824&t.$$.dirty[3]&&Jr&&!Jr.children.length&&h&&Jr.dispatchEvent(new CustomEvent("measure",{detail:Jr.rect})),4096&t.$$.dirty[0]|16384&t.$$.dirty[4]&&P&&bi.set(_?0:20),8192&t.$$.dirty[4]&&n(16,L=O?`transform: translateY(${O}px)`:void 0)},[fe,W,Yt,Mn,xt,Ro,Jr,S,v,m,E,i,_,V,Ct,Li,L,y,H,C,M,b,$,o,mt,me,Ze,lt,Bt,ye,se,ie,kn,Jn,ir,Fn,wn,ar,Ke,Wn,ja,po,Kr,ho,mo,Qo,Wi,fo,go,Ur,Za,Pi,Br,Ai,yo,$o,Vr,yi,Ir,bo,Eo,qi,pr,vo,wo,Xs,$r,()=>{Bn="select",ut(Ke,rt=!0,rt),ut(Ai,D=Re(ot),D),xo=$t?ta:ea},({detail:R})=>{const{boundsLimited:jt,boundsIntent:Jt}=xo(R.direction,R.translation);ut(Wn,gt=!0,gt),ut(yo,Zt=Jt,Zt),ut(Br,ot=jt,ot)},({detail:R})=>{const{boundsLimited:jt}=xo(R.direction,R.translation);ut(Wn,gt=!1,gt),ut(Ke,rt=!1,rt),ut(yo,Zt=void 0,Zt),Bo(R.translation)&&(ut(Br,ot=jt,ot),or.write()),ut(Ai,D=void 0,D),Bn=void 0},()=>{Bn="rotate",ut(Ke,rt=!0,rt),ut(yi,At=Re(V),At)},R=>{ut(Wn,gt=!0,gt),ut(Ur,Ct=R,Ct)},R=>{ut(Wn,gt=!1,gt),ut(Ke,rt=!1,rt),ut(Ur,Ct=R,Ct),or.write(),ut(yi,At=void 0,At)},()=>{Bn="pan",Io=void 0,ut(Ke,rt=!0,rt),hr=Re(V)},({detail:R})=>{ut(Wn,gt=!0,gt),Qr(R)},({detail:R})=>{ut(Wn,gt=!1,gt),ut(Ke,rt=!1,rt),(Bo(R.translation)>0||R.scalar!==0)&&(Qr(R),or.write()),ut(Vr,pt=void 0,pt),hr=void 0},({detail:{translation:R}})=>{$t&&(R=Gl(je(R))),Io=R,ut(Ke,rt=!1,rt)},Ka,ji,Zs,()=>{Bn="zoom",ut(Ke,rt=!0,rt),hr=Re(V)},R=>{ut(Wn,gt=!1,gt),Ks(R)},R=>{Ks(R),or.write(),ut(Wn,gt=!1,gt),ut(Ke,rt=!1,rt),hr=void 0},()=>{Bn="zoom",hr||($i=Re(V),ut(Ke,rt=!0,rt))},({detail:R})=>{$i&&(ut(Wn,gt=!0,gt),Qa(R))},({detail:R})=>{$i&&(ut(Wn,gt=!1,gt),ut(Ke,rt=!1,rt),Qa(R),ut(Vr,pt=void 0,pt),$i=void 0,or.write())},R=>{const jt=Ah(R,mt,st);if($e&&!lg(ot,jt))return;Bn="zoom",ut(Ke,rt=!0,rt),ut(Wn,gt=!0,gt),R.preventDefault(),R.stopPropagation();const Jt=bu(R),Oe=1+Jt/100,Qe=Re(V),Ve=Math.min(V.width/Le.width,V.height/Le.height)===1;if(yt&&Ut){const Ne=co(V,Xt,Ct);if(xr()&&Ne&&Jt>0&&d){ut(Ke,rt=!1,rt),ut(Wn,gt=!1,gt);const Ge=Fi(Ct)?rr({height:Xt.width,width:Xt.height}):rr(Xt);return li(Qe,Ge)||(clearTimeout(na),li(or.state.crop,Ge))?void 0:(ut(Ir,V=Ge,V),void or.write())}}let ce=nn(V);if(Ee&&ln!=="selection"&&Jt<0&&!Ve){const Ne=Un(je(jt),ot),Ge=Math.min(ot.width/V.width,ot.height/V.height),bn=qn(Re(ot),1.1);ce=lg(bn,jt)?Ar(Re(V),Ci(Ne,1/Ge)):ce}let ve=qn(Re(V),Oe,ce);if(ig(Lt[1],ve)||(ve=og(nn(ve),Lt[1])),ig(ve,Lt[0])||(ve=og(nn(ve),Lt[0])),li(Qe,ve,de))return ut(Ke,rt=!1,rt),void ut(Wn,gt=!1,gt);ut(Ir,V=Xr(ve,Ne=>de(Ne,5)),V),ut(Ke,rt=!1,rt),ut(Wn,gt=!1,gt),clearTimeout(na),na=setTimeout(()=>{or.write()},500)},Ja,ia,oa,To,ts,Oi,bi,Mt,"crop",tn,Dt,N,yt,Ot,zt,wt,Qt,re,pe,Ee,$e,Be,ge,St,kt,K,Nt,_t,Ft,Te,Gt,te,Ue,ln,hn,ra,h,x,A,w,T,r,a,s,g,d,u,c,p,l,O,P,U,X,k,Q,rt,$t,Y,q,et,D,ot,st,Xt,Ut,Le,He,Ce,Vt,ae,ue,function(R){Zo.call(this,t,R)},({detail:R})=>n(5,Ro=R),function(R){on[R?"unshift":"push"](()=>{Jr=R,n(6,Jr)})},R=>SE(R),function(R){Li=R,n(15,Li)},function(R){Zo.call(this,t,R)}]}var N_={util:["crop",class extends Xe{constructor(t){super(),Ye(this,t,B_,D_,ze,{name:95,isActive:0,stores:96,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:97,cropAutoCenterImageSelectionTimeout:98,cropEnableZoomMatchImageAspectRatio:99,cropEnableRotateMatchImageAspectRatio:100,cropEnableRotationInput:101,cropEnableZoom:2,cropEnableZoomInput:102,cropEnableZoomAutoHide:103,cropEnableImageSelection:104,cropEnableInfoIndicator:105,cropEnableZoomTowardsWheelPosition:106,cropEnableLimitWheelInputToCropSelection:107,cropEnableCenterImageSelection:108,cropEnableButtonRotateLeft:109,cropEnableButtonRotateRight:110,cropEnableButtonFlipHorizontal:111,cropEnableButtonFlipVertical:112,cropSelectPresetOptions:113,cropEnableSelectPreset:114,cropEnableFilterMatchAspectRatio:115,cropSelectPresetFilter:94,cropEnableButtonToggleCropLimit:116,cropWillRenderTools:117,cropActiveTransformTool:118,cropMinimizeToolbar:119,cropInteractionFocus:120,cropRotationRange:3,cropMaskOpacity:121,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[95]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),ct()}get stores(){return this.$$.ctx[96]}set stores(t){this.$$set({stores:t}),ct()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),ct()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[97]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),ct()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[98]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),ct()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[99]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),ct()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),ct()}get cropEnableRotationInput(){return this.$$.ctx[101]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),ct()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),ct()}get cropEnableZoomInput(){return this.$$.ctx[102]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),ct()}get cropEnableZoomAutoHide(){return this.$$.ctx[103]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),ct()}get cropEnableImageSelection(){return this.$$.ctx[104]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),ct()}get cropEnableInfoIndicator(){return this.$$.ctx[105]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),ct()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[106]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),ct()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[107]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),ct()}get cropEnableCenterImageSelection(){return this.$$.ctx[108]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),ct()}get cropEnableButtonRotateLeft(){return this.$$.ctx[109]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),ct()}get cropEnableButtonRotateRight(){return this.$$.ctx[110]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),ct()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[111]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),ct()}get cropEnableButtonFlipVertical(){return this.$$.ctx[112]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),ct()}get cropSelectPresetOptions(){return this.$$.ctx[113]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),ct()}get cropEnableSelectPreset(){return this.$$.ctx[114]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),ct()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[115]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),ct()}get cropSelectPresetFilter(){return this.$$.ctx[94]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),ct()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[116]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),ct()}get cropWillRenderTools(){return this.$$.ctx[117]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),ct()}get cropActiveTransformTool(){return this.$$.ctx[118]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),ct()}get cropMinimizeToolbar(){return this.$$.ctx[119]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),ct()}get cropInteractionFocus(){return this.$$.ctx[120]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),ct()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),ct()}get cropMaskOpacity(){return this.$$.ctx[121]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),ct()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),ct()}}]};function G_(t){let e,n,r,i,o,a,s,l=t[77],c=(Xn(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const u=()=>t[52](n,l),p=()=>t[52](null,l);return{c(){e=dt("div"),n=dt("div"),r=Kt(),i=dt("span"),o=Sn(c),I(n,"class",BE),I(e,"slot","option"),I(e,"class","PinturaFilterOption")},m(h,g){it(h,e,g),vt(e,n),u(),vt(e,r),vt(e,i),vt(i,o),a||(s=[Et(n,"measure",d),fn(yr.call(null,n))],a=!0)},p(h,g){l!==(t=h)[77]&&(p(),l=t[77],u()),4&g[0]|32768&g[2]&&c!==(c=(Xn(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&Kn(o,c)},d(h){h&&nt(e),p(),a=!1,sn(s)}}}function z_(t){let e,n;return e=new dc({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[G_,({option:r})=>({77:r}),({option:r})=>[0,0,r?32768:0]]},$$scope:{ctx:t}}}),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};4&i[0]&&(o.locale=r[2]),8&i[0]&&(o.options=r[3]),4096&i[0]&&(o.selectedIndex=r[12]),1028&i[0]|98304&i[2]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function U_(t){let e,n,r,i,o,a,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function u(h){t[56](h)}let p={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[z_]},$$scope:{ctx:t}};return t[4]!==void 0&&(p.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(p.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(p.maskFeatherSize=t[6]),n=new _0({props:p}),on.push(()=>Zr(n,"maskFeatherStartOpacity",c)),on.push(()=>Zr(n,"maskFeatherEndOpacity",d)),on.push(()=>Zr(n,"maskFeatherSize",u)),n.$on("measure",t[57]),{c(){e=dt("div"),qt(n.$$.fragment),I(e,"slot","footer"),I(e,"style",t[11])},m(h,g){it(h,e,g),Ht(n,e,null),a=!0,s||(l=[Et(e,"transitionend",t[30]),Et(e,"measure",t[58]),fn(yr.call(null,e,{observePosition:!0}))],s=!0)},p(h,g){const m={};8192&g[0]&&(m.elasticity=h[13]*h[19]),128&g[0]&&(m.onscroll=h[53]),5132&g[0]|65536&g[2]&&(m.$$scope={dirty:g,ctx:h}),!r&&16&g[0]&&(r=!0,m.maskFeatherStartOpacity=h[4],di(()=>r=!1)),!i&&32&g[0]&&(i=!0,m.maskFeatherEndOpacity=h[5],di(()=>i=!1)),!o&&64&g[0]&&(o=!0,m.maskFeatherSize=h[6],di(()=>o=!1)),n.$set(m),(!a||2048&g[0])&&I(e,"style",h[11])},i(h){a||(B(n.$$.fragment,h),a=!0)},o(h){j(n.$$.fragment,h),a=!1},d(h){h&&nt(e),Wt(n),s=!1,sn(l)}}}function V_(t){let e,n;return e=new O0({props:{$$slots:{footer:[U_]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};16380&i[0]|65536&i[2]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}let BE="PinturaFilterPreview";function H_(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g,m,$,b,E,v,w,T,M,A=Pe,x=()=>(A(),A=ao(y,lt=>n(43,d=lt)),y),C=Pe,H=()=>(C(),C=ao(S,lt=>n(49,v=lt)),S);t.$$.on_destroy.push(()=>A()),t.$$.on_destroy.push(()=>C());let{isActive:S}=e;H();let{isActiveFraction:y}=e;x();let{stores:L}=e,{locale:O}=e,{filterFunctions:_}=e,{filterOptions:P}=e;const U=_r("elasticityMultiplier");G(t,U,lt=>n(13,M=lt));const{history:X,interfaceImages:k,stageRectBase:F,utilRect:Q,animation:rt,scrollElasticity:$t,imageSize:V,imagePreview:Y,imageCropRect:q,imageRotation:et,imageFlipX:D,imageFlipY:ot,imageBackgroundColor:st,imageGamma:gt,imageColorMatrix:Lt,allowPan:Xt,allowZoom:Ct,allowZoomControls:Ut,allowPlayPause:Le}=L;G(t,k,lt=>n(60,u=lt)),G(t,F,lt=>n(48,E=lt)),G(t,Q,lt=>n(47,b=lt)),G(t,rt,lt=>n(50,w=lt)),G(t,V,lt=>n(62,h=lt)),G(t,Y,lt=>n(42,c=lt)),G(t,st,lt=>n(61,p=lt)),G(t,gt,lt=>n(44,g=lt)),G(t,Lt,lt=>n(40,s=lt));const mt=Pt({});G(t,mt,lt=>n(46,$=lt));const pt=(lt,Bt)=>ut(mt,$[lt.value]=Bt,$),It=ke(mt,lt=>{if(!lt[void 0])return;const Bt=lt[void 0];return T&&Zl(T,Bt)?T:Mr(Bt)});G(t,It,lt=>n(63,T=lt));const At=ke([S,It,q,V,et,D,ot],([lt,Bt,ye,se,Je,Me,fe],tn)=>{if(!lt||!Bt||!se)return m;const W=rr(se),Dt=nn(W),N=$0(se,ye,Je),yt=nn(N),Ot=Un(je(Dt),yt),zt=Gl(je(Ot)),Yt=Math.max(Bt.width/ye.width,Bt.height/ye.height);tn({origin:zt,translation:Ot,rotation:{x:fe?Math.PI:0,y:Me?Math.PI:0,z:Je},scale:Yt})});G(t,At,lt=>n(45,m=lt));const Tt=_e(w?20:0);let le;G(t,Tt,lt=>n(39,a=lt));const oe={};let Zt,Se,Ie,He,Ce,Vt,ae={x:0,y:0};const ue=Pt([]);G(t,ue,lt=>n(41,l=lt));const me=lt=>{const Bt={...lt,data:c,size:h,offset:{...lt.offset},mask:{...lt.mask},backgroundColor:p};return Bt.opacity=d,Bt.offset.y+=a,Bt.mask.y+=a,Bt.id="filter",Bt},Ze=()=>u.filter(lt=>lt.id!=="filter");return gi(()=>{k.set([])}),t.$$set=lt=>{"isActive"in lt&&H(n(0,S=lt.isActive)),"isActiveFraction"in lt&&x(n(1,y=lt.isActiveFraction)),"stores"in lt&&n(34,L=lt.stores),"locale"in lt&&n(2,O=lt.locale),"filterFunctions"in lt&&n(35,_=lt.filterFunctions),"filterOptions"in lt&&n(3,P=lt.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&Xt.set(v),262144&t.$$.dirty[1]&&Ct.set(v),262144&t.$$.dirty[1]&&Ut.set(v),262144&t.$$.dirty[1]&&v&&Le.set(!1),8&t.$$.dirty[0]&&n(38,r=ql(P)),640&t.$$.dirty[1]&&n(12,i=((lt,Bt)=>{if(!lt||!lt.filter||!Bt)return 0;const ye=lt.filter;return Bt.findIndex(([se])=>{if(!_[se])return!1;const Je=_[se]();return Ko(Je,ye)})})(s,r)),786432&t.$$.dirty[1]&&w&&Tt.set(v?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&v&&b&&E&&Vt&&n(37,Ce={x:E.x-b.x,y:E.y-b.y+Vt.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&m&&Ce&&ae&&He&&le){const lt=Ce.x+He.x+ae.x,Bt=Ce.y,ye=He.x+Ce.x,se=ye+He.width;ue.set(r.map(([Je],Me)=>{const fe=$[Je],tn=ae.x+fe.x,W=tn+fe.width;if(W<0||tn>He.width)return!1;const Dt=lt+fe.x,N=Bt+fe.y,yt=(zt=>({origin:je(zt.origin),translation:je(zt.translation),rotation:{...zt.rotation},scale:zt.scale}))(m);yt.offset=ht(.5*fe.width+Dt,.5*fe.height+N),yt.maskOpacity=1,yt.mask=nr(Dt+0,N,fe.width+0,fe.height),yt.maskFeather=[1,0,1,0,1,se,1,se],tn<Ie&&Zt<1&&(yt.maskFeather[0]=Zt,yt.maskFeather[1]=ye,yt.maskFeather[2]=1,yt.maskFeather[3]=ye+Ie),W>He.width-Ie&&Se<1&&(yt.maskFeather[4]=Se,yt.maskFeather[5]=se-Ie,yt.maskFeather[6]=1,yt.maskFeather[7]=se),yt.maskCornerRadius=le[Je];let Ot=s&&Object.keys(s).filter(zt=>zt!="filter").map(zt=>s[zt])||[];return Xn(_[Je])&&Ot.push(_[Je]()),yt.colorMatrix=Ot.length?h0(Ot):void 0,yt.gamma=g,yt}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const lt=[...Ze(),...l.map(me)];k.set(lt)}else k.set(Ze());256&t.$$.dirty[1]&&n(11,o=a?`transform: translateY(${a}px)`:void 0)},[S,y,O,P,Zt,Se,Ie,ae,He,Vt,oe,o,i,M,U,k,F,Q,rt,$t,V,Y,st,gt,Lt,mt,pt,It,At,Tt,lt=>{lt.target.className===BE&&n(36,le=Object.keys(oe).reduce((Bt,ye)=>{const se=oe[ye],Je=getComputedStyle(se),Me=["top-left","top-right","bottom-left","bottom-right"].map(fe=>Je.getPropertyValue(`border-${fe}-radius`)).map(pE).map(fe=>1.25*fe);return Bt[ye]=Me,Bt},{}))},ue,({value:lt})=>{ut(Lt,s={...s,filter:Xn(_[lt])?_[lt]():void 0},s),X.write()},"filter",L,_,le,Ce,r,a,s,l,c,d,g,m,$,b,E,v,w,(lt,Bt)=>pt(lt,Bt.detail),function(lt,Bt){on[lt?"unshift":"push"](()=>{oe[Bt.value]=lt,n(10,oe)})},lt=>n(7,ae=lt),function(lt){Zt=lt,n(4,Zt)},function(lt){Se=lt,n(5,Se)},function(lt){Ie=lt,n(6,Ie)},lt=>n(8,He=lt.detail),lt=>n(9,Vt=lt.detail),function(lt){Zo.call(this,t,lt)}]}var W_={util:["filter",class extends Xe{constructor(t){super(),Ye(this,t,H_,V_,ze,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),ct()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),ct()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),ct()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),ct()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),ct()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),ct()}}]};function q_(t){let e,n,r=t[43].label+"";return{c(){e=dt("span"),n=Sn(r)},m(i,o){it(i,e,o),vt(e,n)},p(i,o){4096&o[1]&&r!==(r=i[43].label+"")&&Kn(n,r)},d(i){i&&nt(e)}}}function j_(t){let e,n;const r=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let i={$$slots:{default:[q_,({tab:o})=>({43:o}),({tab:o})=>[0,o?4096:0]]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new S0({props:i}),e.$on("select",t[24]),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=34&a[0]?gr(r,[r[0],2&a[0]&&{tabs:o[1]},32&a[0]&&wr(o[5])]):{};12288&a[1]&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function Y_(t){let e,n;const r=[t[7][t[42]]];let i={};for(let o=0;o<r.length;o+=1)i=Tn(i,r[o]);return e=new L0({props:i}),{c(){qt(e.$$.fragment)},m(o,a){Ht(e,o,a),n=!0},p(o,a){const s=128&a[0]|2048&a[1]?gr(r,[wr(o[7][o[42]])]):{};e.$set(s)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){j(e.$$.fragment,o),n=!1},d(o){Wt(e,o)}}}function X_(t){let e,n,r,i,o;n=new _0({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[j_]},$$scope:{ctx:t}}});const a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let s={$$slots:{default:[Y_,({panel:l})=>({42:l}),({panel:l})=>[0,l?2048:0]]},$$scope:{ctx:t}};for(let l=0;l<a.length;l+=1)s=Tn(s,a[l]);return i=new M0({props:s}),{c(){e=dt("div"),qt(n.$$.fragment),r=Kt(),qt(i.$$.fragment),I(e,"slot","footer"),I(e,"style",t[3])},m(l,c){it(l,e,c),Ht(n,e,null),vt(e,r),Ht(i,e,null),o=!0},p(l,c){const d={};64&c[0]&&(d.elasticity=l[6]*l[9]),38&c[0]|8192&c[1]&&(d.$$scope={dirty:c,ctx:l}),n.$set(d);const u=48&c[0]?gr(a,[a[0],a[1],16&c[0]&&{panels:l[4]},32&c[0]&&wr(l[5])]):{};128&c[0]|10240&c[1]&&(u.$$scope={dirty:c,ctx:l}),i.$set(u),(!o||8&c[0])&&I(e,"style",l[3])},i(l){o||(B(n.$$.fragment,l),B(i.$$.fragment,l),o=!0)},o(l){j(n.$$.fragment,l),j(i.$$.fragment,l),o=!1},d(l){l&&nt(e),Wt(n),Wt(i)}}}function Z_(t){let e,n;return e=new O0({props:{$$slots:{footer:[X_]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){qt(e.$$.fragment)},m(r,i){Ht(e,r,i),n=!0},p(r,i){const o={};254&i[0]|8192&i[1]&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){Wt(e,r)}}}function K_(t,e,n){let r,i,o,a,s,l,c,d,u,p,h,g=Pe,m=()=>(g(),g=ao(b,q=>n(21,c=q)),b);t.$$.on_destroy.push(()=>g());let{stores:$}=e,{isActive:b}=e;m();let{locale:E={}}=e,{finetuneControlConfiguration:v}=e,{finetuneOptions:w}=e,{finetuneNudgePrecision:T}=e;const{history:M,animation:A,scrollElasticity:x,rangeInputElasticity:C,imageColorMatrix:H,imageConvolutionMatrix:S,imageGamma:y,imageVignette:L,imageNoise:O,allowPan:_,allowZoom:P,allowZoomControls:U,allowPlayPause:X}=$;G(t,A,q=>n(22,d=q));const k={imageColorMatrix:H,imageConvolutionMatrix:S,imageGamma:y,imageVignette:L,imageNoise:O},F=_r("elasticityMultiplier");G(t,F,q=>n(6,p=q));const Q="finetune-"+Ua(),rt=Pt({});G(t,rt,q=>n(23,u=q));const $t=Pt({});G(t,$t,q=>n(7,h=q));let V=[];const Y=_e(d?20:0);return G(t,Y,q=>n(20,l=q)),t.$$set=q=>{"stores"in q&&n(15,$=q.stores),"isActive"in q&&m(n(0,b=q.isActive)),"locale"in q&&n(16,E=q.locale),"finetuneControlConfiguration"in q&&n(17,v=q.finetuneControlConfiguration),"finetuneOptions"in q&&n(18,w=q.finetuneOptions),"finetuneNudgePrecision"in q&&n(19,T=q.finetuneNudgePrecision)},t.$$.update=()=>{var q;2097152&t.$$.dirty[0]&&_.set(c),2097152&t.$$.dirty[0]&&P.set(c),2097152&t.$$.dirty[0]&&U.set(c),2097152&t.$$.dirty[0]&&c&&X.set(!0),327680&t.$$.dirty[0]&&n(1,r=w?w.map(([et,D])=>({id:et,label:Xn(D)?D(E):D})):[]),2&t.$$.dirty[0]&&n(2,i=r.length&&r[0].id),4&t.$$.dirty[0]&&n(5,o={name:Q,selected:i}),2&t.$$.dirty[0]&&n(4,a=r.map(et=>et.id)),131072&t.$$.dirty[0]&&v&&(q=v,V&&V.forEach(et=>et()),V=a.map(et=>{const{getStore:D,getValue:ot=xn}=q[et];return D(k).subscribe(st=>{const gt=st!=null?ot(st):st;ut(rt,u={...u,[et]:gt},u)})})),8519680&t.$$.dirty[0]&&v&&u&&ut($t,h=Object.keys(u).reduce((et,D)=>{const{base:ot,min:st,max:gt,getLabel:Lt,getStore:Xt,setValue:Ct=(mt,pt)=>mt.set(pt)}=v[D],Ut=Xt(k),Le=u[D]!=null?u[D]:ot;return et[D]={base:ot,min:st,max:gt,value:Le,valueLabel:Lt?Lt(Le,st,gt,gt-st):Math.round(100*Le),oninputmove:mt=>{Ct(Ut,mt)},oninputend:mt=>{Ct(Ut,mt),M.write()},elasticity:p*C,labelReset:E.labelReset,nudgeMultiplier:T},et},{}),h),6291456&t.$$.dirty[0]&&d&&Y.set(c?0:20),1048576&t.$$.dirty[0]&&n(3,s=l?`transform: translateY(${l}px)`:void 0)},[b,r,i,s,a,o,p,h,A,x,F,rt,$t,Y,"finetune",$,E,v,w,T,l,c,d,u,({detail:q})=>n(2,i=q),function(q){Zo.call(this,t,q)}]}var Q_={util:["finetune",class extends Xe{constructor(t){super(),Ye(this,t,K_,Z_,ze,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),ct()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),ct()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),ct()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),ct()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),ct()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),ct()}}]},ru=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t);Object.keys(n).forEach(r=>{n[r].get?Object.defineProperty(e,r,{get:()=>t[r],set:i=>t[r]=i}):e[r]=t[r]})},NE=t=>{const e={},{sub:n,pub:r}=Ni();Vn()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const i=Kb();ru(i,e);const o=((c,d)=>{const u={},p=new v2({target:c,props:{stores:d,pluginComponents:Array.from(Dh)}});let h=!1;const g=()=>{h||(Vn()&&window.removeEventListener("pagehide",g),p&&(h=!0,p.$destroy()))};Q1||(Q1=new Set(C0(v2).filter($=>!X4.includes($)))),Q1.forEach($=>{Object.defineProperty(u,$,{get:()=>p[$],set:Z4.includes($)?b=>{p[$]={...p[$],...b}}:b=>p[$]=b})}),Object.defineProperty(u,"previewImageData",{get:()=>p.imagePreviewCurrent}),ME.forEach($=>{const b=Hd[$],E=b[0];Object.defineProperty(u,$,{get:()=>p.pluginInterface[E][$],set:v=>{const w=b.reduce((T,M)=>(T[M]={...p.pluginOptions[M],[$]:v},T),{});p.pluginOptions={...p.pluginOptions,...w}}})}),Object.defineProperty(u,"element",{get:()=>p.root,set:()=>{}});const m=p.history;return ec(u,{on:($,b)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test($))return m.on($,b);const E=[p.sub($,b),p.$on($,v=>b(v instanceof CustomEvent&&!v.detail?void 0:v))].filter(Boolean);return()=>E.forEach(v=>v())},updateImagePreview:$=>{p.imagePreviewSrc=$},close:()=>!h&&p.pub("close"),destroy:g}),Object.defineProperty(u,"history",{get:()=>({undo:()=>m.undo(),redo:()=>m.redo(),revert:()=>m.revert(),get:()=>m.get(),getCollapsed:()=>m.get().splice(0,m.index+1),set:$=>m.set($),write:$=>m.write($),get length(){return m.length()},get index(){return m.index},set index($){m.index=$}})}),Vn()&&window.addEventListener("pagehide",g),u})(t,i.stores);ru(o,e);const a=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>o.on(c,d=>{const u=i[c](d&&d.detail);u instanceof Promise&&u.catch(be)})),s=(c,d)=>{const u=n(c,d),p=i.on(c,d),h=o.on(c,d);return()=>{u(),p(),h()}};e.handleEvent=be;const l=CE.map(c=>s(c,d=>e.handleEvent(c,d)));return ec(e,{on:s,updateImage:c=>new Promise((d,u)=>{const p=e.history.get(),h=e.history.index,g=e.imageState;i.loadImage(c).then(m=>{e.history.set(p),e.history.index=h,e.imageState=g,d(m)}).catch(u)}),close:()=>{r("close")},destroy:()=>{[...a,...l].forEach(c=>c()),o.destroy(),i.destroy(),r("destroy")}}),setTimeout(()=>r("init",e),0),e};Vn();const{document:q2,window:Wd}=y0;function J_(t){let e,n,r,i;return Na(t[27]),{c(){e=Kt(),n=dt("div"),I(n,"class",t[4]),I(n,"style",t[5])},m(o,a){it(o,e,a),it(o,n,a),t[28](n),r||(i=[Et(Wd,"keydown",t[10]),Et(Wd,"orientationchange",t[11]),Et(Wd,"resize",t[27]),Et(q2.body,"focusin",function(){vn(!t[1]&&t[7])&&(!t[1]&&t[7]).apply(this,arguments)}),Et(q2.body,"focusout",function(){vn(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Et(n,"wheel",t[9],{passive:!1})],r=!0)},p(o,a){t=o,16&a[0]&&I(n,"class",t[4]),32&a[0]&&I(n,"style",t[5])},i:Pe,o:Pe,d(o){o&&nt(e),o&&nt(n),t[28](null),r=!1,sn(i)}}}function t3(t,e,n){let r,i,o,a,s,l,c,d;const u=Vi();let{root:p}=e,{preventZoomViewport:h=!0}=e,{preventScrollBodyIfNeeded:g=!0}=e,{preventFooterOverlapIfNeeded:m=!0}=e,{class:$}=e,b=!0,E=!1,v=!1,w=Vn()&&document.documentElement,T=Vn()&&document.body,M=Vn()&&document.head;const A=_e(0,{precision:.001,damping:.5});G(t,A,V=>n(26,d=V));const x=A.subscribe(V=>{v&&V>=1?(n(19,v=!1),n(1,b=!1),u("show")):E&&V<=0&&(n(18,E=!1),n(1,b=!0),u("hide"))});let C=!1,H,S,y;const L=()=>document.querySelector("meta[name=viewport]"),O=()=>Array.from(document.querySelectorAll("meta[name=theme-color]"));let _;const P=(V,Y)=>{const q=()=>{V()?Y():requestAnimationFrame(q)};requestAnimationFrame(q)};let U,X,k=0,F;const Q=()=>{X||(X=dn("div",{style:"position:fixed;height:100vh;top:0"}),T.append(X))};lo(()=>{m&&ci()&&Q()}),Vb(()=>{X&&(n(21,F=X.offsetHeight),X.remove(),X=void 0)});let rt;const $t=()=>w.style.setProperty("--pintura-document-height",window.innerHeight+"px");return gi(()=>{w.classList.remove("PinturaModalBodyLock"),x()}),t.$$set=V=>{"root"in V&&n(0,p=V.root),"preventZoomViewport"in V&&n(12,h=V.preventZoomViewport),"preventScrollBodyIfNeeded"in V&&n(13,g=V.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in V&&n(14,m=V.preventFooterOverlapIfNeeded),"class"in V&&n(15,$=V.class)},t.$$.update=()=>{67895298&t.$$.dirty[0]&&n(25,r=v||E?d:b?0:1),4096&t.$$.dirty[0]&&(i="width=device-width,height=device-height,initial-scale=1"+(h?",maximum-scale=1,user-scalable=0":"")),786434&t.$$.dirty[0]&&n(22,o=!v&&!b&&!E),12&t.$$.dirty[0]&&(C||n(20,U=k)),2097160&t.$$.dirty[0]&&n(24,a=qe(F)?"--viewport-pad-footer:"+(F>k?0:1):""),51380224&t.$$.dirty[0]&&n(5,s=`opacity:${r};height:${U}px;--editor-modal:1;${a}`),32768&t.$$.dirty[0]&&n(4,l=he(["pintura-editor","PinturaModal",$])),8192&t.$$.dirty[0]&&n(23,c=g&&ci()&&/15_/.test(navigator.userAgent)),12582912&t.$$.dirty[0]&&c&&(V=>{V?(rt=window.scrollY,w.classList.add("PinturaDocumentLock"),$t(),window.addEventListener("resize",$t)):(window.removeEventListener("resize",$t),w.classList.remove("PinturaDocumentLock"),qe(rt)&&window.scrollTo(0,rt),rt=void 0)})(o)},[p,b,C,k,l,s,A,V=>{Bs(V.target)&&(n(2,C=!0),_=k)},V=>{if(Bs(V.target))if(clearTimeout(void 0),_===k)n(2,C=!1);else{const Y=k;P(()=>k!==Y,()=>n(2,C=!1))}},V=>{V.target&&/PinturaStage/.test(V.target.className)&&V.preventDefault()},V=>{const{key:Y}=V;if(!/escape/i.test(Y))return;const q=V.target;if(q&&/input|textarea/i.test(q.nodeName))return;const et=document.querySelectorAll(".PinturaModal");et[et.length-1]===p&&u("close")},Q,h,g,m,$,()=>{if(v||!b)return;n(19,v=!0);const V=L()||dn("meta",{name:"viewport"});H=!H&&V.getAttribute("content"),V.setAttribute("content",i+(/cover/.test(H)?",viewport-fit=cover":"")),V.parentNode||M.append(V);const Y=getComputedStyle(p).getPropertyValue("--color-background"),q=O();if(q.length)S=q.map(et=>et.getAttribute("content"));else{const et=dn("meta",{name:"theme-color"});M.append(et),q.push(et)}q.forEach(et=>et.setAttribute("content",`rgb(${Y})`)),clearTimeout(y),y=setTimeout(()=>A.set(1),250)},()=>{if(E||b)return;clearTimeout(y),n(18,E=!0);const V=L();H?V.setAttribute("content",H):V.remove();const Y=O();S?Y.forEach((q,et)=>{q.setAttribute("content",S[et])}):Y.forEach(q=>q.remove()),A.set(0)},E,v,U,F,o,c,a,r,d,function(){n(3,k=Wd.innerHeight)},function(V){on[V?"unshift":"push"](()=>{p=V,n(0,p)})}]}class e3 extends Xe{constructor(e){super(),Ye(this,e,t3,J_,ze,{root:0,preventZoomViewport:12,preventScrollBodyIfNeeded:13,preventFooterOverlapIfNeeded:14,class:15,show:16,hide:17},null,[-1,-1])}get root(){return this.$$.ctx[0]}set root(e){this.$$set({root:e}),ct()}get preventZoomViewport(){return this.$$.ctx[12]}set preventZoomViewport(e){this.$$set({preventZoomViewport:e}),ct()}get preventScrollBodyIfNeeded(){return this.$$.ctx[13]}set preventScrollBodyIfNeeded(e){this.$$set({preventScrollBodyIfNeeded:e}),ct()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[14]}set preventFooterOverlapIfNeeded(e){this.$$set({preventFooterOverlapIfNeeded:e}),ct()}get class(){return this.$$.ctx[15]}set class(e){this.$$set({class:e}),ct()}get show(){return this.$$.ctx[16]}get hide(){return this.$$.ctx[17]}}typeof window<"u"&&(t=>{if(!t)return;const[e,n,r,i]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(o=>o.map(a=>String.fromCharCode(a)).join(""));t._9xhda1o=new t[n](i)[r](t[e])})(window);const n3=sE,r3=lE,i3=()=>({read:IR,apply:V$}),o3={markupEditorToolbar:CC(),markupEditorToolStyles:MC(),markupEditorShapeStyleControls:ZC()},a3=K4,s3=N_,l3=W_,c3=Q_,d3=IC,u3=pC,p3={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},h3={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},m3={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},f3=(t={},e)=>{const{sub:n,pub:r}=Ni(),i={},o=((p={},h)=>new e3({target:h||document.body,props:{class:p.class,preventZoomViewport:p.preventZoomViewport,preventScrollBodyIfNeeded:p.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:p.preventFooterOverlapIfNeeded}}))(t,e),a=()=>{o.hide&&o.hide()},s=()=>{o.show&&o.show()},l=NE(o.root);ru(l,i),i.handleEvent=be,l.handleEvent=(p,h)=>{if(p==="init")return i.handleEvent(p,i);i.handleEvent(p,h)},l.on("close",async()=>{const{willClose:p}=t;if(!p)return a();await p()&&a()});const c=(p,h)=>/show|hide/.test(p)?n(p,h):l.on(p,h),d=["show","hide"].map(p=>c(p,h=>i.handleEvent(p,h))),u=()=>{d.forEach(p=>p()),a(),o.$destroy(),l.destroy()};return ec(i,{on:c,destroy:u,hide:a,show:s}),Object.defineProperty(i,"modal",{get:()=>o.root,set:()=>{}}),o.$on("close",l.close),o.$on("show",()=>r("show")),o.$on("hide",()=>{r("hide"),t.enableAutoDestroy!==!1&&u()}),t.enableAutoHide!==!1&&l.on("process",a),l.on("loadstart",s),t.enableButtonClose!==!1&&(t.enableButtonClose=!0),delete t.class,Object.assign(i,t),i},g3={annotateLabel:"",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},j2='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',rh='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>',y3={labelReset:"",labelDefault:" ",labelAuto:"",labelNone:"",labelEdit:"",labelClose:"",labelSupportError:t=>`${t.join(", ")}     `,labelColor:"",labelWidth:"",labelSize:"",labelOffset:"",labelAmount:"",labelInset:"",labelRadius:"",labelColorPalette:" ",labelSizeExtraSmall:" ",labelSizeSmall:"",labelSizeMedium:"",labelSizeMediumSmall:"-",labelSizeMediumLarge:"-",labelSizeLarge:"",labelSizeExtraLarge:" ",labelButtonRevert:"",labelButtonCancel:"",labelButtonUndo:"",labelButtonRedo:"",labelButtonExport:"",labelZoomIn:"",labelZoomOut:"",labelZoomFit:"",labelZoomActual:"P ",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:j2,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"",statusIconButtonClose:j2,statusLabelLoadImage:t=>!t||!t.task?" ":t.error?t.error.code==="IMAGE_TOO_SMALL"?" : {minWidth} &times; {minHeight}":"  ":t.task==="blob-to-bitmap"?" &hellip;":" &hellip;",statusLabelProcessImage:t=>{if(!(!t||!t.task))return t.task==="store"?t.error?"  ":" &hellip;":t.error?"  ":" &hellip;"}},$3={shapeLabelButtonSelectSticker:" ",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:`${rh}`,shapeIconButtonTextLayoutAutoHeight:`<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>${rh}`,shapeIconButtonTextLayoutFixedSize:`<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>${rh}`,shapeTitleButtonTextLayoutAutoWidth:"",shapeTitleButtonTextLayoutAutoHeight:"",shapeTitleButtonTextLayoutFixedSize:" ",shapeTitleButtonFlipHorizontal:"  ",shapeTitleButtonFlipVertical:"  ",shapeTitleButtonRemove:"",shapeTitleButtonDuplicate:"",shapeTitleButtonMoveToFront:" ",shapeLabelInputText:" ",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"",shapeLabelInputConfirm:"",shapeLabelStrokeNone:" ",shapeLabelFontStyleNormal:"",shapeLabelFontStyleBold:"",shapeLabelFontStyleItalic:"",shapeLabelFontStyleItalicBold:" ",shapeTitleBackgroundColor:" ",shapeTitleCornerRadius:" ",shapeTitleFontFamily:"",shapeTitleFontSize:" ",shapeTitleFontStyle:" ",shapeTitleLineHeight:"",shapeTitleLineStart:"",shapeTitleLineEnd:"",shapeTitleStrokeWidth:" ",shapeTitleStrokeColor:" ",shapeTitleLineDecorationBar:"",shapeTitleLineDecorationCircle:"",shapeTitleLineDecorationSquare:"",shapeTitleLineDecorationArrow:"",shapeTitleLineDecorationCircleSolid:" ",shapeTitleLineDecorationSquareSolid:" ",shapeTitleLineDecorationArrowSolid:" ",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"",shapeTitleColorWhite:"",shapeTitleColorSilver:"",shapeTitleColorGray:"",shapeTitleColorBlack:"",shapeTitleColorNavy:"-",shapeTitleColorBlue:"",shapeTitleColorAqua:"",shapeTitleColorTeal:"",shapeTitleColorOlive:"",shapeTitleColorGreen:"",shapeTitleColorYellow:"",shapeTitleColorOrange:"",shapeTitleColorRed:"",shapeTitleColorMaroon:"",shapeTitleColorFuchsia:"",shapeTitleColorPurple:"",shapeTitleTextOutline:" ",shapeTitleTextOutlineWidth:"",shapeTitleTextShadow:" ",shapeTitleTextShadowBlur:"",shapeTitleTextColor:" ",shapeTitleTextAlign:" ",shapeTitleTextAlignLeft:"    ",shapeTitleTextAlignCenter:"   ",shapeTitleTextAlignRight:"    ",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"",shapeLabelToolView:"",shapeLabelToolSharpie:"",shapeLabelToolEraser:"",shapeLabelToolPath:"",shapeLabelToolRectangle:"",shapeLabelToolEllipse:"",shapeLabelToolArrow:"",shapeLabelToolLine:"",shapeLabelToolText:"",shapeLabelToolPreset:"",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:" ",shapeTitleBrushSize:" ",shapeLabelSelectionModeNew:"",shapeLabelSelectionModeAdd:"",shapeLabelSelectionModeSubtract:"",shapeLabelToolSelectionBrush:"",shapeLabelToolSelectionLassoo:"",shapeLabelToolSelectionRectangle:" ",shapeLabelToolSelectionEllipse:" ",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'},b3={cropLabel:"",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[n,r,i]=e?[e<1?1:.3,e===1?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">
            <rect opacity="${n}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${r}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${i}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`},cropIconCropBoundary:(t,e)=>{const[n,r,i,o]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">
            <rect opacity="${n}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${r}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${i}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${o}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`},cropLabelButtonRecenter:" ",cropLabelButtonRotateLeft:" ",cropLabelButtonRotateRight:" ",cropLabelButtonFlipHorizontal:"  ",cropLabelButtonFlipVertical:"  ",cropLabelSelectPreset:" ",cropLabelCropBoundary:"  ",cropLabelCropBoundaryEdge:" ",cropLabelCropBoundaryNone:"",cropLabelTabRotation:"",cropLabelTabZoom:""},E3={decorateLabel:"",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},v3={filterLabel:"",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"",filterLabelFade:"",filterLabelCold:"",filterLabelWarm:"",filterLabelPastel:"",filterLabelMonoDefault:"",filterLabelMonoNoir:"",filterLabelMonoWash:"",filterLabelMonoStark:"",filterLabelSepiaDefault:"",filterLabelSepiaBlues:" ",filterLabelSepiaRust:"",filterLabelSepiaColor:""},w3={finetuneLabel:"",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"",finetuneLabelContrast:"",finetuneLabelSaturation:"",finetuneLabelExposure:"",finetuneLabelTemperature:"",finetuneLabelGamma:"",finetuneLabelClarity:"",finetuneLabelVignette:""},x3={frameLabel:"",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"",frameLabelMatRound:" ",frameLabelLineSingle:"",frameLabelLineMultiple:"",frameLabelEdgeSeparate:"",frameLabelEdgeOverlap:"",frameLabelEdgeCross:"",frameLabelCornerHooks:"",frameLabelPolaroid:""},I3={resizeLabel:" ",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"  ",resizeLabelInputWidth:"",resizeTitleInputWidth:"",resizeLabelInputHeight:"",resizeTitleInputHeight:"",resizeTitleButtonMaintainAspectRatio:" ",resizeIconButtonMaintainAspectRatio:(t,e)=>`<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${(e-1)*3})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>`},T3={redactLabel:"",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},R3={stickerLabel:"",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},S3={trimLabel:"",trimIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d=" M1 3 v18 M5 3 v2 M9 3 v2 M5 18 v2 M9 18 v2 M1 3 h12 M1 6 h10 M1 18 h9 M1 21 h8 M14 0 l-4 24 M18 3 h5 M17.5 6 h6 M15.5 18 h7 M15 21 h8 M19 3 v2 M15 18 v2 M19 18 v2 M23 3 v18"/></g>',trimLabelPlay:"",trimLabelPause:"",trimLabelMute:"",trimLabelUnmute:"",trimLabelSplit:"",trimLabelMerge:"",trimIconButtonMute:'<g stroke-width=".125em" stroke="currentColor"><polygon fill="currentColor" points="2 16 2 8 8 8 15 1 15 23 8 16"/><path d="M19.3781212,15.2166107 C20.3621122,14.4879168 21,13.3184517 21,12 C21,10.6815483 20.3621122,9.51208318 19.3781212,8.78338927"/></g>',trimIconButtonUnmute:'<g stroke-width=".125em" stroke="currentColor"><polygon fill="currentColor" points="2 16 2 8 3 8 15 20 15 23 8 16"/><polygon fill="currentColor" points="8 8 15 1 15 15"/><line x1="1" y1="1" x2="23" y2="23"/></g>',trimIconButtonPlay:'<polygon fill="currentColor" points="7 3, 21 12, 7 21"/>',trimIconButtonPause:'<g fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></g>',trimIconButtonSplit:`<g stroke="currentColor" stroke-width=".125em">
    <path d="M12 4 V20"/>
    <path fill="currentColor" d="M6 8 L6 16 L2 12 Z M18 8 L22 12 L18 16 Z"/>
    </g>`,trimIconButtonMerge:`<g stroke="currentColor" stroke-width=".125em">
    <path d="M1 4 V20 M23 4 V20"/>
    <path fill="currentColor" d="M6 8 L10 12 L6 16 Z M18 8 L14 12 L18 16 Z"/>
    </g>`,statusLabelLoadImage:t=>!t||!t.task?"Waiting for media":t.error?t.error.code==="IMAGE_TOO_SMALL"?"Minimum media size is {minWidth} &times; {minHeight}":t.error.code==="VIDEO_TOO_SHORT"?`Minimum video duration is {minDuration} ${t.error.metadata.minDuration===1?"second":"seconds"}`:"Error loading media":t.task==="blob-to-bitmap"?"Preparing media&hellip;":"Loading media&hellip;",statusLabelProcessImage:t=>{if(!(!t||!t.task))return t.task==="store"?t.error?"Error uploading media":"Uploading media&hellip;":t.error?"Error processing media":"Processing media&hellip;"},cropLabelCropBoundaryEdge:"Edge of media"},M3={fillLabel:"",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},ih={...y3,...$3,...g3,...b3,...E3,...v3,...w3,...x3,...I3,...T3,...R3,...M3,...S3};const C3={__name:"FileInput",props:{modelValue:Array,id:String,error:String|null,errors:Array|null,url:String,name:{type:String,default:"image"}},emits:["update:modelValue","error","reset"],setup(t,{emit:e}){a3(s3,c3,l3);const n=Iv(),r=t,i=VT(N$,D$),o=r.modelValue.sort((c,d)=>parseInt(c.order_column)-parseInt(d.order_column)).map(c=>(console.log("item",c),{source:c.id,options:{type:"local",metadata:{order:c.order_column}}}));oh({legacyDataToImageState:fC,createEditor:f3,imageReader:[n3],imageWriter:[r3],imageProcessor:Qb,editorOptions:{utils:["crop","finetune","filter"],imageOrienter:i3(),...d3,...u3,...o3,locale:{...h3,...p3,...m3,...ih,...ih,...ih}}});const a=e,s=oh(),l=async()=>{const c=s.value.getFiles();console.log("handleProcessFiles",c),a("update:modelValue",[...c.map(d=>d.serverId)]),a("reset")};return(c,d)=>(Y2(),Tv("div",null,[ah(zr(i),{ref_key:"pond",ref:s,name:r.name,acceptedFileTypes:"image/jpeg, image/png",onProcessfile:l,"allow-multiple":"true",files:zr(o),server:{process:{url:r.url},headers:{"X-CSRF-TOKEN":zr(n).props.csrf_token},load:async(u,p)=>{console.log("load source",u);let h=await zr(d1).get(c.route("media",{id:u}),{responseType:"blob"});console.log("response",h),p(h.data)},remove:async(u,p)=>{await zr(d1).post(c.route("account.apartments.media.remove",{apartment:zr(n).props.apartment.data.id}),{id:u}),p()},revert:async(u,p)=>{await zr(d1).post(c.route("account.apartments.media.remove",{apartment:zr(n).props.apartment.data.id}),{id:u}),p()}}},null,8,["name","files","server"])]))}},_3={class:"mt-0 md:mt-32 max-w-2xl mx-auto w-full pb-32"},P3={class:"mt-10"},j3={__name:"Step7",props:{apartment:Array|Object},setup(t){_v(Pv,Av);const e=t,n=Rv({media:e.apartment.data.media}),r=oh(),i=()=>{r.value.startLoading(),n.transform(a=>({...a,step:7})).post(route("account.apartments.store",{apartment:e.apartment.data.id}),{onFinish(){var a;(a=r==null?void 0:r.value)==null||a.stopLoading()}})},o=a=>{n.setError("media",a)};return(a,s)=>(Y2(),Sv(wv,{ref_key:"formComponent",ref:r,step:7,onOnNextStep:i,edit:e.apartment.data.status==="published",onOnPrevStep:s[2]||(s[2]=l=>zr(Cv).visit(a.route("account.apartments.step",{apartment:t.apartment.data.id,step:6})))},{default:Mv(()=>[sf("div",_3,[ah(xv,{title:" ",subtitle:" ,      ."}),sf("div",P3,[ah(C3,{modelValue:zr(n).media,"onUpdate:modelValue":s[0]||(s[0]=l=>zr(n).media=l),class:"mt-8",id:"media",error:zr(n).errors.media,errors:zr(n).errors,onError:o,onReset:s[1]||(s[1]=l=>zr(n).clearErrors()),url:a.route("account.apartments.media.store",{apartment:t.apartment.data.id})},null,8,["modelValue","error","errors","url"])])])]),_:1},8,["edit"]))}};export{j3 as default};
