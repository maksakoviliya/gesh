import{r as y,q as x,l as M,w as d,a as l,e as i,g as t,t as a,c,f as w,u as f,v as L,i as B,y as P,b as S,F as T}from"./app-0f88e4e5.js";import{d as h,c as N,e as V,y as z,j as F,W as C,_ as H}from"./AppLayout-36209493.js";import{_ as W}from"./Heading-d67b4ee7.js";import{_ as q}from"./Breadcrumbs-4926f40b.js";import"./index.esm.min-509e232c.js";import"./index-8e9ebee5.js";import"./ButtonComponent-e5946ba5.js";import"./Input-9b19f30b.js";import"./index-9ef572b0.js";import"./Avatar-7145ac0f.js";import"./index-791c91d7.js";import"./useToasts-d94e0187.js";const E={class:"relative flex-col md:flex-row flex items-start gap-4 mt-6"},O={class:"md:w-1/2 lg:w-2/3"},R=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"},"Ваша поездка:",-1),A={class:"mt-3"},G=t("div",{class:"text-sm font-medium"},"Даты:",-1),I={class:"font-light"},J={class:"mt-3"},K=t("div",{class:"text-sm font-medium"},"Гости:",-1),Q={class:"font-light"},U={key:0,class:"font-light"},X=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Управление бронированием: ",-1),Z={class:"mt-3 flex gap-4 items-center"},tt=["href"],et={key:1,class:"text-neutral-600 dark:text-slate-400"},at={class:"md:sticky w-full md:w-1/2 lg:w-1/3 rounded-lg shadow-lg border border-neutral-100 top-28 p-6"},st={class:"flex items-stretch justify-start gap-4"},rt=["src"],ot={class:"flex flex-col justify-between"},it={class:"text-gray-600 font-light"},nt=["innerHTML"],dt=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"},"Детализация цены:",-1),lt={class:"divide-y divide-gray-100"},ct={class:"py-4 flex w-full items-baseline justify-between"},ut={class:"font-light leading-6 text-пкфн-600"},mt={class:"overflow-hidden h-full rounded-lg shadow-lg ring-1 ring-black/5"},vt={class:"divide-y divide-gray-100 max-h-52 overflow-auto"},_t={class:"font-light text-sm leading-6 text-gray-600"},ft={class:"mt-1 text-sm font-medium leading-6 text-neutral-600"},ht={class:"mt-1 font-medium leading-6 text-neutral-600"},gt={class:"py-2 flex w-full items-baseline justify-between"},pt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Гости:")],-1),xt={class:"mt-1 font-medium leading-6 text-neutral-600"},bt={key:0,class:"py-2 flex w-full items-baseline justify-between"},yt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Дети:")],-1),wt={class:"mt-1 font-medium leading-6 text-neutral-600"},kt={class:"py-2 flex w-full items-baseline justify-between"},jt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Стоимость:")],-1),Yt={class:"mt-1 font-medium leading-6 text-neutral-600"},Ht={__name:"Reservation",props:{reservation:{type:Object}},setup(k){var b;const e=k,j=y([{id:"account",route:route("account.index"),label:"Аккаунт"},{id:"reservations",route:route("account.reservations.list"),label:"Мои бронирования"},{id:"reservation",route:route("account.reservations.view",{reservation:(b=e.reservation.data)==null?void 0:b.id}),label:"Бронирование"}]),g=y([]),Y=x(()=>{var m;h.extend(N);const s=h(e.reservation.data.start,"DD.MM.YYYY"),v=h(e.reservation.data.end,"DD.MM.YYYY");g.value=[];let u=0;for(let r=s;r.isBefore(v);r=r.add(1,"day")){const _=r.day()===5||r.day()===6?e.reservation.data.apartment.weekends_price:e.reservation.data.apartment.weekdays_price,o=((m=e.reservation.data.apartment.dates.find(n=>h(n.date).isSame(r)))==null?void 0:m.price)??_;g.value.push({date:r.format("DD.MM.YYYY"),price:o}),u+=o}return u}),$=x(()=>{let s=null;return(e.reservation.data.range<=1||e.reservation.data.range===21)&&(s=`${e.reservation.data.range} ночь`),(e.reservation.data.range>1&&e.reservation.data.range<=5||e.reservation.data.range>21&&e.reservation.data.range<=24)&&(s=`${e.reservation.data.range} ночи`),(e.reservation.data.range>5&&e.reservation.data.range<=20||e.reservation.data.range>24)&&(s=`${e.reservation.data.range} ночей`),`${s}`}),D=x(()=>[`${e.reservation.data.apartment.guests}&nbsp;гостей`,`${e.reservation.data.apartment.bedrooms}&nbsp;спальня`,`${e.reservation.data.apartment.beds}&nbsp;кровать`,`${e.reservation.data.apartment.bathrooms}&nbsp;ванная`].filter(v=>!!v).join(" · "));return(s,v)=>(l(),M(V,null,{default:d(()=>[i(H,null,{default:d(()=>{var u,m,r,_,p;return[i(q,{routes:j.value},null,8,["routes"]),t("div",E,[t("div",O,[i(W,{title:"Бронирование подтверждено",subtitle:"Вы успешно забронировали жилье"}),t("div",null,[R,t("div",A,[G,t("div",I,a(e.reservation.data.start)+" - "+a(e.reservation.data.end),1)]),t("div",J,[K,t("div",Q,a(e.reservation.data.guests)+" гостя",1),e.reservation.data.children?(l(),c("div",U,a(e.reservation.data.children)+" детей ",1)):w("",!0)])]),t("div",null,[X,t("div",Z,[e.reservation.data.status==="paid"?(l(),c("a",{key:0,href:s.route("account.reservations.voucher",{reservation:e.reservation.data.id}),class:"relative transition w-auto rounded-lg bg-white dark:bg-slate-800 border-black dark:border-slate-400 text-black dark:text-slate-300 hover:opacity-60 text-md py-3 px-12 font-semibold border-2"}," Ваучер ",8,tt)):(l(),c("div",et," Ожидаем проведения оплаты системой "))])])]),t("div",at,[t("div",st,[i(f(L),{href:s.route("apartment",{apartment:(u=e.reservation.data.apartment)==null?void 0:u.id}),class:"h-24 w-32 rounded-lg overflow-hidden"},{default:d(()=>{var o,n;return[t("img",{src:(n=(o=e.reservation.data.apartment)==null?void 0:o.media[0])==null?void 0:n.src,class:"h-full w-full object-cover",alt:""},null,8,rt)]}),_:1},8,["href"]),t("div",ot,[t("div",it,a((_=(r=(m=e.reservation.data)==null?void 0:m.apartment)==null?void 0:r.category)==null?void 0:_.title),1),t("div",{class:"font-light text-xs text-gray-600 mt-1",innerHTML:D.value},null,8,nt)])]),dt,t("dl",lt,[t("div",ct,[t("dt",ut,[i(f(z),{class:"relative"},{default:d(()=>[i(f(F),{class:"font-light leading-none text-gray-600 outline-none border-b border-gray-400 hover:border-gray-600 transition"},{default:d(()=>[B(a($.value),1)]),_:1}),i(P,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:d(()=>[i(f(C),{class:"absolute left-1/2 z-10 mt-3 w-screen max-w-xs z-10 bg-white -translate-x-1/2 transform px-4 sm:px-0"},{default:d(()=>[t("div",mt,[t("dl",vt,[(l(!0),c(T,null,S(g.value,o=>{var n;return l(),c("div",{class:"py-1 px-4 flex w-full items-baseline justify-between",key:o.date},[t("dt",_t,a(o.date),1),t("dd",ft,a((n=o.price)==null?void 0:n.toLocaleString())+"₽ ",1)])}),128))])])]),_:1})]),_:1})]),_:1})]),t("dd",ht,a((p=Y.value)==null?void 0:p.toLocaleString())+"₽ ",1)]),t("div",gt,[pt,t("dd",xt,a(e.reservation.data.guests),1)]),e.reservation.data.children>0?(l(),c("div",bt,[yt,t("dd",wt,a(e.reservation.data.children),1)])):w("",!0),t("div",kt,[jt,t("dd",Yt,a(e.reservation.data.price.toLocaleString())+"₽ ",1)])])])])]}),_:1})]),_:1}))}};export{Ht as default};
