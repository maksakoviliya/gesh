import{j as v}from"./vue-yandex-maps.esm-cf9ef625.js";import{a as h}from"./index-43b52f86.js";import{c as y,g}from"./ButtonComponent-69e320dc.js";import{r as l,v as b,x as _,o as u,j as c,i as k,g as x,u as w,m as M}from"./app-d7203694.js";const C={class:"h-50vh overflow-hidden rounded-xl relative shadow-lg"},L={key:0,class:"absolute bottom-1/2 left-1/2 -translate-x-1/2 text-sky-500"},I={__name:"Map",props:{lat:{type:[Number,String],required:!0},lon:{type:[Number,String],required:!0},isInput:{type:Boolean,default:!0},markers:{type:[Array],default:()=>[]}},emits:["updateLon","updateLat"],setup(i,{emit:m}){const n=i,s=m,d=l([n.lat,n.lon]),t=l(null),o=l(null),p=async()=>{if(!t.value)return;await v({apiKey:"4b6179ba-b733-4d2b-af35-b06f33fc0141",lang:"ru_RU",coordorder:"latlong",enterprise:!1,version:"2.1",debug:!0});const a=["zoomControl"];o.value=new globalThis.ymaps.Map(t.value,{center:d.value,zoom:11,controls:a}),n.markers.map(e=>{const r=new globalThis.ymaps.Placemark([e.lat,e.lon]);o.value.geoObjects.add(r)}),o.value.events.add("boundschange",function(e){const r=e.get("newCenter");s("updateLat",r[0]),s("updateLon",r[1])})},f=()=>{var a;if(t.value){for(let e=0;t.value.children.length;e++)(a=t.value.children[0])==null||a.remove();o.value=null}};return b(async()=>{await p()}),_(()=>{f()}),y(h),l(!1),(a,e)=>(u(),c("div",C,[k("div",{ref_key:"mapElement",ref:t,style:{height:"450px"}},null,512),n.isInput?(u(),c("div",L,[x(w(g),{name:"hi-location-marker",scale:"2.8"})])):M("",!0)]))}};export{I as _};
