import{r as y,k as x,m as L,w as d,a as u,e as r,g as t,t as a,c as v,f as w,u as f,v as B,i as P,q as S,b as T,F as N}from"./app-45cacebb.js";import{d as h,a as V,y as z,j as F,W as C,_ as H}from"./AppLayout-ec46c46a.js";import{_ as W}from"./Heading-136eee64.js";import{_ as q}from"./Breadcrumbs-3fe4b0aa.js";import{_ as j}from"./ButtonComponent-1107cb2b.js";import{c as E}from"./customParseFormat-0e26495e.js";import"./index.esm.min-7923d89c.js";import"./index-fbc651bc.js";import"./Input-f07f8e86.js";import"./Avatar-5a51a39e.js";import"./useToasts-d557ba2f.js";const O={class:"relative flex-col md:flex-row flex items-start gap-4 mt-6"},R={class:"md:w-1/2 lg:w-2/3"},A=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Ваша поездка: ",-1),G={class:"mt-3"},I=t("div",{class:"text-sm font-medium"}," Даты: ",-1),J={class:"font-light"},K={class:"mt-3"},Q=t("div",{class:"text-sm font-medium"}," Гости: ",-1),U={class:"font-light"},X={key:0,class:"font-light"},Z=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Управление бронированием: ",-1),tt={class:"mt-3 flex gap-4"},et={class:"md:sticky w-full md:w-1/2 lg:w-1/3 rounded-lg shadow-lg border border-neutral-100 top-28 p-6"},at={class:"flex items-stretch justify-start gap-4"},st=["src"],rt={class:"flex flex-col justify-between"},ot={class:"text-gray-600 font-light"},it=["innerHTML"],nt=t("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Детализация цены: ",-1),dt={class:"divide-y divide-gray-100"},lt={class:"py-4 flex w-full items-baseline justify-between"},ct={class:"font-light leading-6 text-пкфн-600"},ut={class:"overflow-hidden h-full rounded-lg shadow-lg ring-1 ring-black/5"},mt={class:"divide-y divide-gray-100 max-h-52 overflow-auto"},_t={class:"font-light text-sm leading-6 text-gray-600"},vt={class:"mt-1 text-sm font-medium leading-6 text-neutral-600"},ft={class:"mt-1 font-medium leading-6 text-neutral-600"},ht={class:"py-2 flex w-full items-baseline justify-between"},gt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Гости:")],-1),pt={class:"mt-1 font-medium leading-6 text-neutral-600"},xt={key:0,class:"py-2 flex w-full items-baseline justify-between"},bt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Дети:")],-1),yt={class:"mt-1 font-medium leading-6 text-neutral-600"},wt={class:"py-2 flex w-full items-baseline justify-between"},jt=t("dt",{class:"font-light leading-6 text-пкфн-600"},[t("div",null,"Стоимость:")],-1),$t={class:"mt-1 font-medium leading-6 text-neutral-600"},Ft={__name:"Reservation",props:{reservation:{type:Object}},setup($){var b;const e=$,Y=y([{id:"account",route:route("account.index"),label:"Аккаунт"},{id:"reservations",route:route("account.reservations.list"),label:"Мои бронирования"},{id:"reservation",route:route("account.reservations.view",{reservation:(b=e.reservation.data)==null?void 0:b.id}),label:"Бронирование"}]),g=y([]),k=x(()=>{var c;h.extend(E);const o=h(e.reservation.data.start,"DD.MM.YYYY"),m=h(e.reservation.data.end,"DD.MM.YYYY");g.value=[];let l=0;for(let s=o;s.isBefore(m);s=s.add(1,"day")){const _=s.day()===5||s.day()===6?e.reservation.data.apartment.weekends_price:e.reservation.data.apartment.weekdays_price,i=((c=e.reservation.data.apartment.dates.find(n=>h(n.date).isSame(s)))==null?void 0:c.price)??_;g.value.push({date:s.format("DD.MM.YYYY"),price:i}),l+=i}return l}),D=x(()=>{let o=null;return(e.reservation.data.range<=1||e.reservation.data.range===21)&&(o=`${e.reservation.data.range} ночь`),(e.reservation.data.range>1&&e.reservation.data.range<=5||e.reservation.data.range>21&&e.reservation.data.range<=24)&&(o=`${e.reservation.data.range} ночи`),(e.reservation.data.range>5&&e.reservation.data.range<=20||e.reservation.data.range>24)&&(o=`${e.reservation.data.range} ночей`),`${o}`}),M=x(()=>[`${e.reservation.data.apartment.guests}&nbsp;гостей`,`${e.reservation.data.apartment.bedrooms}&nbsp;спальня`,`${e.reservation.data.apartment.beds}&nbsp;кровать`,`${e.reservation.data.apartment.bathrooms}&nbsp;ванная`].filter(m=>!!m).join(" · "));return(o,m)=>(u(),L(V,null,{default:d(()=>[r(H,null,{default:d(()=>{var l,c,s,_,p;return[r(q,{routes:Y.value},null,8,["routes"]),t("div",O,[t("div",R,[r(W,{title:"Бронирование подтверждено",subtitle:"Вы успешно забронировали жилье"}),t("div",null,[A,t("div",G,[I,t("div",J,a(e.reservation.data.start)+" - "+a(e.reservation.data.end),1)]),t("div",K,[Q,t("div",U,a(e.reservation.data.guests)+" гостя",1),e.reservation.data.children?(u(),v("div",X,a(e.reservation.data.children)+" детей ",1)):w("",!0)])]),t("div",null,[Z,t("div",tt,[r(j,{disabled:!0,"auto-width":!0,class:"px-12",label:"Отменить"}),r(j,{disabled:!0,"auto-width":!0,outline:!0,class:"px-12",label:"Возникли трудности"})])])]),t("div",et,[t("div",at,[r(f(B),{href:o.route("apartment",{apartment:(l=e.reservation.data.apartment)==null?void 0:l.id}),class:"h-24 w-32 rounded-lg overflow-hidden"},{default:d(()=>{var i,n;return[t("img",{src:(n=(i=e.reservation.data.apartment)==null?void 0:i.media[0])==null?void 0:n.src,class:"h-full w-full object-cover",alt:""},null,8,st)]}),_:1},8,["href"]),t("div",rt,[t("div",ot,a((_=(s=(c=e.reservation.data)==null?void 0:c.apartment)==null?void 0:s.category)==null?void 0:_.title),1),t("div",{class:"font-light text-xs text-gray-600 mt-1",innerHTML:M.value},null,8,it)])]),nt,t("dl",dt,[t("div",lt,[t("dt",ct,[r(f(z),{class:"relative"},{default:d(()=>[r(f(F),{class:"font-light leading-none text-gray-600 outline-none border-b border-gray-400 hover:border-gray-600 transition"},{default:d(()=>[P(a(D.value),1)]),_:1}),r(S,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:d(()=>[r(f(C),{class:"absolute left-1/2 z-10 mt-3 w-screen max-w-xs z-10 bg-white -translate-x-1/2 transform px-4 sm:px-0"},{default:d(()=>[t("div",ut,[t("dl",mt,[(u(!0),v(N,null,T(g.value,i=>{var n;return u(),v("div",{class:"py-1 px-4 flex w-full items-baseline justify-between",key:i.date},[t("dt",_t,a(i.date),1),t("dd",vt,a((n=i.price)==null?void 0:n.toLocaleString())+"₽ ",1)])}),128))])])]),_:1})]),_:1})]),_:1})]),t("dd",ft,a((p=k.value)==null?void 0:p.toLocaleString())+"₽ ",1)]),t("div",ht,[gt,t("dd",pt,a(e.reservation.data.guests),1)]),e.reservation.data.children>0?(u(),v("div",xt,[bt,t("dd",yt,a(e.reservation.data.children),1)])):w("",!0),t("div",wt,[jt,t("dd",$t,a(e.reservation.data.price.toLocaleString())+"₽ ",1)])])])])]}),_:1})]),_:1}))}};export{Ft as default};
