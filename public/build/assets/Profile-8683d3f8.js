import{e as x,_ as g}from"./AppLayout-f2356fa0.js";import{_ as k}from"./Breadcrumbs-ec8e5763.js";import{_ as y}from"./Heading-5b263bad.js";import{c as w,g as $}from"./index.esm.min-4f9ab583.js";import{r as _,a as o,c as i,g as l,e as a,u,p as S,t as d,l as p,w as v}from"./app-032003e0.js";import{_ as V}from"./Input-2b23e491.js";import{_ as j}from"./ButtonComponent-56db4e9a.js";import{u as C}from"./useToasts-45819ecb.js";import{_ as q}from"./PhoneInput-512020db.js";import"./index-b1c8c633.js";import"./Avatar-7c04cf80.js";const A={name:"co-pencil",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M29.663 482.25l.087.087a24.847 24.847 0 0017.612 7.342 25.178 25.178 0 008.1-1.345l142.006-48.172 272.5-272.5A88.832 88.832 0 00344.334 42.039l-272.5 272.5-48.168 142.002a24.844 24.844 0 005.997 25.709zm337.3-417.584a56.832 56.832 0 0180.371 80.373L411.5 180.873 331.127 100.5zM99.744 331.884L308.5 123.127l80.373 80.373-208.757 208.756-121.634 41.262z" class="ci-primary"/>'},B={class:"w-full relative group"},P={class:"rounded-full overflow-hidden w-40 aspect-square mx-auto"},z=["src"],T={class:"absolute opacity-0 bottom-0 left-1/2 -translate-x-1/2 bg-sky-600 hover:bg-sky-400 dark:bg-sky-700 dark:hover:bg-sky-600 cursor-pointer transition aspect-square rounded-full w-10 group-hover:opacity-100 flex flex-col items-center justify-center text-white"},U={__name:"AvatarUploader",props:{src:{required:!0}},setup(t){w(A);const r=_(t.src??"/img/no-user.svg");return(n,s)=>(o(),i("div",B,[l("div",P,[l("img",{class:"w-full object-cover",src:r.value,alt:"Avatar"},null,8,z)]),l("div",T,[a(u($),{name:"co-pencil",scale:"1.2"})])]))}},E={class:"border-b border-neutral-200 dark:border-slate-700 pb-4"},F={class:"w-full flex justify-between items-baseline"},L={class:"dark:text-slate-400"},M={class:"w-full"},N={key:0,class:"text-neutral-500 dark:text-slate-100 font-light"},O={key:1,class:"mt-3 flex items-center gap-3"},f={__name:"ProfileFormItem",props:{url:{type:String,required:!0},label:{type:String},field:{type:String},value:{type:[String,null]}},setup(t){const e=t,r=_(!1),n=()=>{r.value=!r.value},s=S({[e.field]:e.value}),{successToast:b}=C(),h=()=>{s.post(e.url,{onSuccess(){b("Данные профиля успешно обновлены"),n()},preserveScroll:!0})};return(J,c)=>(o(),i("div",E,[l("div",F,[l("div",L,d(t.label),1),l("button",{type:"button",onClick:n,class:"text-xs text-neutral-700 dark:text-slate-500 dark:hover:text-slate-400 font-semibold hover:text-neutral-800 underline"},d(r.value?"Отменить":"Редактировать"),1)]),l("div",M,[r.value?(o(),i("div",O,[e.field!=="phone"?(o(),p(V,{key:0,label:t.label,error:u(s).errors[e.field],modelValue:u(s)[e.field],"onUpdate:modelValue":c[0]||(c[0]=m=>u(s)[e.field]=m)},null,8,["label","error","modelValue"])):(o(),p(q,{key:1,label:e.label,error:u(s).errors[e.field],modelValue:u(s)[e.field],"onUpdate:modelValue":c[1]||(c[1]=m=>u(s)[e.field]=m)},null,8,["label","error","modelValue"])),a(j,{label:"Сохранить","auto-width":!0,onClick:h,class:"px-3 py-5"})])):(o(),i("div",N,d(t.value),1))])]))}},D={class:"flex flex-col gap-3"},I={__name:"ProfileForm",props:{user:Object},setup(t){return(e,r)=>(o(),i("div",D,[a(f,{key:"name",field:"name",url:e.route("account.profile.update",{account:t.user.id}),label:"Имя",value:t.user.name},null,8,["url","value"]),a(f,{key:"email",field:"email",url:e.route("account.profile.update",{account:t.user.id}),label:"Email",value:t.user.email??"Укажите email"},null,8,["url","value"]),a(f,{key:"phone",field:"phone",url:e.route("account.profile.update",{account:t.user.id}),label:"Телефон",value:t.user.phone??"Укажите номер телефона"},null,8,["url","value"])]))}},X={class:"flex flex-col md:flex-row mt-12 gap-12"},Y={class:"rounded-xl border border-neutral-100 dark:border-slate-700 shadow-xl p-8 w-full md:w-1/2 lg:w-1/3"},G={class:"text-center font-semibold text-3xl mt-3 dark:text-slate-100"},H={class:"w-full md:w-1/2 lg:w-2/3"},oe={__name:"Profile",props:{user:Object},setup(t){const e=_([{id:"account",route:route("account.index"),label:"Аккаунт"},{id:"profile",route:route("account.profile.index"),label:"Профиль"}]);return(r,n)=>(o(),p(x,null,{default:v(()=>[a(g,{sm:!0},{default:v(()=>[a(k,{routes:e.value},null,8,["routes"]),a(y,{class:"mt-6",title:"Профиль",subtitle:"Отредактируйте ваши персональные данные"}),l("div",X,[l("div",Y,[a(U,{src:t.user.data.avatar},null,8,["src"]),l("div",G,d(t.user.data.name),1)]),l("div",H,[a(I,{user:t.user.data},null,8,["user"])])])]),_:1})]),_:1}))}};export{oe as default};
