import{p as h,r as V,c as g,e as s,u as o,w as i,F as b,a as m,a4 as w,i as u,g as n,l as d,f as p,v as k}from"./app-5897dfc8.js";import{_ as $}from"./ModalLayout-0e5149c5.js";import{_ as y}from"./Heading-941eacd6.js";import{_ as f}from"./Input-e1101b5f.js";import{_ as c}from"./ButtonComponent-851ead84.js";import{_ as B}from"./PhoneInput-89c939ef.js";import{u as T}from"./useToasts-ee348ecd.js";import C from"./SocialAuth-1a739c2f.js";import"./index.esm.min-a485dcb6.js";import"./index-9ef572b0.js";const E={class:"flex flex-col gap-4"},N={class:"flex items-center gap-4"},q=n("hr",{class:"my-4"},null,-1),L={class:"flex flex-col gap-2"},S={class:"text-neutral-800 dark:text-slate-400 mt-4 text-sm text-center"},I={__name:"Login",props:{canResetPassword:Boolean,status:String},setup(U){const e=h({email:"",phone:"",password:""}),{successToast:_,errorToast:v}=T(),x=()=>{e.transform(l=>(t.value==="email"?delete l.phone:delete l.email,l)).post(route("login"),{onError:l=>{e.setError("email",l.email),v("Возникла ошибка.")},onSuccess:l=>{console.log("res",l),_("Успешный вход в аккаунт."),e.reset("password")}})},t=V("phone");return(l,r)=>(m(),g(b,null,[s(o(w),{title:"Log in"}),s($,{actionLabel:"Войти",handleSubmit:x},{title:i(()=>[u(" Вход ")]),body:i(()=>[n("div",E,[s(y,{title:"С возвращением",subtitle:"Войти в свой аккаунт"}),n("div",N,[s(c,{small:!0,onClick:r[0]||(r[0]=a=>t.value="phone"),outline:t.value!=="phone",label:"Телефон"},null,8,["outline"]),s(c,{small:!0,onClick:r[1]||(r[1]=a=>t.value="email"),outline:t.value!=="email",label:"Почта"},null,8,["outline"])]),t.value==="email"?(m(),d(f,{key:0,id:"email",modelValue:o(e).email,"onUpdate:modelValue":r[2]||(r[2]=a=>o(e).email=a),label:"Email",error:o(e).errors.email,required:""},null,8,["modelValue","error"])):p("",!0),t.value==="phone"?(m(),d(B,{key:1,id:"phone",modelValue:o(e).phone,"onUpdate:modelValue":r[3]||(r[3]=a=>o(e).phone=a),label:"Телефон",error:o(e).errors.phone??o(e).errors.email,required:""},null,8,["modelValue","error"])):p("",!0),s(f,{id:"password",modelValue:o(e).password,"onUpdate:modelValue":r[4]||(r[4]=a=>o(e).password=a),label:"Пароль",error:o(e).errors.password,type:"password",required:""},null,8,["modelValue","error"])])]),footer:i(()=>[q,n("div",L,[s(C)]),n("div",S,[u(" Еще нет аккаунта? "),s(o(k),{href:l.route("register"),class:"underline hover:text-neutral-700 dark:hover:text-slate-300"},{default:i(()=>[u("Зарегистрироваться")]),_:1},8,["href"])])]),_:1})],64))}};export{I as default};
