import{c as lt,bG as ct,r as ut,b as tt,o as C,f as ft,w as T,g as L,i as e,t as h,j as N,m as at,u as U,B as mt,q as ht,p as vt,k as _t,F as pt}from"./app-d7203694.js";import{a as gt,_ as xt}from"./AppLayout-78305ba8.js";import{_ as yt}from"./Heading-88a456c2.js";import{d as G}from"./dayjs.min-f149325c.js";import{_ as bt}from"./ButtonComponent-69e320dc.js";import{y as wt,j as Yt,W as Mt}from"./popover-ec1b7ac9.js";import"./index-43b52f86.js";import"./useToasts-5e8778ca.js";import"./hidden-122e7e66.js";var st={exports:{}};(function(W,a){(function(P,Z){W.exports=Z()})(lt,function(){var P={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Z=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,F=/\d\d/,c=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,d={},b=function(t){return(t=+t)+(t>68?1900:2e3)},o=function(t){return function(s){this[t]=+s}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(s){if(!s||s==="Z")return 0;var r=s.match(/([+-]|\d\d)/g),n=60*r[1]+(+r[2]||0);return n===0?0:r[0]==="+"?-n:n}(t)}],w=function(t){var s=d[t];return s&&(s.indexOf?s:s.s.concat(s.f))},z=function(t,s){var r,n=d.meridiem;if(n){for(var p=1;p<=24;p+=1)if(t.indexOf(n(p,0,s))>-1){r=p>12;break}}else r=t===(s?"pm":"PM");return r},u={A:[i,function(t){this.afternoon=z(t,!1)}],a:[i,function(t){this.afternoon=z(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[F,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[c,o("seconds")],ss:[c,o("seconds")],m:[c,o("minutes")],mm:[c,o("minutes")],H:[c,o("hours")],h:[c,o("hours")],HH:[c,o("hours")],hh:[c,o("hours")],D:[c,o("day")],DD:[F,o("day")],Do:[i,function(t){var s=d.ordinal,r=t.match(/\d+/);if(this.day=r[0],s)for(var n=1;n<=31;n+=1)s(n).replace(/\[|\]/g,"")===t&&(this.day=n)}],M:[c,o("month")],MM:[F,o("month")],MMM:[i,function(t){var s=w("months"),r=(w("monthsShort")||s.map(function(n){return n.slice(0,3)})).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(t){var s=w("months").indexOf(t)+1;if(s<1)throw new Error;this.month=s%12||s}],Y:[/[+-]?\d+/,o("year")],YY:[F,function(t){this.year=b(t)}],YYYY:[/\d{4}/,o("year")],Z:l,ZZ:l};function _(t){var s,r;s=t,r=d&&d.formats;for(var n=(t=s.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,Y,v){var f=v&&v.toUpperCase();return Y||r[v]||P[v]||r[f].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,D,S){return D||S.slice(1)})})).match(Z),p=n.length,g=0;g<p;g+=1){var B=n[g],$=u[B],x=$&&$[0],y=$&&$[1];n[g]=y?{regex:x,parser:y}:B.replace(/^\[|\]$/g,"")}return function(j){for(var Y={},v=0,f=0;v<p;v+=1){var M=n[v];if(typeof M=="string")f+=M.length;else{var D=M.regex,S=M.parser,O=j.slice(f),A=D.exec(O)[0];S.call(Y,A),j=j.replace(A,"")}}return function(k){var m=k.afternoon;if(m!==void 0){var H=k.hours;m?H<12&&(k.hours+=12):H===12&&(k.hours=0),delete k.afternoon}}(Y),Y}}return function(t,s,r){r.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(b=t.parseTwoDigitYear);var n=s.prototype,p=n.parse;n.parse=function(g){var B=g.date,$=g.utc,x=g.args;this.$u=$;var y=x[1];if(typeof y=="string"){var j=x[2]===!0,Y=x[3]===!0,v=j||Y,f=x[2];Y&&(f=x[2]),d=this.$locale(),!j&&f&&(d=r.Ls[f]),this.$d=function(O,A,k){try{if(["x","X"].indexOf(A)>-1)return new Date((A==="X"?1e3:1)*O);var m=_(A)(O),H=m.year,E=m.month,rt=m.day,nt=m.hours,ot=m.minutes,it=m.seconds,dt=m.milliseconds,et=m.zone,X=new Date,q=rt||(H||E?1:X.getDate()),I=H||X.getFullYear(),V=0;H&&!E||(V=E>0?E-1:X.getMonth());var J=nt||0,K=ot||0,Q=it||0,R=dt||0;return et?new Date(Date.UTC(I,V,q,J,K,Q,R+60*et.offset*1e3)):k?new Date(Date.UTC(I,V,q,J,K,Q,R)):new Date(I,V,q,J,K,Q,R)}catch{return new Date("")}}(B,y,$),this.init(),f&&f!==!0&&(this.$L=this.locale(f).$L),v&&B!=this.format(y)&&(this.$d=new Date("")),d={}}else if(y instanceof Array)for(var M=y.length,D=1;D<=M;D+=1){x[1]=y[D-1];var S=r.apply(this,x);if(S.isValid()){this.$d=S.$d,this.$L=S.$L,this.init();break}D===M&&(this.$d=new Date(""))}else p.call(this,g)}}})})(st);var Dt=st.exports;const Lt=ct(Dt),$t={class:"relative flex-col md:flex-row flex items-start gap-4"},jt={class:"md:w-1/2 lg:w-2/3"},St=e("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Ваша поездка: ",-1),kt={class:"mt-3"},Tt=e("div",{class:"text-sm font-medium"}," Даты: ",-1),Pt={class:"font-light"},Ft={class:"mt-3"},zt=e("div",{class:"text-sm font-medium"}," Гости: ",-1),At={class:"font-light"},Ht={key:0,class:"font-light"},Zt=e("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Оплата: ",-1),Bt={class:"mt-3"},Ct={class:"md:sticky w-full md:w-1/2 lg:w-1/3 rounded-lg shadow-lg border border-neutral-100 top-28 p-6"},Ot={class:"flex items-stretch justify-start gap-4"},Et=["src"],Vt={class:"flex flex-col justify-between"},Nt={class:"text-gray-600 font-light"},Ut=["innerHTML"],Gt=e("div",{class:"font-semibold text-xl mt-4 pt-2 border-t border-gray-100"}," Детализация цены: ",-1),Wt={class:"divide-y divide-gray-100"},Xt={class:"py-4 flex w-full items-baseline justify-between"},qt={class:"font-light leading-6 text-пкфн-600"},It={class:"overflow-hidden h-full rounded-lg shadow-lg ring-1 ring-black/5"},Jt={class:"divide-y divide-gray-100 max-h-52 overflow-auto"},Kt={class:"font-light text-sm leading-6 text-gray-600"},Qt={class:"mt-1 text-sm font-medium leading-6 text-neutral-600"},Rt={class:"mt-1 font-medium leading-6 text-neutral-600"},te={key:0,class:"py-2 flex w-full items-baseline justify-between"},ee=e("dt",{class:"font-light leading-6 text-пкфн-600"},[e("div",null,"Дети:")],-1),ae={class:"mt-1 font-medium leading-6 text-neutral-600"},se={class:"py-2 flex w-full items-baseline justify-between"},re=e("dt",{class:"font-light leading-6 text-пкфн-600"},[e("div",null,"Стоимость:")],-1),ne={class:"mt-1 font-medium leading-6 text-neutral-600"},_e={__name:"Payment",props:{reservation:{type:Object}},setup(W){const a=W,P=ut([]),Z=tt(()=>{var o;G.extend(Lt);const i=G(a.reservation.data.start,"DD.MM.YYYY"),d=G(a.reservation.data.end,"DD.MM.YYYY");P.value=[];let b=0;for(let l=i;l.isBefore(d);l=l.add(1,"day")){const w=l.day()===5||l.day()===6?a.reservation.data.apartment.weekends_price:a.reservation.data.apartment.weekdays_price,u=((o=a.reservation.data.apartment.dates.find(_=>G(_.date).isSame(l)))==null?void 0:o.price)??w;P.value.push({date:l.format("DD.MM.YYYY"),price:u}),b+=u}return b}),F=tt(()=>{let i=null;return(a.reservation.data.range<=1||a.reservation.data.range===21)&&(i=`${a.reservation.data.range} ночь`),(a.reservation.data.range>1&&a.reservation.data.range<=5||a.reservation.data.range>21&&a.reservation.data.range<=24)&&(i=`${a.reservation.data.range} ночи`),(a.reservation.data.range>5&&a.reservation.data.range<=20||a.reservation.data.range>24)&&(i=`${a.reservation.data.range} ночей`),`${i}`}),c=tt(()=>[`${a.reservation.data.apartment.guests}&nbsp;гостей`,`${a.reservation.data.apartment.bedrooms}&nbsp;спальня`,`${a.reservation.data.apartment.beds}&nbsp;кровать`,`${a.reservation.data.apartment.bathrooms}&nbsp;ванная`].filter(d=>!!d).join(" · "));return(i,d)=>(C(),ft(gt,null,{default:T(()=>[L(xt,null,{default:T(()=>{var b,o,l,w,z;return[e("div",$t,[e("div",jt,[L(yt,{title:"Оплата бронирования",subtitle:"Вы должны оплатить не позднее суток, иначе бронирование отменится."}),e("div",null,[St,e("div",kt,[Tt,e("div",Pt,h(a.reservation.data.start)+" - "+h(a.reservation.data.end),1)]),e("div",Ft,[zt,e("div",At,h(a.reservation.data.guests)+" гостя",1),a.reservation.data.children?(C(),N("div",Ht,h(a.reservation.data.children)+" детей ",1)):at("",!0)])]),e("div",null,[Zt,e("div",Bt,[L(bt,{"auto-width":!0,class:"px-12",label:"Оплатить"})])])]),e("div",Ct,[e("div",Ot,[L(U(mt),{href:i.route("apartment",{apartment:(b=a.reservation.data.apartment)==null?void 0:b.id}),class:"h-24 w-32 rounded-lg overflow-hidden"},{default:T(()=>{var u,_;return[e("img",{src:(_=(u=a.reservation.data.apartment)==null?void 0:u.media[0])==null?void 0:_.src,class:"h-full w-full object-cover",alt:""},null,8,Et)]}),_:1},8,["href"]),e("div",Vt,[e("div",Nt,h((w=(l=(o=a.reservation.data)==null?void 0:o.apartment)==null?void 0:l.category)==null?void 0:w.title),1),e("div",{class:"font-light text-xs text-gray-600 mt-1",innerHTML:c.value},null,8,Ut)])]),Gt,e("dl",Wt,[e("div",Xt,[e("dt",qt,[L(U(wt),{class:"relative"},{default:T(()=>[L(U(Yt),{class:"font-light leading-none text-gray-600 outline-none border-b border-gray-400 hover:border-gray-600 transition"},{default:T(()=>[ht(h(F.value),1)]),_:1}),L(vt,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:T(()=>[L(U(Mt),{class:"absolute left-1/2 z-10 mt-3 w-screen max-w-xs z-10 bg-white -translate-x-1/2 transform px-4 sm:px-0"},{default:T(()=>[e("div",It,[e("dl",Jt,[(C(!0),N(pt,null,_t(P.value,u=>{var _;return C(),N("div",{class:"py-1 px-4 flex w-full items-baseline justify-between",key:u.date},[e("dt",Kt,h(u.date),1),e("dd",Qt,h((_=u.price)==null?void 0:_.toLocaleString())+"₽ ",1)])}),128))])])]),_:1})]),_:1})]),_:1})]),e("dd",Rt,h((z=Z.value)==null?void 0:z.toLocaleString())+"₽ ",1)]),a.reservation.data.children>0?(C(),N("div",te,[ee,e("dd",ae,h(a.reservation.data.children),1)])):at("",!0),e("div",se,[re,e("dd",ne,h(a.reservation.data.price.toLocaleString())+"₽ ",1)])])])])]}),_:1})]),_:1}))}};export{_e as default};
